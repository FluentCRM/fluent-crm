!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/wp-content/plugins/fluent-crm/assets/",n(n.s=235)}([function(t,e,n){"use strict";function i(t,e,n,i,s,a,r,o){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),a&&(c._scopeId="data-v-"+a),r?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=l):s&&(l=o?function(){s.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:s),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var _=c.beforeCreate;c.beforeCreate=_?[].concat(_,l):[l]}return{exports:t,options:c}}n.d(e,"a",(function(){return i}))},,,function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var s=(r=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),a=i.sources.map((function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"}));return[n].concat(a).concat([s]).join("\n")}var r;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},s=0;s<this.length;s++){var a=this[s][0];"number"==typeof a&&(i[a]=!0)}for(s=0;s<t.length;s++){var r=t[s];"number"==typeof r[0]&&i[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),e.push(r))}},e}},function(t,e,n){var i,s,a={},r=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===s&&(s=i.apply(this,arguments)),s}),o=function(t,e){return e?e.querySelector(t):document.querySelector(t)},l=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var i=o.call(this,t,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}}(),c=null,u=0,_=[],d=n(43);function p(t,e){for(var n=0;n<t.length;n++){var i=t[n],s=a[i.id];if(s){s.refs++;for(var r=0;r<s.parts.length;r++)s.parts[r](i.parts[r]);for(;r<i.parts.length;r++)s.parts.push(b(i.parts[r],e))}else{var o=[];for(r=0;r<i.parts.length;r++)o.push(b(i.parts[r],e));a[i.id]={id:i.id,refs:1,parts:o}}}}function m(t,e){for(var n=[],i={},s=0;s<t.length;s++){var a=t[s],r=e.base?a[0]+e.base:a[0],o={css:a[1],media:a[2],sourceMap:a[3]};i[r]?i[r].parts.push(o):n.push(i[r]={id:r,parts:[o]})}return n}function f(t,e){var n=l(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=_[_.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),_.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var s=l(t.insertAt.before,n);n.insertBefore(e,s)}}function h(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=_.indexOf(t);e>=0&&_.splice(e,1)}function v(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var i=function(){0;return n.nc}();i&&(t.attrs.nonce=i)}return g(e,t.attrs),f(t,e),e}function g(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function b(t,e){var n,i,s,a;if(e.transform&&t.css){if(!(a="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=a}if(e.singleton){var r=u++;n=c||(c=v(e)),i=$.bind(null,n,r,!1),s=$.bind(null,n,r,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",g(e,t.attrs),f(t,e),e}(e),i=x.bind(null,n,e),s=function(){h(n),n.href&&URL.revokeObjectURL(n.href)}):(n=v(e),i=k.bind(null,n),s=function(){h(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else s()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=r()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=m(t,e);return p(n,e),function(t){for(var i=[],s=0;s<n.length;s++){var r=n[s];(o=a[r.id]).refs--,i.push(o)}t&&p(m(t,e),e);for(s=0;s<i.length;s++){var o;if(0===(o=i[s]).refs){for(var l=0;l<o.parts.length;l++)o.parts[l]();delete a[o.id]}}}};var y,w=(y=[],function(t,e){return y[t]=e,y.filter(Boolean).join("\n")});function $(t,e,n,i){var s=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=w(e,s);else{var a=document.createTextNode(s),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(a,r[e]):t.appendChild(a)}}function k(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function x(t,e,n){var i=n.css,s=n.sourceMap,a=void 0===e.convertToAbsoluteUrls&&s;(e.convertToAbsoluteUrls||a)&&(i=d(i)),s&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(s))))+" */");var r=new Blob([i],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var i=n(57),s=n(140),a=n(37),r=n(5),o=n(16),l=n(39),c=n(58),u=n(42),_=Object.prototype.hasOwnProperty;t.exports=function(t){if(null==t)return!0;if(o(t)&&(r(t)||"string"==typeof t||"function"==typeof t.splice||l(t)||u(t)||a(t)))return!t.length;var e=s(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if(c(t))return!i(t).length;for(var n in t)if(_.call(t,n))return!1;return!0}},function(t,e,n){var i=n(38),s="object"==typeof self&&self&&self.Object===Object&&self,a=i||s||Function("return this")();t.exports=a},function(t,e,n){"use strict";function i(t){return window.fcAdmin.trans[t]||t}n.d(e,"a",(function(){return i})),n.d(e,"c",(function(){return s})),n.d(e,"b",(function(){return a}));var s=[{label:i("Contact Type"),value:"contact_type",position:1},{label:i("Tags"),value:"tags",position:2},{label:i("Lists"),value:"lists",position:3},{label:i("Source"),value:"source",position:4},{label:i("Phone"),value:"phone",position:5},{label:i("Country"),value:"country",position:6},{label:i("Created At"),value:"created_at",position:7},{label:i("Last Change Date"),value:"updated_at",position:8},{label:i("Last Activity"),value:"last_activity",position:9}],a={SystemUi:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'",Arial:"Arial, 'Helvetica Neue', Helvetica, sans-serif","Comic Sans":"'Comic Sans MS', 'Marker Felt-Thin', Arial, sans-serif","Courier New":"'Courier New', Courier, 'Lucida Sans Typewriter', 'Lucida Typewriter', monospace",Georgia:"Georgia, Times, 'Times New Roman', serif",Helvetica:"Helvetica , Arial, Verdana, sans-serif",Lucida:"'Lucida Sans Unicode', 'Lucida Grande', sans-serif",Tahoma:"Tahoma, Verdana, Segoe, sans-serif","Times New Roman":"'Times New Roman', Times, Baskerville, Georgia, serif","Trebuchet MS":"'Trebuchet MS', 'Lucida Grande', 'Lucida Sans Unicode', 'Lucida Sans', Tahoma, sans-serif",Verdana:"Verdana, Geneva, sans-serif",Lato:"'Lato', 'Helvetica Neue', Helvetica, Arial, sans-serif",Lora:"'Lora', Georgia, 'Times New Roman', serif",Merriweather:"'Merriweather', Georgia, 'Times New Roman', serif","Merriweather Sans":"'Merriweather Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif","Noticia Text":"'Noticia Text', Georgia, 'Times New Roman', serif","Open Sans":"'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif",Roboto:"'Roboto', 'Helvetica Neue', Helvetica, Arial, sans-serif","Source Sans Pro":"'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif"}},,,function(t,e,n){var i=n(21),s=n(97),a=n(98),r=i?i.toStringTag:void 0;t.exports=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":r&&r in Object(t)?s(t):a(t)}},function(t,e){t.exports=function(t){return null!=t&&"object"==typeof t}},function(t,e,n){t.exports=n(89)},,,function(t,e,n){var i=n(59),s=n(31);t.exports=function(t){return null!=t&&s(t.length)&&!i(t)}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},,,,function(t,e,n){var i=n(7).Symbol;t.exports=i},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e,n){var i=n(251),s=n(254);t.exports=function(t,e){var n=s(t,e);return i(n)?n:void 0}},function(t,e,n){"use strict";var i={name:"photo_widget",props:{value:{required:!1,type:String},btn_mode:{type:Boolean,default:function(){return!1}},btn_text:{required:!1,default:function(){return"+ Upload"}},btn_type:{required:!1,default:function(){return"default"}}},data:function(){return{app_ready:!1,image_url:this.value}},methods:{initUploader:function(t){var e=this,n=wp.media.editor.send.attachment;return wp.media.editor.send.attachment=function(t,i){e.$emit("input",i.url),e.$emit("changed",i.url),e.image_url=i.url,wp.media.editor.send.attachment=n},wp.media.editor.open(jQuery(t.target)),!1},getThumb:function(t){return t.url}},mounted:function(){window.wpActiveEditor||(window.wpActiveEditor=null),this.app_ready=!0}},s=(n(107),n(0)),a=Object(s.a)(i,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_photo_card"},[t.app_ready?n("div",{staticClass:"fluentcrm_photo_holder"},[t.value&&!t.btn_mode?n("img",{attrs:{src:t.value}}):t._e(),t._v(" "),n("el-button",{attrs:{size:"small",type:t.btn_type},on:{click:t.initUploader}},[t._v(t._s(t.btn_text))])],1):t._e()])}),[],!1,null,null,null);e.a=a.exports},,,,,,function(t,e,n){var i=n(94),s=n(57),a=n(16);t.exports=function(t){return a(t)?i(t):s(t)}},function(t,e){t.exports=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},function(t,e){var n=/^(attrs|props|on|nativeOn|class|style|hook)$/;function i(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}t.exports=function(t){return t.reduce((function(t,e){var s,a,r,o,l;for(r in e)if(s=t[r],a=e[r],s&&n.test(r))if("class"===r&&("string"==typeof s&&(l=s,t[r]=s={},s[l]=!0),"string"==typeof a&&(l=a,e[r]=a={},a[l]=!0)),"on"===r||"nativeOn"===r||"hook"===r)for(o in a)s[o]=i(s[o],a[o]);else if(Array.isArray(s))t[r]=s.concat(a);else if(Array.isArray(a))t[r]=[s].concat(a);else for(o in a)s[o]=a[o];else t[r]=e[r];return t}),{})}},,,,function(t,e,n){var i=n(91),s=n(105)(i);t.exports=s},function(t,e,n){var i=n(96),s=n(12),a=Object.prototype,r=a.hasOwnProperty,o=a.propertyIsEnumerable,l=i(function(){return arguments}())?i:function(t){return s(t)&&r.call(t,"callee")&&!o.call(t,"callee")};t.exports=l},function(t,e,n){(function(e){var n="object"==typeof e&&e&&e.Object===Object&&e;t.exports=n}).call(this,n(17))},function(t,e,n){(function(t){var i=n(7),s=n(99),a=e&&!e.nodeType&&e,r=a&&"object"==typeof t&&t&&!t.nodeType&&t,o=r&&r.exports===a?i.Buffer:void 0,l=(o?o.isBuffer:void 0)||s;t.exports=l}).call(this,n(40)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e){var n=/^(?:0|[1-9]\d*)$/;t.exports=function(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&n.test(t))&&t>-1&&t%1==0&&t<e}},function(t,e,n){var i=n(100),s=n(101),a=n(102),r=a&&a.isTypedArray,o=r?s(r):i;t.exports=o},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var s,a=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(a)?t:(s=0===a.indexOf("//")?a:0===a.indexOf("/")?n+a:i+a.replace(/^\.\//,""),"url("+JSON.stringify(s)+")")}))}},function(t,e,n){var i=n(108);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},,function(t,e,n){t.exports=n(289)},,,,,,,,,,,function(t,e,n){var i=n(58),s=n(103),a=Object.prototype.hasOwnProperty;t.exports=function(t){if(!i(t))return s(t);var e=[];for(var n in Object(t))a.call(t,n)&&"constructor"!=n&&e.push(n);return e}},function(t,e){var n=Object.prototype;t.exports=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||n)}},function(t,e,n){var i=n(11),s=n(22);t.exports=function(t){if(!s(t))return!1;var e=i(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},function(t,e){t.exports=function(t){return t}},function(t,e,n){var i=n(11),s=n(12);t.exports=function(t){return"symbol"==typeof t||s(t)&&"[object Symbol]"==i(t)}},function(t,e,n){var i=n(23)(Object,"create");t.exports=i},function(t,e,n){var i=n(273),s=n(274),a=n(275),r=n(276),o=n(277);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=s,l.prototype.get=a,l.prototype.has=r,l.prototype.set=o,t.exports=l},function(t,e,n){var i=n(112);t.exports=function(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}},function(t,e,n){var i=n(279);t.exports=function(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}},function(t,e,n){var i=n(61);t.exports=function(t){if("string"==typeof t||i(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}},,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){var i=n(90),s=n(36),a=n(106),r=n(5);t.exports=function(t,e){return(r(t)?i:s)(t,a(e))}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}},function(t,e,n){var i=n(92),s=n(30);t.exports=function(t,e){return t&&i(t,e,s)}},function(t,e,n){var i=n(93)();t.exports=i},function(t,e){t.exports=function(t){return function(e,n,i){for(var s=-1,a=Object(e),r=i(e),o=r.length;o--;){var l=r[t?o:++s];if(!1===n(a[l],l,a))break}return e}}},function(t,e,n){var i=n(95),s=n(37),a=n(5),r=n(39),o=n(41),l=n(42),c=Object.prototype.hasOwnProperty;t.exports=function(t,e){var n=a(t),u=!n&&s(t),_=!n&&!u&&r(t),d=!n&&!u&&!_&&l(t),p=n||u||_||d,m=p?i(t.length,String):[],f=m.length;for(var h in t)!e&&!c.call(t,h)||p&&("length"==h||_&&("offset"==h||"parent"==h)||d&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||o(h,f))||m.push(h);return m}},function(t,e){t.exports=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}},function(t,e,n){var i=n(11),s=n(12);t.exports=function(t){return s(t)&&"[object Arguments]"==i(t)}},function(t,e,n){var i=n(21),s=Object.prototype,a=s.hasOwnProperty,r=s.toString,o=i?i.toStringTag:void 0;t.exports=function(t){var e=a.call(t,o),n=t[o];try{t[o]=void 0;var i=!0}catch(t){}var s=r.call(t);return i&&(e?t[o]=n:delete t[o]),s}},function(t,e){var n=Object.prototype.toString;t.exports=function(t){return n.call(t)}},function(t,e){t.exports=function(){return!1}},function(t,e,n){var i=n(11),s=n(31),a=n(12),r={};r["[object Float32Array]"]=r["[object Float64Array]"]=r["[object Int8Array]"]=r["[object Int16Array]"]=r["[object Int32Array]"]=r["[object Uint8Array]"]=r["[object Uint8ClampedArray]"]=r["[object Uint16Array]"]=r["[object Uint32Array]"]=!0,r["[object Arguments]"]=r["[object Array]"]=r["[object ArrayBuffer]"]=r["[object Boolean]"]=r["[object DataView]"]=r["[object Date]"]=r["[object Error]"]=r["[object Function]"]=r["[object Map]"]=r["[object Number]"]=r["[object Object]"]=r["[object RegExp]"]=r["[object Set]"]=r["[object String]"]=r["[object WeakMap]"]=!1,t.exports=function(t){return a(t)&&s(t.length)&&!!r[i(t)]}},function(t,e){t.exports=function(t){return function(e){return t(e)}}},function(t,e,n){(function(t){var i=n(38),s=e&&!e.nodeType&&e,a=s&&"object"==typeof t&&t&&!t.nodeType&&t,r=a&&a.exports===s&&i.process,o=function(){try{var t=a&&a.require&&a.require("util").types;return t||r&&r.binding&&r.binding("util")}catch(t){}}();t.exports=o}).call(this,n(40)(t))},function(t,e,n){var i=n(104)(Object.keys,Object);t.exports=i},function(t,e){t.exports=function(t,e){return function(n){return t(e(n))}}},function(t,e,n){var i=n(16);t.exports=function(t,e){return function(n,s){if(null==n)return n;if(!i(n))return t(n,s);for(var a=n.length,r=e?a:-1,o=Object(n);(e?r--:++r<a)&&!1!==s(o[r],r,o););return n}}},function(t,e,n){var i=n(60);t.exports=function(t){return"function"==typeof t?t:i}},function(t,e,n){"use strict";n(44)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".fluentcrm_photo_holder{display:inline-flex;align-items:flex-end}.fluentcrm_photo_holder img{max-height:100px;margin-right:6px}",""])},function(t,e,n){var i=n(23)(n(7),"Map");t.exports=i},function(t,e,n){var i=n(5),s=n(61),a=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;t.exports=function(t,e){if(i(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!s(t))||(r.test(t)||!a.test(t)||null!=e&&t in Object(e))}},function(t,e,n){var i=n(266),s=n(278),a=n(280),r=n(281),o=n(282);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=s,l.prototype.get=a,l.prototype.has=r,l.prototype.set=o,t.exports=l},function(t,e){t.exports=function(t,e){return t===e||t!=t&&e!=e}},function(t,e,n){var i=n(262),s=n(144);t.exports=function(t,e){return null!=t&&s(t,e,i)}},function(t,e,n){var i=n(306),s=n(16),a=n(310),r=n(149),o=n(311),l=Math.max;t.exports=function(t,e,n,c){t=s(t)?t:o(t),n=n&&!c?r(n):0;var u=t.length;return n<0&&(n=l(u+n,0)),a(t)?n<=u&&t.indexOf(e,n)>-1:!!u&&i(t,e,n)>-1}},,,,,,,,,,,,,,,,,,,function(t,e,n){var i=n(237);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(239);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(241);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(243);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(245);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(247);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(249);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(250),s=n(109),a=n(255),r=n(256),o=n(257),l=n(11),c=n(141),u=c(i),_=c(s),d=c(a),p=c(r),m=c(o),f=l;(i&&"[object DataView]"!=f(new i(new ArrayBuffer(1)))||s&&"[object Map]"!=f(new s)||a&&"[object Promise]"!=f(a.resolve())||r&&"[object Set]"!=f(new r)||o&&"[object WeakMap]"!=f(new o))&&(f=function(t){var e=l(t),n="[object Object]"==e?t.constructor:void 0,i=n?c(n):"";if(i)switch(i){case u:return"[object DataView]";case _:return"[object Map]";case d:return"[object Promise]";case p:return"[object Set]";case m:return"[object WeakMap]"}return e}),t.exports=f},function(t,e){var n=Function.prototype.toString;t.exports=function(t){if(null!=t){try{return n.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},function(t,e,n){var i=n(259);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(261);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(145),s=n(37),a=n(5),r=n(41),o=n(31),l=n(66);t.exports=function(t,e,n){for(var c=-1,u=(e=i(e,t)).length,_=!1;++c<u;){var d=l(e[c]);if(!(_=null!=t&&n(t,d)))break;t=t[d]}return _||++c!=u?_:!!(u=null==t?0:t.length)&&o(u)&&r(d,u)&&(a(t)||s(t))}},function(t,e,n){var i=n(5),s=n(110),a=n(263),r=n(283);t.exports=function(t,e){return i(t)?t:s(t,e)?[t]:a(r(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,s=Array(i);++n<i;)s[n]=e(t[n],n,t);return s}},function(t,e,n){var i=n(286);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(288);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(292);t.exports=function(t){var e=i(t),n=e%1;return e==e?n?e-n:e:0}},function(t,e,n){var i=n(297);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(299);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(301);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(303);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(305);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(314);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(316);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(318);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(324),s=n(348),a=n(60),r=n(5),o=n(352);t.exports=function(t){return"function"==typeof t?t:null==t?a:"object"==typeof t?r(t)?s(t[0],t[1]):i(t):o(t)}},function(t,e,n){var i=n(63),s=n(326),a=n(327),r=n(328),o=n(329),l=n(330);function c(t){var e=this.__data__=new i(t);this.size=e.size}c.prototype.clear=s,c.prototype.delete=a,c.prototype.get=r,c.prototype.has=o,c.prototype.set=l,t.exports=c},function(t,e,n){var i=n(331),s=n(12);t.exports=function t(e,n,a,r,o){return e===n||(null==e||null==n||!s(e)&&!s(n)?e!=e&&n!=n:i(e,n,a,r,t,o))}},function(t,e,n){var i=n(332),s=n(335),a=n(336);t.exports=function(t,e,n,r,o,l){var c=1&n,u=t.length,_=e.length;if(u!=_&&!(c&&_>u))return!1;var d=l.get(t),p=l.get(e);if(d&&p)return d==e&&p==t;var m=-1,f=!0,h=2&n?new i:void 0;for(l.set(t,e),l.set(e,t);++m<u;){var v=t[m],g=e[m];if(r)var b=c?r(g,v,m,e,t,l):r(v,g,m,t,e,l);if(void 0!==b){if(b)continue;f=!1;break}if(h){if(!s(e,(function(t,e){if(!a(h,e)&&(v===t||o(v,t,n,r,l)))return h.push(e)}))){f=!1;break}}else if(v!==g&&!o(v,g,n,r,l)){f=!1;break}}return l.delete(t),l.delete(e),f}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length,s=0,a=[];++n<i;){var r=t[n];e(r,n,t)&&(a[s++]=r)}return a}},function(t,e,n){var i=n(22);t.exports=function(t){return t==t&&!i(t)}},function(t,e){t.exports=function(t,e){return function(n){return null!=n&&(n[t]===e&&(void 0!==e||t in Object(n)))}}},function(t,e,n){var i=n(145),s=n(66);t.exports=function(t,e){for(var n=0,a=(e=i(e,t)).length;null!=t&&n<a;)t=t[s(e[n++])];return n&&n==a?t:void 0}},function(t,e,n){var i=n(356);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},function(t,e,n){var i=n(358);"string"==typeof i&&(i=[[t.i,i,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,s);i.locals&&(t.exports=i.locals)},,function(t,e,n){var i=n(290),s=n(291),a=n(149),r=Math.ceil,o=Math.max;t.exports=function(t,e,n){e=(n?s(t,e,n):void 0===e)?1:o(a(e),0);var l=null==t?0:t.length;if(!l||e<1)return[];for(var c=0,u=0,_=Array(r(l/e));c<l;)_[u++]=i(t,c,c+=e);return _}},function(t,e,n){var i=n(319),s=n(321)((function(t,e,n){i(t,n,e)}));t.exports=s},function(t,e,n){var i=n(162),s=n(359),a=n(158),r=n(5);t.exports=function(t,e){return(r(t)?i:s)(t,a(e,3))}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,n){t.exports=n(369)},function(t,e,n){"use strict";n(133)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".fluentcrm-templates-action-buttons .el-date-editor .el-range-separator{width:7%!important}",""])},function(t,e,n){"use strict";n(134)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".fluentcrm-campaigns .error{color:#f56c6c;font-size:12px}.fluentcrm-campaigns .save-campaign-dialog-footer{margin-top:30px}",""])},function(t,e,n){"use strict";n(135)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,'.fluentcrm-campaigns .action-buttons{margin:0 0 15px;text-align:right}.fluentcrm-campaigns .action-buttons .el-input__inner{background:#fff!important}.fluentcrm-campaigns .status{display:inline-block;font-size:10px;width:80px}.fluentcrm-campaigns .status-draft{color:#909399;border:1px solid #909399}.fluentcrm-campaigns .status-pending{color:#409eff;border:1px solid #409eff}.fluentcrm-campaigns .status-archived{color:#67c23a;border:1px solid #67c23a}.fluentcrm-campaigns .status-incomplete{color:#f56c6c;border:1px solid #f56c6c}.fluentcrm-campaigns .status-working{color:#a7cc90;border:1px solid #a7cc90;opacity:1;position:relative;transition:opacity .1s linear}.fluentcrm-campaigns .status-working:before{-webkit-animation:working 2s linear infinite;animation:working 2s linear infinite;border:3px solid;border-color:#eee #eee #a7cc90;border-radius:50%;content:"";height:10px;left:10px;opacity:inherit;position:absolute;top:50%;transform:translate3d(-50%,-50%,0);transform-origin:center;width:10px;will-change:transform}@-webkit-keyframes working{0%{transform:translate3d(-50%,-50%,0) rotate(0deg)}to{transform:translate3d(-50%,-50%,0) rotate(1turn)}}@keyframes working{0%{transform:translate3d(-50%,-50%,0) rotate(0deg)}to{transform:translate3d(-50%,-50%,0) rotate(1turn)}}.fluentcrm-campaigns .status-purged{color:#e6a23d;border:1px solid #e6a23d}',""])},function(t,e,n){"use strict";n(136)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".el-dropdown-list-wrapper{padding:0}.el-dropdown-list-wrapper .group-title{display:block;padding:5px 10px;background-color:grey;color:#fff}.input-textarea-value{position:relative}.input-textarea-value .icon{position:absolute;right:0;top:-18px;cursor:pointer}.fc_pop_append .el-input-group__append{padding:0 10px}.fc_pop_append .el-input-group__append .fluentcrm_url{padding:10px}.fc_pop_append .el-input-group__append .fluentcrm_url.fc_imoji_btn{border-left:1px solid #dcdfe6;color:red}",""])},function(t,e,n){"use strict";n(137)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".fluentcrm_button_preview{border:1px solid #dde6ed!important;border-radius:.3rem!important;display:flex;height:100%!important;flex-direction:column!important;text-align:center}.fluentcrm_button_preview .preview_header{background-color:#f2f5f9!important;color:#53657a!important}.fluentcrm_button_preview .preview_body{align-items:center!important;height:100%;padding:150px 0}",""])},function(t,e,n){"use strict";n(138)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".wp_vue_editor{width:100%;min-height:100px}.wp_vue_editor_wrapper{position:relative}.wp_vue_editor_wrapper .wp-media-buttons .insert-media{vertical-align:middle}.wp_vue_editor_wrapper .popover-wrapper{z-index:2;position:absolute;top:0;right:0}.wp_vue_editor_wrapper .popover-wrapper-plaintext{left:auto;right:0;top:-32px}.wp_vue_editor_wrapper .wp-editor-tabs{float:left}.mce-fluentcrm_editor_btn button{font-size:10px!important;border:1px solid grey;margin-top:3px}.mce-fluentcrm_editor_btn:hover{border:1px solid transparent!important}",""])},function(t,e,n){"use strict";n(139)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".fc_option_creatable{display:block;width:100%;border-radius:4px}.fc_option_creatable .el-select{width:100%;float:left}.fc_option_creatable .el-select input{margin:0}.fc_option_creatable .fc_with_select{float:left;position:absolute;right:0}",""])},function(t,e,n){var i=n(23)(n(7),"DataView");t.exports=i},function(t,e,n){var i=n(59),s=n(252),a=n(22),r=n(141),o=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,_=c.hasOwnProperty,d=RegExp("^"+u.call(_).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=function(t){return!(!a(t)||s(t))&&(i(t)?d:o).test(r(t))}},function(t,e,n){var i,s=n(253),a=(i=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"";t.exports=function(t){return!!a&&a in t}},function(t,e,n){var i=n(7)["__core-js_shared__"];t.exports=i},function(t,e){t.exports=function(t,e){return null==t?void 0:t[e]}},function(t,e,n){var i=n(23)(n(7),"Promise");t.exports=i},function(t,e,n){var i=n(23)(n(7),"Set");t.exports=i},function(t,e,n){var i=n(23)(n(7),"WeakMap");t.exports=i},function(t,e,n){"use strict";n(142)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,'.list .el-select-dropdown__item{height:55px!important}.list-metrics{color:#8492a6;font-size:13px;line-height:1;display:block}.fluentcrm-campaign .recipients .pull-left{float:left}.fluentcrm-campaign .recipients .pull-right{float:right}.fluentcrm-campaign .recipients .recipients-label{font-size:14px;margin-bottom:5px}.fluentcrm-campaign .recipients .status{display:inline-block;font-size:10px;width:80px}.fluentcrm-campaign .recipients .status-draft{color:#909399;border:1px solid #909399}.fluentcrm-campaign .recipients .status-pending{color:#409eff;border:1px solid #409eff}.fluentcrm-campaign .recipients .status-archived{color:#67c23a;border:1px solid #67c23a}.fluentcrm-campaign .recipients .status-incomplete{color:#f56c6c;border:1px solid #f56c6c}.fluentcrm-campaign .recipients .status-working{color:#a7cc90;border:1px solid #a7cc90;opacity:1;position:relative;transition:opacity .1s linear}.fluentcrm-campaign .recipients .status-working:before{-webkit-animation:working 2s linear infinite;animation:working 2s linear infinite;border:3px solid;border-color:#eee #eee #a7cc90;border-radius:50%;content:"";height:10px;left:10px;opacity:inherit;position:absolute;top:50%;transform:translate3d(-50%,-50%,0);transform-origin:center;width:10px;will-change:transform}@-webkit-keyframes working{0%{transform:translate3d(-50%,-50%,0) rotate(0deg)}to{transform:translate3d(-50%,-50%,0) rotate(1turn)}}@keyframes working{0%{transform:translate3d(-50%,-50%,0) rotate(0deg)}to{transform:translate3d(-50%,-50%,0) rotate(1turn)}}.fluentcrm-campaign .recipients .status-sent{color:#67c23a;border:1px solid #67c23a}.fluentcrm-campaign .recipients .status-purged{color:#e6a23d;border:1px solid #e6a23d}.fluentcrm-campaign .recipients .lists-string .cell{word-break:break-word}',""])},function(t,e,n){"use strict";n(143)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".fluentcrm-campaign .steps-nav{margin:0 auto;text-align:center}.fluentcrm-campaign .step-container{margin-top:30px}.fluentcrm-campaign .action-buttons{margin:0;text-align:right}.fluentcrm-campaign .action-buttons .campaign-title{padding:10px;float:left;font-weight:500;font-size:20px;display:inline-block}.fluentcrm-campaign .action-buttons .campaign-title span.status{font-weight:400;font-size:12px;color:#909399}.fluentcrm-campaign .action-buttons .campaign-title>span{cursor:pointer;font-weight:400;font-size:12px;color:#909399}.fluentcrm-campaign .action-buttons .campaign-title>span>span{color:#409eff}",""])},function(t,e){var n=Object.prototype.hasOwnProperty;t.exports=function(t,e){return null!=t&&n.call(t,e)}},function(t,e,n){var i=n(264),s=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,a=/\\(\\)?/g,r=i((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(s,(function(t,n,i,s){e.push(i?s.replace(a,"$1"):n||t)})),e}));t.exports=r},function(t,e,n){var i=n(265);t.exports=function(t){var e=i(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}},function(t,e,n){var i=n(111);function s(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,s=e?e.apply(this,i):i[0],a=n.cache;if(a.has(s))return a.get(s);var r=t.apply(this,i);return n.cache=a.set(s,r)||a,r};return n.cache=new(s.Cache||i),n}s.Cache=i,t.exports=s},function(t,e,n){var i=n(267),s=n(63),a=n(109);t.exports=function(){this.size=0,this.__data__={hash:new i,map:new(a||s),string:new i}}},function(t,e,n){var i=n(268),s=n(269),a=n(270),r=n(271),o=n(272);function l(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}l.prototype.clear=i,l.prototype.delete=s,l.prototype.get=a,l.prototype.has=r,l.prototype.set=o,t.exports=l},function(t,e,n){var i=n(62);t.exports=function(){this.__data__=i?i(null):{},this.size=0}},function(t,e){t.exports=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}},function(t,e,n){var i=n(62),s=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;if(i){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return s.call(e,t)?e[t]:void 0}},function(t,e,n){var i=n(62),s=Object.prototype.hasOwnProperty;t.exports=function(t){var e=this.__data__;return i?void 0!==e[t]:s.call(e,t)}},function(t,e,n){var i=n(62);t.exports=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=i&&void 0===e?"__lodash_hash_undefined__":e,this}},function(t,e){t.exports=function(){this.__data__=[],this.size=0}},function(t,e,n){var i=n(64),s=Array.prototype.splice;t.exports=function(t){var e=this.__data__,n=i(e,t);return!(n<0)&&(n==e.length-1?e.pop():s.call(e,n,1),--this.size,!0)}},function(t,e,n){var i=n(64);t.exports=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}},function(t,e,n){var i=n(64);t.exports=function(t){return i(this.__data__,t)>-1}},function(t,e,n){var i=n(64);t.exports=function(t,e){var n=this.__data__,s=i(n,t);return s<0?(++this.size,n.push([t,e])):n[s][1]=e,this}},function(t,e,n){var i=n(65);t.exports=function(t){var e=i(this,t).delete(t);return this.size-=e?1:0,e}},function(t,e){t.exports=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}},function(t,e,n){var i=n(65);t.exports=function(t){return i(this,t).get(t)}},function(t,e,n){var i=n(65);t.exports=function(t){return i(this,t).has(t)}},function(t,e,n){var i=n(65);t.exports=function(t,e){var n=i(this,t),s=n.size;return n.set(t,e),this.size+=n.size==s?0:1,this}},function(t,e,n){var i=n(284);t.exports=function(t){return null==t?"":i(t)}},function(t,e,n){var i=n(21),s=n(146),a=n(5),r=n(61),o=i?i.prototype:void 0,l=o?o.toString:void 0;t.exports=function t(e){if("string"==typeof e)return e;if(a(e))return s(e,t)+"";if(r(e))return l?l.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n}},function(t,e,n){"use strict";n(147)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".fluentcrm_custom_fields>h3{cursor:pointer}@media only screen and (min-width:768px){.fluentcrm_layout{display:flex;flex-direction:row;flex-wrap:wrap;width:100%}.fluentcrm_layout .fluentcrm_layout_half{display:flex;flex-direction:column;flex-basis:50%;padding-right:15px}.fluentcrm_layout .fluentcrm_layout_half:nth-child(odd){padding-left:0}.fluentcrm_layout .fluentcrm_layout_half:nth-child(2n){padding-right:0;padding-left:15px}}",""])},function(t,e,n){"use strict";n(148)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".sample a{cursor:pointer}",""])},function(t,e,n){var i=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",r=i.toStringTag||"@@toStringTag";function o(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{o({},"")}catch(t){o=function(t,e,n){return t[e]=n}}function l(t,e,n,i){var s=e&&e.prototype instanceof _?e:_,a=Object.create(s.prototype),r=new k(i||[]);return a._invoke=function(t,e,n){var i="suspendedStart";return function(s,a){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===s)throw a;return C()}for(n.method=s,n.arg=a;;){var r=n.delegate;if(r){var o=y(r,n);if(o){if(o===u)continue;return o}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var l=c(t,e,n);if("normal"===l.type){if(i=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(i="completed",n.method="throw",n.arg=l.arg)}}}(t,n,r),a}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var u={};function _(){}function d(){}function p(){}var m={};m[s]=function(){return this};var f=Object.getPrototypeOf,h=f&&f(f(x([])));h&&h!==e&&n.call(h,s)&&(m=h);var v=p.prototype=_.prototype=Object.create(m);function g(t){["next","throw","return"].forEach((function(e){o(t,e,(function(t){return this._invoke(e,t)}))}))}function b(t,e){var i;this._invoke=function(s,a){function r(){return new e((function(i,r){!function i(s,a,r,o){var l=c(t[s],t,a);if("throw"!==l.type){var u=l.arg,_=u.value;return _&&"object"==typeof _&&n.call(_,"__await")?e.resolve(_.__await).then((function(t){i("next",t,r,o)}),(function(t){i("throw",t,r,o)})):e.resolve(_).then((function(t){u.value=t,r(u)}),(function(t){return i("throw",t,r,o)}))}o(l.arg)}(s,a,i,r)}))}return i=i?i.then(r,r):r()}}function y(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,y(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var i=c(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,u;var s=i.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function $(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function x(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,a=function e(){for(;++i<t.length;)if(n.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return a.next=a}}return{next:C}}function C(){return{value:void 0,done:!0}}return d.prototype=v.constructor=p,p.constructor=d,d.displayName=o(p,r,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===d||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,o(t,r,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},g(b.prototype),b.prototype[a]=function(){return this},t.AsyncIterator=b,t.async=function(e,n,i,s,a){void 0===a&&(a=Promise);var r=new b(l(e,n,i,s),a);return t.isGeneratorFunction(n)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},g(v),o(v,r,"Generator"),v[s]=function(){return this},v.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var i=e.pop();if(i in t)return n.value=i,n.done=!1,n}return n.done=!0,n}},t.values=x,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach($),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(n,i){return r.type="throw",r.arg=t,e.next=n,i&&(e.method="next",e.arg=void 0),!!i}for(var s=this.tryEntries.length-1;s>=0;--s){var a=this.tryEntries[s],r=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var o=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(o&&l){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc<=this.prev&&n.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var a=s;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var r=a?a.completion:{};return r.type=t,r.arg=e,a?(this.method="next",this.next=a.finallyLoc,u):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),$(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var s=i.arg;$(n)}return s}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}(t.exports);try{regeneratorRuntime=i}catch(t){Function("r","regeneratorRuntime = r")(i)}},function(t,e){t.exports=function(t,e,n){var i=-1,s=t.length;e<0&&(e=-e>s?0:s+e),(n=n>s?s:n)<0&&(n+=s),s=e>n?0:n-e>>>0,e>>>=0;for(var a=Array(s);++i<s;)a[i]=t[i+e];return a}},function(t,e,n){var i=n(112),s=n(16),a=n(41),r=n(22);t.exports=function(t,e,n){if(!r(n))return!1;var o=typeof e;return!!("number"==o?s(n)&&a(e,n.length):"string"==o&&e in n)&&i(n[e],t)}},function(t,e,n){var i=n(293);t.exports=function(t){return t?(t=i(t))===1/0||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}},function(t,e,n){var i=n(294),s=n(22),a=n(61),r=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;t.exports=function(t){if("number"==typeof t)return t;if(a(t))return NaN;if(s(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=s(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=i(t);var n=o.test(t);return n||l.test(t)?c(t.slice(2),n?2:8):r.test(t)?NaN:+t}},function(t,e,n){var i=n(295),s=/^\s+/;t.exports=function(t){return t?t.slice(0,i(t)+1).replace(s,""):t}},function(t,e){var n=/\s/;t.exports=function(t){for(var e=t.length;e--&&n.test(t.charAt(e)););return e}},function(t,e,n){"use strict";n(150)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".list-stat{padding:24px 15px;background:#fff}.el-link.el-link--default:hover{color:#409eff!important;cursor:pointer!important}",""])},function(t,e,n){"use strict";n(151)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".list-stat{padding:24px 15px;background:#fff}.el-link.el-link--default:hover{color:#409eff!important;cursor:pointer!important}",""])},function(t,e,n){"use strict";n(152)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".settings-section{margin-bottom:30px}",""])},function(t,e,n){"use strict";n(153)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".settings-section{margin-bottom:30px}",""])},function(t,e,n){"use strict";n(154)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".settings-section{margin-bottom:30px}",""])},function(t,e,n){var i=n(307),s=n(308),a=n(309);t.exports=function(t,e,n){return e==e?a(t,e,n):i(t,s,n)}},function(t,e){t.exports=function(t,e,n,i){for(var s=t.length,a=n+(i?1:-1);i?a--:++a<s;)if(e(t[a],a,t))return a;return-1}},function(t,e){t.exports=function(t){return t!=t}},function(t,e){t.exports=function(t,e,n){for(var i=n-1,s=t.length;++i<s;)if(t[i]===e)return i;return-1}},function(t,e,n){var i=n(11),s=n(5),a=n(12);t.exports=function(t){return"string"==typeof t||!s(t)&&a(t)&&"[object String]"==i(t)}},function(t,e,n){var i=n(312),s=n(30);t.exports=function(t){return null==t?[]:i(t,s(t))}},function(t,e,n){var i=n(146);t.exports=function(t,e){return i(e,(function(e){return t[e]}))}},function(t,e,n){"use strict";n(155)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".tag{border:1px solid #333;border-radius:10px;padding:3px;margin-right:5px;font-size:12px}.name{font-size:15px;font-weight:700}.url{font-weight:500;color:inherit;cursor:inherit;margin:0 0 5px}",""])},function(t,e,n){"use strict";n(156)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".fc_condition_group{background:#efefef;padding:10px 15px;border-radius:10px;margin-bottom:20px}.fc_condition_group h4{margin:0}",""])},function(t,e,n){"use strict";n(157)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".fc_child_blocks .fluentcrm_blockin{width:100%!important;margin-bottom:20px!important}.fc_child_blocks .fluentcrm_block{width:100%;padding:0;margin-bottom:20px}.fc_child_blocks .fluentcrm_block:last-child{margin-bottom:0}",""])},function(t,e,n){var i=n(320);t.exports=function(t,e,n){"__proto__"==e&&i?i(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},function(t,e,n){var i=n(23),s=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();t.exports=s},function(t,e,n){var i=n(322),s=n(323),a=n(158),r=n(5);t.exports=function(t,e){return function(n,o){var l=r(n)?i:s,c=e?e():{};return l(n,t,a(o,2),c)}}},function(t,e){t.exports=function(t,e,n,i){for(var s=-1,a=null==t?0:t.length;++s<a;){var r=t[s];e(i,r,n(r),t)}return i}},function(t,e,n){var i=n(36);t.exports=function(t,e,n,s){return i(t,(function(t,i,a){e(s,t,n(t),a)})),s}},function(t,e,n){var i=n(325),s=n(347),a=n(164);t.exports=function(t){var e=s(t);return 1==e.length&&e[0][2]?a(e[0][0],e[0][1]):function(n){return n===t||i(n,t,e)}}},function(t,e,n){var i=n(159),s=n(160);t.exports=function(t,e,n,a){var r=n.length,o=r,l=!a;if(null==t)return!o;for(t=Object(t);r--;){var c=n[r];if(l&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++r<o;){var u=(c=n[r])[0],_=t[u],d=c[1];if(l&&c[2]){if(void 0===_&&!(u in t))return!1}else{var p=new i;if(a)var m=a(_,d,u,t,e,p);if(!(void 0===m?s(d,_,3,a,p):m))return!1}}return!0}},function(t,e,n){var i=n(63);t.exports=function(){this.__data__=new i,this.size=0}},function(t,e){t.exports=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}},function(t,e){t.exports=function(t){return this.__data__.get(t)}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e,n){var i=n(63),s=n(109),a=n(111);t.exports=function(t,e){var n=this.__data__;if(n instanceof i){var r=n.__data__;if(!s||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new a(r)}return n.set(t,e),this.size=n.size,this}},function(t,e,n){var i=n(159),s=n(161),a=n(337),r=n(341),o=n(140),l=n(5),c=n(39),u=n(42),_="[object Object]",d=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,p,m,f){var h=l(t),v=l(e),g=h?"[object Array]":o(t),b=v?"[object Array]":o(e),y=(g="[object Arguments]"==g?_:g)==_,w=(b="[object Arguments]"==b?_:b)==_,$=g==b;if($&&c(t)){if(!c(e))return!1;h=!0,y=!1}if($&&!y)return f||(f=new i),h||u(t)?s(t,e,n,p,m,f):a(t,e,g,n,p,m,f);if(!(1&n)){var k=y&&d.call(t,"__wrapped__"),x=w&&d.call(e,"__wrapped__");if(k||x){var C=k?t.value():t,S=x?e.value():e;return f||(f=new i),m(C,S,n,p,f)}}return!!$&&(f||(f=new i),r(t,e,n,p,m,f))}},function(t,e,n){var i=n(111),s=n(333),a=n(334);function r(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new i;++e<n;)this.add(t[e])}r.prototype.add=r.prototype.push=s,r.prototype.has=a,t.exports=r},function(t,e){t.exports=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this}},function(t,e){t.exports=function(t){return this.__data__.has(t)}},function(t,e){t.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}},function(t,e){t.exports=function(t,e){return t.has(e)}},function(t,e,n){var i=n(21),s=n(338),a=n(112),r=n(161),o=n(339),l=n(340),c=i?i.prototype:void 0,u=c?c.valueOf:void 0;t.exports=function(t,e,n,i,c,_,d){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!_(new s(t),new s(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return a(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var p=o;case"[object Set]":var m=1&i;if(p||(p=l),t.size!=e.size&&!m)return!1;var f=d.get(t);if(f)return f==e;i|=2,d.set(t,e);var h=r(p(t),p(e),i,c,_,d);return d.delete(t),h;case"[object Symbol]":if(u)return u.call(t)==u.call(e)}return!1}},function(t,e,n){var i=n(7).Uint8Array;t.exports=i},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,i){n[++e]=[i,t]})),n}},function(t,e){t.exports=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n}},function(t,e,n){var i=n(342),s=Object.prototype.hasOwnProperty;t.exports=function(t,e,n,a,r,o){var l=1&n,c=i(t),u=c.length;if(u!=i(e).length&&!l)return!1;for(var _=u;_--;){var d=c[_];if(!(l?d in e:s.call(e,d)))return!1}var p=o.get(t),m=o.get(e);if(p&&m)return p==e&&m==t;var f=!0;o.set(t,e),o.set(e,t);for(var h=l;++_<u;){var v=t[d=c[_]],g=e[d];if(a)var b=l?a(g,v,d,e,t,o):a(v,g,d,t,e,o);if(!(void 0===b?v===g||r(v,g,n,a,o):b)){f=!1;break}h||(h="constructor"==d)}if(f&&!h){var y=t.constructor,w=e.constructor;y==w||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof w&&w instanceof w||(f=!1)}return o.delete(t),o.delete(e),f}},function(t,e,n){var i=n(343),s=n(345),a=n(30);t.exports=function(t){return i(t,a,s)}},function(t,e,n){var i=n(344),s=n(5);t.exports=function(t,e,n){var a=e(t);return s(t)?a:i(a,n(t))}},function(t,e){t.exports=function(t,e){for(var n=-1,i=e.length,s=t.length;++n<i;)t[s+n]=e[n];return t}},function(t,e,n){var i=n(162),s=n(346),a=Object.prototype.propertyIsEnumerable,r=Object.getOwnPropertySymbols,o=r?function(t){return null==t?[]:(t=Object(t),i(r(t),(function(e){return a.call(t,e)})))}:s;t.exports=o},function(t,e){t.exports=function(){return[]}},function(t,e,n){var i=n(163),s=n(30);t.exports=function(t){for(var e=s(t),n=e.length;n--;){var a=e[n],r=t[a];e[n]=[a,r,i(r)]}return e}},function(t,e,n){var i=n(160),s=n(349),a=n(350),r=n(110),o=n(163),l=n(164),c=n(66);t.exports=function(t,e){return r(t)&&o(e)?l(c(t),e):function(n){var r=s(n,t);return void 0===r&&r===e?a(n,t):i(e,r,3)}}},function(t,e,n){var i=n(165);t.exports=function(t,e,n){var s=null==t?void 0:i(t,e);return void 0===s?n:s}},function(t,e,n){var i=n(351),s=n(144);t.exports=function(t,e){return null!=t&&s(t,e,i)}},function(t,e){t.exports=function(t,e){return null!=t&&e in Object(t)}},function(t,e,n){var i=n(353),s=n(354),a=n(110),r=n(66);t.exports=function(t){return a(t)?i(r(t)):s(t)}},function(t,e){t.exports=function(t){return function(e){return null==e?void 0:e[t]}}},function(t,e,n){var i=n(165);t.exports=function(t){return function(e){return i(e,t)}}},function(t,e,n){"use strict";n(166)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".fc_individual_progress{padding:20px 5px 0 42px}.fc_individual_progress *{box-sizing:border-box}.fc_individual_progress .fc_progress_card:nth-child(4n+1){clear:left}.fc_progress_item{text-align:center;margin-bottom:20px;padding:20px;border:1px solid #7757e6;border-radius:10px;cursor:pointer;background:#f7fafc;transition:.2s;-webkit-transition:.2s;-moz-transition:.2s;-o-transition:.2s}.fc_progress_item:hover{background:#fff;box-shadow:0 0 20px rgba(119,86,230,.2)}.fc_progress_item .stats_badges{display:block}.fc_progress_item.fc_sequence_type_benchmark{border:2px solid #f56c6b}.fc_progress_item.fc_sequence_type_result{border:2px solid #7757e6}",""])},function(t,e,n){"use strict";n(167)},function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".el-table .fc_table_row_completed{background:#f0f9eb}.el-table .fc_table_row_completed td{background:#f0f9eb!important}.el-table .fc_table_row_pending{background:#fdf5e6}.el-table .fc_table_row_pending td{background:#fdf5e6!important}",""])},function(t,e,n){var i=n(36);t.exports=function(t,e){var n=[];return i(t,(function(t,i,s){e(t,i,s)&&n.push(t)})),n}},,,,,,,,,,function(t,e,n){"use strict";n.r(e);var i={extends:window.VueChartJs.Bar,mixins:[window.VueChartJs.mixins.reactiveProp],props:["stats","maxCumulativeValue"],data:function(){return{options:{responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{id:"byDate",type:"linear",position:"left",gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0,userCallback:function(t,e,n){if(Math.floor(t)===t)return t}}},{id:"byCumulative",type:"linear",position:"right",gridLines:{drawOnChartArea:!0},ticks:{beginAtZero:!0,userCallback:function(t,e,n){if(Math.floor(t)===t)return t}}}],xAxes:[{gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0,autoSkip:!0,maxTicksLimit:10}}]},drawBorder:!1,layout:{padding:{left:0,right:0,top:0,bottom:20}}}}},methods:{},mounted:function(){this.renderChart(this.chartData,this.options)}},s={name:"subscribers-growth",props:["date_range"],components:{GrowthChart:i},data:function(){return{fetching:!1,stats:{},chartData:{},maxCumulativeValue:0}},computed:{},methods:{fetchReport:function(){var t=this;this.fetching=!0,this.$get("reports/subscribers",{date_range:this.date_range}).then((function(e){t.stats=e.stats,t.setupChartItems()})).finally((function(){t.fetching=!1}))},setupChartItems:function(){var t=[],e={label:this.$t("By Date"),yAxisID:"byDate",backgroundColor:"rgba(81, 52, 178, 0.5)",borderColor:"#b175eb",data:[],fill:!1,gridLines:{display:!1}},n={label:this.$t("Cumulative"),backgroundColor:"rgba(55, 162, 235, 0.1)",borderColor:"#37a2eb",data:[],yAxisID:"byCumulative",type:"line"},i=0;this.each(this.stats,(function(s,a){e.data.push(s),t.push(a),i+=parseInt(s),n.data.push(i)})),this.maxCumulativeValue=i+10,this.chartData={labels:t,datasets:[e,n]}}},mounted:function(){this.fetchReport()}},a=n(0),r={name:"email-sent-growth",props:["date_range"],components:{GrowthChart:i},data:function(){return{fetching:!1,stats:{},chartData:{},maxCumulativeValue:0}},computed:{},methods:{fetchReport:function(){var t=this;this.fetching=!0,this.$get("reports/email-sents",{date_range:this.date_range}).then((function(e){t.stats=e.stats,t.setupChartItems()})).finally((function(){t.fetching=!1}))},setupChartItems:function(){var t=[],e={label:this.$t("By Date"),yAxisID:"byDate",backgroundColor:"rgba(81, 52, 178, 0.5)",borderColor:"#b175eb",data:[],fill:!1,gridLines:{display:!1}},n={label:this.$t("Cumulative"),backgroundColor:"rgba(55, 162, 235, 0.1)",borderColor:"#37a2eb",data:[],yAxisID:"byCumulative",type:"line"},i=0;this.each(this.stats,(function(s,a){e.data.push(s),t.push(a),i+=parseInt(s),n.data.push(i)})),this.maxCumulativeValue=i+10,this.chartData={labels:t,datasets:[e,n]}}},mounted:function(){this.fetchReport()}},o={name:"email-open-chart",props:["date_range"],components:{GrowthChart:i},data:function(){return{fetching:!1,stats:{},chartData:{},maxCumulativeValue:0}},computed:{},methods:{fetchReport:function(){var t=this;this.fetching=!0,this.$get("reports/email-opens",{date_range:this.date_range}).then((function(e){t.stats=e.stats,t.setupChartItems()})).finally((function(){t.fetching=!1}))},setupChartItems:function(){var t=[],e={label:this.$t("By Date"),yAxisID:"byDate",backgroundColor:"rgba(81, 52, 178, 0.5)",borderColor:"#b175eb",data:[],fill:!1,gridLines:{display:!1}},n={label:this.$t("Cumulative"),backgroundColor:"rgba(55, 162, 235, 0.1)",borderColor:"#37a2eb",data:[],yAxisID:"byCumulative",type:"line"},i=0;this.each(this.stats,(function(s,a){e.data.push(s),t.push(a),i+=parseInt(s),n.data.push(i)})),this.maxCumulativeValue=i+10,this.chartData={labels:t,datasets:[e,n]}}},mounted:function(){this.fetchReport()}},l={name:"email-click-chart",props:["date_range"],components:{GrowthChart:i},data:function(){return{fetching:!1,stats:{},chartData:{},maxCumulativeValue:0}},computed:{},methods:{fetchReport:function(){var t=this;this.fetching=!0,this.$get("reports/email-clicks",{date_range:this.date_range}).then((function(e){t.stats=e.stats,t.setupChartItems()})).finally((function(){t.fetching=!1}))},setupChartItems:function(){var t=[],e={label:this.$t("By Date"),yAxisID:"byDate",backgroundColor:"rgba(81, 52, 178, 0.5)",borderColor:"#b175eb",data:[],fill:!1,gridLines:{display:!1}},n={label:this.$t("Cumulative"),backgroundColor:"rgba(55, 162, 235, 0.1)",borderColor:"#37a2eb",data:[],yAxisID:"byCumulative",type:"line"},i=0;this.each(this.stats,(function(s,a){e.data.push(s),t.push(a),i+=parseInt(s),n.data.push(i)})),this.maxCumulativeValue=i+10,this.chartData={labels:t,datasets:[e,n]}}},mounted:function(){this.fetchReport()}},c={name:"Dashboard",components:{SubscribersChart:Object(a.a)(s,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.fetching,expression:"fetching"}],staticClass:"fluentcrm_body fc_chart_box"},[e("growth-chart",{attrs:{maxCumulativeValue:this.maxCumulativeValue,"chart-data":this.chartData}})],1)}),[],!1,null,null,null).exports,EmailSentChart:Object(a.a)(r,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.fetching,expression:"fetching"}],staticClass:"fluentcrm_body fc_chart_box"},[e("growth-chart",{attrs:{maxCumulativeValue:this.maxCumulativeValue,"chart-data":this.chartData}})],1)}),[],!1,null,null,null).exports,EmailOpenChart:Object(a.a)(o,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.fetching,expression:"fetching"}],staticClass:"fluentcrm_body fc_chart_box"},[e("growth-chart",{attrs:{maxCumulativeValue:this.maxCumulativeValue,"chart-data":this.chartData}})],1)}),[],!1,null,null,null).exports,EmailClickChart:Object(a.a)(l,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.fetching,expression:"fetching"}],staticClass:"fluentcrm_body fc_chart_box"},[e("growth-chart",{attrs:{maxCumulativeValue:this.maxCumulativeValue,"chart-data":this.chartData}})],1)}),[],!1,null,null,null).exports},data:function(){return{loading:!0,stats:[],quick_links:[],date_range:"",currently_showing:"subscribers-chart",chartMaps:{"subscribers-chart":this.$t("Subscribers Growth"),"email-sent-chart":this.$t("Email Sending Stats"),"email-open-chart":this.$t("Email Open Stats"),"email-click-chart":this.$t("Email Link Click Stats")},showing_charts:!0,timerId:null,ff_config:{is_installed:!0,create_form_link:""},installing_ff:!1,sales:[],onboarding:null,data_ready:!1,dashboard_notices:[]}},methods:{fetchDashBoardData:function(){var t=this;this.loading=!0,setTimeout((function(){t.$get("reports/dashboard-stats").then((function(e){t.stats=e.stats,t.sales=e.sales,t.quick_links=e.quick_links,t.ff_config=e.ff_config,t.onboarding=e.onboarding,t.dashboard_notices=e.dashboard_notices})).finally((function(){t.loading=!1,t.data_ready=!0}))}),500)},goToRoute:function(t){t&&this.$router.push(t)},maybeRouteStep:function(t){t.completed||this.goToRoute(t.route)},handleComponentChange:function(t){this.currently_showing=t},filterReport:function(){var t=this,e=this.currently_showing;this.currently_showing={render:function(){}},this.$nextTick((function(){t.currently_showing=e}))},refreshData:function(){var t=this;this.fetchDashBoardData(),this.showing_charts=!1,this.$nextTick((function(){t.showing_charts=!0}))},installFF:function(){var t=this;this.installing_ff=!0,this.$post("setting/install-fluentform").then((function(e){t.ff_config=e.ff_config,t.$notify.success(e.message)})).catch((function(e){t.handleError(e)})).finally((function(){t.installing_ff=!1}))}},mounted:function(){var t=this;this.fetchDashBoardData(),this.timerId=setInterval((function(){t.refreshData()}),3e5),this.changeTitle(this.$t("Dashboard"))},beforeDestroy:function(){this.timerId&&clearInterval(this.timerId)}},u=(n(236),Object(a.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_admin_dashboard"},[n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{gutter:30}},[t.dashboard_notices&&t.dashboard_notices.length?n("div",{staticClass:"dashboard_notices",staticStyle:{"margin-bottom":"20px"}},t._l(t.dashboard_notices,(function(e,i){return n("div",{key:i,staticClass:"fc_dashboard_notice",domProps:{innerHTML:t._s(e)}})})),0):t._e(),t._v(" "),n("el-col",{attrs:{sm:24,md:16,lg:18}},[n("div",{staticClass:"fc_card_widgets"},t._l(t.stats,(function(e,i){return n("div",{key:i,staticClass:"fc_card_widget",on:{click:function(n){return t.goToRoute(e.route)}}},[n("div",{staticClass:"fluentcrm_header",domProps:{innerHTML:t._s(e.title)}}),t._v(" "),n("div",{staticClass:"fluentcrm_body",domProps:{innerHTML:t._s(e.count)}})])})),0),t._v(" "),n("div",{staticClass:"ns_subscribers_chart"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("el-dropdown",{staticStyle:{"margin-top":"10px"},on:{command:t.handleComponentChange}},[n("span",{staticClass:"el-dropdown-link"},[t._v("\n                                "+t._s(t.chartMaps[t.currently_showing])+"\n                                "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.chartMaps,(function(e,i){return n("el-dropdown-item",{key:i,attrs:{command:i}},[t._v("\n                                    "+t._s(e)+"\n                                ")])})),1)],1)],1),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-date-picker",{attrs:{size:"small",type:"daterange","range-separator":t.$t("To"),"start-placeholder":t.$t("Start date"),"end-placeholder":t.$t("End date"),"value-format":"yyyy-MM-dd"},model:{value:t.date_range,callback:function(e){t.date_range=e},expression:"date_range"}}),t._v(" "),n("el-button",{staticClass:"ml-5",attrs:{size:"small",type:"primary",plain:""},on:{click:t.filterReport}},[t._v("\n                            "+t._s(t.$t("Apply"))+"\n                        ")])],1)]),t._v(" "),t.showing_charts?n(t.currently_showing,{tag:"component",attrs:{date_range:t.date_range}}):t._e()],1)]),t._v(" "),n("el-col",{attrs:{sm:24,md:8,lg:6}},[t.onboarding?n("div",{staticClass:"fc_m_20 fc_onboarding"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[t._v("\n                        "+t._s(t.$t("Getting Started"))+" ("+t._s(t.onboarding.completed)+" of "+t._s(t.onboarding.total)+" complete)\n                    ")])]),t._v(" "),n("div",{staticClass:"fluentcrm_body"},[n("ul",{staticClass:"fc_lined_items"},t._l(t.onboarding.steps,(function(e,i){return n("li",{key:i,class:{fc_item_completed:e.completed},on:{click:function(n){return t.maybeRouteStep(e)}}},[e.completed?n("i",{staticClass:"el-icon el-icon-success"}):n("i",{staticClass:"fc_el_circle"}),t._v("\n                            "+t._s(e.label)+"\n                        ")])})),0)])]):t._e(),t._v(" "),t.appVars.disable_fluentmail_suggest?t._e():n("div",{staticClass:"fc_m_20 fc_quick_links"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[t._v("\n                        "+t._s(t.$t("FluentSMTP"))+"\n                    ")])]),t._v(" "),n("div",{staticClass:"fluentcrm_body",staticStyle:{padding:"0px 20px 20px"}},[n("p",[t._v("\n                        "+t._s(t.$t("fluentsmtp.desc"))+"\n                    ")]),t._v(" "),n("router-link",{staticClass:"el-button el-button--info el-button--small",attrs:{to:{name:"smtp_settings"}}},[t._v(t._s(t.$t("Das_View_ESSS")))])],1)]),t._v(" "),t.sales&&t.sales.length?n("div",{staticClass:"fc_m_20 fc_quick_links"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[t._v("\n                        "+t._s(t.$t("Sales"))+"\n                    ")])]),t._v(" "),n("div",{staticClass:"fluentcrm_body"},[n("ul",{staticClass:"fc_lined_items"},t._l(t.sales,(function(e){return n("li",{key:e.title},[n("span",{staticClass:"fc_li_title",domProps:{innerHTML:t._s(e.title)}}),t._v(" "),n("span",{staticClass:"fc_li_value",domProps:{innerHTML:t._s(e.content)}})])})),0)])]):t._e(),t._v(" "),n("div",{staticClass:"fc_m_20 fc_quick_links"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[t._v("\n                        "+t._s(t.$t("Quick Links"))+"\n                    ")])]),t._v(" "),n("div",{staticClass:"fluentcrm_body"},[n("ul",{staticClass:"fc_quick_links"},t._l(t.quick_links,(function(e,i){return n("li",{key:i},[n("a",{attrs:{href:e.url}},[n("i",{class:e.icon}),t._v("\n                                "+t._s(e.title)+"\n                            ")])])})),0)])]),t._v(" "),t.ff_config.is_installed?t._e():n("div",{staticClass:"fc_m_20 fc_quick_links"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[t._v("\n                        "+t._s(t.$t("Grow Your Audience"))+"\n                    ")])]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.installing_ff,expression:"installing_ff"}],staticClass:"fluentcrm_body",staticStyle:{padding:"0px 20px 20px"},attrs:{"element-loading-text":"Installing Fluent Forms..."}},[n("p",[t._v(t._s(t.$t("quick_links.ff_desc")))]),t._v(" "),n("div",{staticClass:"text-align-center"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.installFF()}}},[t._v(t._s(t.$t("Das_Activate_FFI")))])],1)])])])],1)],1)}),[],!1,null,null,null).exports),_=Object(a.a)({},(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fcrm_no_permission text-align-center"},[e("h3",[this._v(this._s(this.$t("permission.title")))]),this._v(" "),e("p",[this._v(this._s(this.$t("permission.desc")))])])}),[],!1,null,null,null).exports,d={name:"email-view"},p=Object(a.a)(d,(function(){var t=this.$createElement;return(this._self._c||t)("router-view")}),[],!1,null,null,null).exports,m={name:"Confirm",props:{placement:{default:"top-end"},message:{default:"Are you sure to delete this?"},width:{default:170}},data:function(){return{visible:!1}},methods:{hide:function(){this.visible=!1},confirm:function(){this.hide(),this.$emit("yes")},cancel:function(){this.hide(),this.$emit("no")}}},f=Object(a.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-popover",{attrs:{width:t.width,placement:t.placement},on:{hide:t.cancel},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("p",{domProps:{innerHTML:t._s(t.message)}}),t._v(" "),n("div",{staticClass:"action-buttons"},[n("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(e){return t.cancel()}}},[t._v("\n            "+t._s(t.$t("No"))+"\n        ")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.confirm()}}},[t._v("\n            "+t._s(t.$t("Yes"))+"\n        ")])],1),t._v(" "),n("template",{slot:"reference"},[t._t("reference",(function(){return[n("i",{staticClass:"el-icon-delete"})]}))],2)],2)}),[],!1,null,null,null).exports;function h(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var g={name:"Pagination",props:{pagination:{required:!0,type:Object},extra_sizes:{required:!1,type:Array,default:function(){return[]}},hide_on_single:{required:!1,type:Boolean,default:function(){return!0}}},computed:{page_sizes:function(){var t=[];this.pagination.per_page<10&&t.push(this.pagination.per_page);return[].concat(t,[10,20,50,80,100,120,150],h(this.extra_sizes))}},methods:{changePage:function(t){this.pagination.current_page=t,this.$emit("fetch")},changeSize:function(t){this.pagination.per_page=t,this.$emit("per_page_change",t),this.$emit("fetch")}}},b=Object(a.a)(g,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-pagination",{staticClass:"fluentcrm-pagination",attrs:{background:!1,layout:"total, sizes, prev, pager, next","hide-on-single-page":t.hide_on_single,"current-page":t.pagination.current_page,"page-sizes":t.page_sizes,"page-size":t.pagination.per_page,total:t.pagination.total},on:{"current-change":t.changePage,"size-change":t.changeSize,"update:currentPage":function(e){return t.$set(t.pagination,"current_page",e)},"update:current-page":function(e){return t.$set(t.pagination,"current_page",e)}}})}),[],!1,null,null,null).exports,y={name:"SaveCampaign",props:["dialogTitle","dialogVisible","selectedCampaign"],data:function(){return{error:"",saving:!1,campaign:{id:null,title:""}}},computed:{isVisibile:{get:function(){return this.dialogVisible},set:function(t){this.$emit("toggleDialog",t)}}},methods:{save:function(){var t=this;if(this.campaign.title){this.error="",this.saving=!0;(parseInt(this.campaign.id)?this.$put("campaigns/".concat(this.campaign.id),this.campaign):this.$post("campaigns",this.campaign)).then((function(e){t.isVisibile=!1,t.$emit("saved",e)})).catch((function(e){var n=e.data?e.data:e;if(n.status&&403===n.status)t.isVisibile=!1,t.$message(n.message,t.$t("Oops!"),{center:!0,type:"warning",confirmButtonText:t.$t("Close"),dangerouslyUseHTMLString:!0,callback:function(e){t.$router.push({name:"campaigns",query:{t:(new Date).getTime()}})}});else{var i=Object.keys(n.title);t.error=n.title[i[0]]}})).finally((function(e){t.saving=!1}))}else this.error=this.$t("Title field is required")},opened:function(){this.selectedCampaign&&(this.campaign.id=this.selectedCampaign.id,this.campaign.title=this.selectedCampaign.title),this.$refs.title.focus()},closed:function(){this.error="",this.campaign.title=""}}},w=(n(238),{name:"Campaigns",components:{Confirm:f,Pagination:b,UpdateOrCreate:Object(a.a)(y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-campaigns"},[n("el-dialog",{attrs:{"close-on-click-modal":!1,width:"50%",title:t.dialogTitle,"append-to-body":!0,visible:t.isVisibile},on:{"update:visible":function(e){t.isVisibile=e},opened:t.opened,closed:t.closed}},[n("div",[n("el-col",{attrs:{span:24}},[n("el-input",{ref:"title",attrs:{placeholder:t.$t("Title")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save.apply(null,arguments)}},model:{value:t.campaign.title,callback:function(e){t.$set(t.campaign,"title",e)},expression:"campaign.title"}}),t._v(" "),n("span",{staticClass:"error"},[t._v(t._s(t.error))])],1)],1),t._v(" "),n("div",{staticClass:"save-campaign-dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary",loading:t.saving},on:{click:t.save}},[t._v("\n                "+t._s(t.$t("Create Campaign"))+"\n            ")])],1)])],1)}),[],!1,null,null,null).exports},data:function(){return{campaigns:[],pagination:{total:0,per_page:20,current_page:1},loading:!0,dialogVisible:!1,dialogTitle:this.$t("Add Campaign Title"),searchBy:"",filterByStatuses:[],statuses:[{key:"draft",label:this.$t("Draft")},{key:"pending",label:this.$t("Pending")},{key:"archived",label:this.$t("Archived")},{key:"incomplete",label:this.$t("Incomplete")},{key:"purged",label:this.$t("Purged")}],sort_type:"DESC",sort_by:"id"}},methods:{create:function(){this.toggleDialog(!0)},toggleDialog:function(t){this.dialogVisible=t},isNotEditable:function(t){return["archived","working"].indexOf(t.status)>=0},scheduledAt:function(t){return null===t?"Not Scheduled":this.nsDateFormat(t,"MMMM Do, YYYY [at] h:mm A")},saved:function(t){this.fetch(),this.$router.push({name:"campaign",params:{id:t.id}})},fetch:function(){var t=this;this.loading=!0;var e={sort_by:this.sort_by,sort_type:this.sort_type,searchBy:this.searchBy,statuses:this.filterByStatuses,per_page:this.pagination.per_page,page:this.pagination.current_page,with:["stats"]};this.$get("campaigns",e).then((function(e){t.loading=!1,t.campaigns=e.campaigns.data,t.pagination.total=e.campaigns.total,t.registerHeartBeat(),t.$bus.$emit("refresh-stats")}))},searchCampaigns:function(){this.fetch()},remove:function(t){var e=this;this.$del("campaigns/".concat(t.id)).then((function(t){e.fetch(),e.$notify.success({title:e.$t("Great!"),message:e.$t("Campaign deleted."),offset:19})})).catch((function(t){e.$message(t.message,e.$t("Oops!"),{center:!0,type:"warning",confirmButtonText:e.$t("Close"),dangerouslyUseHTMLString:!0,callback:function(t){e.$router.push({name:"campaigns",query:{t:(new Date).getTime()}})}})}))},sortCampaigns:function(t){this.sort_type=t.order,this.sort_by=t.prop,this.fetch()},registerHeartBeat:function(){var t=this;jQuery(document).off("heartbeat-send").on("heartbeat-send",(function(e,n){n.fluentcrm_campaign_ids=t.campaigns.map((function(t){return t.id}))})),jQuery(document).off("heartbeat-tick").on("heartbeat-tick",(function(e,n){if(n.fluentcrm_campaigns){var i=function(e){var i=n.fluentcrm_campaigns[e];t.campaigns.forEach((function(t){t.id===e&&t.status!==i&&(t.status=i)}))};for(var s in n.fluentcrm_campaigns)i(s)}}))},routeCampaign:function(t){var e="campaign-view";"draft"===t.status&&(e="campaign"),this.$router.push({name:e,params:{id:t.id},query:{t:(new Date).getTime(),step:t.next_step&&parseInt(t.next_step)<=3?t.next_step:0}})},getPercent:function(t,e){return e&&t?parseFloat(t/e*100).toFixed(2)+"%":"--"},cloneCampaign:function(t){var e=this;this.loading=!0,this.$post("campaigns/".concat(t.id,"/duplicate")).then((function(t){e.$notify.success(t.message),e.routeCampaign(t.campaign)})).catch((function(t){e.handleError(t)})).finally((function(){e.loading=!1}))},handleSortable:function(t){"descending"===t.order?(this.sort_by=t.prop,this.sort_type="DESC"):(this.sort_by=t.prop,this.sort_type="ASC"),this.fetch()}},watch:{filterByStatuses:function(){this.fetch()}},mounted:function(){var t=this.$route.query.status;this.filterByStatuses=t&&"total"!==t?[t]:[],this.changeTitle("Email Campaigns")}}),$=(n(240),Object(a.a)(w,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Email Campaigns")))])]),t._v(" "),t.hasPermission("fcrm_manage_emails")?n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:t.create}},[t._v("\n                "+t._s(t.$t("Create New Campaign"))+"\n            ")])],1):t._e()]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm-header-secondary"},[n("el-row",{attrs:{gutter:24}},[n("el-col",{attrs:{span:24}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("el-input",{attrs:{size:"mini",placeholder:t.$t("Search by title...")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch()}},model:{value:t.searchBy,callback:function(e){t.searchBy=e},expression:"searchBy"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.fetch()}},slot:"append"})],1)],1),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-select",{attrs:{size:"mini",multiple:"",clearable:"",placeholder:t.$t("Filter by status")},model:{value:t.filterByStatuses,callback:function(e){t.filterByStatuses=e},expression:"filterByStatuses"}},t._l(t.statuses,(function(t){return n("el-option",{key:t.key,attrs:{value:t.key,label:t.label}})})),1)],1)],1)],1)],1)],1),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_body"},[t.pagination.total?n("div",{staticClass:"campaigns-table"},[n("el-table",{attrs:{stripe:"",data:t.campaigns},on:{"sort-change":t.handleSortable}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"fluentcrm_title_cards"},[n("h3",{staticStyle:{margin:"0"}},[t._v(t._s(t.$t("Quick Stats")))]),t._v(" "),e.row.stats?n("ul",{staticClass:"fluentcrm_inline_stats"},[n("li",[n("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(e.row.stats.sent||"--"))]),t._v(" "),n("p",[t._v(t._s(t.$t("Sent")))])]),t._v(" "),n("li",{attrs:{title:e.row.stats.views}},[n("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(t.getPercent(e.row.stats.views,e.row.stats.sent)))]),t._v(" "),n("p",[t._v(t._s(t.$t("Opened")))])]),t._v(" "),n("li",{attrs:{title:e.row.stats.clicks}},[n("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(t.getPercent(e.row.stats.clicks,e.row.stats.sent)))]),t._v(" "),n("p",[t._v(t._s(t.$t("Clicked")))])]),t._v(" "),n("li",{attrs:{title:e.row.stats.unsubscribers}},[n("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(t.getPercent(e.row.stats.unsubscribers,e.row.stats.sent)))]),t._v(" "),n("p",[t._v(t._s(t.$t("Unsubscribed")))])]),t._v(" "),e.row.stats.revenue?n("li",[n("span",{staticClass:"fluentcrm_digit"},[t._v("\n                                            "+t._s(e.row.stats.revenue.total)+"\n                                        ")]),t._v(" "),n("p",[t._v(t._s(e.row.stats.revenue.label))])]):t._e()]):t._e()]),t._v(" "),n("div",{staticClass:"fluentcrm_card_actions"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:"draft"!==e.row.status,expression:"scope.row.status !== 'draft'"}],staticClass:"fluentcrm-report-text-btn",attrs:{type:"text",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return t.routeCampaign(e.row)}}},[t._v("\n                                "+t._s(t.$t("Reports"))+"\n                            ")]),t._v(" "),t.hasPermission("fcrm_manage_emails")?[n("el-button",{staticClass:"fluentcrm-duplicate-campaign",attrs:{type:"text",size:"mini",icon:"el-icon-document-copy"},on:{click:function(n){return t.cloneCampaign(e.row)}}},[t._v("\n                                    "+t._s(t.$t("Duplicate"))+"\n                                ")]),t._v(" "),n("confirm",{directives:[{name:"show",rawName:"v-show",value:"working"!==e.row.status,expression:"scope.row.status !== 'working'"}],attrs:{placement:"top-start"},on:{yes:function(n){return t.remove(e.row)}}},[n("el-button",{staticClass:"fluentcrm-delete-campaign",attrs:{slot:"reference",size:"mini",type:"text",icon:"el-icon-delete"},slot:"reference"},[t._v("\n                                        "+t._s(t.$t("Delete"))+"\n                                    ")])],1)]:t._e()],2)]}}],null,!1,3015792928)}),t._v(" "),n("el-table-column",{attrs:{sortable:"",property:"title",label:t.$t("Title"),prop:"title"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.routeCampaign(e.row)}}},[t._v(t._s(e.row.title))]),t._v(" "),"draft"==e.row.status?n("span",{staticClass:"fluentcrm_cart_cta"},[n("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(n){return t.routeCampaign(e.row)}}},[t._v("\n                                "+t._s(t.$t("Setup"))+"\n                            ")])],1):t._e()]}}],null,!1,3320401125)}),t._v(" "),n("el-table-column",{attrs:{sortable:"",width:100,property:"status",label:t.$t("Status")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("ucFirst")(e.row.status))+"\n                    ")]}}],null,!1,4073127260)}),t._v(" "),n("el-table-column",{attrs:{sortable:"",property:"created_at",width:130,label:t.$t("Created at")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{attrs:{title:e.row.created_at}},[t._v(t._s(t._f("nsHumanDiffTime")(e.row.created_at)))])]}}],null,!1,2525433801)}),t._v(" "),n("el-table-column",{attrs:{sortable:"",property:"scheduled_at",width:130,label:t.$t("Broadcast")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.scheduled_at&&"draft"!=e.row.status?n("span",{attrs:{title:e.row.scheduled_at}},[t._v(t._s(t._f("nsHumanDiffTime")(e.row.scheduled_at)))]):n("span",[t._v(t._s(t.$t("n/a")))])]}}],null,!1,1728578564)}),t._v(" "),n("el-table-column",{attrs:{sortable:"",property:"recipients_count",width:130,label:t.$t("Recipients")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.recipients_count?n("span",[t._v(t._s(t.formatMoney(e.row.recipients_count)))]):n("span",[t._v(t._s(t.$t("n/a")))])]}}],null,!1,2682260799)}),t._v(" "),n("el-table-column",{attrs:{width:110,label:t.$t("Open rate")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.stats.views&&e.row.stats.sent?n("span",{staticClass:"fluentcrm_digit",attrs:{title:"Open Rate"}},[t._v("\n                                "+t._s(t.getPercent(e.row.stats.views,e.row.stats.sent))+"\n                            ")]):n("span",[t._v("--")])]}}],null,!1,672305375)},[n("template",{slot:"header"},[t._v("\n                        "+t._s(t.$t("Open rate"))+"\n                        "),n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Open rate is estimated based on pixel loads. it may not show the current analytics",placement:"top-start"}},[n("i",{staticClass:"el-icon el-icon-info"})])],1)],2),t._v(" "),n("el-table-column",{attrs:{width:100,label:t.$t("Click rate")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.stats.clicks&&e.row.stats.sent?n("span",{staticClass:"fluentcrm_digit",attrs:{title:"Click Rate"}},[t._v("\n                             "+t._s(t.getPercent(e.row.stats.clicks,e.row.stats.sent))+"\n                            ")]):n("span",[t._v("--")])]}}],null,!1,4015071109)}),t._v(" "),n("el-table-column",{attrs:{width:100,label:t.$t("Revenue")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.stats.revenue?n("span",{attrs:{title:"Revenue"}},[t._v("\n                            "+t._s(e.row.stats.revenue.total)+" "+t._s(e.row.stats.revenue.currency)+"\n                        ")]):n("span",[t._v("--")])]}}],null,!1,1054570170)})],1),t._v(" "),n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1):n("div",[n("div",{staticClass:"fluentcrm_hero_box"},[n("h2",[t._v(t._s(t.$t("Cam_Looks_lydnbaecy")))]),t._v(" "),n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:t.create}},[t._v("\n                    "+t._s(t.$t("Cam_Create_YFEC"))+"\n                ")])],1)])]),t._v(" "),n("UpdateOrCreate",{attrs:{dialogVisible:t.dialogVisible,dialogTitle:t.dialogTitle},on:{saved:t.saved,toggleDialog:t.toggleDialog}})],1)}),[],!1,null,null,null).exports),k={name:"inputPopover",props:{value:String,placeholder:{type:String,default:""},placement:{type:String,default:"bottom"},icon:{type:String,default:"el-icon-more"},fieldType:{type:String,default:"text"},popper_class:{type:String,default:""},data:Array,attrName:{type:String,default:"attribute_name"},popper_extra:{type:String,default:""}},data:function(){return{model:this.value}},watch:{model:function(){this.$emit("input",this.model)}},methods:{selectEmoji:function(t){this.insertShortcode(t.data)},insertShortcode:function(t){this.model||(this.model=""),this.model+=t.replace(/param_name/,this.attrName)}}},x=(n(242),Object(a.a)(k,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-popover",{ref:"input-popover",attrs:{placement:t.placement,width:"200","popper-class":"el-dropdown-list-wrapper "+t.popper_extra,trigger:"click"}},[n("ul",{staticClass:"el-dropdown-menu el-dropdown-list fc_limit_height",class:t.popper_class},t._l(t.data,(function(e,i){return n("li",{key:i},[t.data.length>1?n("span",{staticClass:"group-title"},[t._v(t._s(e.title))]):t._e(),t._v(" "),n("ul",t._l(e.shortcodes,(function(e,i){return n("li",{key:i,staticClass:"el-dropdown-menu__item",on:{click:function(e){return t.insertShortcode(i)}}},[t._v("\n                        "+t._s(e)+"\n                    ")])})),0)])})),0)]),t._v(" "),"textarea"==t.fieldType?n("div",{staticClass:"input-textarea-value"},[n("i",{directives:[{name:"popover",rawName:"v-popover:input-popover",arg:"input-popover"}],staticClass:"icon el-icon-tickets"}),t._v(" "),n("el-input",{attrs:{placeholder:t.placeholder,rows:4,type:"textarea"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1):n("el-input",{staticClass:"fc_pop_append",attrs:{placeholder:t.placeholder,type:t.fieldType},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[n("template",{slot:"append"},[n("span",{directives:[{name:"popover",rawName:"v-popover:input-popover",arg:"input-popover"}],staticClass:"fluentcrm_url fluentcrm_clickable",class:t.icon})])],2)],1)}),[],!1,null,null,null).exports),C={name:"DynamicSegmentCampaignPromo"},S=Object(a.a)(C,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_promo_body"},[n("div",{staticClass:"promo_block",staticStyle:{background:"white",padding:"10px","text-align":"center",display:"block",overflow:"hidden"}},[n("h2",[t._v(t._s(t.$t("Send Emails with Multiple Subject Line (A/B) test")))]),t._v(" "),n("p",[t._v("\n            "+t._s(t.$t("You can split test your Email Subject Line and Test which Subject Lines got more open and click rate. This is a pro feature"))+"\n        ")]),t._v(" "),n("div",{},[n("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                "+t._s(t.$t("Get FluentCRM Pro"))+"\n            ")])])])])}),[],!1,null,null,null).exports,O={name:"InputText",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},E=Object(a.a)(O,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.appVars.verified_senders.length?n("el-select",{attrs:{placeholder:t.field.placeholder,filterable:"","allow-create":""},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.appVars.verified_senders,(function(t){return n("el-option",{key:t,attrs:{value:t}})})),1):n("el-input",{attrs:{type:t.field.data_type,placeholder:t.field.placeholder},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})],1)}),[],!1,null,null,null).exports,j={name:"EmailSubjects",props:["campaign","label_align","multi_subject","mailer_settings"],components:{InputPopover:x,AbEmailSubjectPromo:S,VerifiedEmailInput:E},data:function(){return{loading:!1,codes_ready:!1,smartcodes:window.fcAdmin.globalSmartCodes,hide_subject:!1,multi_subject_status:!(!this.campaign.subjects||!this.campaign.subjects.length)}},methods:{addSubject:function(){this.campaign.subjects.push({key:50,value:""})},removeSubject:function(t){this.campaign.subjects.splice(t,1)},maybeResetSubject:function(){this.multi_subject_status&&this.has_campaign_pro?this.campaign.subjects&&this.campaign.subjects.length||(this.campaign.subjects=[],this.campaign.subjects.push({key:50,value:""})):this.campaign.subjects=[]}},mounted:function(){}};function T(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?T(Object(n),!0).forEach((function(e){A(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function A(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var F={name:"CampaignTemplate",props:["campaign","label_align"],components:{EmailSubjects:Object(a.a)(j,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_email_composer"},[n("el-form",{attrs:{"label-position":t.label_align,"label-width":"220px",model:t.campaign}},[n("el-form-item",{attrs:{label:t.$t("Email Subject")}},[n("input-popover",{attrs:{popper_extra:"fc_with_c_fields",placeholder:"Email Subject",data:t.smartcodes},model:{value:t.campaign.email_subject,callback:function(e){t.$set(t.campaign,"email_subject",e)},expression:"campaign.email_subject"}})],1),t._v(" "),t.multi_subject?[n("el-form-item",[n("el-checkbox",{on:{change:function(e){return t.maybeResetSubject()}},model:{value:t.multi_subject_status,callback:function(e){t.multi_subject_status=e},expression:"multi_subject_status"}},[t._v("\n                    "+t._s(t.$t("Ema_Enable_Atfes"))+"\n                ")])],1),t._v(" "),t.multi_subject_status?[t.has_campaign_pro?n("div",[n("p",[t._v(t._s(t.$t("Ema_Your_ppwbctpair")))]),t._v(" "),n("table",{staticClass:"fc_horizontal_table"},[n("thead",[n("tr",[n("th",{staticStyle:{width:"60%"}},[t._v(t._s(t.$t("Subject")))]),t._v(" "),n("th",[t._v(t._s(t.$t("Priority (%)")))]),t._v(" "),n("th",[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),n("tbody",t._l(t.campaign.subjects,(function(e,i){return n("tr",{key:i},[n("td",[n("input-popover",{attrs:{placeholder:t.$t("Subject Test")+" "+(i+1),data:t.smartcodes},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"subject.value"}})],1),t._v(" "),n("td",[n("el-input-number",{attrs:{min:1,max:99},model:{value:e.key,callback:function(n){t.$set(e,"key",n)},expression:"subject.key"}})],1),t._v(" "),n("td",[n("el-button",{attrs:{disabled:1==t.campaign.subjects.length,type:"danger",size:"small",icon:"el-icon-delete"},on:{click:function(e){return t.removeSubject(i)}}})],1)])})),0)]),t._v(" "),n("div",{staticClass:"text-align-right"},[n("el-button",{attrs:{type:"info",size:"small"},on:{click:t.addSubject}},[t._v(t._s(t.$t("Add More")))])],1)]):n("div",[n("ab-email-subject-promo")],1)]:t._e()]:t._e(),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Email Pre-Header")}},[n("el-input",{attrs:{type:"textarea",placeholder:t.$t("Email Pre-Header"),rows:2},model:{value:t.campaign.email_pre_header,callback:function(e){t.$set(t.campaign,"email_pre_header",e)},expression:"campaign.email_pre_header"}})],1),t._v(" "),t.mailer_settings&&t.campaign.settings.mailer_settings?[n("el-form-item",[n("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.campaign.settings.mailer_settings.is_custom,callback:function(e){t.$set(t.campaign.settings.mailer_settings,"is_custom",e)},expression:"campaign.settings.mailer_settings.is_custom"}},[t._v("\n                    "+t._s(t.$t("Vie_Set_CFNaE"))+"\n                ")])],1),t._v(" "),"yes"==t.campaign.settings.mailer_settings.is_custom?n("div",{staticClass:"fluentcrm_highlight_white"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:12,sm:24}},[n("el-form-item",{attrs:{label:t.$t("From Name")}},[n("el-input",{attrs:{placeholder:t.$t("From Name")},model:{value:t.campaign.settings.mailer_settings.from_name,callback:function(e){t.$set(t.campaign.settings.mailer_settings,"from_name",e)},expression:"campaign.settings.mailer_settings.from_name"}})],1)],1),t._v(" "),n("el-col",{attrs:{md:12,sm:24}},[n("el-form-item",{attrs:{label:t.$t("From Email")}},[n("verified-email-input",{attrs:{field:{placeholder:"From Email","data-type":"email"}},model:{value:t.campaign.settings.mailer_settings.from_email,callback:function(e){t.$set(t.campaign.settings.mailer_settings,"from_email",e)},expression:"campaign.settings.mailer_settings.from_email"}}),t._v(" "),n("p",{staticStyle:{margin:"0",padding:"0","font-size":"10px"}},[t._v("\n                                "+t._s(t.$t("Vie_Please_msteisbyS"))+"\n                            ")])],1)],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:12,sm:24}},[n("el-form-item",{attrs:{label:t.$t("Reply To Name")}},[n("el-input",{attrs:{placeholder:t.$t("Reply To Name")},model:{value:t.campaign.settings.mailer_settings.reply_to_name,callback:function(e){t.$set(t.campaign.settings.mailer_settings,"reply_to_name",e)},expression:"campaign.settings.mailer_settings.reply_to_name"}})],1)],1),t._v(" "),n("el-col",{attrs:{md:12,sm:24}},[n("el-form-item",{attrs:{label:t.$t("Reply To Email")}},[n("el-input",{attrs:{placeholder:t.$t("Reply To Email"),type:"email"},model:{value:t.campaign.settings.mailer_settings.reply_to_email,callback:function(e){t.$set(t.campaign.settings.mailer_settings,"reply_to_email",e)},expression:"campaign.settings.mailer_settings.reply_to_email"}})],1)],1)],1)],1):t._e()]:t._e(),t._v(" "),n("el-form-item",[n("el-checkbox",{attrs:{"true-label":"1","false-label":"0"},model:{value:t.campaign.utm_status,callback:function(e){t.$set(t.campaign,"utm_status",e)},expression:"campaign.utm_status"}},[t._v("\n                "+t._s(t.$t("Ema_Add_UPFU"))+"\n            ")])],1),t._v(" "),1==t.campaign.utm_status||"1"==t.campaign.utm_status?n("div",{staticClass:"fluentcrm_highlight_white"},[n("el-form-item",{attrs:{label:t.$t("Campaign Source (required)")}},[n("el-input",{attrs:{placeholder:t.$t("The referrer: (e.g. google, newsletter)")},model:{value:t.campaign.utm_source,callback:function(e){t.$set(t.campaign,"utm_source",e)},expression:"campaign.utm_source"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Campaign Medium (required)")}},[n("el-input",{attrs:{placeholder:t.$t("Marketing medium: (e.g. cpc, banner, email)")},model:{value:t.campaign.utm_medium,callback:function(e){t.$set(t.campaign,"utm_medium",e)},expression:"campaign.utm_medium"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Campaign Name (required)")}},[n("el-input",{attrs:{placeholder:t.$t("Product, promo code, or slogan (e.g. spring_sale)")},model:{value:t.campaign.utm_campaign,callback:function(e){t.$set(t.campaign,"utm_campaign",e)},expression:"campaign.utm_campaign"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Campaign Term")}},[n("el-input",{attrs:{placeholder:t.$t("Identify the paid keywords")},model:{value:t.campaign.utm_term,callback:function(e){t.$set(t.campaign,"utm_term",e)},expression:"campaign.utm_term"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Campaign Content")}},[n("el-input",{attrs:{placeholder:t.$t("Use to differentiate ads")},model:{value:t.campaign.utm_content,callback:function(e){t.$set(t.campaign,"utm_content",e)},expression:"campaign.utm_content"}})],1)],1):t._e()],2)],1)}),[],!1,null,null,null).exports},data:function(){return{fetchingTemplate:!1,editor_status:!0,loading:!1,smart_codes:[],sending_test:!1,send_test_pop:!1,test_email:""}},methods:{nextStep:function(){if(!this.campaign.email_subject)return this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peS"),offset:19});if(this.campaign.subjects&&this.campaign.subjects.length&&!this.campaign.subjects.filter((function(t){return t.key&&t.value})).length)return this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_pSLfAT"),offset:19});this.updateCampaign()},updateCampaign:function(){var t=this;this.loading=!0;var e=JSON.parse(JSON.stringify(this.campaign));delete e.template,this.$put("campaigns/".concat(e.id),P(P({},e),{},{update_subjects:!0,next_step:2})).then((function(e){t.campaign.subjects=e.campaign.subjects,t.$emit("next",1)})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1}))},sendTestEmail:function(){var t=this;return this.campaign.email_body?this.campaign.email_subject?(this.sending_test=!0,void this.$post("campaigns/send-test-email",{campaign:this.campaign,test_campaign:"yes",email:this.test_email}).then((function(e){t.$notify.success(e.message)})).catch((function(e){t.handleError(e)})).finally((function(){t.sending_test=!1,t.send_test_pop=!1}))):this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peS"),offset:19}):this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peb"),offset:19})},goToPrev:function(){this.$emit("prev",0)}},mounted:function(){}},D=Object(a.a)(F,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"template"},[n("div",{staticClass:"fc_narrow_box fc_white_inverse"},[n("el-form",{attrs:{"label-position":"top",model:t.campaign}},[n("email-subjects",{attrs:{mailer_settings:!0,multi_subject:!0,label_align:"top",campaign:t.campaign}}),t._v(" "),n("el-form-item",[n("el-popover",{attrs:{placement:"top",width:"400",trigger:"manual"},model:{value:t.send_test_pop,callback:function(e){t.send_test_pop=e},expression:"send_test_pop"}},[n("div",[n("p",[t._v(t._s(t.$t("Cam_Type_cetstolbtsc")))]),t._v(" "),n("el-input",{attrs:{placeholder:t.$t("Email Address")},model:{value:t.test_email,callback:function(e){t.test_email=e},expression:"test_email"}},[n("template",{slot:"append"},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.sending_test,expression:"sending_test"}],attrs:{type:"success"},on:{click:function(e){return t.sendTestEmail()}}},[t._v(t._s(t.$t("Send")))])],1)],2)],1),t._v(" "),n("el-button",{attrs:{slot:"reference",size:"small"},on:{click:function(e){t.send_test_pop=!t.send_test_pop}},slot:"reference"},[t._v("\n                        "+t._s(t.$t("Send a test email"))+"\n                    ")])],1)],1)],1)],1),t._v(" "),n("el-row",{staticStyle:{"max-width":"860px",margin:"0 auto"},attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return t.goToPrev()}}},[t._v(" "+t._s(t.$t("Back"))+"\n            ")])],1),t._v(" "),n("el-col",{staticClass:"text-align-right",attrs:{span:12}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{size:"small",type:"success"},on:{click:function(e){return t.nextStep()}}},[t._v("\n                "+t._s(t.$t("Cam_Continue_TNS_"))+"\n            ")])],1)],1)],1)}),[],!1,null,null,null).exports,q={name:"inputPopoverDropdownExtended",props:{data:Array,close_on_insert:{type:Boolean,default:function(){return!0}},buttonText:{type:String,default:function(){return'Add SmartCodes <i class="el-icon-arrow-down el-icon--right"></i>'}},btnType:{type:String,default:function(){return"success"}},btn_ref:{type:String,default:function(){return"input-popover1"}}},data:function(){return{activeIndex:0,visible:!1}},methods:{selectEmoji:function(t){this.insertShortcode(t.data)},insertShortcode:function(t){this.$emit("command",t),this.close_on_insert&&(this.visible=!1)}},mounted:function(){}},I=Object(a.a)(q,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-popover",{ref:t.btn_ref,attrs:{placement:"right-end",offset:"50","popper-class":"el-dropdown-list-wrapper",trigger:"click"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[n("div",{staticClass:"el_pop_data_group"},[n("div",{staticClass:"el_pop_data_headings"},[n("ul",t._l(t.data,(function(e,i){return n("li",{key:i,class:t.activeIndex==i?"active_item_selected":"",attrs:{"data-item_index":i},on:{click:function(e){t.activeIndex=i}}},[t._v("\n                        "+t._s(e.title)+"\n                    ")])})),0)]),t._v(" "),n("div",{staticClass:"el_pop_data_body"},t._l(t.data,(function(e,i){return n("div",{key:i},[n("ul",{directives:[{name:"show",rawName:"v-show",value:t.activeIndex==i,expression:"activeIndex == current_index"}],class:"el_pop_body_item_"+i},t._l(e.shortcodes,(function(e,i){return n("li",{key:i,on:{click:function(e){return t.insertShortcode(i)}}},[t._v("\n                            "+t._s(e)),n("span",[t._v(t._s(i))])])})),0)])})),0)])]),t._v(" "),n("el-button-group",[n("el-button",{directives:[{name:"popover",rawName:"v-popover",value:t.btn_ref,expression:"btn_ref"}],staticClass:"editor-add-shortcode",attrs:{size:"mini",type:t.btnType},domProps:{innerHTML:t._s(t.buttonText)}})],1)],1)}),[],!1,null,null,null).exports,N={name:"RawtextEditor",props:["value","editor_design"],components:{popover:I},data:function(){return{content:this.value||"",editorShortcodes:window.fcAdmin.globalSmartCodes,cursorPos:this.value?this.value.length:0}},watch:{content:function(){this.$emit("input",this.content)}},methods:{handleCommand:function(t){var e=this.content.slice(0,this.cursorPos),n=this.content.slice(this.cursorPos,this.content.length);this.content=e+t+n,this.cursorPos+=t.length},updateCursorPos:function(t){var e=jQuery(".wp_editor_raw_html textarea").prop("selectionStart");this.$set(this,"cursorPos",e)}},mounted:function(){var t=this;jQuery(".wp_editor_raw_html textarea").on("click",(function(e){t.updateCursorPos(e)}))}},L=Object(a.a)(N,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_raw_body"},[n("popover",{staticClass:"popover-wrapper",attrs:{data:t.editorShortcodes},on:{command:t.handleCommand}}),t._v(" "),n("el-input",{staticClass:"wp_editor_raw_html",attrs:{type:"textarea",rows:30,placeholder:t.$t("Raw_Please_PHoyE")},nativeOn:{keyup:function(e){return t.updateCursorPos.apply(null,arguments)}},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)}),[],!1,null,null,null).exports,M={name:"tinyButtonDesigner",props:["visibility"],data:function(){return{controls:{button_text:{type:"text",label:this.$t("Button Text"),value:this.$t("click here")},button_url:{label:this.$t("Button URL"),type:"url",value:""},backgroundColor:{label:this.$t("Background Color"),type:"color_picker",value:"#0072ff"},textColor:{label:this.$t("Text Color"),type:"color_picker",value:"#ffffff"},borderRadius:{label:this.$t("Border Radius"),type:"slider",value:5,max:50,min:0},fontSize:{label:this.$t("Font Size"),type:"slider",value:16,min:8,max:40},fontStyle:{label:this.$t("Font Style"),type:"checkboxes",value:[],options:{bold:"Bold",italic:"Italic",underline:"Underline"}}},style:""}},watch:{controls:{handler:function(){this.generateStyle()},deep:!0}},methods:{close:function(){this.$emit("close")},insert:function(){if(this.controls.button_url.value&&this.controls.button_text.value){var t='<a  style="'.concat(this.style,'" href="').concat(this.controls.button_url.value,'">').concat(this.controls.button_text.value,"</a>");this.$emit("insert",t),this.close()}else this.$notify.error("Button Text and URL is required")},generateStyle:function(){var t=this.controls.fontStyle.value,e=-1===t.indexOf("underline")?"none":"underline",n=-1===t.indexOf("bold")?"normal":"bold",i=-1===t.indexOf("italic")?"normal":"italic";this.style="color:".concat(this.controls.textColor.value,";")+"background-color:".concat(this.controls.backgroundColor.value,";")+"font-size:".concat(this.controls.fontSize.value,"px;")+"border-radius:".concat(this.controls.borderRadius.value,"px;")+"text-decoration:".concat(e,";")+"font-weight:".concat(n,";")+"font-style:".concat(i,";")+"padding:0.8rem 1rem;border-color:#0072ff;"}},mounted:function(){this.generateStyle()}},R=(n(244),Object(a.a)(M,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.$t("Design Your Button"),visible:t.visibility,"append-to-body":!0,"show-close":!1,width:"60%"},on:{"update:visible":function(e){t.visibility=e}}},[n("div",{staticClass:"fluentcrm_preview_mce"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:14}},[n("el-form",{attrs:{"label-position":"top"}},t._l(t.controls,(function(e,i){return n("el-col",{key:i,attrs:{span:12}},[n("el-form-item",{attrs:{label:e.label}},["text"==e.type||"url"==e.type?[n("el-input",{attrs:{type:e.type},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"control.value"}})]:"color_picker"==e.type?[n("el-color-picker",{on:{"active-change":function(t){e.value=t}},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"control.value"}})]:"slider"==e.type?n("div",[n("el-slider",{attrs:{min:e.min,max:e.max},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"control.value"}})],1):"checkboxes"==e.type?[n("el-checkbox-group",{model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"control.value"}},t._l(e.options,(function(e,i){return n("el-checkbox",{key:i,attrs:{label:i}},[t._v(t._s(e)+"\n                                    ")])})),1)]:t._e()],2)],1)})),1)],1),t._v(" "),n("el-col",{attrs:{span:10}},[n("div",{staticClass:"fluentcrm_button_preview"},[n("div",{staticClass:"preview_header"},[t._v("\n                        "+t._s(t.$t("Button Preview"))+":\n                    ")]),t._v(" "),n("div",{staticClass:"preview_body"},[n("a",{style:t.style,attrs:{href:"#"},on:{click:function(e){return t.insert()}}},[t._v(t._s(t.controls.button_text.value))])])])])],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){return t.close()}}},[t._v(t._s(t.$t("Cancel")))]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.insert()}}},[t._v(t._s(t.$t("Insert")))])],1)])}),[],!1,null,null,null).exports),z=n(8),B={name:"wp_editor",components:{popover:I,ButtonDesigner:R},props:{editor_id:{type:String,default:function(){return"wp_editor_"+Date.now()+parseInt(1e3*Math.random())}},value:{type:String,default:function(){return""}},editorShortcodes:{type:Array,default:function(){return[]}},height:{type:Number,default:function(){return 250}},extra_style:{default:function(){return""}}},data:function(){return{showButtonDesigner:!1,hasWpEditor:!!window.wp.editor&&!!wp.editor.autop||!!window.wp.oldEditor,editor:window.wp.oldEditor||window.wp.editor,plain_content:this.value,cursorPos:this.value?this.value.length:0,app_ready:!1,buttonInitiated:!1,currentEditor:!1}},watch:{plain_content:function(){this.$emit("input",this.plain_content),this.$emit("change",this.plain_content)}},methods:{initEditor:function(){if(this.hasWpEditor){var t=[];this.each(z.b,(function(e,n){t.push(n+"="+e)})),this.editor.remove(this.editor_id);var e=this;this.editor.initialize(this.editor_id,{mediaButtons:!0,tinymce:{height:e.height,fontsize_formats:"8px 10px 12px 14px 16px 18px 24px 30px 36px 45px",toolbar1:"formatselect,fontselect,fontsizeselect,customInsertButton,table,bold,italic,bullist,numlist,link,blockquote,alignleft,aligncenter,alignright,underline,strikethrough,forecolor,removeformat,codeformat,outdent,indent,undo,redo",font_formats:t.join("; "),setup:function(t){t.on("change",(function(t,n){e.changeContentEvent()})),e.buttonInitiated||(e.buttonInitiated=!0,t.addButton("customInsertButton",{text:e.$t("Button"),classes:"fluentcrm_editor_btn",onclick:function(){e.showInsertButtonModal(t)}}))},content_style:e.extra_style},quicktags:!0}),jQuery("#"+this.editor_id).on("change",(function(t){e.changeContentEvent()}))}},showInsertButtonModal:function(t){this.currentEditor=t,this.showButtonDesigner=!0},insertHtml:function(t){this.currentEditor.insertContent(t)},changeContentEvent:function(){var t=this.editor.getContent(this.editor_id);this.$emit("input",t),this.$emit("change",t)},handleCommand:function(t){if(this.hasWpEditor)window.tinymce.activeEditor.insertContent(t);else{var e=this.plain_content.slice(0,this.cursorPos),n=this.plain_content.slice(this.cursorPos,this.plain_content.length);this.plain_content=e+t+n,this.cursorPos+=t.length}},updateCursorPos:function(){var t=jQuery(".wp_vue_editor_plain").prop("selectionStart");this.$set(this,"cursorPos",t)}},mounted:function(){this.initEditor(),this.app_ready=!0}},V=(n(246),Object(a.a)(B,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wp_vue_editor_wrapper"},[t.editorShortcodes&&t.editorShortcodes.length?n("popover",{staticClass:"popover-wrapper",class:{"popover-wrapper-plaintext":!t.hasWpEditor},attrs:{data:t.editorShortcodes},on:{command:t.handleCommand}}):t._e(),t._v(" "),t.hasWpEditor?n("textarea",{staticClass:"wp_vue_editor",attrs:{id:t.editor_id}},[t._v(t._s(t.value))]):n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.plain_content,expression:"plain_content"}],staticClass:"wp_vue_editor wp_vue_editor_plain",domProps:{value:t.plain_content},on:{click:t.updateCursorPos,input:function(e){e.target.composing||(t.plain_content=e.target.value)}}}),t._v(" "),t.showButtonDesigner?n("button-designer",{attrs:{visibility:t.showButtonDesigner},on:{close:function(){t.showButtonDesigner=!1},insert:t.insertHtml}}):t._e()],1)}),[],!1,null,null,null).exports),U={name:"FCBlockEditor",props:["value","design_template"],components:{WpEditor:V},data:function(){return{content:this.value||"\x3c!-- wp:paragraph --\x3e<p>"+this.$t("Start Writing Here")+"</p>\x3c!-- /wp:paragraph --\x3e",has_block_editor:!!window.fluentCrmBootEmailEditor,editorShortcodes:window.fcAdmin.globalSmartCodes}},methods:{init:function(){this.has_block_editor&&window.fluentCrmBootEmailEditor(this.content,this.handleChange)},handleChange:function(t){this.$emit("input",t)}},mounted:function(){this.init(),jQuery(".block-editor-block-inspector__no-blocks").html('<div class="text-align-left"><b>Tips:</b><ul><li>Type <code>/</code> to see all the available blocks</li><li>Type <code>@</code> to insert dynamic tags</li></ul></div>')}},H=Object(a.a)(U,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.has_block_editor?n("div",{staticClass:"fc_block_editor",class:"fc_skin_"+t.design_template,attrs:{id:"fluentcrm_block_editor_x"}},[t._v("\n    "+t._s(t.$t("Loading Editor..."))+"\n")]):n("div",{staticClass:"fc_classic_editor_fallback",staticStyle:{"max-width":"800px",margin:"50px auto"}},[n("wp-editor",{attrs:{editorShortcodes:t.editorShortcodes},on:{change:t.handleChange},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),t._v(" "),n("p",[t._v(t._s(t.$t("using_old_wordpress_version")))])],1)}),[],!1,null,null,null).exports,G={name:"InputRadioImage",props:["field","value","boxWidth","boxHeight","tooltip_prefix"],data:function(){return{model:this.value,width:this.boxWidth||120,height:this.boxHeight||120}},watch:{model:function(t){this.$emit("input",t),this.$emit("change",t)}}},W=Object(a.a)(G,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-radio-group",{staticClass:"fc_image_radio_tooltips",model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,(function(e,i){return n("el-radio",{key:i,attrs:{label:e.id}},[n("el-tooltip",{attrs:{content:t.tooltip_prefix+e.label,placement:"top"}},[n("div",{staticClass:"fc_image_box",class:t.model==e.id?"fc_image_active":"",style:{backgroundImage:"url("+e.image+")",width:t.width+"px",height:t.height+"px"}})])],1)})),1)}),[],!1,null,null,null).exports,Y={name:"withLabelField",props:["field"]},J=Object(a.a)(Y,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form-item",{class:t.field.wrapper_class},[t.field.label?n("div",{attrs:{slot:"label"},slot:"label"},[t._v("\n    "+t._s(t.field.label)+"\n        "),t.field.help?n("el-tooltip",{attrs:{"popper-class":"sidebar-popper",effect:"dark",placement:"top"}},[n("div",{attrs:{slot:"content"},domProps:{innerHTML:t._s(t.field.help)},slot:"content"}),t._v(" "),n("i",{staticClass:"tooltip-icon el-icon-info"})]):t._e()],1):t._e(),t._v(" "),t._t("default"),t._v(" "),t.field.inline_help?n("p",{staticClass:"fc_inline_help",domProps:{innerHTML:t._s(t.field.inline_help)}}):t._e()],2)}),[],!1,null,null,null).exports,K={name:"InputText",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},Q=Object(a.a)(K,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-input",{attrs:{type:t.field.data_type,placeholder:t.field.placeholder},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})}),[],!1,null,null,null).exports,Z=n(24),X={name:"WPEditorField",props:{value:{type:String,default:function(){return""}},field:{type:Object,default:function(){return{}}},extra_style:{default:function(){return""}},height:{type:Number,default:function(){return 250}}},components:{WpBaseEditor:V},data:function(){return{model:this.value,smartcodes:window.fcAdmin.globalSmartCodes}},watch:{model:function(t){this.$emit("input",t)}}},tt=Object(a.a)(X,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("wp-base-editor",{attrs:{height:t.height,extra_style:t.extra_style,editorShortcodes:t.smartcodes},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})}),[],!1,null,null,null).exports,et={name:"InputTextPopper",props:["field","value"],components:{InputPopover:x},data:function(){return{model:this.value,smartcodes:window.fcAdmin.globalSmartCodes}},watch:{model:function(t){this.$emit("input",t)}}},nt=Object(a.a)(et,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("input-popover",{attrs:{"field-type":t.field.field_type,placeholder:t.field.placeholder,popper_class:t.field.popper_class,data:t.smartcodes},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})}),[],!1,null,null,null).exports,it={name:"InputRadioImage",props:["field","value","size"],data:function(){return{model:this.value,boxSize:this.size||120}},watch:{model:function(t){this.$emit("input",t)}}},st=Object(a.a)(it,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-radio-group",{staticClass:"fc_image_radios",model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,(function(e,i){return n("el-radio",{key:i,attrs:{label:e.id}},[n("div",{staticClass:"fc_image_box",class:t.model==e.id?"fc_image_active":"",style:{backgroundImage:"url("+e.image+")",width:t.boxSize+"px",height:t.boxSize+"px"}},[n("span",[t._v(t._s(e.label))])])])})),1)}),[],!1,null,null,null).exports,at={name:"InputRadio",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},rt=Object(a.a)(at,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-radio-group",{class:t.field.wrapper_class,model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,(function(e,i){return n("el-radio",{key:i,attrs:{label:e.id}},[t._v("\n        "+t._s(e.label)+"\n    ")])})),1)}),[],!1,null,null,null).exports,ot={name:"InputOption",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},lt=Object(a.a)(ot,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-select",{class:t.field.wrapper_class,attrs:{clearable:"",filterable:"",multiple:t.field.multiple},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,(function(t){return n("el-option",{key:t.id,attrs:{value:t.id,label:t.label}})})),1)}),[],!1,null,null,null).exports,ct={name:"InputColor",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},ut=Object(a.a)(ct,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-color-picker",{attrs:{"color-format":t.field.colorFormat,"show-alpha":t.field.showAlpha},on:{"active-change":function(e){t.model=e}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})}),[],!1,null,null,null).exports,_t={name:"InputDate",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},dt=Object(a.a)(_t,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-date-picker",{attrs:{"value-format":t.field.value_format,placeholder:t.field.placeholder,type:t.field.data_type},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})}),[],!1,null,null,null).exports,pt={name:"InputNumber",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},mt=Object(a.a)(pt,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-input-number",{attrs:{min:t.field.min,step:t.field.step},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})}),[],!1,null,null,null).exports;function ft(t){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var ht={name:"OptionSelector",props:["value","field"],data:function(){return{options:{},model:this.value&&Array.isArray(this.value)?this.value.map(String):this.value,element_ready:!1,new_item:"",creating:!1,create_pop_status:!1}},watch:{model:function(t){this.$emit("input",t)}},methods:{getOptions:function(){var t=this;this.app_ready=!1;var e={fields:"tags,lists,editable_statuses,"+this.field.option_key};this.$get("reports/options",e).then((function(e){window.fc_options_cache=e.options,t.options=e.options,t.element_ready=!0,t.$emit("element_ready")})).catch((function(e){t.handleError(e)})).finally((function(){}))},createNewItem:function(){var t=this;if(this.creating=!0,!this.new_item.length)return this.$notify.error("Provide name Field is required"),!1;this.$post(this.field.option_key+"/bulk",{items:[{title:this.new_item}]}).then((function(e){t.create_pop_status=!1,t.$notify.success(e.message),t.getOptions(),e.ids&&e.ids[0]&&(t.field.is_multiple?t.model.push(String(e.ids[0])):t.model=String(e.ids[0])),t.new_item=""})).catch((function(e){t.handleError(e)})).finally((function(){t.creating=!1}))}},mounted:function(){window.fc_options_cache&&window.fc_options_cache[this.field.option_key]?(this.options=window.fc_options_cache,this.field.is_multiple&&"object"!==ft(this.value)&&this.$set(this,"model",[]),this.element_ready=!0,this.$emit("element_ready")):this.getOptions()}},vt=(n(248),Object(a.a)(ht,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_options_selector",class:t.field.creatable?"fc_option_creatable":""},[n("el-select",{directives:[{name:"loading",rawName:"v-loading",value:!t.element_ready,expression:"!element_ready"}],attrs:{size:t.field.size,"value-key":"id",multiple:t.field.is_multiple,placeholder:t.field.placeholder,clearable:"",filterable:""},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.options[t.field.option_key],(function(e){return t.element_ready?n("el-option",{key:e.id,attrs:{value:Number.isInteger(e.id)?String(e.id):e.id,label:e.title}},[n("span",{domProps:{innerHTML:t._s(e.title)}})]):t._e()})),1),t._v(" "),t.field.creatable?n("el-popover",{attrs:{placement:"left",width:"400",trigger:"manual"},model:{value:t.create_pop_status,callback:function(e){t.create_pop_status=e},expression:"create_pop_status"}},[n("div",[n("el-input",{attrs:{placeholder:t.$t("Provide Name")},model:{value:t.new_item,callback:function(e){t.new_item=e},expression:"new_item"}},[n("template",{slot:"append"},[n("el-button",{attrs:{type:"success"},on:{click:function(e){return t.createNewItem()}}},[t._v(t._s(t.$t("Add")))])],1)],2)],1),t._v(" "),n("el-button",{staticClass:"fc_with_select",attrs:{slot:"reference",type:"info"},on:{click:function(e){t.create_pop_status=!t.create_pop_status}},slot:"reference"},[t._v("+\n        ")])],1):t._e()],1)}),[],!1,null,null,null).exports),gt={name:"AjaxSelector",props:["field","value"],data:function(){return{model:this.value,loading:!1,options:[]}},watch:{model:function(t){this.$emit("input",t)}},methods:{fetchOptions:function(t){var e=this,n=this.field.option_key;this.field.extended_key&&(n+="_"+this.field.extended_key);var i="";this.field.cacheable&&(i+="_fcrm_ajax_cache_"+n,window[i])?this.options=window[i]:(this.loading=!0,this.$get("reports/ajax-options",{search:t,values:this.model,option_key:n}).then((function(t){e.options=t.options,i&&t.options&&(window[i]=t.options)})).catch((function(t){e.handleError(t)})).finally((function(){e.loading=!1})))}},mounted:function(){this.fetchOptions("")}},bt=Object(a.a)(gt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-select",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{multiple:t.field.is_multiple,filterable:"",remote:!t.field.cacheable,clearable:t.field.clearable,"reserve-keyword":"",size:t.field.size,placeholder:t.field.placeholder||t.$t("Please enter a keyword"),"remote-method":t.fetchOptions},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.options,(function(t){return n("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)}),[],!1,null,null,null).exports,yt={name:"InlineCheckbox",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},wt=Object(a.a)(yt,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-checkbox",{attrs:{"true-label":t.field.true_label,"false-label":t.field.false_label},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[t._v(t._s(t.field.checkbox_label))])}),[],!1,null,null,null).exports,$t={name:"CheckboxGroup",props:["field","value"],data:function(){return{model:this.value,isIndeterminate:!1,checkAll:!1}},watch:{model:function(t){this.$emit("input",t)}},computed:{optionKeys:function(){if(!this.field.has_all_selector)return[];var t=[];return this.each(this.field.options,(function(e){t.push(e.id)})),t}},methods:{checked:function(t){if(this.field.has_all_selector){var e=this.optionKeys.length;this.checkAll=e===this.model.length,this.isIndeterminate=e>0&&e<this.model.length}},all:function(t){this.checkAll?this.model=this.optionKeys:this.model=[],this.isIndeterminate=!1}}},kt=Object(a.a)($t,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_checkbox_group"},[t.field.has_all_selector?[n("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.all},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v("\n            "+t._s(t.field.all_selector_label)+"\n        ")]),t._v(" "),n("div",{staticStyle:{margin:"15px 0"}})]:t._e(),t._v(" "),n("el-checkbox-group",{class:t.field.input_class,on:{change:t.checked},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,(function(e){return n("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v("\n            "+t._s(e.label)+"\n        ")])})),1)],2)}),[],!1,null,null,null).exports,xt={name:"InputText",props:["field","value"],components:{OptionSelector:vt},data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},Ct=Object(a.a)(xt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_tag_list_wrapper",class:t.field.wrapper_class},[n("el-form-item",{attrs:{label:t.field.tag_label}},[n("option-selector",{attrs:{field:{is_multiple:!0,option_key:"tags"}},model:{value:t.model.tags,callback:function(e){t.$set(t.model,"tags",e)},expression:"model.tags"}}),t._v(" "),t.field.tag_help?n("p",{staticClass:"fc_inline_help",domProps:{innerHTML:t._s(t.field.tag_help)}}):t._e()],1),t._v(" "),n("el-form-item",{attrs:{label:t.field.list_label}},[n("option-selector",{attrs:{field:{is_multiple:!0,option_key:"lists"}},model:{value:t.model.lists,callback:function(e){t.$set(t.model,"lists",e)},expression:"model.lists"}}),t._v(" "),t.field.list_help?n("p",{staticClass:"fc_inline_help",domProps:{innerHTML:t._s(t.field.list_help)}}):t._e()],1)],1)}),[],!1,null,null,null).exports,St={name:"HtmlViewer",props:["field"]},Ot=Object(a.a)(St,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_html"},[t.field.heading?n("h3",{staticStyle:{"margin-bottom":"0"}},[t._v(t._s(t.field.heading))]):t._e(),t._v(" "),n("div",{domProps:{innerHTML:t._s(t.field.info)}})])}),[],!1,null,null,null).exports,Et={name:"TagAddRemoveElement",props:["field","value"],components:{OptionSelector:vt},data:function(){return{model:this.value,tags_ready:!1}},watch:{model:function(t){this.$emit("input",t)}},mounted:function(){var t=this;this.renewOptionCache("tags",(function(){t.tags_ready=!0}))}},jt=Object(a.a)(Et,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.tags_ready,expression:"!tags_ready"}],staticClass:"fc_tag_mappings"},[t.tags_ready?n("table",{staticClass:"fc_horizontal_table"},[n("thead",[n("tr",[n("th",[t._v(t._s(t.field.selector_label))]),t._v(" "),n("th",[t._v(t._s(t.field.add_tag_label))]),t._v(" "),n("th",[t._v(t._s(t.field.remove_tag_label))])])]),t._v(" "),n("tbody",t._l(t.field.selector_options,(function(e){return n("tr",{key:e.id},[n("td",[t._v(t._s(e.title))]),t._v(" "),n("td",[n("option-selector",{attrs:{field:{option_key:"tags",creatable:!0,is_multiple:!0}},model:{value:t.model[e.id].add_tags,callback:function(n){t.$set(t.model[e.id],"add_tags",n)},expression:"model[option.id].add_tags"}})],1),t._v(" "),n("td",[n("option-selector",{attrs:{field:{option_key:"tags",creatable:!0,is_multiple:!0}},model:{value:t.model[e.id].remove_tags,callback:function(n){t.$set(t.model[e.id],"remove_tags",n)},expression:"model[option.id].remove_tags"}})],1)])})),0)]):t._e()])}),[],!1,null,null,null).exports,Tt={name:"FormManyDropdownMapper",props:["field","value"],components:{OptionSelector:vt,AjaxSelector:bt},methods:{addMore:function(){this.value.push({field_key:"",field_value:""})},deleteItem:function(t){this.value.splice(t,1)}}},Pt=Object(a.a)(Tt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"fc_horizontal_table"},[n("thead",[n("tr",[n("th",[t._v(t._s(t.field.local_label))]),t._v(" "),n("th",[t._v(t._s(t.field.remote_label))]),t._v(" "),n("th",{attrs:{width:"40px"}})])]),t._v(" "),n("tbody",[t._l(t.value,(function(e,i){return n("tr",{key:i},[n("td",[t.field.field_ajax_selector?n("ajax-selector",{attrs:{field:Object.assign({},{placeholder:t.field.local_placeholder},t.field.field_ajax_selector)},model:{value:e.field_key,callback:function(n){t.$set(e,"field_key",n)},expression:"item.field_key"}}):n("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.field.local_placeholder},model:{value:e.field_key,callback:function(n){t.$set(e,"field_key",n)},expression:"item.field_key"}},t._l(t.field.fields,(function(t,e){return n("el-option",{key:e,attrs:{value:e,label:t.label}})})),1)],1),t._v(" "),n("td",[t.field.value_option_selector?n("option-selector",{attrs:{field:Object.assign({},{placeholder:t.field.remote_placeholder},t.field.value_option_selector)},model:{value:e.field_value,callback:function(n){t.$set(e,"field_value",n)},expression:"item.field_value"}}):n("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.field.remote_placeholder},model:{value:e.field_value,callback:function(n){t.$set(e,"field_value",n)},expression:"item.field_value"}},t._l(t.field.value_options,(function(t){return n("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})})),1)],1),t._v(" "),n("td",[n("div",{staticClass:"text-align-right"},[n("el-button",{attrs:{disabled:1==t.value.length,type:"info",size:"small",icon:"el-icon-delete"},on:{click:function(e){return t.deleteItem(i)}}})],1)])])})),t._v(" "),n("tr",[n("td"),t._v(" "),n("td"),t._v(" "),n("td",[n("div",{staticClass:"text-align-right"},[n("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(e){return t.addMore()}}},[t._v("\n                    "+t._s(t.$t("Add More"))+"\n                ")])],1)])])],2)])}),[],!1,null,null,null).exports,At={name:"global_form_builder",components:{WithLabel:J,InputText:Q,PhotoWidget:Z.a,InputTextPopper:nt,WpEditor:tt,ImageRadio:st,InputRadio:rt,InputOption:lt,AjaxSelector:bt,InputColor:ut,InputNumber:mt,OptionSelector:vt,InlineCheckbox:wt,CheckboxGroup:kt,VerifiedEmailInput:E,InputTagList:Ct,HtmlViewer:Ot,TagAddRemoveMapping:jt,InputDate:dt,WpBaseEditor:V,"form-many-drop-down-mapper":Pt},props:{formData:{type:Object,required:!1,default:function(){return{}}},label_position:{required:!1,type:String,default:function(){return"top"}},fields:{required:!0,type:Object}},methods:{nativeSave:function(){this.$emit("nativeSave",this.formData)},compare:function(t,e,n){switch(e){case"=":return t===n;case"!=":return t!==n}},dependancyPass:function(t){if(t.dependency){var e=t.dependency.depends_on.split("/").reduce((function(t,e){return t[e]}),this.formData);return!!this.compare(t.dependency.value,t.dependency.operator,e)}return!0}}},Ft=Object(a.a)(At,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_global_form_builder"},[n("el-form",{attrs:{data:t.formData,"label-position":t.label_position},nativeOn:{submit:function(e){return e.preventDefault(),t.nativeSave.apply(null,arguments)}}},t._l(t.fields,(function(e,i){return t.dependancyPass(e)?n("with-label",{key:i,attrs:{field:e}},[n(e.type,{tag:"component",attrs:{field:e},model:{value:t.formData[i],callback:function(e){t.$set(t.formData,i,e)},expression:"formData[fieldIndex]"}})],1):t._e()})),1)],1)}),[],!1,null,null,null).exports,Dt=n(6),qt={name:"EmailStyleEditor",props:["template_config"],components:{FormBuilder:Ft},data:function(){return{showBodyConfig:!1,email_font_families:z.b}},watch:{template_config:{deep:!0,handler:function(){this.generateStyles()}}},computed:{settingsFields:function(){if(Dt(this.template_config))return{};var t=[];this.each(this.email_font_families,(function(e,n){t.push({id:e,label:n})}));var e={body_bg_color:{label:this.$t("Body Background Color"),type:"input-color",colorFormat:"hex",showAlpha:!1},content_width:{label:this.$t("Content Max Width (PX)"),inline_help:this.$t("Gut_Suggesting_vB6t8"),type:"input-number",min:400,step:10},content_bg_color:{label:this.$t("Content Background Color"),type:"input-color",colorFormat:"hex",showAlpha:!1},text_color:{label:this.$t("Default Content Color"),type:"input-color",colorFormat:"hex",showAlpha:!1},heading_color:{label:this.$t("Default Headings Color"),type:"input-color",colorFormat:"hex",showAlpha:!1},footer_text_color:{label:this.$t("Footer Text Color"),type:"input-color",colorFormat:"hex",showAlpha:!1},link_color:{label:this.$t("Default Link Color"),type:"input-color",colorFormat:"hex",showAlpha:!1},content_font_family:{label:this.$t("Content Font Family"),type:"input-option",options:t},headings_font_family:{label:this.$t("Headings Font Family"),type:"input-option",options:t},disable_footer:{type:"inline-checkbox",true_label:"yes",false_label:"no",checkbox_label:this.$t("Disable Default Email Footer"),inline_help:this.$t("email_will_be_sent_without_footer_contents")}},n=Object.keys(this.template_config),i={};return this.each(e,(function(t,e){-1!=n.indexOf(e)&&(i[e]=t)})),i}},methods:{triggerUpdate:function(){this.$emit("save"),this.showBodyConfig=!1},generateStyles:function(){var t="",e=this.template_config;if(Dt(e))jQuery("#fc_mail_config_style").html("");else{var n=".fluentcrm_visual_editor .fc_visual_body .fce-block-editor ";t+="".concat(n," .block-editor-writing-flow { background-color: ").concat(e.body_bg_color,"; }"),t+="".concat(n," .fc_editor_body { background-color: ").concat(e.content_bg_color,"; color: ").concat(e.text_color,"; max-width: ").concat(e.content_width,"px; font-family: ").concat(e.content_font_family,"; }"),t+="".concat(n," .fc_editor_body p,\n            ").concat(n," .fc_editor_body li, ol { color: inherit; font-size: inherit; }"),t+="".concat(n," .fc_editor_body h1,\n            ").concat(n," .fc_editor_body h2,\n            ").concat(n," .fc_editor_body h3,\n            ").concat(n," .fc_editor_body h4 { color: ").concat(e.headings_color,"; font-family: ").concat(e.headings_font_family,"; }\n            ").concat(n," .fc_editor_body a { color: ").concat(e.link_color," };"),jQuery("#fc_mail_config_style").html('<style type="text/css">'+t+"</style>")}},isEmpty:Dt},mounted:function(){this.generateStyles()}},It={name:"EmailPreview",props:["campaign"],data:function(){return{showing_view:!1,preview_html:"",loading_preview:!1}},methods:{fetchHtml:function(){var t=this;this.loading_preview=!0,this.showing_view=!0,this.$post("campaigns/email-preview-html",{campaign:this.campaign}).then((function(e){var n=t.$refs.ifr;(n.contentDocument||n.contentWindow.document).body.innerHTML=e.preview_html})).catch((function(e){t.handleError(e)})).finally((function(){t.loading_preview=!1}))}}};function Nt(t){return function(t){if(Array.isArray(t))return Lt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Lt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lt(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var Mt={name:"MergeCodes",components:{popover:I},props:["extra_tags"],data:function(){return{editorShortcodes:[]}},methods:{handleCommand:function(t){this.copyItem(t)},copyItem:function(t){this.copy_success=!1;var e=!1;if(window.clipboardData&&window.clipboardData.setData)window.clipboardData.clipboardData.setData("Text",t),e=!0;else if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=t,n.style.position="fixed",document.body.appendChild(n),n.select();try{document.execCommand("copy"),e=!0}catch(t){console.warn("Copy to clipboard failed.",t),e=!1}finally{document.body.removeChild(n)}}e?(this.copy_success=!0,this.$notify({message:this.$t("Smartcode has been copied to your clipboard"),position:"bottom-right",customClass:"bottom_right",type:"success"})):this.$notify({message:this.$t("Your Browser does not support JS copy. Please copy manually"),position:"bottom-right",customClass:"bottom_right",type:"error"})}},mounted:function(){var t,e,n;((t=this.editorShortcodes).push.apply(t,Nt(window.fcAdmin.globalSmartCodes)),(e=this.editorShortcodes).push.apply(e,Nt(window.fcAdmin.extendedSmartCodes)),this.extra_tags&&this.extra_tags.length)&&(n=this.editorShortcodes).push.apply(n,Nt(this.extra_tags))}},Rt={name:"BlockComposer",props:["campaign","enable_templates","disable_fixed","body_key","enable_template_save","show_merge","extra_tags"],components:{ImageRadioToolTip:W,RawEditor:L,EmailStyleEditor:Object(a.a)(qt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"fc_style_editor",staticStyle:{display:"inline-block"}},[t.isEmpty(t.template_config)?t._e():n("el-button",{attrs:{size:"mini",icon:"el-icon-setting",type:"info"},on:{click:function(e){t.showBodyConfig=!0}}}),t._v(" "),n("el-dialog",{attrs:{title:t.$t("Email Styling Settings"),visible:t.showBodyConfig,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.showBodyConfig=e}}},[n("div",{staticClass:"fc_2col_form_wrapper"},[t.showBodyConfig?n("form-builder",{attrs:{formData:t.template_config,fields:t.settingsFields}}):t._e()],1),t._v(" "),n("span",{staticClass:"dialog-footer text-align-right",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.triggerUpdate()}}},[t._v(t._s(t.$t("Update Settings")))])],1)]),t._v(" "),n("div",{attrs:{id:"fc_mail_config_style"}})],1)}),[],!1,null,null,null).exports,BlockEditor:H,EmailPreview:Object(a.a)(It,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"fc_email_preview",staticStyle:{display:"inline-block"}},[n("el-button",{attrs:{size:"mini",icon:"el-icon-view",type:"primary"},on:{click:function(e){return t.fetchHtml()}}}),t._v(" "),n("el-dialog",{attrs:{title:t.$t("Email Preview (for better view, please send test email)"),visible:t.showing_view,"append-to-body":!0,width:"800px"},on:{"update:visible":function(e){t.showing_view=e}}},[t.loading_preview?n("h3",[t._v(t._s(t.$t("Loading Preview. Please wait...")))]):t._e(),t._v(" "),n("iframe",{directives:[{name:"show",rawName:"v-show",value:!t.loading_preview,expression:"!loading_preview"}],ref:"ifr",staticStyle:{width:"100%",height:"500px"},attrs:{frameborder:"0",allowFullScreen:"",mozallowfullscreen:"",webkitallowfullscreen:""}})])],1)}),[],!1,null,null,null).exports,WpEditor:tt,Pagination:b,MergeCodes:Object(a.a)(Mt,(function(){var t=this.$createElement;return(this._self._c||t)("popover",{staticClass:"popover-wrapper",staticStyle:{display:"inline-block"},attrs:{btnType:"text",buttonText:"{{ }}",data:this.editorShortcodes},on:{command:this.handleCommand}})}),[],!1,null,null,null).exports},data:function(){return{loadingTemplates:!1,templates:[],fetchingTemplate:!1,loading:!1,editor_status:!0,email_template_designs:window.fcAdmin.email_template_designs,templates_modal:!1,email_body_key:this.body_key||"email_body",search:"",pagination:{current_page:1,per_page:10,total:0},query_data:{sort_by:"ID",sort_type:"DESC"},new_template_name:"",new_template_pop:!1,saving_template:!1}},watch:{"campaign.design_template":function(t,e){if(this.editor_status&&this.email_template_designs[t]){var n=this.campaign.settings.template_config,i=this.email_template_designs[t].config;i&&n||(this.campaign.settings.template_config=i),this.each(i,(function(t,e){n[e]&&(i[e]=n[e])})),this.campaign.settings.template_config=i}}},computed:{selectedDesign:function(){var t=this.email_template_designs[this.campaign.design_template];return t||this.email_template_designs.simple},classic_styles:function(){var t=this.campaign.settings.template_config.content_font_family;return t||(t="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol'"),"body {font-family: "+t+";line-height: 150%;padding: 0px 20px 20px;} body p, ul, li, ol { font-size: 16px; }"}},methods:{triggerSave:function(){this.$emit("save")},fetchTemplates:function(){var t=this;this.loading=!0,this.loadingTemplates=!0,this.templates_modal=!0;var e={per_page:this.pagination.per_page,page:this.pagination.current_page,search:this.search,orderBy:this.query_data.sort_by,order:this.query_data.sort_type};this.$get("templates",e).then((function(e){t.templates=e.templates.data,t.pagination.total=e.templates.total,t.loading=!1})).catch((function(t){console.log(t)})).finally((function(){t.loadingTemplates=!1,t.loading=!1,t.editor_status=!0}))},InsertChange:function(t){var e=this;t&&(this.editor_status=!1,this.fetchingTemplate=!0,this.$get("templates/".concat(t)).then((function(n){e.campaign.template_id=t,e.campaign[e.email_body_key]=n.template.post_content,e.campaign.email_subject=n.template.email_subject,e.campaign.email_pre_header=n.template.post_excerpt,e.campaign.design_template=n.template.design_template,e.campaign.settings.template_config=n.template.settings.template_config,e.$emit("template_inserted",n.template)})).catch((function(t){e.handleError(t)})).finally((function(){e.fetchingTemplate=!1,e.editor_status=!0,e.templates_modal=!1})))},handleFixed:function(){this.disable_fixed||window.addEventListener("scroll",(function(t){var e=document.querySelector(".fluentcrm_visual_editor");e&&(e.getBoundingClientRect().top<32?(e.classList.add("fc_element_fixed"),document.querySelector(".fc_visual_header").style.width=e.offsetWidth+"px"):e.classList.remove("fc_element_fixed"))}))},showInserter:function(){jQuery(".fce_inserter button.block-editor-inserter__toggle").trigger("click")},handleSortable:function(t){"descending"===t.order?(this.query_data.sort_by=t.prop,this.query_data.sort_type="desc"):(this.query_data.sort_by=t.prop,this.query_data.sort_type="asc"),this.fetchTemplates()},saveAsTemplate:function(){var t=this;if(!this.new_template_name)return this.$notify.error("Please provide a template name"),!1;var e={post_content:this.campaign[this.email_body_key],email_subject:this.campaign.email_subject,post_excerpt:this.campaign.email_pre_header,design_template:this.campaign.design_template,template_config:this.campaign.settings.template_config,post_title:this.new_template_name,edit_type:"html"};this.saving_template=!0,this.$post("templates",{template:e}).then((function(e){t.$notify.success(e.message),t.new_template_name="",t.new_template_pop=!1})).catch((function(e){t.handleError(e)})).finally((function(){t.saving_template=!1}))}},mounted:function(){this.handleFixed()}},zt=Object(a.a)(Rt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_visual_editor"},[n("div",{staticClass:"fluentcrm_header fc_visual_header"},[n("div",{staticClass:"fluentcrm_header_title"},[t.selectedDesign.use_gutenberg?n("el-button",{attrs:{size:"small",icon:"el-icon-plus"},on:{click:function(e){return t.showInserter()}}}):t._e(),t._v(" "),n("h3",[n("el-popover",{attrs:{placement:"top-start",title:"Tips",width:"200",trigger:"hover"}},[n("div",{staticClass:"text-align-left"},[n("ul",[n("li",[t._v(t._s(t.$t("Type"))+" "),n("code",[t._v("@")]),t._v(" "+t._s(t.$t("to see smart tags")))]),t._v(" "),n("li",[t._v(t._s(t.$t("Type"))+" "),n("code",[t._v("/")]),t._v(" "+t._s(t.$t("to see All Available Blocks")))])])]),t._v(" "),n("span",{staticClass:"el-icon el-icon-help",attrs:{slot:"reference"},slot:"reference"})]),t._v("\n                "+t._s(t.$t("Email Body"))+"\n                "),t.campaign.settings?n("email-style-editor",{staticClass:"ml-5",attrs:{template_config:t.campaign.settings.template_config},on:{save:function(e){return t.triggerSave()}}}):t._e(),t._v(" "),n("email-preview",{attrs:{campaign:t.campaign}})],1),t._v(" "),n("image-radio-tool-tip",{staticStyle:{margin:"-10px 0px !important"},attrs:{boxWidth:53,boxHeight:45,field:{options:t.email_template_designs},tooltip_prefix:"Template - "},model:{value:t.campaign.design_template,callback:function(e){t.$set(t.campaign,"design_template",e)},expression:"campaign.design_template"}})],1),t._v(" "),n("div",{staticClass:"fluentcrm-actions d-flex items-center"},[t.enable_templates?n("el-button",{attrs:{title:t.$t("Use Email Template"),type:"info",size:"small",icon:"el-icon-folder-opened"},on:{click:t.fetchTemplates}},[n("span",[t._v(t._s(t.$t("Use Email Template")))])]):t._e(),t._v(" "),t._t("fc_editor_actions"),t._v(" "),t.enable_template_save?[n("el-dropdown",{attrs:{trigger:"click"}},[n("span",{staticClass:"el-dropdown-link"},[n("i",{staticClass:"el-icon-more fc-icon-90degree el-icon--right",staticStyle:{"font-weight":"bold",cursor:"pointer"}})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[n("el-popover",{attrs:{placement:"right-start",width:"400",trigger:"click"},model:{value:t.new_template_pop,callback:function(e){t.new_template_pop=e},expression:"new_template_pop"}},[n("label",[t._v(t._s(t.$t("Template Name")))]),t._v(" "),n("el-input",{staticStyle:{margin:"10px 0"},attrs:{placeholder:t.$t("Template Name"),type:"text"},model:{value:t.new_template_name,callback:function(e){t.new_template_name=e},expression:"new_template_name"}}),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.saveAsTemplate()}}},[t._v(t._s(t.$t("Save")))]),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving_template,expression:"saving_template"}],attrs:{slot:"reference",disabled:t.saving_template,icon:"el-icon-plus",type:"text"},slot:"reference"},[t._v("\n                                    "+t._s(t.$t("Save as template"))+"\n                                ")])],1)],1)],1)],1)]:t._e(),t._v(" "),t.show_merge?n("merge-codes",{attrs:{extra_tags:t.extra_tags}}):t._e()],2)]),t._v(" "),t.editor_status?n("div",{staticClass:"fc_visual_body"},[t.selectedDesign.use_gutenberg?[n("block-editor",{attrs:{design_template:t.campaign.design_template},model:{value:t.campaign[t.email_body_key],callback:function(e){t.$set(t.campaign,t.email_body_key,e)},expression:"campaign[email_body_key]"}})]:[n("div",{staticClass:"fc_normal_editor_wrapper"},[n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:19}},["classic_editor"==t.selectedDesign.template_type?n("div",{staticClass:"fc_composer_classic"},[n("wp-editor",{attrs:{height:350,extra_style:t.classic_styles},model:{value:t.campaign[t.email_body_key],callback:function(e){t.$set(t.campaign,t.email_body_key,e)},expression:"campaign[email_body_key]"}})],1):n("div",{staticClass:"fc_composer_raw_hrml"},[n("raw-editor",{model:{value:t.campaign[t.email_body_key],callback:function(e){t.$set(t.campaign,t.email_body_key,e)},expression:"campaign[email_body_key]"}})],1)]),t._v(" "),n("el-col",{attrs:{span:5}},[n("div",{staticClass:"fc_template_info"},[n("div",{domProps:{innerHTML:t._s(t.selectedDesign.template_info)}})])])],1)],1)],t._v(" "),t.campaign.settings.template_config&&"yes"==t.campaign.settings.template_config.disable_footer?n("div",{staticClass:"fc_complience_suggest"},[n("p",{staticClass:"fc_editor_warnning"},[t._v(t._s(t.$t("Default footer has been disabled. Please include"))+" "),n("code",[t._v("##crm.unsubscribe_url##")]),t._v("\n                "+t._s(t.$t("or"))+" "),n("code",[t._v("##crm.manage_subscription_url##")]),t._v("\n                "+t._s(t.$t("in your email body for compliance")))]),t._v(" "),n("div",[n("b",[t._v(t._s(t.$t("Suggested text to include:")))]),t._v(" "),n("p",{domProps:{innerHTML:t._s("{{crm.unsubscribe_html|Unsubscribe}} | {{crm.manage_subscription_html|Manage Preference}}")}})])]):t._e()],2):t._e(),t._v(" "),t.enable_templates?n("el-dialog",{staticClass:"fluentcrm_import_email_templates",attrs:{title:t.$t("Select Template"),visible:t.templates_modal,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.templates_modal=e}}},[n("div",{staticClass:"fc-search-box"},[n("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetchTemplates},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchTemplates.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetchTemplates},slot:"append"})],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Available"),data:t.templates,stripe:"",border:""},on:{"sort-change":t.handleSortable}},[n("el-table-column",{attrs:{label:t.$t("ID"),property:"ID",width:"100",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.ID)+"\n                ")]}}],null,!1,4039022800)}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Template Title"),property:"post_title",sortable:"custom"}}),t._v(" "),n("el-table-column",{attrs:{width:"180",label:t.$t("Action")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{icon:"el-icon-upload",type:"info",size:"small"},on:{click:function(n){return t.InsertChange(e.row.ID)}}},[t._v("\n                        "+t._s(t.$t("Import"))+"\n                    ")])]}}],null,!1,460236577)})],1),t._v(" "),n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetchTemplates}})],1):t._e()],1)}),[],!1,null,null,null).exports;function Bt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Bt(Object(n),!0).forEach((function(e){Ut(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ut(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ht={name:"CampaignBodyTemplate",props:["campaign","extra_tags"],components:{EmailBlockComposer:zt},data:function(){return{loading:!1}},methods:{nextStep:function(){var t=this;if(!this.campaign.email_body)return this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peb"),offset:19});this.updateCampaign((function(e){t.$emit("next")}))},updateCampaign:function(t){var e=this;this.loading=!0;var n=JSON.parse(JSON.stringify(this.campaign));delete n.template,this.$put("campaigns/".concat(n.id),Vt(Vt({},n),{},{update_subjects:!0,next_step:1,check_compliance:!!t})).then((function(n){t?t(n):e.$notify.success({message:e.$t("Cam_Email_bsu")})})).catch((function(t){e.handleError(t)})).finally((function(){e.loading=!1}))}}},Gt=Object(a.a)(Ht,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"template"},[n("email-block-composer",{attrs:{extra_tags:t.extra_tags,show_merge:!0,enable_template_save:!0,enable_templates:!0,campaign:t.campaign}},[n("template",{slot:"fc_editor_actions"},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{size:"small",type:"success"},on:{click:function(e){return t.updateCampaign()}}},[t._v(t._s(t.$t("Save")))]),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{size:"small",type:"primary",icon:"el-icon-right"},on:{click:function(e){return t.nextStep()}}},[t._v(t._s(t.$t("Cam_Continue_S")))])],1)],2)],1)}),[],!1,null,null,null).exports,Wt={name:"DynamicSegmentCampaignPromo"},Yt=Object(a.a)(Wt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_promo_body"},[n("div",{staticClass:"promo_block"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{sm:24,md:12}},[n("h2",[t._v(t._s(t.$t("Use your dynamic segments to broadcast Email Campaigns")))]),t._v(" "),n("p",[t._v("\n                    "+t._s(t.$t("create_as_many_dynamic_segment_introduction"))+"\n                ")]),t._v(" "),n("div",{},[n("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                        "+t._s(t.$t("Get FluentCRM Pro"))+"\n                    ")])])]),t._v(" "),n("el-col",{attrs:{sm:24,md:12}},[n("div",{staticClass:"promo_content"},[n("img",{staticClass:"promo_image",attrs:{src:t.appVars.images_url+"/promo/segment_campaign.png"}})])])],1)],1)])}),[],!1,null,null,null).exports,Jt=n(5),Kt=n.n(Jt),Qt={name:"TaxonomySelector",props:["field","value"],data:function(){return{model:this.value,loading:!1,options:[]}},watch:{model:function(t){this.$emit("input",t)}},methods:{fetchOptions:function(t){var e=this;this.loading=!0,this.$get("reports/taxonomy-terms",{search:t,values:this.model,taxonomy:this.field.taxonomy}).then((function(t){e.options=t.options})).catch((function(t){e.handleError(t)})).finally((function(){e.loading=!1}))}},mounted:function(){this.fetchOptions("")}},Zt={name:"ItemTimesSelection",props:["field","value"],components:{AjaxSelector:bt},data:function(){return{model:this.value,loading:!1,options:[]}},watch:{model:function(t){this.$emit("input",t)}},mounted:function(){Kt()(this.model)||(this.model=["",2])}},Xt={name:"RichFilterItem",props:["item","filterLabels"],components:{OptionSelector:vt,AjaxSelector:bt,TaxonomyTermsSelector:Object(a.a)(Qt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-select",{attrs:{multiple:t.field.is_multiple,filterable:"",remote:"","reserve-keyword":"",size:t.field.size,placeholder:t.field.placeholder||t.$t("Please enter a keyword"),"remote-method":t.fetchOptions,loading:t.loading},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.options,(function(t){return n("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)}),[],!1,null,null,null).exports,ItemTimesSelection:Object(a.a)(Zt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_item_num_selector"},[n("ajax-selector",{attrs:{field:{is_multiple:t.field.is_multiple,option_key:t.field.primary_selector,extended_key:t.field.extended_key||"",size:"mini",placeholder:t.field.primary_placeholder,cacheable:t.field.cacheable}},model:{value:t.model[0],callback:function(e){t.$set(t.model,0,e)},expression:"model[0]"}}),t._v(" "),n("el-input",{attrs:{placeholder:t.field.numeric_placeholder,size:"mini",type:"number",min:0},model:{value:t.model[1],callback:function(e){t.$set(t.model,1,e)},expression:"model[1]"}}),t._v(" "),t.field.input_help?n("span",[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.field.input_help,placement:"top-start"}},[n("i",{staticClass:"el-icon el-icon-info"})])],1):t._e()],1)}),[],!1,null,null,null).exports},data:function(){return{}},computed:{operatorOptions:function(){var t=this.itemConfig.type;return"extended_text"==t?{"=":this.$t("equal"),"!=":this.$t("does not equal"),contains:this.$t("includes"),not_contains:this.$t("does not includes"),startsWith:this.$t("starts with"),endsWith:this.$t("ends with")}:t&&"text"!=t?"numeric"==t||"times_numeric"==t?{">":this.$t("Greater Than"),"<":this.$t("Less Than"),"=":this.$t("equal"),"!=":this.$t("does not equal")}:"selections"==t?this.itemConfig.is_multiple&&"subscriber"!=this.itemConfig.provider&&"custom_fields"!=this.itemConfig.provider&&!this.itemConfig.is_singular_value?{in:this.$t("includes in any of"),not_in:this.$t("not includes in any"),in_all:this.$t("includes all of"),not_in_all:this.$t("includes none of")}:this.itemConfig.is_only_in?{in:this.$t("includes in")}:{in:this.$t("includes in"),not_in:this.$t("not includes in")}:"single_assert_option"==t?{"=":this.$t("equal")}:"dates"==t?{before:this.$t("before"),after:this.$t("after"),date_equal:this.$t("in the date"),days_before:this.$t("before days"),days_within:this.$t("within days")}:{}:{"=":this.$t("equal"),"!=":this.$t("does not equal"),contains:this.$t("includes"),not_contains:this.$t("does not includes")}},itemConfig:function(){var t=this.item.source.join("-");return this.filterLabels[t]||{}}},methods:{closingSource:function(t){var e=this;t||setTimeout((function(){jQuery(e.$el).find(".fc_filter_operator .el-select").trigger("click")}),300)},maybeOperatorSelected:function(t){var e=this;!t&&this.item.operator&&("dates"==this.itemConfig.type&&(this.item.value=""),setTimeout((function(){jQuery(e.$el).find(".fc_filter_value input").focus()}),200))},removeItem:function(){this.$emit("removeItem")}},mounted:function(){if(this.itemConfig.is_multiple&&!Kt()(this.item.value)&&(this.item.value=[]),this.item.operator){var t=this.item.operator,e=Object.keys(this.operatorOptions);e.length&&-1===e.indexOf(t)&&(this.item.operator=e[0])}else{var n=Object.keys(this.operatorOptions);n.length&&(this.item.operator=n[0],jQuery(this.$el).find(".fc_filter_operator .el-select").trigger("click"))}}},te=Object(a.a)(Xt,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("tr",[n("td",{staticStyle:{width:"190px","line-height":"110%"}},[t._v("\n        "+t._s(t._f("ucFirst")(t.itemConfig.provider))+" "),n("span",{staticClass:"fs_provider_separator"},[t._v("/")]),t._v("\n        "+t._s(t.itemConfig.label)+"\n        "),t.itemConfig.help?n("span",[n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.itemConfig.help,placement:"top-start"}},[n("i",{staticClass:"el-icon el-icon-info"})])],1):t._e()]),t._v(" "),n("td",{staticClass:"fc_filter_operator",staticStyle:{width:"190px"}},[n("el-select",{attrs:{size:"mini",placeholder:t.$t("Select Operator")},on:{"visible-change":t.maybeOperatorSelected},model:{value:t.item.operator,callback:function(e){t.$set(t.item,"operator",e)},expression:"item.operator"}},t._l(t.operatorOptions,(function(t,e){return n("el-option",{key:e,attrs:{value:e,label:t}})})),1)],1),t._v(" "),n("td",{staticClass:"fc_filter_value"},[t.itemConfig.type&&"text"!=t.itemConfig.type&&"extended_text"!=t.itemConfig.type?"numeric"==t.itemConfig.type?n("el-input",{attrs:{size:"mini",type:"number",placeholder:t.$t("Condition Value")},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}}):"dates"==t.itemConfig.type?["days_before"==t.item.operator||"days_within"==t.item.operator?n("el-input",{attrs:{size:"mini",type:"number",placeholder:t.$t("Days")},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}}):t.item.operator?n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",size:"mini"},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}}):t._e()]:t._e():n("el-input",{attrs:{size:"mini",placeholder:t.$t("Condition Value"),type:"text"},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}}),t._v(" "),"selections"==t.itemConfig.type?["product_selector"==t.itemConfig.component?[n("ajax-selector",{attrs:{field:{is_multiple:t.itemConfig.is_multiple,option_key:"product_selector_"+t.itemConfig.provider,extended_key:t.itemConfig.extended_key||"",size:"mini",cacheable:t.itemConfig.cacheable}},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})]:"options_selector"==t.itemConfig.component?[n("option-selector",{attrs:{field:{is_multiple:t.itemConfig.is_multiple,size:"mini",option_key:t.itemConfig.option_key}},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})]:t.itemConfig.options?[n("el-select",{attrs:{size:"mini",multiple:t.itemConfig.is_multiple,placeholder:t.$t("Select Option")},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}},t._l(t.itemConfig.options,(function(t,e){return n("el-option",{key:e,attrs:{value:e,label:t}})})),1)]:"ajax_selector"==t.itemConfig.component?[n("ajax-selector",{attrs:{field:{is_multiple:t.itemConfig.is_multiple,option_key:t.itemConfig.option_key,size:"mini",cacheable:t.itemConfig.cacheable}},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})]:"tax_selector"==t.itemConfig.component?[n("taxonomy-terms-selector",{attrs:{field:{is_multiple:t.itemConfig.is_multiple,size:"mini",taxonomy:t.itemConfig.taxonomy}},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})]:n("pre",[t._v(t._s(t.itemConfig))])]:"single_assert_option"==t.itemConfig.type?[n("el-select",{attrs:{size:"mini",placeholder:t.$t("Select Option")},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}},t._l(t.itemConfig.options,(function(t,e){return n("el-option",{key:e,attrs:{value:e,label:t}})})),1)]:"times_numeric"==t.itemConfig.type?[n("item-times-selection",{attrs:{field:t.itemConfig},model:{value:t.item.value,callback:function(e){t.$set(t.item,"value",e)},expression:"item.value"}})]:t._e()],2),t._v(" "),n("td",{staticStyle:{width:"50px","text-align":"right"}},[n("el-button",{attrs:{icon:"el-icon-delete",size:"mini",type:"danger"},on:{click:function(e){return t.removeItem()}}})],1)])}),[],!1,null,null,null).exports,ee=n(13),ne=n.n(ee);function ie(t){return function(t){if(Array.isArray(t))return se(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return se(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function ae(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function re(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var oe={name:"RichContactFilter",components:{FilterItem:te},props:{items:{type:Array,default:function(){return[]}},add_label:{type:String,default:function(){return"Add new filter to narrow down your contacts based on different properties"}},filterOptions:{type:Array,default:function(){return this.appVars.advanced_filter_options}}},data:function(){return{addVisible:!1,new_item:[]}},computed:{filterLabels:function(){var t={};return ne()(this.filterOptions,(function(e){ne()(e.children,(function(n){t[e.value+"-"+n.value]=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ae(Object(n),!0).forEach((function(e){re(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ae(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({provider:e.value},n)}))})),t}},methods:{maybeSelected:function(){if(2==this.new_item.length){var t="";"subscriber"==this.new_item[0]&&"country"!=this.new_item[1]&&(t="contains"),this.items.push({source:ie(this.new_item),operator:t,value:""}),this.addVisible=!1,this.new_item=[]}},removeItem:function(t){this.items.splice(t,1),this.items.length||this.$emit("maybeRemove")}}},le=Object(a.a)(oe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_rich_filters"},[t.items.length?n("table",{staticClass:"fc_table",staticStyle:{width:"100%"}},[n("tbody",t._l(t.items,(function(e,i){return n("filter-item",{key:i,attrs:{filterLabels:t.filterLabels,item:e},on:{removeItem:function(e){return t.removeItem(i)}}})})),1)]):t._e(),t._v(" "),0==t.items.length?n("div",{staticClass:"fc_filter_intro fc_pad_around_5"},[n("el-popover",{attrs:{placement:"right",width:"450",trigger:"manual"},model:{value:t.addVisible,callback:function(e){t.addVisible=e},expression:"addVisible"}},[n("el-cascader-panel",{staticStyle:{width:"100%"},attrs:{options:t.filterOptions},on:{change:t.maybeSelected},model:{value:t.new_item,callback:function(e){t.new_item=e},expression:"new_item"}}),t._v(" "),n("el-button",{attrs:{slot:"reference",size:"small",icon:"el-icon-plus"},on:{click:function(e){t.addVisible=!t.addVisible}},slot:"reference"},[t._v("\n                "+t._s(t.$t("Add"))+"\n            ")])],1),t._v("\n        "+t._s(t.add_label)+" "),n("el-button",{staticStyle:{float:"right"},attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.$emit("maybeRemove")}}})],1):n("div",{staticClass:"fc_filter_intro fc_pad_around_5"},[n("el-popover",{attrs:{placement:"right",width:"450",trigger:"manual"},model:{value:t.addVisible,callback:function(e){t.addVisible=e},expression:"addVisible"}},[n("el-cascader-panel",{staticStyle:{width:"100%"},attrs:{options:t.filterOptions},on:{change:t.maybeSelected},model:{value:t.new_item,callback:function(e){t.new_item=e},expression:"new_item"}}),t._v(" "),n("el-button",{attrs:{slot:"reference",size:"small",icon:"el-icon-plus"},on:{click:function(e){t.addVisible=!t.addVisible}},slot:"reference"},[t._v("\n                "+t._s(t.$t("Add"))+"\n            ")])],1),t._v("\n        "+t._s(t.add_label)+"\n    ")],1)])}),[],!1,null,null,null).exports,ce={name:"AdvancedFilterPromo"},ue=Object(a.a)(ce,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_promo_body"},[n("div",{staticClass:"promo_block",staticStyle:{background:"#f9fafa",padding:"20px","text-align":"center",display:"block",overflow:"hidden"}},[n("h2",[t._v(t._s(t.$t("Advanced Filter is a pro feature")))]),t._v(" "),n("p",[t._v("\n            "+t._s(t.$t("segment_your_contacts"))+"\n        ")]),t._v(" "),n("div",{},[n("a",{staticClass:"el-button el-button--primary",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                "+t._s(t.$t("Get FluentCRM Pro"))+"\n            ")])])])])}),[],!1,null,null,null).exports,_e={name:"recipientTagger",props:["value"],components:{DynamicSegmentCampaignPromo:Yt,RichFilter:le,AdvancedFilterPromo:ue},data:function(){return{settings:this.value,fetchingData:!1,settings_mock:{subscribers:[{list:null,tag:null}],excludedSubscribers:[{list:null,tag:null}],sending_filter:"list_tag",dynamic_segment:{id:"",slug:""},advanced_filters:[[]]},lists:[],tags:[],segments:[],advanced_filters:[[]],estimated_count:0,estimating:!1}},computed:{all_tag_groups:function(){return{all:{title:"",options:[{title:this.$t("Rec_All_coSLs"),slug:"all",id:"all"}]},tags:{title:this.$t("Tags"),options:this.tags}}}},watch:{settings:{handler:function(t,e){this.$emit("input",t),"advanced_filters"!=this.settings.sending_filter&&this.fetchEstimatedCount()},deep:!0}},methods:{fetch:function(){var t=this;this.fetchingData=!0,this.$get("reports/options",{fields:"lists,tags,segments",with_count:["lists"]}).then((function(e){t.lists=e.options.lists,t.tags=e.options.tags,t.segments=e.options.segments})).catch((function(e){t.handleError(e)})).finally((function(){t.fetchingData=!1}))},add:function(t,e){this.settings[t].splice(e+1,0,{list:"subscribers"==t?"all":null,tag:"all"})},remove:function(t,e){this.settings[t].length>1&&this.settings[t].splice(e,1)},fetchEstimatedCount:function(){var t=this,e=this.settings,n={sending_filter:e.sending_filter};if("list_tag"==e.sending_filter){var i=e.subscribers.filter((function(t){return t.list&&t.tag})),s=e.excludedSubscribers.filter((function(t){return t.list&&t.tag}));if(!i.length)return!1;s.length&&(n.excludedSubscribers=s),n.subscribers=i}else if("dynamic_segment"==e.sending_filter){if(!e.dynamic_segment.uid)return!1;n.dynamic_segment=e.dynamic_segment}else{if("advanced_filters"!=e.sending_filter)return!1;n.advanced_filters=JSON.stringify(this.advanced_filters)}this.estimating=!0,this.$post("campaigns/estimated-contacts",n).then((function(e){t.estimated_count=e.count})).catch((function(e){t.handleError(e)})).finally((function(){t.estimating=!1}))},addConditionGroup:function(){this.advanced_filters.push([])},maybeRemoveGroup:function(t){this.advanced_filters.length>1&&this.advanced_filters.splice(t,1)}},mounted:function(){this.fetch(),this.fetchEstimatedCount()},created:function(){var t=JSON.parse(JSON.stringify(this.settings_mock));this.settings?(this.settings.subscribers||(this.settings.subscribers=t.subscribers),this.settings.excludedSubscribers||(this.settings.excludedSubscribers=t.excludedSubscribers),this.settings.dynamic_segment||(this.settings.dynamic_segment=t.dynamic_segment),this.settings.advanced_filters?this.advanced_filters=this.settings.advanced_filters:this.settings.advanced_filters=this.advanced_filters,this.settings.sending_filter||(this.settings.sending_filter=t.sending_filter)):this.settings=t}},de=Object(a.a)(_e,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_recipient_tagger"},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.fetchingData,expression:"fetchingData"}]},[n("div",{staticClass:"text-align-center",staticStyle:{"margin-bottom":"20px"}},[n("el-radio-group",{model:{value:t.settings.sending_filter,callback:function(e){t.$set(t.settings,"sending_filter",e)},expression:"settings.sending_filter"}},[n("el-radio-button",{attrs:{label:"list_tag"}},[t._v(t._s(t.$t("By List & Tag")))]),t._v(" "),n("el-radio-button",{attrs:{label:"dynamic_segment"}},[t._v(t._s(t.$t("By Dynamic Segment")))]),t._v(" "),n("el-radio-button",{attrs:{label:"advanced_filters"}},[t._v(t._s(t.$t("By Advanced Filter")))])],1)],1),t._v(" "),"list_tag"==t.settings.sending_filter?[n("div",{staticClass:"fc_narrow_box fc_white_inverse"},[n("div",{staticClass:"fc_section_heading"},[n("h3",[t._v(t._s(t.$t("Included Contacts")))]),t._v(" "),n("p",[t._v("\n                        "+t._s(t.$t("Rec_Select_LaTtywtse"))+"\n                    ")])]),t._v(" "),n("table",{staticClass:"fc_horizontal_table"},[n("thead",[n("tr",[n("th",[t._v(t._s(t.$t("Select A List")))]),t._v(" "),n("th",[t._v(t._s(t.$t("Select Tag")))]),t._v(" "),n("th",[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),n("tbody",t._l(t.settings.subscribers,(function(e,i){return n("tr",{key:i},[n("td",[n("el-select",{attrs:{size:"small",placeholder:t.$t("Choose a List"),"popper-class":"list"},model:{value:e.list,callback:function(n){t.$set(e,"list",n)},expression:"formItem.list"}},[n("el-option",{attrs:{label:t.$t("All Lists"),value:"all"}},[n("span",[t._v("\n                                        "+t._s(t.$t("All available subscribers"))+"\n                                    ")]),t._v(" "),n("span",{staticClass:"list-metrics"},[t._v("\n                                        "+t._s(t.$t("Rec_This_wfaac"))+"\n                                    ")])]),t._v(" "),t._l(t.lists,(function(e){return n("el-option",{key:e.id,attrs:{label:e.title,value:String(e.id)}},[n("span",[t._v("\n                                        "+t._s(e.title)+"\n                                    ")]),t._v(" "),n("span",{staticClass:"list-metrics"},[t._v("\n                                        "+t._s(e.subscribersCount)+" "+t._s(t.$t("subscribed contacts"))+"\n                                    ")])])}))],2)],1),t._v(" "),n("td",[n("el-select",{attrs:{placeholder:t.$t("Select Tag"),size:"small"},model:{value:e.tag,callback:function(n){t.$set(e,"tag",n)},expression:"formItem.tag"}},t._l(t.all_tag_groups,(function(e,i){return n("el-option-group",{key:i,attrs:{label:e.title}},t._l(e.options,(function(e,i){return n("el-option",{key:i,attrs:{label:e.title,value:String(e.id)}},[n("span",[t._v(t._s(e.title))])])})),1)})),1)],1),t._v(" "),n("td",[n("el-button-group",[n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.add("subscribers",i)}}},[t._v("+")]),t._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.remove("subscribers",i)}}},[t._v("-")])],1)],1)])})),0)]),t._v(" "),n("p",[t._v(t._s(t.$t("Rec_Select_Loasfatst")))])]),t._v(" "),n("div",{staticClass:"fc_narrow_box fc_white_inverse"},[n("div",{staticClass:"fc_section_heading"},[n("h3",[t._v(t._s(t.$t("Excluded Contacts")))]),t._v(" "),n("p",[t._v(t._s(t.$t("Rec_Select_LaTtywtef")))])]),t._v(" "),n("table",{staticClass:"fc_horizontal_table"},[n("thead",[n("tr",[n("th",[t._v(t._s(t.$t("Select A List")))]),t._v(" "),n("th",[t._v(t._s(t.$t("Select Tag")))]),t._v(" "),n("th",[t._v(t._s(t.$t("Actions")))])])]),t._v(" "),n("tbody",t._l(t.settings.excludedSubscribers,(function(e,i){return n("tr",{key:i},[n("td",[n("el-select",{attrs:{size:"small",placeholder:t.$t("Choose a List"),"popper-class":"list"},model:{value:e.list,callback:function(n){t.$set(e,"list",n)},expression:"formItem.list"}},[n("el-option",{attrs:{label:t.$t("All Lists"),value:"all"}},[n("span",[t._v("\n                                        "+t._s(t.$t("All available contacts"))+"\n                                    ")]),t._v(" "),n("span",{staticClass:"list-metrics"},[t._v("\n                                        "+t._s(t.$t("Rec_This_wfaac"))+"\n                                    ")])]),t._v(" "),t._l(t.lists,(function(e){return n("el-option",{key:e.id,attrs:{label:e.title,value:String(e.id)}},[n("span",[t._v("\n                                        "+t._s(e.title)+"\n                                    ")]),t._v(" "),n("span",{staticClass:"list-metrics"},[t._v("\n                                        "+t._s(e.subscribersCount)+" "+t._s(t.$t("subscribed contacts"))+"\n                                    ")])])}))],2)],1),t._v(" "),n("td",[n("el-select",{attrs:{placeholder:t.$t("Select"),size:"small"},model:{value:e.tag,callback:function(n){t.$set(e,"tag",n)},expression:"formItem.tag"}},t._l(t.all_tag_groups,(function(e,i){return n("el-option-group",{key:i,attrs:{label:e.title}},t._l(e.options,(function(e,i){return n("el-option",{key:i,attrs:{label:e.title,value:String(e.id)}},[n("span",[t._v(t._s(e.title))])])})),1)})),1)],1),t._v(" "),n("td",[n("el-button-group",[n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.add("excludedSubscribers",i)}}},[t._v("+")]),t._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.remove("excludedSubscribers",i)}}},[t._v("-")])],1)],1)])})),0)])])]:"dynamic_segment"==t.settings.sending_filter?[n("div",{staticClass:"fc_narrow_box fc_white_inverse"},[t.has_campaign_pro?[n("div",{staticClass:"fc_section_heading"},[n("h3",[t._v(t._s(t.$t("Select Dynamic Segment")))]),t._v(" "),n("p",[t._v(t._s(t.$t("Rec_Please_stwdsywts")))])]),t._v(" "),n("el-select",{attrs:{placeholder:t.$t("Select"),"value-key":"uid"},model:{value:t.settings.dynamic_segment,callback:function(e){t.$set(t.settings,"dynamic_segment",e)},expression:"settings.dynamic_segment"}},t._l(t.segments,(function(t){return n("el-option",{key:t.slug+"_"+t.id,attrs:{value:{uid:t.slug+"_"+t.id,slug:t.slug,id:t.id},label:t.title}})})),1)]:n("dynamic-segment-campaign-promo")],2)]:"advanced_filters"==t.settings.sending_filter?[n("div",{staticClass:"fc_narrow_box fc_white_inverse"},[t.has_campaign_pro?n("div",{staticClass:"fc_rich_container"},[n("div",{staticClass:"fc_section_heading"},[n("h3",[t._v(t._s(t.$t("Select custom contacts by advanced filters")))])]),t._v(" "),n("div",{staticClass:"fc_rich_wrap"},t._l(t.advanced_filters,(function(e,i){return n("div",{key:i},[n("div",{staticClass:"fc_rich_filter"},[n("rich-filter",{attrs:{items:e},on:{maybeRemove:function(e){return t.maybeRemoveGroup(i)}}})],1),t._v(" "),n("div",{staticClass:"fc_cond_or"},[n("em",[t._v(t._s(t.$t("OR")))])])])})),0),t._v(" "),n("div",{staticClass:"fc_cond_or"},[n("em",{staticStyle:{cursor:"pointer",color:"rgb(0, 119, 204)","font-weight":"bold"},on:{click:function(e){return t.addConditionGroup()}}},[n("i",{staticClass:"el-icon-plus"}),t._v(" "+t._s(t.$t("OR")))])]),t._v(" "),n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.fetchEstimatedCount()}}},[t._v(t._s(t.$t("Filter")))]),t._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(e){t.settings.advanced_filters=[[]],t.fetch()}}},[t._v("\n                        "+t._s(t.$t("Clear Filters"))+"\n                    ")])],1):n("advanced-filter-promo")],1)]:t._e(),t._v(" "),n("h3",{directives:[{name:"loading",rawName:"v-loading",value:t.estimating,expression:"estimating"}],staticClass:"text-align-center fc_counting_heading",staticStyle:{"margin-bottom":"40px"}},[n("span",[t._v(t._s(t.estimated_count))]),t._v("\n            "+t._s(t.$t("Rec_contacts_fboys")))])],2),t._v(" "),t._t("fc_tagger_bottom")],2)}),[],!1,null,null,null).exports,pe=n(6),me=n.n(pe);function fe(t){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var he={name:"Recipients",components:{RecipientTaggerForm:de},props:["campaign"],data:function(){return{btnDeleting:!1,btnSubscribing:!1,inserting_page:1,inserting_total_page:0,total_contacts:0,inserted_total:0,inserting_now:!1,processingError:!1}},computed:{progressPercent:function(){return this.total_contacts?parseInt(this.inserted_total/this.total_contacts*100):1}},methods:{validateLists:function(){var t=this,e=this.campaign.settings,n=e.subscribers.filter((function(t){return t.list&&t.tag})),i=e.excludedSubscribers.filter((function(t){return t.list&&t.tag}));if("list_tag"===e.sending_filter){if(n.length!==e.subscribers.length||i.length&&i.length!==e.excludedSubscribers.length)return void this.$notify.error({title:this.$t("Oops!"),message:this.$t("Invalid selection of lists and tags in contacts included."),offset:19})}else if("dynamic_segment"==e.sending_filter){if(!e.dynamic_segment.uid)return void this.$notify.error({title:this.$t("Oops!"),message:this.$t("Please select the segment"),offset:19})}else if("advanced_filters"==e.sending_filter){var s=!1;if(ne()(e.advanced_filters,(function(t){me()(t)||(s=!0)})),!s)return void this.$notify.error({title:this.$t("Oops!"),message:this.$t("Please select the filters"),offset:19})}var a={subscribers:n,excludedSubscribers:i,sending_filter:e.sending_filter,dynamic_segment:e.dynamic_segment,page:this.inserting_page,advanced_filters:JSON.stringify(e.advanced_filters)};this.btnSubscribing=!0,this.inserting_now=!0,this.processingError=!1,this.$post("campaigns/".concat(this.campaign.id,"/subscribe"),a).then((function(e){if("object"!=fe(e))return t.handleError(e),void(t.processingError=e);e.has_more?(t.inserting_page=e.next_page,t.inserted_total=e.count,t.$nextTick((function(){t.validateLists()}))):(t.campaign.recipients_count=e.count,t.$notify.success({title:t.$t("Great!"),message:t.$t("Contacts has been attached with this campaign"),offset:19}),t.$emit("next",1),t.btnSubscribing=!1,t.inserting_now=!1,t.inserting_page=1)})).catch((function(e){t.handleError(e),t.processingError=e||"Unknown error"})).finally((function(){}))},startOver:function(){this.processingError=!1,this.btnSubscribing=!1,this.inserting_now=!1},retryProcess:function(){this.processingError=!1,this.validateLists()},goToPrev:function(){this.$emit("prev",1)},fetchEstimated:function(){var t=this,e=this.campaign.settings,n=e.subscribers.filter((function(t){return t.list&&t.tag})),i=e.excludedSubscribers.filter((function(t){return t.list&&t.tag}));if("list_tag"===e.sending_filter){if(n.length!==e.subscribers.length||i.length&&i.length!==e.excludedSubscribers.length)return}else if("dynamic_segment"==e.sending_filter){if(!e.dynamic_segment.uid)return}else if("advanced_filters"==e.sending_filter){var s=!1;if(ne()(e.advanced_filters,(function(t){me()(t)||(s=!0)})),!s)return}var a={subscribers:n,excludedSubscribers:i,sending_filter:e.sending_filter,dynamic_segment:e.dynamic_segment,advanced_filters:JSON.stringify(e.advanced_filters)};this.$post("campaigns/estimated-contacts",a).then((function(e){t.total_contacts=e.count})).catch((function(e){t.handleError(e)}))},start_process:function(){this.validateLists(),this.fetchEstimated()}}},ve=(n(258),Object(a.a)(he,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"recipients"},[t.inserting_now?n("div",{staticClass:"text-align-center"},[n("h3",[t._v(t._s(t.$t("Processing now...")))]),t._v(" "),n("h4",[t._v(t._s(t.$t("Rec_Please_dnctw")))]),t._v(" "),t.total_contacts?[n("h2",[t._v(t._s(t.inserted_total)+"/"+t._s(t.total_contacts))]),t._v(" "),n("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:t.progressPercent,status:"success"}}),t._v(" "),n("p",{directives:[{name:"loading",rawName:"v-loading",value:t.inserting_now&&!t.processingError,expression:"inserting_now && !processingError"}]},[t._v("Processing now. Please wait a bit...")])]:t._e(),t._v(" "),t.processingError?n("div",[n("h3",[t._v(t._s(t.$t("Rec_Processing_EhMit")))]),t._v(" "),n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.retryProcess()}}},[t._v(t._s(t.$t("Resume")))]),t._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.startOver()}}},[t._v(t._s(t.$t("StartOver")))]),t._v(" "),n("div",{staticStyle:{"text-align":"left"}},[n("h3",[t._v("Error Details")]),t._v(" "),n("pre",[t._v(t._s(t.processingError))])])],1):t._e()],2):n("el-form",[n("recipient-tagger-form",{model:{value:t.campaign.settings,callback:function(e){t.$set(t.campaign,"settings",e)},expression:"campaign.settings"}}),t._v(" "),n("el-row",{staticStyle:{"max-width":"860px",margin:"0 auto"},attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("el-button",{attrs:{size:"small",type:"text"},on:{click:function(e){return t.goToPrev()}}},[t._v(" "+t._s(t.$t("Back"))+"\n                ")])],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-button",{staticClass:"pull-right",attrs:{size:"small",type:"success",loading:t.btnSubscribing},on:{click:function(e){return t.start_process()}}},[t._v("\n                    "+t._s(t.$t("Rec_Continue_TNS_aS"))+"\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports),ge={name:"EmailPreview",props:["preview"],data:function(){return{email:null,info:{},loading:!1}},methods:{fetch:function(){var t=this;this.email=null,this.loading=!0,this.$get("campaigns/emails/".concat(this.preview.id,"/preview")).then((function(e){t.email=e.email,t.info=e.info})).finally((function(){t.loading=!1}))},onOpen:function(){this.fetch()},onClosed:function(){this.preview.isVisible=!1}}},be=Object(a.a)(ge,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-dialog",{attrs:{width:"60%",title:t.$t("Email Preview"),"append-to-body":!0,visible:t.preview.isVisible},on:{open:t.onOpen,"update:visible":function(e){return t.$set(t.preview,"isVisible",e)}}},[t.email?t._e():n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]}),t._v(" "),t.email?n("div",{staticStyle:{"min-height":"300px"}},[n("ul",{staticClass:"email-header"},[n("li",[t._v(t._s(t.$t("Status"))+": "+t._s(t.info.status))]),t._v(" "),n("li",[t._v(t._s(t.$t("Campaign"))+": "+t._s(t.info.campaign?t.info.campaign.title:"n/a"))]),t._v(" "),n("li",[t._v(t._s(t.$t("Subject"))+": "+t._s(t.email.subject?t.email.subject:""))]),t._v(" "),n("li",[t._v(t._s(t.$t("To"))+": "+t._s(t.email.to.name)+" <"+t._s(t.email.to.email)+">")]),t._v(" "),n("li",[t._v(t._s(t.$t("Date"))+": "+t._s(t._f("nsDateFormat")(t.info.scheduled_at)))]),t._v(" "),n("li",{staticClass:"stats_badges"},[n("span",{attrs:{title:t.$t("Open Count")}},[n("i",{staticClass:"el-icon el-icon-folder-opened"}),t._v(" "),n("span",[t._v(t._s(t.info.is_open||0))])]),t._v(" "),n("span",{attrs:{title:t.$t("Click")}},[n("i",{staticClass:"el-icon el-icon-position"}),t._v(" "),n("span",[t._v(t._s(t.info.click_counter||0))])])]),t._v(" "),t.info.note?n("li",[t._v(t._s(t.$t("Note"))+": "+t._s(t.info.note))]):t._e()]),t._v(" "),t.email.clicks&&t.email.clicks.length?n("div",{staticClass:"fc_email_clicks"},[n("h4",[t._v(t._s(t.$t("Email Clicks")))]),t._v(" "),n("ul",t._l(t.email.clicks,(function(e){return n("li",{key:e.id},[t._v(t._s(e.url)+" ("+t._s(e.counter)+")")])})),0)]):t._e(),t._v(" "),"sent"==t.info.status?n("p",{staticStyle:{color:"#ff3434"}},[t._v(t._s(t.$t("preview_email_info")))]):t._e(),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"email-body"},[n("div",{staticStyle:{clear:"both"},domProps:{innerHTML:t._s(t.email.body)}}),t._v(" "),n("div",{staticStyle:{width:"0px",height:"0px",clear:"both"}})])]):t._e(),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"danger"},on:{click:function(e){t.preview.isVisible=!1}}},[t._v(t._s(t.$t("Close")))])],1)])],1)}),[],!1,null,null,null).exports,ye={name:"GenericPromo"},we=Object(a.a)(ye,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_promo_body"},[n("div",{staticClass:"promo_block",staticStyle:{background:"white",padding:"10px","text-align":"center",display:"block",overflow:"hidden"}},[n("h2",[t._v(t._s(t.$t("This is a pro feature")))]),t._v(" "),n("p",[t._v("\n            "+t._s(t.$t("Lin_This_iapfPdtFPta"))+"\n        ")]),t._v(" "),n("div",{},[n("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v(t._s(t.$t("Get FluentCRM Pro")))])])])])}),[],!1,null,null,null).exports,$e={name:"CampaignEmails",components:{Pagination:b,EmailPreview:be,GenericPromo:we},props:["campaign_id","manage_mode"],data:function(){return{loading:!1,emails:[],pagination:{total:0,per_page:20,current_page:1},preview:{id:null,isVisible:!1},filter_type:"all",selections:[],search:"",deleting:!1,failed_counts:0,retrying:!1,resending:!1}},methods:{fetch:function(){var t=this;this.loading=!0;var e={viewCampaign:null,per_page:this.pagination.per_page,page:this.pagination.current_page,filter_type:this.filter_type,search:this.search};this.$get("campaigns/".concat(this.campaign_id,"/emails"),e).then((function(e){t.emails=e.emails.data,t.pagination.total=e.emails.total,t.failed_counts=parseInt(e.failed_counts)})).catch((function(e){t.handleError(e)})).finally((function(e){t.loading=!1}))},changeFilter:function(){this.pagination.current_page=1,this.fetch()},previewEmail:function(t){this.preview.id=t,this.preview.isVisible=!0},deleteSelected:function(){var t=this;this.deleting=!0;var e=this.selections.map((function(t){return t.id}));this.$del("campaigns/".concat(this.campaign_id,"/emails"),{email_ids:e}).then((function(e){t.selections=[],t.$notify.success(e.message),t.$emit("updateCount",e.recipients_count),t.fetch()})).catch((function(e){t.handleError(e)})).finally((function(){t.deleting=!1}))},handleSelectionChange:function(t){this.selections=t},retrySending:function(){var t=this;this.retrying=!0,this.$post("campaigns-pro/".concat(this.campaign_id,"/resend-failed-emails")).then((function(e){t.$notify.success(e.message),t.fetch(),t.$emit("fetchCampaign")})).catch((function(e){t.handleError(e)})).finally((function(){t.retrying=!1}))},resendEmail:function(t){var e=this;if(!this.has_campaign_pro)return this.$notify.error(this.$t("_Ca_Please_utptutf")),!1;this.resending=!0,this.$post("campaigns-pro/".concat(t.campaign_id,"/resend-emails"),{email_ids:[t.id]}).then((function(t){e.$notify.success(t.message),e.fetch()})).catch((function(t){e.handleError(t)})).finally((function(){e.resending=!1}))}},mounted:function(){this.fetch()}},ke=Object(a.a)($e,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_campaign_emails"},[n("div",{staticClass:"fluentcrm_inner_header"},[n("h3",{staticClass:"fluentcrm_inner_title"},[t._v(t._s(t.$t("Recipients")))]),t._v(" "),n("div",{staticClass:"fluentcrm_inner_actions d-flex items-center"},[n("div",{staticClass:"fluentcrm-searcher mr-5"},[n("el-input",{staticClass:"input-with-select",staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:t.$t("Search")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.fetch()}},slot:"append"})],1)],1),t._v(" "),n("el-radio-group",{attrs:{size:"mini"},on:{change:function(e){return t.changeFilter()}},model:{value:t.filter_type,callback:function(e){t.filter_type=e},expression:"filter_type"}},[n("el-radio-button",{attrs:{label:"all"}},[t._v(t._s(t.$t("All")))]),t._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:t.$t("Click"),placement:"top"}},[n("el-radio-button",{attrs:{label:"click"}},[n("i",{staticClass:"el-icon el-icon-position"})])],1),t._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:t.$t("View"),placement:"top"}},[n("el-radio-button",{attrs:{label:"view"}},[n("i",{staticClass:"el-icon el-icon-folder-opened"})])],1)],1),t._v(" "),n("el-button",{staticClass:"ml-5 refresh-campaign-btn",attrs:{size:"mini"},on:{click:t.fetch}},[n("i",{staticClass:"el-icon el-icon-refresh"})])],1)]),t._v(" "),t.failed_counts?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.retrying,expression:"retrying"}],staticClass:"fc_highlight_gray fc_m_30 text-align-center"},[n("h3",[t._v(t._s(t.failed_counts)+" "+t._s(t.$t("_Ca_failed_tstrTR")))]),t._v(" "),t.has_campaign_pro?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.retrySending()}}},[t._v(t._s(t.$t("Retry Sending")))]):n("generic-promo")],1):t._e(),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading||t.resending,expression:"loading || resending"}],staticStyle:{width:"100%"},attrs:{stripe:"",border:"",data:t.emails},on:{"selection-change":t.handleSelectionChange}},[t.manage_mode?n("el-table-column",{attrs:{type:"selection",width:"55"}}):t._e(),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Name"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("img",{staticClass:"fc_contact_photo",staticStyle:{display:"inline-block","margin-bottom":"-6px"},attrs:{title:t.$t("Contact ID:")+e.row.subscriber.id,src:e.row.subscriber.photo}}),t._v(" "),n("span",[t._v(t._s(e.row.subscriber.full_name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Email"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{name:"subscriber",params:{id:e.row.subscriber_id}}}},[t._v("\n                    "+t._s(e.row.email_address)+"\n                ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"190",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{staticClass:"ns_counter",attrs:{title:"Total Clicks"}},[n("i",{staticClass:"el-icon el-icon-position"}),t._v(" "+t._s(e.row.click_counter||0))]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.row.click_counter||1==e.row.is_open,expression:"scope.row.click_counter || scope.row.is_open == 1"}],staticClass:"ns_counter",attrs:{title:"Email opened"}},[n("i",{staticClass:"el-icon el-icon-folder-opened"})]),t._v(" "),"subscribed"!=e.row.subscriber.status?n("span",{staticClass:"ns_counter",staticStyle:{display:"block","margin-top":"5px"}},[t._v(t._s(t._f("ucFirst")(e.row.subscriber.status)))]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{prop:"scheduled_at",width:"190",label:t.$t("Date")}}),t._v(" "),n("el-table-column",{attrs:{width:"120",label:t.$t("Status"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{class:"status-"+e.row.status},[t._v("\n                    "+t._s(t._f("ucFirst")(e.row.status))+"\n                ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Preview"),width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-view"},on:{click:function(n){return t.previewEmail(e.row.id)}}}),t._v(" "),"sent"!=e.row.status&&"failed"!=e.row.status||!t.hasPermission("fcrm_manage_emails")||"subscribed"!=e.row.subscriber.status?t._e():n("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-refresh-right"},on:{click:function(n){return t.resendEmail(e.row)}}},[t._v(t._s(t.$t("Resend"))+"\n                ")])]}}])})],1),t._v(" "),n("el-row",[n("el-col",{attrs:{span:12}},[n("div",{staticStyle:{"margin-top":"10px"}},[t.selections.length?n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],attrs:{icon:"el-icon-delete",type:"danger",size:"small"},on:{click:function(e){return t.deleteSelected()}}},[t._v("\n                    "+t._s(t.$t("Delete Selected"))+" ("+t._s(t.selections.length)+")\n                ")]):t._e()],1)]),t._v(" "),n("el-col",{attrs:{span:12}},[n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)],1),t._v(" "),n("email-preview",{attrs:{preview:t.preview}})],1)}),[],!1,null,null,null).exports,xe={name:"CampaignReview",props:["campaign"],components:{CampaignEmails:ke},data:function(){return{btnSending:!1,sendingTestEmail:!1,sending_type:"send_now",schedule_date_time:"",subscribers_modal:!1,pickerOptions:{disabledDate:function(t){return t.getTime()<=Date.now()-864e5},shortcuts:[{text:this.$t("After 1 Hour"),onClick:function(t){var e=new Date;e.setTime(e.getTime()+36e5),t.$emit("pick",e)}},{text:this.$t("Tomorrow"),onClick:function(t){var e=new Date;e.setTime(e.getTime()+864e5),t.$emit("pick",e)}},{text:this.$t("After 2 Days"),onClick:function(t){var e=new Date;e.setTime(e.getTime()+1728e5),t.$emit("pick",e)}},{text:this.$t("After 1 Week"),onClick:function(t){var e=new Date;e.setTime(e.getTime()+6048e5),t.$emit("pick",e)}}]},test_email:"",send_test_pop:!1}},methods:{sendEmails:function(){var t=this;this.btnSending=!0;var e={};"schedule"===this.sending_type&&(e.scheduled_at=this.schedule_date_time),this.$post("campaigns/".concat(this.campaign.id,"/schedule"),e).then((function(e){t.$notify.success({title:t.$t("Great!"),message:e.message,offset:19}),t.$router.push({name:"campaign-view",params:{id:t.campaign.id}})})).catch((function(e){t.$notify.error(e.message)})).finally((function(){t.btnSending=!1}))},goToStep:function(t){this.$emit("goToStep",t)},sendTestEmail:function(){var t=this;this.sendingTestEmail=!0,this.$post("campaigns/send-test-email",{campaign_id:this.campaign.id,email:this.test_email}).then((function(e){t.$notify.success({title:t.$t("Great!"),message:e.message,offset:19})})).catch((function(e){t.handleError(e),console.log(e)})).finally((function(){t.sendingTestEmail=!1,t.send_test_pop=!1}))},saveThisStep:function(){this.$post("campaigns/".concat(this.campaign.id,"/step"),{next_step:3})}},mounted:function(){this.saveThisStep()}},Ce={name:"Campaign",components:{CampaignTemplate:D,Recipients:ve,CampaignReview:Object(a.a)(xe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"camapign_review_wrapper"},[n("div",{staticClass:"campaign_review_items"},[n("div",{staticClass:"camapign_review_item"},[n("el-row",[n("el-col",{attrs:{span:20}},[n("h3",[t._v(t._s(t.$t("Recipients")))]),t._v("\n                    "+t._s(t.$t("Total:"))+" "),n("b",[t._v(t._s(t.campaign.recipients_count)+" "+t._s(t.$t("Recipients")))])]),t._v(" "),n("el-col",{staticClass:"text-align-right",attrs:{span:4}},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.subscribers_modal=!0}}},[t._v(t._s(t.$t("View Recipients")))])],1)],1)],1),t._v(" "),n("div",{staticClass:"camapign_review_item"},[n("el-row",[n("el-col",{attrs:{span:20}},[n("h3",[t._v(t._s(t.$t("Subject")))]),t._v(" "),n("p",[t._v(t._s(t.campaign.email_subject))]),t._v(" "),n("p",{staticStyle:{color:"gray"}},[t._v(t._s(t.$t("Preview Text:"))+" "+t._s(t.campaign.email_pre_header))])]),t._v(" "),n("el-col",{staticClass:"text-align-right",attrs:{span:4}},[n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.goToStep(1)}}},[t._v(t._s(t.$t("Edit Subject")))])],1)],1)],1),t._v(" "),n("div",{staticClass:"camapign_review_item"},[n("el-row",[n("el-col",{attrs:{span:20}},[n("h3",[t._v(t._s(t.$t("Email Body")))]),t._v(" "),n("div",{staticClass:"fluentcrm_email_body_preview",domProps:{innerHTML:t._s(t.campaign.email_body)}}),t._v(" "),n("br"),t._v(" "),n("el-popover",{attrs:{placement:"right",width:"400",trigger:"manual"},model:{value:t.send_test_pop,callback:function(e){t.send_test_pop=e},expression:"send_test_pop"}},[n("div",[n("p",[t._v(t._s(t.$t("Cam_Type_cetstolbtsc")))]),t._v(" "),n("el-input",{attrs:{placeholder:t.$t("Email Address")},model:{value:t.test_email,callback:function(e){t.test_email=e},expression:"test_email"}},[n("template",{slot:"append"},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.sendingTestEmail,expression:"sendingTestEmail"}],attrs:{type:"success"},on:{click:function(e){return t.sendTestEmail()}}},[t._v("\n                                        "+t._s(t.$t("Send"))+"\n                                    ")])],1)],2)],1),t._v(" "),n("el-button",{attrs:{slot:"reference",size:"small"},on:{click:function(e){t.send_test_pop=!t.send_test_pop}},slot:"reference"},[t._v("\n                            "+t._s(t.$t("Send a test email"))+"\n                        ")])],1)],1),t._v(" "),n("el-col",{staticClass:"text-align-right",attrs:{span:4}},[n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.goToStep(0)}}},[t._v("\n                        "+t._s(t.$t("Edit Email Body"))+"\n                    ")])],1)],1)],1),t._v(" "),n("div",{staticClass:"camapign_review_item"},[n("h3",[t._v(t._s(t.$t("Cam_Broadcast_Schedu")))]),t._v(" "),n("p",[t._v(t._s(t.$t("Cam_If_yteiaYcbten")))]),t._v(" "),n("hr"),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("h4",[t._v(t._s(t.$t("When you send the emails?")))]),t._v(" "),n("el-radio-group",{staticClass:"fluentcrm_line_items",model:{value:t.sending_type,callback:function(e){t.sending_type=e},expression:"sending_type"}},[n("el-radio",{attrs:{label:"send_now"}},[t._v(t._s(t.$t("Send the emails right now")))]),t._v(" "),n("el-radio",{attrs:{label:"schedule"}},[t._v(t._s(t.$t("Schedule the emails")))])],1)],1),t._v(" "),n("el-col",{attrs:{span:12}},["schedule"==t.sending_type?[n("h4",[t._v(t._s(t.$t("Please set date and time")))]),t._v(" "),n("div",{staticClass:"block"},[n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime","picker-options":t.pickerOptions,placeholder:t.$t("Select date and time")},model:{value:t.schedule_date_time,callback:function(e){t.schedule_date_time=e},expression:"schedule_date_time"}})],1),t._v(" "),n("p",[t._v(t._s(t.$t("Cam_Current_ST_oySS"))+": "),n("code",[t._v(t._s(t.campaign.server_time))])]),t._v(" "),n("br"),n("br")]:t._e()],2)],1),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.btnSending,expression:"btnSending"}],attrs:{type:"success",size:"big"},on:{click:function(e){return t.sendEmails()}}},["send_now"==t.sending_type?n("span",[t._v("\n                    "+t._s(t.$t("Send Emails Now"))+"\n                ")]):n("span",[t._v(t._s(t.$t("Schedule this campaign")))])])],1)]),t._v(" "),n("el-dialog",{attrs:{title:t.$t("Campaign Recipients"),"append-to-body":!0,visible:t.subscribers_modal,width:"70%"},on:{"update:visible":function(e){t.subscribers_modal=e}}},[n("campaign-emails",{attrs:{manage_mode:!0,campaign_id:t.campaign.id},on:{updateCount:function(e){t.campaign.recipients_count=e}}}),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.subscribers_modal=!1}}},[t._v("\n                "+t._s(t.$t("Cancel"))+"\n            ")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){t.subscribers_modal=!1}}},[t._v("\n                "+t._s(t.$t("Confirm"))+"\n            ")])],1)],1)],1)}),[],!1,null,null,null).exports,CampaignBodyComposer:Gt},data:function(){return{activeStep:parseInt(this.$route.query.step)||0,campaign_id:this.$route.params.id,campaign:null,dialogVisible:!1,dialogTitle:this.$t("Edit Campaign"),loading:!1,steps:[{title:this.$t("Compose"),description:this.$t("Compose Your Email Body")},{title:this.$t("Subject & Settings"),description:this.$t("Email Subject & Details")},{title:this.$t("Recipients"),description:this.$t("Select Email Recipients")},{title:this.$t("Review & Send"),description:this.$t("Cam_Send_osce")}],show_campaign_config:!1,updating:!1}},methods:{next:function(){this.activeStep<3&&this.activeStep++,this.$router.push({name:"campaign",query:{step:this.activeStep}})},prev:function(){this.activeStep>0&&this.activeStep--,this.$router.push({name:"campaign",query:{step:this.activeStep}})},stepChange:function(t){this.activeStep=t,this.$router.push({name:"campaign",query:{step:this.activeStep}})},backToCampaigns:function(){this.activeStep=0,this.$router.push({name:"campaigns",query:{t:(new Date).getTime()}})},fetch:function(){var t=this;this.$get("campaigns/".concat(this.campaign_id),{with:["subjects","template"]}).then((function(e){t.campaign=e.campaign,t.changeTitle(t.campaign.title+" - Campaign")})).catch((function(e){t.redirectToCampaignsWithWarning(e.message)}))},redirectToCampaignsWithWarning:function(t){var e=this;"campaign"===this.$route.name&&this.$message(t,this.$t("Oops!"),{center:!0,type:"warning",confirmButtonText:this.$t("View Report"),dangerouslyUseHTMLString:!0,callback:function(t){e.$router.push({name:"campaign-view",params:{id:e.campaign_id},query:{t:(new Date).getTime()}})}})},updateCampaignSettings:function(){var t=this;this.updating=!0,this.$put("campaigns/".concat(this.campaign_id,"/title"),{title:this.campaign.title}).then((function(e){t.$notify.success(e.message)})).catch((function(e){t.handleError(e)})).finally((function(){t.updating=!1,t.show_campaign_config=!1}))}},mounted:function(){this.fetch(),this.changeTitle("Campaign")}},Se=(n(260),Object(a.a)(Ce,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.campaign?n("div",{staticClass:"fluentcrm-campaign fluentcrm-view-wrapper"},[n("h3",{staticClass:"fluentcrm-campaign-heading"},[t._v(t._s(t.campaign.title)+" "),n("i",{staticClass:"el-icon el-icon-edit",staticStyle:{cursor:"pointer"},on:{click:function(e){t.show_campaign_config=!0}}})]),t._v(" "),n("el-steps",{attrs:{active:t.activeStep,simple:"","finish-status":"success"}},t._l(t.steps,(function(t,e){return n("el-step",{key:e,attrs:{title:t.title,description:t.description}})})),1),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_body fluentcrm_body_boxed"},[0==t.activeStep?n("div",{staticClass:"step-container",staticStyle:{margin:"-20px -20px 0"}},[n("campaign-body-composer",{attrs:{campaign:t.campaign},on:{next:function(e){return t.next()}}})],1):t._e(),t._v(" "),1==t.activeStep?n("div",{staticClass:"step-container"},[n("campaign-template",{attrs:{campaign:t.campaign},on:{next:function(e){return t.next()},prev:function(e){return t.prev()}}})],1):t._e(),t._v(" "),2==t.activeStep?n("div",{staticClass:"step-container"},[n("Recipients",{attrs:{campaign:t.campaign},on:{prev:function(e){return t.prev()},next:function(e){return t.next()}}})],1):t._e(),t._v(" "),3==t.activeStep?n("div",{staticClass:"step-container"},[n("campaign-review",{attrs:{campaign:t.campaign},on:{goToStep:t.stepChange}})],1):t._e()]),t._v(" "),t.campaign.id?n("el-dialog",{attrs:{title:t.$t("Campaign Settings"),"append-to-body":!0,"close-on-click-modal":!1,visible:t.show_campaign_config,width:"60%"},on:{"update:visible":function(e){t.show_campaign_config=e}}},[n("el-form",{attrs:{"label-position":"top",data:t.campaign}},[n("el-form-item",{attrs:{label:t.$t("Campaign Title")}},[n("el-input",{attrs:{placeholder:t.$t("Internal Campaign Title")},model:{value:t.campaign.title,callback:function(e){t.$set(t.campaign,"title",e)},expression:"campaign.title"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{type:"success"},on:{click:function(e){return t.updateCampaignSettings()}}},[t._v("\n                "+t._s(t.$t("Save"))+"\n            ")])],1)],1):t._e()],1):t._e()}),[],!1,null,null,null).exports),Oe={name:"CampaignLinkMetrics",props:["campaign_id","hide_title"],data:function(){return{loading:!1,links:[]}},methods:{fetchReport:function(){var t=this;this.loading=!0,this.$get("campaigns/".concat(this.campaign_id,"/link-report")).then((function(e){t.links=e.links})).catch((function(e){t.handleError(e)})).finally((function(e){t.loading=!1}))}},mounted:function(){this.fetchReport()}},Ee=Object(a.a)(Oe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_link_metrics"},[t.hide_title?t._e():n("div",{staticClass:"fluentcrm_inner_header"},[n("h3",{staticClass:"fluentcrm_inner_title"},[t._v(t._s(t.$t("Campaign Link Clicks")))]),t._v(" "),n("div",{staticClass:"fluentcrm_inner_actions"},[n("el-button",{attrs:{size:"mini"},on:{click:t.fetchReport}},[n("i",{staticClass:"el-icon el-icon-refresh"})])],1)]),t._v(" "),t.links.length?n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Found"),stripe:"",border:"",data:t.links}},[n("el-table-column",{attrs:{label:t.$t("URL")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{attrs:{href:e.row.url,target:"_blank",rel:"noopener"}},[t._v(t._s(e.row.url))])]}}],null,!1,1550400355)}),t._v(" "),n("el-table-column",{attrs:{width:"150",label:t.$t("Unique Clicks"),prop:"total"}})],1):n("el-empty",{attrs:{"image-size":135,description:t.$t("No link activity recorded yet")}})],1)}),[],!1,null,null,null).exports,je={name:"CampaignSubjectAnalytics",props:["metrics","campaign"]},Te=Object(a.a)(je,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_subject_metrics"},[n("div",{staticClass:"fluentcrm_inner_header"},[n("h3",{staticClass:"fluentcrm_inner_title"},[t._v(t._s(t.$t("Subject Analytics")))]),t._v(" "),n("div",{staticClass:"fluentcrm_inner_actions"})]),t._v(" "),n("el-table",{staticClass:"fc_el_border_table",attrs:{"empty-text":t.$t("No Data Found"),stripe:"",data:t.metrics.subjects}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("ul",{staticClass:"fc_list"},t._l(e.row.metric.clicks,(function(e,i){return n("li",{key:i},[n("a",{attrs:{target:"_blank",rel:"noopener",href:e.url}},[t._v(t._s(e.url))]),t._v(" - "),n("el-tag",{attrs:{size:"mini"}},[t._v(t._s(e.total))])],1)})),0)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Subject")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.value))]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"140",label:t.$t("Email Sent %")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t.percent(e.row.total,t.campaign.recipients_count))+" ("+t._s(e.row.total)+")\n            ")]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"140",label:t.$t("Open Rate")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t.percent(e.row.metric.total_opens,e.row.total))+"\n                "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.row.metric.total_opens,expression:"scope.row.metric.total_opens"}]},[t._v("("+t._s(e.row.metric.total_opens)+")")])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"140",label:t.$t("Click Rate")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(t.percent(e.row.metric.total_clicks,e.row.total))+"\n                "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.row.metric.total_clicks,expression:"scope.row.metric.total_clicks"}]},[t._v("("+t._s(e.row.metric.total_clicks)+")")])]}}])})],1)],1)}),[],!1,null,null,null).exports,Pe={name:"RevenueReport",props:["campaign"],components:{Pagination:b},data:function(){return{orders:[],labels:[],pagination:{per_page:10,current_page:1,total:0},loading:!1}},methods:{fetchOrders:function(){var t=this;this.loading=!0,this.$get("campaigns/".concat(this.campaign.id,"/revenues"),{per_page:this.pagination.per_page,page:this.pagination.current_page}).then((function(e){t.orders=e.orders,t.labels=e.labels,t.pagination.total=e.total})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))}},mounted:function(){this.fetchOrders()}},Ae=Object(a.a)(Pe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_revenue_report"},[n("h3",[t._v(t._s(t.$t("Revenue from this email campaign")))]),t._v(" "),t.loading?n("el-skeleton"):[n("el-table",{attrs:{data:t.orders,border:"",stripe:""}},t._l(t.labels,(function(e,i){return n("el-table-column",{key:i,attrs:{label:e},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{domProps:{innerHTML:t._s(e.row[i])}})]}}],null,!0)})})),1),t._v(" "),n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetchOrders}})]],2)}),[],!1,null,null,null).exports;function Fe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function De(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qe={name:"CampaignActions",props:["campaign"],components:{GenericPromo:we},data:function(){return{action_details:{action_type:"add_tags",tags:[],activity_type:"email_open",link_ids:[]},activity_types:{email_open:this.$t("Cam_Select_Swote"),email_not_open:this.$t("Cam_Select_Swdnoe"),email_clicked:this.$t("Cam_Select_Swcsl")},available_tags:window.fcAdmin.available_tags,clicked_links:[],processing:!1,processing_page:1,total_count:"calculating...",errors:null,total_processed:0,is_completed:!1}},methods:{getClickedLinks:function(){var t=this;this.$get("campaigns/".concat(this.campaign.id,"/link-report")).then((function(e){t.clicked_links=e.links}))},process:function(){var t=this;return this.action_details.tags.length?"email_clicked"!==this.action_details.activity_type||this.action_details.link_ids.length?(this.errors=null,this.processing=!0,void this.$post("campaigns-pro/".concat(this.campaign.id,"/tag-actions"),function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fe(Object(n),!0).forEach((function(e){De(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({processing_page:this.processing_page},this.action_details)).then((function(e){e.total_count&&(t.total_count=e.total_count),t.total_processed+=e.processed_contacts,e.has_more?(t.processing_page=t.processing_page+1,t.$nextTick((function(){t.process()}))):t.is_completed=!0})).catch((function(e){t.errors=e,t.handleError(e)}))):(this.$notify.error("Please Select Clicked URLS"),!1):(this.$notify.error("Please Select Tags first"),!1)},resetAction:function(){this.action_details={action_type:"add_tags",tags:[],activity_type:"email_open",link_ids:[]},this.is_completed=!1,this.total_processed=0,this.processing_page=1,this.processing=!1}},mounted:function(){this.getClickedLinks()}},Ie={name:"Unsbscribers",props:["campaign_id"],components:{Pagination:b},data:function(){return{loading:!0,unsubscribes:[],pagination:{total:0,per_page:20,current_page:1}}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("campaigns/".concat(this.campaign_id,"/unsubscribers"),{page:this.pagination.current_page,per_page:this.pagination.per_page}).then((function(e){t.unsubscribes=e.unsubscribes.data,t.pagination.total=e.unsubscribes.total})).catch((function(e){t.handleError(e)})).finally((function(e){t.loading=!1}))}},mounted:function(){this.fetch()}},Ne={name:"ViewCampaign",components:{CampaignEmails:ke,LinkMetrics:Ee,SubjectMetrics:Te,CampaignActions:Object(a.a)(qe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_link_metrics"},[n("div",{staticClass:"fluentcrm_inner_header"},[n("h3",[t._v(t._s(t.$t("Campaign Actions")))]),t._v(" "),n("p",[t._v(t._s(t.$t("Cam_Add_Remove_ToyCb")))])]),t._v(" "),n("hr"),t._v(" "),t.has_campaign_pro?n("div",{staticClass:"fc_campaign_action_wrapper"},[t.processing?n("div",[t.is_completed?n("div",{staticClass:"text-align-center"},[n("h3",[t._v(t._s(t.$t("All Done")))]),t._v(" "),n("p",[t._v(t._s(t.total_processed)+" "+t._s(t.$t("Cam_contacts_hbp")))]),t._v(" "),n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){return t.resetAction()}}},[t._v(t._s(t.$t("Do another Action")))])],1):n("div",{staticClass:"text-align-center"},[n("h3",{directives:[{name:"loading",rawName:"v-loading",value:t.processing,expression:"processing"}]},[t._v(t._s(t.$t("Processing now...")))]),t._v(" "),n("h4",[t._v(t._s(t.$t("Rec_Please_dnctw")))]),t._v(" "),n("h2",[t._v(t._s(t.total_processed)+"/"+t._s(t.total_count))]),t._v(" "),t.total_processed?n("p",[t._v(t._s(t.total_processed)+" "+t._s(t.$t("Cam_Contacts_psf")))]):t._e()]),t._v(" "),t.errors?n("div",[n("h3",[t._v(t._s(t.$t("Errors Found"))+":")]),t._v(" "),n("pre",[t._v(t._s(t.errors))])]):t._e()]):n("el-form",{attrs:{"label-position":"top",data:t.action_details}},[n("el-form-item",{attrs:{label:t.$t("Action Type")}},[n("el-radio-group",{model:{value:t.action_details.action_type,callback:function(e){t.$set(t.action_details,"action_type",e)},expression:"action_details.action_type"}},[n("el-radio",{attrs:{label:"add_tags"}},[t._v(t._s(t.$t("Add Tags")))]),t._v(" "),n("el-radio",{attrs:{label:"remove_tags"}},[t._v(t._s(t.$t("Remove Tags")))])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Select Tags")}},[n("el-checkbox-group",{model:{value:t.action_details.tags,callback:function(e){t.$set(t.action_details,"tags",e)},expression:"action_details.tags"}},t._l(t.available_tags,(function(e){return n("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.title)+"\n                    ")])})),1)],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Filter Subscribers")}},[n("el-radio-group",{model:{value:t.action_details.activity_type,callback:function(e){t.$set(t.action_details,"activity_type",e)},expression:"action_details.activity_type"}},t._l(t.activity_types,(function(e,i){return n("el-radio",{key:i,attrs:{label:i}},[t._v(t._s(e)+"\n                    ")])})),1)],1),t._v(" "),"email_clicked"==t.action_details.activity_type?n("el-form-item",{attrs:{label:t.$t("Cam_Select_Utwc_MfaS")}},[t.clicked_links.length?n("el-checkbox-group",{staticClass:"fc_new_line_items",model:{value:t.action_details.link_ids,callback:function(e){t.$set(t.action_details,"link_ids",e)},expression:"action_details.link_ids"}},t._l(t.clicked_links,(function(e){return n("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.url)+" -\n                        ("+t._s(e.total)+")\n                    ")])})),1):n("p",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("Cam_Sorry_nlftcc")))])],1):t._e(),t._v(" "),n("el-form-item",[n("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.process()}}},["add_tags"==t.action_details.action_type?n("span",[t._v(t._s(t.$t("Add Tags to Subscribers")))]):n("span",[t._v(t._s(t.$t("Cam_Remove_TFS")))])])],1)],1)],1):n("div",[n("generic-promo")],1)])}),[],!1,null,null,null).exports,CampaignChart:{extends:window.VueChartJs.Pie,mixins:[window.VueChartJs.mixins.reactiveProp],props:["stats"],data:function(){return{options:{responsive:!0,legend:{display:!1,position:"right"},plugins:{legend:{position:"right",display:!1},title:{display:!1,text:""}},layout:{padding:20}}}},methods:{},mounted:function(){this.renderChart(this.chartData,this.options)}},RevenueReport:Ae,Unsubscribers:Object(a.a)(Ie,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fc_unsubscribers_table"},[t.pagination.total||t.loading?n("div",[n("el-table",{attrs:{stripe:"",data:t.unsubscribes}},[n("el-table-column",{attrs:{label:t.$t("Name"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("img",{staticClass:"fc_contact_photo",staticStyle:{display:"inline-block","margin-bottom":"-6px"},attrs:{title:"Contact ID: "+e.row.subscriber.id,src:e.row.subscriber.photo}}),t._v(" "),n("span",[t._v(t._s(e.row.subscriber.full_name))])]}}],null,!1,3862468360)}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Email")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{name:"subscriber",params:{id:e.row.subscriber_id}}}},[t._v("\n                        "+t._s(e.row.subscriber.email)+"\n                    ")])]}}],null,!1,4034091633)}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Reason")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.subscriber.reason)+"\n                ")]}}],null,!1,2365124013)}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Date")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{attrs:{title:e.row.created_at}},[t._v(t._s(t._f("nsHumanDiffTime")(e.row.created_at)))])]}}],null,!1,2525433801)})],1),t._v(" "),n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1):n("el-empty",{attrs:{"image-size":135,description:t.$t("Awesome! No one unsubscribed from this campaign")}})],1)}),[],!1,null,null,null).exports},data:function(){return{activeTab:"campaign_details",loading:!0,campaign:null,emails:[],dialogVisible:!1,sent_count:0,repeatingCall:!1,stat:[],analytics:{},request_counter:1,subject_analytics:{},campaign_id:this.$route.params.id,show_campaign_config:!1,fetch_status:!0,pickerOptions:{disabledDate:function(t){return t.getTime()<=Date.now()-864e5},shortcuts:[{text:this.$t("After 1 Hour"),onClick:function(t){var e=new Date;e.setTime(e.getTime()+36e5),t.$emit("pick",e)}},{text:this.$t("Tomorrow"),onClick:function(t){var e=new Date;e.setTime(e.getTime()+864e5),t.$emit("pick",e)}},{text:this.$t("After 2 Days"),onClick:function(t){var e=new Date;e.setTime(e.getTime()+1728e5),t.$emit("pick",e)}},{text:this.$t("After 1 Week"),onClick:function(t){var e=new Date;e.setTime(e.getTime()+6048e5),t.$emit("pick",e)}}]},updating:!1}},computed:{chartData:function(){var t,e,n;Object.keys(this.analytics).length;var i=[this.sent_count,parseInt((null===(t=this.analytics.open)||void 0===t?void 0:t.total)||0),parseInt((null===(e=this.analytics.click)||void 0===e?void 0:e.total)||0),parseInt((null===(n=this.analytics.unsubscribe)||void 0===n?void 0:n.total)||0)];return{labels:["Email Sent","Opens","Clicks","Unsubscribe"],datasets:[{label:this.$t("Emails"),data:JSON.parse(JSON.stringify(i)),backgroundColor:["#8154ce","#a45892","#6dcc3e","#ff5b5b"]}]}}},methods:{backToCampaigns:function(){this.$router.push({name:"campaigns",query:{t:(new Date).getTime()}})},getCampaignStatus:function(){var t=this;this.loading=!0,this.$get("campaigns/".concat(this.campaign_id,"/status"),{request_counter:this.request_counter}).then((function(e){t.campaign=e.campaign,t.stat=e.stat,t.sent_count=e.sent_count,t.analytics=e.analytics,t.subject_analytics=e.subject_analytics,"working"===e.campaign.status&&t.fetchStatAgain(),t.changeTitle(t.campaign.title+" - Campaign")})).finally((function(){t.loading=!1}))},fetchStatAgain:function(){var t=this;setTimeout((function(){t.request_counter+=1,t.getCampaignStatus()}),4e3)},scheduledAt:function(t){return null===t?"Not Scheduled":this.nsDateFormat(t,"MMMM Do, YYYY [at] h:mm A")},getCampaignPercent:function(){return parseInt(this.sent_count/this.campaign.recipients_count*100)},getPercent:function(t){return parseFloat(t/this.sent_count*100).toFixed(2)+"%"},updateCampaignSettings:function(){var t=this;this.updating=!0,this.$put("campaigns/".concat(this.campaign_id,"/title"),{title:this.campaign.title,scheduled_at:this.campaign.scheduled_at}).then((function(e){t.campaign=e.campaign,t.$notify.success(e.message)})).catch((function(e){t.handleError(e)})).finally((function(){t.updating=!1,t.show_campaign_config=!1,t.getCampaignStatus()}))},pauseSending:function(){var t=this;this.updating=!0,this.$post("campaigns/".concat(this.campaign_id,"/pause")).then((function(e){t.campaign=e.campaign,t.$notify.success(e.message)})).catch((function(e){t.handleError(e)})).finally((function(){t.updating=!1,t.show_campaign_config=!1}))},resumeSending:function(){var t=this;this.updating=!0,this.$post("campaigns/".concat(this.campaign_id,"/resume")).then((function(e){t.campaign=e.campaign,t.$notify.success(e.message)})).catch((function(e){t.handleError(e)})).finally((function(){t.updating=!1,t.getCampaignStatus()}))},cancelSchedule:function(){var t=this;this.loading=!0,this.$post("campaigns/".concat(this.campaign_id,"/un-schedule")).then((function(e){t.$notify.success(e.message),t.$router.push({name:"campaign",params:{id:t.campaign_id},query:{t:(new Date).getTime(),step:3}})})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1,t.getCampaignStatus()}))}},mounted:function(){this.getCampaignStatus(),this.changeTitle("Campaign")}},Le=Object(a.a)(Ne,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[t.campaign?n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"campaigns"}}},[t._v("\n                    "+t._s(t.$t("Campaigns"))+"\n                ")]),t._v(" "),n("el-breadcrumb-item",[t._v("\n                    "+t._s(t.campaign.title)+"\n                    "),n("span",{staticClass:"status"},[t._v(" - "+t._s(t.campaign.status))])])],1)],1),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.backToCampaigns()}}},[t._v(t._s(t.$t("Back To Campaigns")))]),t._v(" "),n("el-button",{attrs:{icon:"el-icon-setting",size:"small"},on:{click:function(e){t.show_campaign_config=!0}}}),t._v(" "),"working"!=t.campaign.status?n("el-button",{attrs:{size:"small"},on:{click:t.getCampaignStatus}},[n("i",{staticClass:"el-icon el-icon-refresh"})]):t._e()],1)]):t._e(),t._v(" "),t.campaign?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_body fluentcrm_body_boxed"},["paused"==t.campaign.status?n("div",{staticClass:"fc_highlight_gray text-align-center"},[n("h3",[t._v(t._s(t.$t("Vie_This_cino_sNEwbs")))]),t._v(" "),n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.resumeSending()}}},[t._v(t._s(t.$t("Resume Sending")))])],1):"working"==t.campaign.status?[n("h3",[t._v(" "+t._s(t.$t("Vie_Your_easrn"))+"\n                "),n("span",{directives:[{name:"loading",rawName:"v-loading",value:"working"==t.campaign.status,expression:"campaign.status == 'working'"}]},[t._v(t._s(t.$t("Sending")))])]),t._v(" "),n("el-progress",{attrs:{"text-inside":!0,"stroke-width":36,percentage:t.getCampaignPercent(),status:"success"}})]:"scheduled"==t.campaign.status?[n("h3",[t._v(t._s(t.$t("Vie_This_chbs")))]),t._v(" "),n("p",[t._v(t._s(t.$t("Vie_The_ewbsboysdat")))]),t._v(" "),n("pre",[t._v(t._s(t.campaign.scheduled_at)+" ("+t._s(t._f("nsHumanDiffTime")(t.campaign.scheduled_at))+")")]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.cancelSchedule()}}},[t._v(t._s(t.$t("Cancel this schedule")))])]:t._e(),t._v(" "),"archived"==t.campaign.status?n("el-row",{staticClass:"fc_campaign_archived_wrapper",attrs:{gutter:30}},[n("el-col",{attrs:{md:8,sm:12,xs:24}},[n("div",{staticClass:"fc_campaign_report"},[n("h3",[t._v(t._s(t.$t("Campaign Performance")))]),t._v(" "),n("ul",[t._l(t.stat,(function(e){return n("li",{key:e.status},[n("i",{staticClass:"el-icon el-icon-message"}),t._v(" "),n("span",{staticClass:"fc_report_title"},[t._v(t._s(t._f("ucFirst")(e.status))+" "+t._s(t.$t("Emails")))]),t._v(" "),n("span",{staticClass:"fc_report_value"},[t._v("\n                                "+t._s(e.total)+"\n                            ")])])})),t._v(" "),t._l(t.analytics,(function(e){return n("li",{key:e.type,class:"fc_camp_data_"+e.type},[n("i",{class:e.icon_class}),t._v(" "),n("span",{staticClass:"fc_report_title"},[t._v(t._s(e.label))]),t._v(" "),e.is_percent?n("span",{staticClass:"fc_report_value"},[t._v("\n                        "+t._s(t.getPercent(e.total))+"\n                    ")]):n("span",{staticClass:"fc_report_value"},[t._v("\n                        "+t._s(e.total)+"\n                    ")])])}))],2)])]),t._v(" "),n("el-col",{attrs:{md:8,sm:12,xs:24}},[n("div",{staticClass:"fc_campaign_report"},[n("h3",[t._v(t._s(t.$t("Emails Stats")))]),t._v(" "),n("div",{staticStyle:{"max-width":"270px",margin:"0 auto"}},[t.chartData&&!t.loading?n("campaign-chart",{attrs:{"chart-data":t.chartData}}):t._e()],1)])]),t._v(" "),n("el-col",{attrs:{md:8,sm:12,xs:24}},[n("div",{staticClass:"fc_campaign_report"},[n("h3",[t._v(t._s(t.$t("Link activity")))]),t._v(" "),n("div",{},[t.loading?t._e():n("link-metrics",{attrs:{hide_title:!0,campaign_id:t.campaign.id}})],1)])])],1):n("ul",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_stat_cards",staticStyle:{"min-height":"100px"}},[t._l(t.stat,(function(e){return n("li",{key:e.status},[n("div",{staticClass:"fluentcrm_cart_counter"},[t._v(t._s(e.total))]),t._v(" "),n("h4",[t._v(t._s(t._f("ucFirst")(e.status))+" "+t._s(t.$t("Emails")))])])})),t._v(" "),n("li",[n("div",{staticClass:"fluentcrm_cart_counter"},[t._v(t._s(t.campaign.recipients_count))]),t._v(" "),n("h4",[t._v(t._s(t.$t("Total Emails")))])]),t._v(" "),t._l(t.analytics,(function(e){return n("li",{key:e.type,class:"fc_camp_data_"+e.type},[n("div",{staticClass:"fluentcrm_cart_counter"},[e.is_percent?n("span",[t._v("\n                        "+t._s(t.getPercent(e.total))+"\n                    ")]):n("span",[t._v("\n                        "+t._s(e.total)+"\n                    ")])]),t._v(" "),n("h4",[t._v(t._s(e.label))])])}))],2),t._v(" "),n("el-tabs",{staticStyle:{"min-height":"200px"},attrs:{type:"border-card","tab-position":"top"},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[n("el-tab-pane",{attrs:{name:"campaign_details",label:t.$t("Campaign Details")}},[n("div",{staticClass:"line"},[n("el-row",{attrs:{gutter:40}},[n("el-col",{attrs:{span:4}},[n("strong",[t._v(t._s(t.$t("Title")))])]),t._v(" "),n("el-col",{attrs:{span:20}},[t._v(": "+t._s(t.campaign.title))])],1)],1),t._v(" "),n("div",{staticClass:"line"},[n("el-row",{attrs:{gutter:40}},[n("el-col",{attrs:{span:4}},[n("strong",[t._v(t._s(t.$t("Scheduled At")))])]),t._v(" "),n("el-col",{attrs:{span:20}},[t._v(": "+t._s(t.scheduledAt(t.campaign.scheduled_at)))])],1)],1),t._v(" "),n("div",{staticClass:"line"},[n("el-row",{attrs:{gutter:40}},[n("el-col",{attrs:{span:4}},[n("strong",[t._v(t._s(t.$t("Subject")))])]),t._v(" "),n("el-col",{attrs:{span:20}},[t._v("\n                            : "+t._s(t.campaign.email_subject)+"\n                        ")])],1)],1),t._v(" "),n("div",{staticClass:"line"},[n("el-row",{attrs:{gutter:40}},[n("el-col",{attrs:{span:4}},[n("strong",[t._v(t._s(t.$t("Total Recipients")))])]),t._v(" "),n("el-col",{attrs:{span:20}},[t._v(": "+t._s(t.campaign.recipients_count))])],1)],1),t._v(" "),n("div",{staticClass:"template-preview",staticStyle:{"margin-top":"30px"}},[n("div",{staticClass:"fluentcrm_email_body_preview",domProps:{innerHTML:t._s(t.campaign.email_body)}})])]),t._v(" "),n("el-tab-pane",{attrs:{lazy:!0,name:"campaign_subscribers",label:t.$t("Emails")}},[n("campaign-emails",{attrs:{campaign_id:t.campaign.id},on:{fetchCampaign:function(e){return t.getCampaignStatus()}}})],1),t._v(" "),t.analytics.unsubscribe?n("el-tab-pane",{attrs:{lazy:!0,name:"campaign_unsubscribers",label:t.$t("Unsubscribers")}},[n("unsubscribers",{attrs:{campaign_id:t.campaign.id}})],1):t._e(),t._v(" "),t.subject_analytics.subjects?n("el-tab-pane",{attrs:{name:"campaign_subject_analytics",label:t.$t("A/B Testing Result")}},[n("subject-metrics",{attrs:{campaign:t.campaign,metrics:t.subject_analytics}})],1):t._e(),t._v(" "),t.analytics.revenue?n("el-tab-pane",{attrs:{name:"campaign_revenue",label:t.$t("Revenue Report")}},["campaign_revenue"==t.activeTab?n("revenue-report",{attrs:{campaign:t.campaign}}):t._e()],1):t._e(),t._v(" "),n("el-tab-pane",{attrs:{lazy:!0,name:"campaign_actions",label:t.$t("Actions")}},[n("campaign-actions",{attrs:{campaign:t.campaign}})],1)],1)],2):n("div",{staticClass:"text-align-center"},[n("h3",[t._v(t._s(t.$t("Loading Campaign Data...")))])]),t._v(" "),t.campaign?n("el-dialog",{attrs:{title:t.$t("Campaign Settings"),"append-to-body":!0,"close-on-click-modal":!1,visible:t.show_campaign_config,width:"60%"},on:{"update:visible":function(e){t.show_campaign_config=e}}},[n("el-form",{attrs:{"label-position":"top",data:t.campaign}},[n("el-form-item",{attrs:{label:t.$t("Campaign Title")}},[n("el-input",{attrs:{placeholder:t.$t("Internal Campaign Title")},model:{value:t.campaign.title,callback:function(e){t.$set(t.campaign,"title",e)},expression:"campaign.title"}})],1),t._v(" "),"scheduled"==t.campaign.status?n("div",{staticClass:"fc_highlight_gray text-align-center"},[n("h3",[t._v("Your campaign is currently on "),n("b",[t._v("scheduled")]),t._v(" state")]),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Schedule Time")}},[n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime","picker-options":t.pickerOptions,placeholder:t.$t("Select date and time")},model:{value:t.campaign.scheduled_at,callback:function(e){t.$set(t.campaign,"scheduled_at",e)},expression:"campaign.scheduled_at"}})],1)],1):"working"==t.campaign.status?n("div",{staticClass:"fc_highlight_gray text-align-center"},[n("h3",[t._v(t._s(t.$t("Vie_Emails_asatm")))]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){return t.pauseSending()}}},[t._v(t._s(t.$t("Pause Sending")))])],1):t._e()],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{type:"success"},on:{click:function(e){return t.updateCampaignSettings()}}},[t._v(t._s(t.$t("Save")))])],1)],1):t._e()],1)}),[],!1,null,null,null).exports,Me={name:"Templates",components:{Confirm:f,Pagination:b},data:function(){return{loading:!1,templates:[],pagination:{current_page:1,per_page:20,total:0},url:"",title:"",dialogVisible:!1,order:"desc",orderBy:"ID",search:""}},methods:{getStyleOfPostStatus:function(t){return{fontWeight:500,color:"publish"===t?"green":"gray"}},fetch:function(){var t=this;this.loading=!0;var e={order:this.order,orderBy:this.orderBy,per_page:this.pagination.per_page,page:this.pagination.current_page,types:["publish","draft"],search:this.search};this.$get("templates",e).then((function(e){t.templates=e.templates.data,t.pagination.total=e.templates.total,t.loading=!1}))},create:function(){this.$router.push({name:"edit_template",params:{template_id:0}})},duplicate:function(t){var e=this;this.duplicating=!0,console.log(t),this.$post("templates/duplicate/".concat(t.ID)).then((function(t){e.$notify.success(t.message),e.fetch()})).catch((function(t){e.handleError(t)})).finally((function(){e.duplicating=!1}))},edit:function(t){this.$router.push({name:"edit_template",params:{template_id:t.ID}})},remove:function(t){var e=this;this.$del("templates/".concat(t.ID)).then((function(t){e.fetch(),e.$notify.success({title:e.$t("Great!"),message:t.message,offset:19})}))},syncVisibility:function(){this.dialogVisible=!1},onDialogClose:function(){this.fetch(),this.url=""},sortCampaigns:function(t){"descending"===t.order?(this.orderBy=t.prop,this.order="desc"):(this.orderBy=t.prop,this.order="asc"),this.fetch()}},mounted:function(){this.fetch(),this.changeTitle("Email Templates")}},Re=Object(a.a)(Me,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-templates fluentcrm-view-wrapper fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Email Templates"))+" "),t.pagination.total?n("span",{staticClass:"ff_small"},[t._v("("+t._s(t.pagination.total)+")")]):t._e()])]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("div",{staticClass:"fc-search-box"},[n("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetch},slot:"append"})],1)],1),t._v(" "),t.hasPermission("fcrm_manage_email_templates")?n("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:t.create}},[t._v("\n                "+t._s(t.$t("Create New Template"))+"\n            ")]):t._e()],1)]),t._v(" "),n("div",{staticClass:"fluentcrm_body"},[n("div",{staticClass:"templates-table"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.templates,stripe:""},on:{"sort-change":t.sortCampaigns}},[n("el-table-column",{attrs:{label:t.$t("ID"),width:"100",prop:"ID",sortable:"custom"}}),t._v(" "),n("el-table-column",{attrs:{prop:"post_title",label:t.$t("Title"),sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{name:"edit_template",params:{template_id:e.row.ID}}}},[t._v("\n                            "+t._s(e.row.post_title)+"\n                        ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"220",label:t.$t("Created At"),prop:"post_date",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{attrs:{title:e.row.post_date}},[t._v("\n                            "+t._s(t._f("nsHumanDiffTime")(e.row.post_date))+"\n                        ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"140",label:t.$t("Actions"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-tooltip",{attrs:{effect:"dark",content:"Edit",placement:"top"}},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return t.edit(e.row)}}})],1),t._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"Duplicate",placement:"top"}},[n("el-button",{staticClass:"ml-0-im",attrs:{type:"info",size:"mini",icon:"el-icon-copy-document"},on:{click:function(n){return t.duplicate(e.row)}}})],1),t._v(" "),n("el-tooltip",{attrs:{effect:"dark",content:"Delete",placement:"top"}},[n("confirm",{on:{yes:function(n){return t.remove(e.row)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1)],1)]}}])})],1),t._v(" "),n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)])])}),[],!1,null,null,null).exports,ze={name:"edit_template",props:["template_id"],components:{InputPopover:x,EmailBlockComposer:zt},data:function(){return{email_template:{post_title:"",post_content:" ",post_excerpt:"",email_subject:"",edit_type:"html",design_template:"simple",settings:{template_config:{}}},email_template_designs:window.fcAdmin.email_template_designs,sending_test:!1,smart_codes:[],loading:!0,app_ready:!1,codes_ready:!1,send_test_pop:!1,test_email:""}},methods:{fetchSmartCodes:function(){var t=this;this.codes_ready=!1,this.$get("templates/smartcodes",{}).then((function(e){t.smart_codes=e.smartcodes})).catch((function(t){console.log(t)})).finally((function(){t.codes_ready=!0}))},fetchTemplate:function(){var t=this;this.loading=!0,this.$get("templates/".concat(this.template_id)).then((function(e){console.log(e),t.email_template=e.template,t.$nextTick((function(){t.app_ready=!0}))})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1}))},saveTemplate:function(){var t=this;this.loading=!0;(parseInt(this.template_id)?this.$put("templates/".concat(this.template_id),{template:this.email_template}):this.$post("templates",{template:this.email_template})).then((function(e){t.$notify.success(e.message),parseInt(t.template_id)||t.$router.push({name:"edit_template",params:{template_id:e.template_id}})})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1}))},sendTestEmail:function(){var t=this;return this.email_template.post_content?this.email_template.email_subject?(this.sending_test=!0,void this.$post("campaigns/send-test-email",{campaign:{email_subject:this.email_template.email_subject,email_pre_header:this.email_template.post_excerpt,email_body:this.email_template.post_content,design_template:this.email_template.design_template,settings:this.email_template.settings},email:this.test_email,test_campaign:"yes"}).then((function(e){t.$notify.success(e.message)})).catch((function(e){t.$notify.error(e.message)})).finally((function(){t.sending_test=!1,t.send_test_pop=!1}))):this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peS"),offset:19}):this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peb"),offset:19})}},mounted:function(){this.fetchSmartCodes(),this.fetchTemplate(),this.changeTitle("Edit Template")}},Be=Object(a.a)(ze,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-templates fluentcrm-view-wrapper fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[0==t.template_id?n("h3",[t._v(t._s(t.$t("Create Email Template")))]):n("div",[n("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"templates"}}},[t._v("\n                        "+t._s(t.$t("Email Templates"))+"\n                    ")]),t._v(" "),n("el-breadcrumb-item",[t._v("\n                        "+t._s(t.email_template.post_title)+"\n                    ")])],1)],1)]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[0==t.template_id?n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveTemplate}},[t._v("\n                "+t._s(t.$t("Create Template"))+"\n            ")]):[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.saveTemplate}},[t._v("\n                    "+t._s(t.$t("Save Template"))+"\n                ")]),t._v(" "),n("el-popover",{attrs:{placement:"left",width:"400",trigger:"manual"},model:{value:t.send_test_pop,callback:function(e){t.send_test_pop=e},expression:"send_test_pop"}},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.sending_test,expression:"sending_test"}]},[n("p",[t._v(t._s(t.$t("testEmail.instruction")))]),t._v(" "),n("el-input",{attrs:{placeholder:t.$t("Email Address")},model:{value:t.test_email,callback:function(e){t.test_email=e},expression:"test_email"}},[n("template",{slot:"append"},[n("el-button",{attrs:{type:"success"},on:{click:function(e){return t.sendTestEmail()}}},[t._v(t._s(t.$t("Send")))])],1)],2)],1),t._v(" "),n("el-button",{staticClass:"fc_with_select",attrs:{slot:"reference",size:"small",type:"danger"},on:{click:function(e){t.send_test_pop=!t.send_test_pop}},slot:"reference"},[t._v("\n                        "+t._s(t.$t("Send a test email"))+"\n                    ")])],1)]],2)]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_body fluentcrm_body_boxed"},[t.app_ready?n("div",[n("el-form",{attrs:{"label-position":"top","label-width":"120px",model:t.email_template}},[n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{sm:24,md:12}},[n("el-form-item",{attrs:{label:t.$t("Template Title")}},[n("el-input",{attrs:{placeholder:t.$t("Template Title")},model:{value:t.email_template.post_title,callback:function(e){t.$set(t.email_template,"post_title",e)},expression:"email_template.post_title"}})],1)],1)],1),t._v(" "),n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{sm:24,md:12}},[n("el-form-item",{attrs:{label:t.$t("Email Subject")}},[n("input-popover",{attrs:{popper_extra:"fc_with_c_fields",placeholder:t.$t("Email Subject"),data:t.smart_codes},model:{value:t.email_template.email_subject,callback:function(e){t.$set(t.email_template,"email_subject",e)},expression:"email_template.email_subject"}})],1)],1),t._v(" "),n("el-col",{attrs:{sm:24,md:12}},[n("el-form-item",{attrs:{label:t.$t("Email Pre-Header")}},[n("el-input",{staticClass:"min_textarea_40",attrs:{type:"textarea",placeholder:t.$t("Email Pre-Header"),rows:1},model:{value:t.email_template.post_excerpt,callback:function(e){t.$set(t.email_template,"post_excerpt",e)},expression:"email_template.post_excerpt"}})],1)],1)],1)],1)],1):t._e(),t._v(" "),t.app_ready&&t.codes_ready?n("div",{staticStyle:{margin:"0 -20px"}},[n("email-block-composer",{attrs:{show_merge:!0,enable_templates:!0,body_key:"post_content",campaign:t.email_template}})],1):t._e()])])}),[],!1,null,null,null).exports,Ve={name:"AllEmails",components:{Pagination:b,EmailPreview:be,Confirm:f},data:function(){return{emails:[],pagination:{total:0,per_page:10,current_page:1},loading:!1,preview:{id:null,isVisible:!1},resending:!1,selections:[],deleting:!1}},methods:{fetchEmails:function(){var t=this;this.loading=!0;var e={per_page:this.pagination.per_page,page:this.pagination.current_page};this.$get("reports/emails",e).then((function(e){t.emails=e.emails.data,t.pagination.total=e.emails.total})).catch((function(e){t.handleError(e)})).finally((function(e){t.loading=!1}))},resendEmail:function(t){var e=this;if(!this.has_campaign_pro)return this.$notify.error("_Ca_Please_utptutf"),!1;this.resending=!0,this.$post("campaigns-pro/".concat(t.campaign_id,"/resend-emails"),{email_ids:[t.id]}).then((function(t){e.$notify.success(t.message),e.fetchEmails()})).catch((function(t){e.handleError(t)})).finally((function(){e.resending=!1}))},previewEmail:function(t){this.preview.id=t,this.preview.isVisible=!0},deleteSelected:function(){var t=this;this.deleting=!0;var e=this.selections.map((function(t){return t.id}));this.$del("reports/emails",{email_ids:e}).then((function(e){t.selections=[],t.$notify.success(e.message),t.fetchEmails()})).catch((function(e){t.handleError(e)})).finally((function(){t.deleting=!1}))},handleSelectionChange:function(t){this.selections=t}},mounted:function(){this.fetchEmails(),this.changeTitle("All Emails")}},Ue=Object(a.a)(Ve,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("All Email Activities")))])]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"})]),t._v(" "),n("div",{staticClass:"fluentcrm_body fluentcrm_pad_b_20"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading||t.resending,expression:"loading || resending"}],staticStyle:{width:"100%"},attrs:{stripe:"",data:t.emails},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{width:"64",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.subscriber?n("router-link",{attrs:{to:{name:"subscriber",params:{id:e.row.subscriber_id}}}},[n("img",{staticClass:"fc_contact_photo",attrs:{title:t.$t("Contact ID:")+e.row.subscriber_id,src:e.row.subscriber.photo}})]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Contact"),width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.subscriber?n("router-link",{attrs:{to:{name:"subscriber",params:{id:e.row.subscriber_id}}}},[t._v("\n                        "+t._s(e.row.subscriber.full_name)+"\n                    ")]):n("span",[t._v(t._s(e.row.email_address))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Subject")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.email_subject))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Source")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.campaign?n("span",[t._v(t._s(e.row.campaign.title))]):n("span",[t._v(t._s(t.$t("n/a")))])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"120",label:t.$t("Status")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.status)+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"140",label:t.$t("Date")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{attrs:{title:e.row.created_at}},[t._v("\n                    "+t._s(t._f("nsHumanDiffTime")(e.row.created_at))+"\n                ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Preview"),width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.subscriber?[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-view"},on:{click:function(n){return t.previewEmail(e.row.id)}}}),t._v(" "),"sent"!=e.row.status&&"failed"!=e.row.status||!e.row.campaign_id?t._e():n("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-refresh-right"},on:{click:function(n){return t.resendEmail(e.row)}}},[t._v(t._s(t.$t("Resend"))+"\n                        ")])]:t._e()]}}])})],1),t._v(" "),n("el-row",[n("el-col",{attrs:{md:12,sm:24}},[t.selections.length?n("confirm",{attrs:{placement:"top-start"},on:{yes:function(e){return t.deleteSelected()}}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],staticStyle:{margin:"10px 0 0 15px"},attrs:{slot:"reference",icon:"el-icon-delete",size:"mini",type:"danger"},slot:"reference"},[t._v("\n                        "+t._s(t.$t("Delete Selected"))+"\n                    ")])],1):t._e(),t._v("\n                \n            ")],1),t._v(" "),n("el-col",{attrs:{md:12,sm:24}},[n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetchEmails}})],1)],1)],1),t._v(" "),n("email-preview",{attrs:{preview:t.preview}})],1)}),[],!1,null,null,null).exports,He={name:"Error",props:["error"]},Ge=Object(a.a)(He,(function(){var t=this.$createElement,e=this._self._c||t;return this.error?e("span",{staticClass:"el-form-item__error"},[this._v("\n    "+this._s(this.error)+"\n")]):this._e()}),[],!1,null,null,null).exports,We=n(113),Ye=n.n(We),Je={name:"ProfileCustomFields",props:["subscriber","custom_fields"],data:function(){return{app_ready:!1}},computed:{fields:function(){var t=this,e={};return this.each(this.custom_fields,(function(n){Ye()(t.subscriber.custom_values,n.slug)&&(n.is_disabled=!0),e[n.slug]=n})),e}},methods:{},mounted:function(){var t=this;this.each(this.custom_fields,(function(e){var n="";-1!==["select-multi","checkbox"].indexOf(e.type)&&(n=[]),Ye()(t.subscriber.custom_values,e.slug)||t.$set(t.subscriber.custom_values,e.slug,n)})),this.app_ready=!0}},Ke=(n(285),Object(a.a)(Je,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.custom_fields.length?n("div",{staticClass:"fluentcrm_custom_fields"},[n("h3",[t._v(t._s(t.$t("Custom Profile Data")))]),t._v(" "),t.app_ready?n("el-form",{attrs:{data:t.subscriber.custom_values,"label-position":"top"}},[n("div",{staticClass:"fluentcrm_layout"},t._l(t.fields,(function(e,i){return n("el-form-item",{key:i,staticClass:"fluentcrm_layout_half",attrs:{label:e.label}},["text"==e.type||"number"==e.type||"textarea"==e.type?n("el-input",{attrs:{placeholder:e.label,type:e.type},model:{value:t.subscriber.custom_values[i],callback:function(e){t.$set(t.subscriber.custom_values,i,e)},expression:"subscriber.custom_values[fieldKey]"}}):"radio"==e.type?[n("el-radio-group",{model:{value:t.subscriber.custom_values[i],callback:function(e){t.$set(t.subscriber.custom_values,i,e)},expression:"subscriber.custom_values[fieldKey]"}},t._l(e.options,(function(t){return n("el-radio",{key:t,attrs:{value:t,label:t}})})),1)]:"select-one"==e.type||"select-multi"==e.type?[n("el-select",{attrs:{placeholder:t.$t("Select")+" "+e.label,clearable:"",filterable:"",multiple:"select-multi"==e.type},model:{value:t.subscriber.custom_values[i],callback:function(e){t.$set(t.subscriber.custom_values,i,e)},expression:"subscriber.custom_values[fieldKey]"}},t._l(e.options,(function(t){return n("el-option",{key:t,attrs:{value:t,label:t}})})),1)]:"checkbox"==e.type?[n("el-checkbox-group",{model:{value:t.subscriber.custom_values[i],callback:function(e){t.$set(t.subscriber.custom_values,i,e)},expression:"subscriber.custom_values[fieldKey]"}},t._l(e.options,(function(t){return n("el-checkbox",{key:t,attrs:{value:t,label:t}})})),1)]:"date"==e.type?[n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:t.$t("Pick a date")},model:{value:t.subscriber.custom_values[i],callback:function(e){t.$set(t.subscriber.custom_values,i,e)},expression:"subscriber.custom_values[fieldKey]"}})]:"date_time"==e.type?[n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:t.$t("Pick a date and time")},model:{value:t.subscriber.custom_values[i],callback:function(e){t.$set(t.subscriber.custom_values,i,e)},expression:"subscriber.custom_values[fieldKey]"}})]:[t._v("\n                    "+t._s(e)+"\n                ")]],2)})),1)]):t._e()],1):t._e()}),[],!1,null,null,null).exports),Qe={name:"Form",components:{Error:Ge,CustomFields:Ke},props:{subscriber:{required:!0,type:Object},errors:{required:!0,type:Object},options:{required:!0,type:Object},listId:{default:null},tagId:{default:null}},data:function(){return{show_address:!1,show_custom_data:!1,countries:window.fcAdmin.countries,name_prefixes:window.fcAdmin.contact_prefixes,pickerOptions:{disabledDate:function(t){return t.getTime()>=Date.now()}}}}},Ze=Object(a.a)(Qe,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{attrs:{"label-position":"top","label-width":"100px"}},[n("h3",[t._v(t._s(t.$t("Basic Info")))]),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{lg:4,md:4,sm:24,xs:24}},[n("el-form-item",{attrs:{label:t.$t("Prefix")}},[n("el-select",{attrs:{placeholder:t.$t("Select")},model:{value:t.subscriber.prefix,callback:function(e){t.$set(t.subscriber,"prefix",e)},expression:"subscriber.prefix"}},t._l(t.name_prefixes,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1),t._v(" "),n("el-col",{attrs:{lg:10,md:10,sm:24,xs:24}},[n("el-form-item",{attrs:{label:t.$t("First Name")}},[n("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.first_name,callback:function(e){t.$set(t.subscriber,"first_name",e)},expression:"subscriber.first_name"}}),t._v(" "),n("error",{attrs:{error:t.errors.get("first_name")}})],1)],1),t._v(" "),n("el-col",{attrs:{lg:10,md:10,sm:24,xs:24}},[n("el-form-item",{attrs:{label:t.$t("Last Name")}},[n("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.last_name,callback:function(e){t.$set(t.subscriber,"last_name",e)},expression:"subscriber.last_name"}}),t._v(" "),n("error",{attrs:{error:t.errors.get("last_name")}})],1)],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{lg:14,md:14,sm:24,xs:24}},[n("el-form-item",{staticClass:"is-required",attrs:{label:t.$t("Email")}},[n("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.email,callback:function(e){t.$set(t.subscriber,"email",e)},expression:"subscriber.email"}}),t._v(" "),n("error",{attrs:{error:t.errors.get("email")}})],1)],1),t._v(" "),n("el-col",{attrs:{lg:10,md:10,sm:24,xs:24}},[n("el-form-item",{attrs:{label:t.$t("Phone")}},[n("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.phone,callback:function(e){t.$set(t.subscriber,"phone",e)},expression:"subscriber.phone"}})],1)],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{lg:10,md:10,sm:24,xs:24}},[n("el-form-item",{attrs:{label:t.$t("Date of Birth")}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,placeholder:t.$t("Pick a date")},model:{value:t.subscriber.date_of_birth,callback:function(e){t.$set(t.subscriber,"date_of_birth",e)},expression:"subscriber.date_of_birth"}})],1)],1)],1),t._v(" "),n("el-form-item",[n("el-checkbox",{model:{value:t.show_address,callback:function(e){t.show_address=e},expression:"show_address"}},[t._v(t._s(t.$t("Add Address Info")))])],1),t._v(" "),t.show_address?[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:12}},[n("el-form-item",{attrs:{label:t.$t("Address Line 1")}},[n("el-input",{attrs:{placeholder:t.$t("Address Line 1"),autocomplete:"new-password"},model:{value:t.subscriber.address_line_1,callback:function(e){t.$set(t.subscriber,"address_line_1",e)},expression:"subscriber.address_line_1"}})],1)],1),t._v(" "),n("el-col",{attrs:{md:12}},[n("el-form-item",{attrs:{label:t.$t("Address Line 2")}},[n("el-input",{attrs:{placeholder:t.$t("Address Line 2"),autocomplete:"new-password"},model:{value:t.subscriber.address_line_2,callback:function(e){t.$set(t.subscriber,"address_line_2",e)},expression:"subscriber.address_line_2"}})],1)],1),t._v(" "),n("el-col",{attrs:{md:12}},[n("el-form-item",{attrs:{label:t.$t("City")}},[n("el-input",{attrs:{placeholder:t.$t("City"),autocomplete:"new-password"},model:{value:t.subscriber.city,callback:function(e){t.$set(t.subscriber,"city",e)},expression:"subscriber.city"}})],1)],1),t._v(" "),n("el-col",{attrs:{md:12}},[n("el-form-item",{attrs:{label:t.$t("State")}},[n("el-input",{attrs:{placeholder:t.$t("State"),autocomplete:"new-password"},model:{value:t.subscriber.state,callback:function(e){t.$set(t.subscriber,"state",e)},expression:"subscriber.state"}})],1)],1),t._v(" "),n("el-col",{attrs:{md:12}},[n("el-form-item",{attrs:{label:t.$t("Postal Code")}},[n("el-input",{attrs:{placeholder:t.$t("Postal Code"),autocomplete:"new-password"},model:{value:t.subscriber.postal_code,callback:function(e){t.$set(t.subscriber,"postal_code",e)},expression:"subscriber.postal_code"}})],1)],1),t._v(" "),n("el-col",{attrs:{md:12}},[n("el-form-item",{attrs:{label:t.$t("Country")}},[n("el-select",{staticClass:"el-select-multiple",attrs:{clearable:"",filterable:"",autocomplete:"off",placeholder:t.$t("Select country")},model:{value:t.subscriber.country,callback:function(e){t.$set(t.subscriber,"country",e)},expression:"subscriber.country"}},t._l(t.countries,(function(e){return n("el-option",{key:e.code,attrs:{value:e.code,label:e.title}},[t._v("\n                            "+t._s(e.title)+"\n                        ")])})),1)],1)],1)],1)]:t._e(),t._v(" "),t.options.custom_fields.length?n("el-form-item",[n("el-checkbox",{model:{value:t.show_custom_data,callback:function(e){t.show_custom_data=e},expression:"show_custom_data"}},[t._v(t._s(t.$t("Add Custom Data")))])],1):t._e(),t._v(" "),t.show_custom_data?[n("custom-fields",{attrs:{subscriber:t.subscriber,custom_fields:t.options.custom_fields}})]:t._e(),t._v(" "),n("h3",[t._v(t._s(t.$t("Identifiers")))]),t._v(" "),n("el-row",{attrs:{type:"flex",gutter:20}},[t.listId?t._e():n("el-col",[n("el-form-item",{staticClass:"no-margin-bottom",attrs:{label:t.$t("Lists")}},[n("el-select",{staticClass:"el-select-multiple",attrs:{multiple:"",clearable:"",placeholder:t.$t("Select lists")},model:{value:t.subscriber.lists,callback:function(e){t.$set(t.subscriber,"lists",e)},expression:"subscriber.lists"}},t._l(t.options.lists,(function(e){return n("el-option",{key:e.id,attrs:{value:e.id,label:e.title}},[t._v("\n                        "+t._s(e.title)+"\n                    ")])})),1)],1)],1),t._v(" "),t.tagId?t._e():n("el-col",[n("el-form-item",{attrs:{label:t.$t("Tags")}},[n("el-select",{staticClass:"el-select-multiple",attrs:{multiple:"",clearable:"",placeholder:t.$t("Select tags")},model:{value:t.subscriber.tags,callback:function(e){t.$set(t.subscriber,"tags",e)},expression:"subscriber.tags"}},t._l(t.options.tags,(function(e){return n("el-option",{key:e.id,attrs:{value:e.id,label:e.title}},[t._v("\n                        "+t._s(e.title)+"\n                    ")])})),1)],1)],1),t._v(" "),n("el-col",[n("el-form-item",{staticClass:"is-required",attrs:{label:t.$t("Status")}},[n("el-select",{attrs:{placeholder:t.$t("Select")},model:{value:t.subscriber.status,callback:function(e){t.$set(t.subscriber,"status",e)},expression:"subscriber.status"}},t._l(t.options.statuses,(function(e){return n("el-option",{key:e.id,attrs:{label:t._f("ucFirst")(e.title),value:e.id}})})),1),t._v(" "),n("error",{attrs:{error:t.errors.get("status")}})],1)],1)],1)],2)}),[],!1,null,null,null).exports;function Xe(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var tn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.errors={}}var e,n,i;return e=t,(n=[{key:"get",value:function(t){if(this.errors[t])return Object.values(this.errors[t])[0]}},{key:"has",value:function(t){return!!this.errors[t]}},{key:"record",value:function(t){this.errors=t}},{key:"clear",value:function(){this.errors={}}}])&&Xe(e.prototype,n),i&&Xe(e,i),t}();function en(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function nn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var sn={name:"Adder",components:{Forma:Ze},props:["visible","options","listId","tagId"],data:function(){return{exist:!1,errors:new tn,subscriber:this.fresh()}},methods:{fresh:function(){return{first_name:null,last_name:null,email:null,phone:"",date_of_birth:"",status:"subscribed",address_line_1:"",address_line_2:"",city:"",state:"",postal_code:"",country:"",tags:[],lists:[],custom_values:{}}},reset:function(){this.errors.clear(),this.exist=!1,this.subscriber=this.fresh()},hide:function(){this.reset(),this.$emit("close")},view:function(t){this.hide(),this.$router.push({name:"subscriber",params:{id:t}})},save:function(){var t=this;this.errors.clear();var e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?en(Object(n),!0).forEach((function(e){nn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.subscriber);this.listId&&(e.lists=[this.listId]),this.tagId&&(e.tags=[this.tagId]),this.$post("subscribers",e).then((function(e){t.$notify.success({title:t.$t("Great!"),message:e.message,offset:19}),t.$emit("fetch",t.subscriber),t.hide()})).catch((function(e){t.errors.record(e),e.subscriber&&(t.exist=e.subscriber)}))}}},an=Object(a.a)(sn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticClass:"fluentcrm-subscribers-dialog",attrs:{title:t.$t("Add New Contact"),"close-on-click-modal":!1,visible:t.visible,"append-to-body":!0},on:{close:function(e){return t.hide()}}},[n("forma",{attrs:{"list-id":t.listId,"tag-id":t.tagId,options:t.options,errors:t.errors,subscriber:t.subscriber}}),t._v(" "),n("div",{staticClass:"dialog-footer",class:{exist:t.exist},attrs:{slot:"footer"},slot:"footer"},[t.exist?n("p",{staticClass:"text-danger"},[t._v("\n            "+t._s(t.$t("Add_The_siapitd"))+"\n        ")]):t._e(),t._v(" "),n("div",[n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.hide()}}},[t._v("\n                "+t._s(t.$t("Cancel"))+"\n            ")]),t._v(" "),t.exist?n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.view(t.exist.id)}}},[t._v("\n                "+t._s(t.$t("View"))+"\n            ")]):n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.save()}}},[t._v("\n                "+t._s(t.$t("Create Contact"))+"\n            ")])],1)])],1)}),[],!1,null,"64c6a4e0",null).exports,rn={name:"ImportSourceSelector",props:["value"],data:function(){return{loading:!1,option:this.value,import_sources:!1}},computed:{buttonDisabled:function(){return!(this.value&&this.import_sources&&this.import_sources[this.value]&&!this.import_sources[this.value].disabled)},disabledText:function(){return this.value&&this.import_sources&&this.import_sources[this.value]&&this.import_sources[this.value].disabled?this.import_sources[this.value].disabled_message:""}},watch:{option:function(){return this.$emit("input",this.option)}},methods:{next:function(){this.$emit("next")},getSources:function(){var t=this;this.loading=!0,this.$get("import/drivers").then((function(e){t.import_sources=e.drivers})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))}},mounted:function(){this.getSources()}},on=Object(a.a)(rn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("h4",[t._v("\n        "+t._s(t.$t("SourceSelector.title"))+"\n    ")]),t._v(" "),t.import_sources?[n("el-radio-group",{staticClass:"sources fc_inline_image_radio",model:{value:t.option,callback:function(e){t.option=e},expression:"option"}},t._l(t.import_sources,(function(e,i){return n("el-radio",{key:i,staticClass:"option",attrs:{label:i}},[n("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.logo}}),t._v(" "),n("span",{staticClass:"fc_text_label"},[t._v(t._s(e.label))]),t._v(" "),e.disabled?n("span",{staticClass:"fc_import_pro"},[t._v(t._s(t.$t("Pro")))]):t._e()])})),1),t._v(" "),n("router-link",{staticStyle:{display:"inline-block","margin-top":"20px"},attrs:{to:{name:"crm_migrations"}}},[n("div",{staticClass:"fc_inline_image_radio"},[n("label",[n("img",{staticStyle:{"max-height":"64px"},attrs:{src:t.appVars.images_url+"/migrators/crm_importers.png"}}),t._v(" "),n("span",{staticClass:"fc_text_label"},[t._v(t._s(t.$t("Import From Other Providers")))])])])])]:t._e(),t._v(" "),t.disabledText&&t.buttonDisabled?n("div",{staticClass:"fc_narrow_box fluentcrm_databox text-align-center"},[n("p",{domProps:{innerHTML:t._s(t.disabledText)}}),t._v(" "),n("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v(t._s(t.$t("Get FluentCRM Pro")))])]):t._e(),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{disabled:t.buttonDisabled,size:"small",type:"primary"},on:{click:t.next}},[t._v("\n            "+t._s(t.$t("Next"))+"\n        ")])],1)],2)}),[],!1,null,null,null).exports,ln={name:"Csv",components:{Error:Ge},props:["options"],data:function(){return{errors:new tn,delimiter_options:{comma:this.$t("Comma Separated (,)"),semicolon:this.$t("Semicolon Separated (;)")}}},computed:{url:function(){return-1!=window.FLUENTCRM.appVars.rest.url.indexOf("?")?window.FLUENTCRM.appVars.rest.url+"/import/csv-upload&_wpnonce="+window.FLUENTCRM.appVars.rest.nonce+"&delimiter="+this.options.delimiter:window.FLUENTCRM.appVars.rest.url+"/import/csv-upload?_wpnonce="+window.FLUENTCRM.appVars.rest.nonce+"&delimiter="+this.options.delimiter}},methods:{success:function(t){this.errors.clear(),t.map||(t.map=t.headers.map((function(t){return{csv:t,table:null}}))),this.$emit("success",t)},remove:function(){this.errors.clear()},exceed:function(){this.errors.record({file:{exceed:this.$t("You cannot upload more than one file.")}})},error:function(t){var e=JSON.parse(t.message);this.handleError(e),this.errors.record({file:{invalid:e.message||"unknow error. Please check your csv first"}})},sample:function(){location.href=this.options.sampleCsv},clear:function(){this.$refs.uploader.clearFiles()},next:function(){this.$notify.error("Please Upload a CSV first")}}},cn=(n(287),Object(a.a)(ln,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"csv-uploader"},[n("div",{staticClass:"csv_upload_container",staticStyle:{"min-height":"300px"}},[n("label",{staticStyle:{margin:"10px 0px",display:"block"}},[t._v(t._s(t.$t("Select Your CSV Delimiter")))]),t._v(" "),n("el-select",{model:{value:t.options.delimiter,callback:function(e){t.$set(t.options,"delimiter",e)},expression:"options.delimiter"}},t._l(t.delimiter_options,(function(t,e){return n("el-option",{key:e,attrs:{value:e,label:t}})})),1),t._v(" "),t.options.delimiter?[n("h3",[t._v(t._s(t.$t("Upload CSV")))]),t._v(" "),n("el-upload",{ref:"uploader",class:{"is-error":t.errors.has("file")},attrs:{drag:"",limit:1,action:t.url,multiple:!1,"on-error":t.error,"on-remove":t.remove,"on-exceed":t.exceed,"on-success":t.success}},[n("i",{staticClass:"el-icon-upload"}),t._v(" "),n("div",{staticClass:"el-upload__text"},[t._v("\n                    "+t._s(t.$t("Drop file here or"))+" "),n("em",[t._v(t._s(t.$t("click to upload")))])])]),t._v(" "),n("error",{attrs:{error:t.errors.get("file")}}),t._v(" "),n("div",{staticClass:"sample"},[n("a",{on:{click:t.sample}},[t._v(t._s(t.$t("Download sample file")))])]),t._v(" "),n("p",[t._v(t._s(t.$t("csv.download_desc")))])]:t._e()],2),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.next}},[t._v("\n            "+t._s(t.$t("Next [Map Columns]"))+"\n        ")])],1)])}),[],!1,null,null,null).exports);function un(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function _n(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?un(Object(n),!0).forEach((function(e){dn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):un(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function dn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var pn={name:"ReviewConfigurator",components:{OptionSelector:vt},props:["config","import_info","driver","labels"],data:function(){return{general_config:{tags:[],lists:[],update:!0,new_status:"",import_silently:"yes",double_optin_email:"no"},importing:!1,importing_page:1,import_page_total:0,done:!1,done_message:this.$t("Import has been completed, You may close this modal now")}},methods:{importData:function(){var t=this;this.importing=!0,this.$post("import/drivers/"+this.driver,{config:_n(_n({},this.config),this.general_config),importing_page:this.importing_page}).then((function(e){e.has_more?(t.import_page_total=e.page_total,e.next_page?t.importing_page=e.next_page:t.importing_page=t.importing_page+1,t.$nextTick((function(){t.importData()}))):(t.done=!0,e.message&&(t.done_message=e.message,t.$notify.success(e.message)),t.$emit("fetch"))})).catch((function(e){t.handleError(e)})).finally((function(){}))}}},mn={name:"ImportConfiguration",props:["option","options"],components:{FormBuilder:Ft,ReviewConfigurator:Object(a.a)(pn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_review_configurator"},[t.done?n("div",[n("h3",{staticStyle:{"text-align":"center"}},[t._v(t._s(t.done_message))])]):[t.importing?n("div",{staticClass:"text-align-center"},[n("h3",[t._v(t._s(t.$t("Importing now...")))]),t._v(" "),n("h4",[t._v(t._s(t.$t("Use_Please_dnctm")))]),t._v(" "),t.import_page_total?[t.import_page_total?n("h2",[t._v(t._s(t.importing_page)+"/"+t._s(t.import_page_total))]):t._e(),t._v(" "),n("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:parseInt(t.importing_page/t.import_page_total*100),status:"success"}})]:t._e()],2):n("el-form",{staticClass:"manager",attrs:{"label-position":"top"}},[t.import_info.subscribers?[n("el-form-item",{attrs:{label:t.$t("Use_Some_otumyc")}}),t._v(" "),n("el-table",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{border:"",stripe:"",data:t.import_info.subscribers}},[n("el-table-column",{attrs:{prop:"name",label:t.$t("Name")}}),t._v(" "),n("el-table-column",{attrs:{prop:"email",label:t.$t("Email")}})],1),t._v(" "),t.import_info.total?n("p",[t._v(t._s(t.$t("Total Found Result:"))+" "+t._s(t.import_info.total))]):t._e()]:t._e(),t._v(" "),n("el-row",{attrs:{gutter:20}},[t.import_info.has_list_config?n("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[n("el-form-item",{attrs:{label:t.$t("Apply Lists")}},[n("option-selector",{attrs:{field:{is_multiple:!0,creatable:!0,option_key:"lists"}},model:{value:t.general_config.lists,callback:function(e){t.$set(t.general_config,"lists",e)},expression:"general_config.lists"}})],1)],1):t._e(),t._v(" "),t.import_info.has_tag_config?n("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[n("el-form-item",{attrs:{label:t.$t("Apply Tags")}},[n("option-selector",{attrs:{field:{is_multiple:!0,creatable:!0,option_key:"tags"}},model:{value:t.general_config.tags,callback:function(e){t.$set(t.general_config,"tags",e)},expression:"general_config.tags"}})],1)],1):t._e()],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[t.import_info.has_update_config?n("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[n("el-form-item",{staticClass:"no-margin-bottom"},[n("template",{slot:"label"},[t._v("\n                            "+t._s(t.$t("Update Subscribers"))+"\n                            "),n("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("h3",[t._v(t._s(t.$t("Update Subscribers")))]),t._v(" "),n("p",[t._v("\n                                        "+t._s(t.$t("update_subscribers_data_notice"))+"\n                                    ")])]),t._v(" "),n("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),n("el-radio-group",{model:{value:t.general_config.update,callback:function(e){t.$set(t.general_config,"update",e)},expression:"general_config.update"}},[n("el-radio",{attrs:{label:!0}},[t._v(t._s(t.$t("Yes")))]),t._v(" "),n("el-radio",{attrs:{label:!1}},[t._v(t._s(t.$t("No")))])],1)],2)],1):t._e(),t._v(" "),t.import_info.has_status_config?n("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[n("el-form-item",{staticClass:"no-margin-bottom"},[n("template",{slot:"label"},[t._v("\n                            "+t._s(t.$t("New Subscriber Status"))+"\n                            "),n("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n                                    "+t._s(t.$t("New Subscriber Status"))+"\n\n                                    "),n("p",[t._v("\n                                        "+t._s(t.$t("Map_Status_ftns"))+"\n                                    ")])]),t._v(" "),n("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),n("option-selector",{attrs:{field:{is_multiple:!1,option_key:"editable_statuses"}},model:{value:t.general_config.status,callback:function(e){t.$set(t.general_config,"status",e)},expression:"general_config.status"}}),t._v(" "),"pending"==t.general_config.status?n("el-checkbox",{attrs:{"true-label":"yes"},model:{value:t.general_config.double_optin_email,callback:function(e){t.$set(t.general_config,"double_optin_email",e)},expression:"general_config.double_optin_email"}},[t._v("\n                            "+t._s(t.$t("Send Double Optin Email for new contacts"))+"\n                        ")]):t._e()],2)],1):t._e()],1),t._v(" "),t.import_info.has_silent_config?n("el-checkbox",{staticStyle:{"margin-top":"20px"},attrs:{"true-label":"yes","false-label":"no"},model:{value:t.general_config.import_silently,callback:function(e){t.$set(t.general_config,"import_silently",e)},expression:"general_config.import_silently"}},[t._v("\n                "+t._s(t.$t("Do Not Trigger Automations (Tag & List related Events)"))+"\n            ")]):t._e(),t._v(" "),"yes"==t.general_config.import_silently?n("p",[t._v("\n                Uncheck this if you want to trigger automation events\n            ")]):t._e()],2),t._v(" "),t.importing?t._e():n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.importData()}}},[t.labels.step_3?n("span",[t._v(t._s(t.labels.step_3))]):n("span",[t._v(t._s(t.$t("Import Now")))])])],1)]],2)}),[],!1,null,null,null).exports},data:function(){return{fields:{},config:!1,labels:{},loading:!1,step:"config",import_info:!1,general_settings:{tags:[],lists:[],status:"",update_if_exist:"no",disable_triggers:"no"}}},methods:{fetchDriver:function(){var t=this;this.loading=!0,this.$get("import/drivers/"+this.option).then((function(e){t.fields=e.fields,t.config=e.config,t.labels=e.labels})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},validateConfig:function(){var t=this;this.loading=!0,this.$get("import/drivers/"+this.option,{config:this.config,summary:"yes"}).then((function(e){t.import_info=e.import_info,t.step="general_config"})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},emitFetch:function(){this.$emit("fetch")}},mounted:function(){this.fetchDriver()}};function fn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function hn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var vn={name:"ImportSourceConfiguration",components:{Csv:cn,ImportConfiguration:Object(a.a)(mn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fc_import_configuration",staticStyle:{"min-height":"300px"}},["config"==t.step?[t.config?n("div",{staticClass:"fc_importer_form"},[n("form-builder",{attrs:{formData:t.config,fields:t.fields}})],1):t._e(),t._v(" "),t.config?n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.validateConfig()}}},[t._v("\n                "+t._s(t.labels.step_2||"Next")+"\n            ")])],1):t._e()]:"general_config"==t.step?[n("review-configurator",{attrs:{labels:t.labels,config:t.config,import_info:t.import_info,driver:t.option},on:{fetch:function(e){return t.emitFetch()}}})]:t._e()],2)}),[],!1,null,null,null).exports},props:{option:{required:!0},options:Object},computed:{isCsv:function(){return"csv"===this.option}},methods:{success:function(t){var e;e=this.isCsv?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?fn(Object(n),!0).forEach((function(e){hn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):fn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({type:"csv"},t):{type:"users",roles:t},this.$emit("success",e)},next:function(){this.$emit("next")},emitFetch:function(){this.$emit("fetch")}}},gn=Object(a.a)(vn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isCsv?n("div",[n("csv",{attrs:{options:t.options},on:{success:t.success}})],1):n("div",[n("import-configuration",{attrs:{option:t.option,options:t.options},on:{fetch:function(e){return t.emitFetch()}}})],1)}),[],!1,null,null,null).exports,bn={name:"TagListSelect",props:{label:{required:!0},placeholder:{default:function(){return"Select "+this.label}},option:{required:!0,type:Array},value:{type:Array}},data:function(){return{model:this.value}},watch:{model:function(){return this.$emit("input",this.model)}}},yn=Object(a.a)(bn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form-item",{attrs:{label:t.label}},[n("el-select",{staticClass:"el-select-multiple",attrs:{multiple:"",clearable:"",placeholder:t.placeholder},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.option,(function(e){return n("el-option",{key:e.id,attrs:{value:e.id,label:e.title}},[t._v("\n            "+t._s(e.title)+"\n        ")])})),1)],1)}),[],!1,null,null,null).exports;function wn(t){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $n(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function kn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?$n(Object(n),!0).forEach((function(e){xn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):$n(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function xn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Cn={name:"Mapper",components:{TlSelect:yn},props:["map","headers","columns","options","csv","listId","tagId"],data:function(){return{form:{map:this.map,tags:[],lists:[],update:!1,new_status:"",custom_values:{},delimiter:this.options.delimiter,import_silently:"no"},importing_page:1,total_page:1,importing:!1,import_status:{},skipped:0,invalid_email_counts:0,inserted:0,updated:0,errors:"",skipped_contacts:[],invalid_contacts:[],showing_contacts:""}},computed:{completed_percent:function(){return this.import_status.total?parseInt(this.import_status.completed/this.import_status.total*100):0}},watch:{map:function(){this.form.map=this.map}},methods:{save:function(){var t=this;this.form.map.filter((function(t){return t.table})).length?(this.listId&&this.form.lists.push(this.listId),this.tagId&&this.form.tags.push(this.tagId),this.importing=!0,this.$post("import/csv-import",kn(kn({},this.form),{},{file:this.csv,importing_page:this.importing_page})).then((function(e){if(!e||"object"!=wn(e)||!e.total)return t.errors=e,!1;t.import_status=e,t.skipped+=e.skipped,t.invalid_email_counts+=e.invalid_email_counts,t.inserted+=e.inserted,t.updated+=e.updated,e.invalid_contacts&&e.invalid_contacts.length&&t.invalid_contacts.push(e.invalid_contacts),e.skipped_contacts&&e.skipped_contacts.length&&t.skipped_contacts.push(e.skipped_contacts),e.has_more?(t.importing_page++,t.save()):(t.$notify({title:t.$t("Success"),type:"success",offset:20,message:t.$t("Map_Subscribers_is")}),t.$emit("fetch"))})).catch((function(e){t.errors=e;var n=Object.keys(e.data);t.$notify({title:t.$t("Error"),type:"error",offset:20,message:e.data[n[0]]}),t.importing=!1})).finally((function(){}))):this.$notify({title:this.$t("Warning"),type:"warning",offset:20,message:this.$t("No mapping found.")})}}};function Sn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function On(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Sn(Object(n),!0).forEach((function(e){En(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Sn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function En(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var jn={name:"UserImportManager",components:{TlSelect:yn},props:["roles","options","listId","tagId"],data:function(){return{users:[],form:{tags:[],lists:[],update:!1,new_status:"",import_silently:"no"},import_page:1,importing:!1,import_page_total:1,total_count:0}},watch:{roles:function(){this.fetch()}},methods:{fetch:function(){var t=this;this.$get("import/users",{roles:this.roles}).then((function(e){t.users=e.users,t.total_count=e.total}))},save:function(){var t=this;this.importing=!0;for(var e={},n=0,i=this.roles.length;n<i;n++){var s=this.roles[n];e[s]=s}this.listId&&this.form.lists.push(this.listId),this.tagId&&this.form.tags.push(this.tagId),this.$post("import/users",On(On({},this.form),{},{roles:e,page:this.import_page})).then((function(e){e.has_more?(t.import_page=e.next_page,t.import_page_total=e.page_total,t.$nextTick((function(){t.save()}))):(t.$notify.success(e.record_total+" users have been successfully imported as CRM contacts"),t.$emit("fetch"),t.$emit("close"),e.reload_page&&setTimeout((function(){window.location.reload(!0)}),500))})).catch((function(t){console.log(t)}))},listeners:function(){var t=this;this.addAction("import","fluentcrm",(function(e){"users"===e&&t.save()}))}},mounted:function(){this.fetch(),this.listeners()}},Tn={name:"ImportReviewer",components:{Mapper:Object(a.a)(Cn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dc_csv_mapper"},[t.importing?n("div",{staticClass:"importing_stats"},[!t.import_status.total||t.import_status.has_more?n("div",{staticClass:"text-align-center"},[n("h4",[t._v(t._s(t.$t("Map_Importing_CfyCPD")))]),t._v(" "),n("el-progress",{attrs:{"text-inside":!0,"stroke-width":40,percentage:t.completed_percent,status:"success"}}),t._v(" "),n("h3",[t._v(t._s(t.import_status.completed)+" / "+t._s(t.import_status.total))])],1):t._e(),t._v(" "),t.import_status.total&&!t.import_status.has_more?n("div",[n("h2",[t._v(t._s(t.$t("Map_Completed_Ycctmn")))])]):t._e(),t._v(" "),n("div",{staticClass:"wfc_well"},[n("ul",[n("li",[t._v(t._s(t.$t("Total Inserted:"))+" "+t._s(t.inserted))]),t._v(" "),n("li",[t._v(t._s(t.$t("Total Updated:"))+" "+t._s(t.updated))]),t._v(" "),n("li",[t._v(t._s(t.$t("Invalid Emails:"))+" "+t._s(t.invalid_email_counts))]),t._v(" "),n("li",[t._v(t._s(t.$t("Map_Total_S_I"))+" "+t._s(t.skipped))])])]),t._v(" "),t.errors?n("div",[n("h3",[t._v("Errors")]),t._v(" "),n("pre",{staticStyle:{"white-space":"pre-wrap"}},[t._v(t._s(t.errors))])]):t._e(),t._v(" "),t.invalid_contacts.length||t.skipped_contacts.length?n("div",{staticClass:"fc_log_wrapper",staticStyle:{"margin-top":"20px"}},[n("el-button-group",[t.invalid_contacts.length?n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){t.showing_contacts="invalid_contacts"}}},[t._v("\n                    "+t._s(t.$t("Show Invalid Contacts"))+"\n                ")]):t._e(),t._v(" "),t.skipped_contacts.length?n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){t.showing_contacts="skipped_contacts"}}},[t._v("\n                    "+t._s(t.$t("Show Skipped Contacts"))+"\n                ")]):t._e(),t._v(" "),t.errors?n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){t.showing_contacts="errors"}}},[t._v("\n                    "+t._s(t.$t("Show Errors"))+"\n                ")]):t._e()],1),t._v(" "),"invalid_contacts"==t.showing_contacts?n("div",[n("h3",[t._v(t._s(t.$t("Contacts that are invalid")))]),t._v(" "),n("pre",[t._v(t._s(t.invalid_contacts))]),t._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(e){t.showing_contacts=""}}},[t._v(t._s(t.$t("Close Log")))])],1):"skipped_contacts"==t.showing_contacts?n("div",[n("h3",[t._v(t._s(t.$t("Map_Contacts_tad")))]),t._v(" "),n("pre",[t._v(t._s(t.skipped_contacts))]),t._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(e){t.showing_contacts=""}}},[t._v(t._s(t.$t("Close Log")))])],1):"errors"==t.showing_contacts?n("div",{staticClass:"errors"},[n("p",[t._v(t._s(t.$t("Errors")))]),t._v(" "),n("pre",[t._v(t._s(t.errors))]),t._v(" "),n("el-button",{attrs:{size:"mini"},on:{click:function(e){t.showing_contacts=""}}},[t._v(t._s(t.$t("Close Log")))])],1):t._e()],1):t._e()]):n("el-form",{attrs:{"label-width":"100px","label-position":"top"}},[n("el-form-item",[n("template",{slot:"label"},[t._v("\n                "+t._s(t.$t("Mapper.title"))+"\n                "),n("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("p",[t._v("\n                            "+t._s(t.$t("Mapper.title_desc"))+"\n                        ")])]),t._v(" "),n("i",{staticClass:"el-icon-info text-info"})])],1)],2),t._v(" "),n("el-form-item",[n("table",{staticClass:"fc_horizontal_table"},[n("thead",[n("tr",[n("th",[t._v(t._s(t.$t("CSV Headers")))]),t._v(" "),n("th",[t._v(t._s(t.$t("Subscriber Fields")))])])]),t._v(" "),n("tbody",t._l(t.headers,(function(e,i){return n("tr",{key:i},[n("td",[n("el-input",{attrs:{value:e,disabled:""}})],1),t._v(" "),n("td",[n("el-select",{attrs:{clearable:""},model:{value:t.form.map[i].table,callback:function(e){t.$set(t.form.map[i],"table",e)},expression:"form.map[index].table"}},[n("el-option-group",{attrs:{label:t.$t("Main Contact Properties")}},t._l(t.columns,(function(e,i){return n("el-option",{key:i,attrs:{label:e,value:i}},[t._v("\n                                    "+t._s(e)+"\n                                ")])})),1),t._v(" "),n("el-option-group",{attrs:{label:t.$t("Custom Contact Properties")}},t._l(t.options.custom_fields,(function(e){return n("el-option",{key:e.slug,attrs:{label:e.label,value:e.slug}},[t._v("\n                                    "+t._s(e.label)+"\n                                ")])})),1)],1)],1)])})),0)])]),t._v(" "),n("el-row",{attrs:{gutter:20}},[t.listId?t._e():n("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[n("tl-select",{attrs:{label:t.$t("Lists"),option:t.options.lists},model:{value:t.form.lists,callback:function(e){t.$set(t.form,"lists",e)},expression:"form.lists"}})],1),t._v(" "),n("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[n("tl-select",{attrs:{label:t.$t("Tags"),option:t.options.tags},model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[n("el-form-item",{staticClass:"no-margin-bottom"},[n("template",{slot:"label"},[t._v("\n                        "+t._s(t.$t("Update Subscribers"))+"\n                        "),n("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("h3",[t._v(t._s(t.$t("Update Subscribers")))]),t._v(" "),n("p",[t._v("\n                                    "+t._s(t.$t("update_subscribers_data_notice"))+"\n                                ")])]),t._v(" "),n("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),n("el-radio-group",{model:{value:t.form.update,callback:function(e){t.$set(t.form,"update",e)},expression:"form.update"}},[n("el-radio",{attrs:{label:!0}},[t._v(t._s(t.$t("Yes")))]),t._v(" "),n("el-radio",{attrs:{label:!1}},[t._v(t._s(t.$t("No")))])],1)],2)],1),t._v(" "),n("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[n("el-form-item",{staticClass:"no-margin-bottom"},[n("template",{slot:"label"},[t._v("\n                        "+t._s(t.$t("New Subscriber Status"))+"\n                        "),n("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n                                "+t._s(t.$t("New Subscriber Status"))+"\n                                "),n("p",[t._v("\n                                    "+t._s(t.$t("Map_Status_ftns"))+"\n                                ")])]),t._v(" "),n("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),n("el-select",{attrs:{placeholder:t.$t("Status")},model:{value:t.form.new_status,callback:function(e){t.$set(t.form,"new_status",e)},expression:"form.new_status"}},t._l(t.options.statuses,(function(t){return n("el-option",{key:t.slug,attrs:{label:t.title,value:t.slug}})})),1),t._v(" "),"pending"==t.form.new_status?n("el-checkbox",{attrs:{"true-label":"yes"},model:{value:t.form.double_optin_email,callback:function(e){t.$set(t.form,"double_optin_email",e)},expression:"form.double_optin_email"}},[t._v(t._s(t.$t("Send Double Optin Email for new contacts")))]):t._e()],2)],1)],1),t._v(" "),n("el-checkbox",{staticStyle:{"margin-top":"20px"},attrs:{"true-label":"yes","false-label":"no"},model:{value:t.form.import_silently,callback:function(e){t.$set(t.form,"import_silently",e)},expression:"form.import_silently"}},[t._v("\n            "+t._s(t.$t("Do Not Trigger Automations (Tag & List related Events)"))+"\n        ")]),t._v(" "),t.form.update?n("el-checkbox",{staticStyle:{"margin-top":"20px"},attrs:{"true-label":"yes"},model:{value:t.form.force_update_status,callback:function(e){t.$set(t.form,"force_update_status",e)},expression:"form.force_update_status"}},[t._v("\n            "+t._s(t.$t("force_update_contact_status"))+"\n        ")]):t._e()],1),t._v(" "),t.importing?t._e():n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("\n            "+t._s(t.$t("Confirm Import"))+"\n        ")])],1)],1)}),[],!1,null,null,null).exports,Manager:Object(a.a)(jn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.importing?n("div",{staticClass:"text-align-center"},[n("h3",[t._v(t._s(t.$t("Importing now...")))]),t._v(" "),n("h4",[t._v(t._s(t.$t("Use_Please_dnctm")))]),t._v(" "),t.import_page_total?n("h2",[t._v(t._s(t.import_page)+"/"+t._s(t.import_page_total))]):t._e(),t._v(" "),n("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:parseInt(t.import_page/t.import_page_total*100),status:"success"}})],1):n("el-form",{staticClass:"manager",attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{label:t.$t("Use_Some_otumyc")}}),t._v(" "),n("el-table",{staticStyle:{width:"100%","margin-bottom":"30px"},attrs:{border:"",stripe:"",data:t.users}},[n("el-table-column",{attrs:{prop:"display_name",label:t.$t("Name")}}),t._v(" "),n("el-table-column",{attrs:{prop:"user_email",label:t.$t("Email")}})],1),t._v(" "),t.total_count?n("p",[t._v(t._s(t.$t("Total Found Result:"))+" "+t._s(t.total_count))]):t._e(),t._v(" "),n("el-row",{attrs:{gutter:20}},[t.listId?t._e():n("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[n("tl-select",{attrs:{label:t.$t("Lists"),option:t.options.lists},model:{value:t.form.lists,callback:function(e){t.$set(t.form,"lists",e)},expression:"form.lists"}})],1),t._v(" "),n("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[n("tl-select",{attrs:{label:t.$t("Tags"),option:t.options.tags},model:{value:t.form.tags,callback:function(e){t.$set(t.form,"tags",e)},expression:"form.tags"}})],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[n("el-form-item",{staticClass:"no-margin-bottom"},[n("template",{slot:"label"},[t._v("\n                        "+t._s(t.$t("Update Subscribers"))+"\n                        "),n("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("h3",[t._v(t._s(t.$t("Update Subscribers")))]),t._v(" "),n("p",[t._v("\n                                    "+t._s(t.$t("update_subscribers_data_notice"))+"\n                                ")])]),t._v(" "),n("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),n("el-radio-group",{model:{value:t.form.update,callback:function(e){t.$set(t.form,"update",e)},expression:"form.update"}},[n("el-radio",{attrs:{label:!0}},[t._v(t._s(t.$t("Yes")))]),t._v(" "),n("el-radio",{attrs:{label:!1}},[t._v(t._s(t.$t("No")))])],1)],2)],1),t._v(" "),n("el-col",{attrs:{lg:12,md:12,sm:12,xs:12}},[n("el-form-item",{staticClass:"no-margin-bottom"},[n("template",{slot:"label"},[t._v("\n                        "+t._s(t.$t("New Subscriber Status"))+"\n                        "),n("el-tooltip",{staticClass:"item",attrs:{placement:"bottom-start",effect:"light"}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._v("\n                                "+t._s(t.$t("New Subscriber Status"))+"\n\n                                "),n("p",[t._v("\n                                    "+t._s(t.$t("Map_Status_ftns"))+"\n                                ")])]),t._v(" "),n("i",{staticClass:"el-icon-info text-info"})])],1),t._v(" "),n("el-select",{model:{value:t.form.new_status,callback:function(e){t.$set(t.form,"new_status",e)},expression:"form.new_status"}},t._l(t.options.statuses,(function(t){return n("el-option",{key:t.slug,attrs:{value:t.slug,label:t.title}})})),1),t._v(" "),"pending"==t.form.new_status?n("el-checkbox",{attrs:{"true-label":"yes"},model:{value:t.form.double_optin_email,callback:function(e){t.$set(t.form,"double_optin_email",e)},expression:"form.double_optin_email"}},[t._v(t._s(t.$t("Send Double Optin Email for new contacts")))]):t._e()],2)],1)],1),t._v(" "),n("el-checkbox",{staticStyle:{"margin-top":"20px"},attrs:{"true-label":"yes","false-label":"no"},model:{value:t.form.import_silently,callback:function(e){t.$set(t.form,"import_silently",e)},expression:"form.import_silently"}},[t._v("\n            "+t._s(t.$t("Do Not Trigger Automations (Tag & List related Events)"))+"\n        ")])],1),t._v(" "),t.importing?t._e():n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.save}},[t._v("\n            "+t._s(t.$t("Import Users Now"))+"\n        ")])],1)],1)}),[],!1,null,null,null).exports},props:{csv:{},map:{type:Array},headers:{type:Array},columns:{type:Object},roles:{type:Array},options:Object,option:String,listId:{default:null},tagId:{default:null}},data:function(){return{}},computed:{isCsv:function(){return"csv"===this.option}},methods:{fetch:function(){this.$emit("fetch")},close:function(){this.$emit("close")}}},Pn={name:"Importer",components:{SourceSelector:on,SourceConfiguration:gn,ReviewAndImport:Object(a.a)(Tn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isCsv?n("mapper",{attrs:{csv:t.csv,map:t.map,"list-id":t.listId,"tag-id":t.tagId,headers:t.headers,columns:t.columns,options:t.options},on:{fetch:t.fetch,close:t.close}}):n("manager",{attrs:{roles:t.roles,"list-id":t.listId,"tag-id":t.tagId,options:t.options},on:{fetch:t.fetch,close:t.close}})}),[],!1,null,null,null).exports},props:["visible","options","listId","tagId"],data:function(){return{map:[],tags:[],active:0,csv:null,lists:[],roles:[],headers:[],columns:{},statuses:[],option:"csv",countries:[],store:!1,button_loading:!1}},methods:{hide:function(){this.reset(),this.$emit("close"),this.doAction("cancel","importer")},next:function(){this.active++>2&&(this.active=0)},stop:function(){return 1===this.active&&("csv"===this.option?!this.csv:!this.roles.length)},prev:function(){0!==this.active&&this.active--},success:function(t){"csv"===t.type?(this.map=t.map,this.csv=t.file,this.headers=t.headers,this.columns=t.fields,this.next()):this.roles=t.roles},confirm:function(){this.doAction("import",this.option)},fetch:function(){this.$emit("fetch")},close:function(){this.hide(),this.reset()},reset:function(){this.active=0,this.removeAllActions("import")}}};function An(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Fn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?An(Object(n),!0).forEach((function(e){Dn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Dn(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var qn={name:"ExportSubscriber",props:["visible","search_query"],components:{GenericPromo:we},data:function(){return{columns:["first_name","last_name","email"],available_columns:z.c,custom_fields:[],commerce_columns:[],limit:"",offset:"",exporting:!1}},methods:{hide:function(){this.$emit("close")},exportContacts:function(){location.href=window.ajaxurl+"?"+jQuery.param(Fn(Fn({action:"fluentcrm_export_contacts"},this.search_query),{},{columns:this.columns,custom_fields:this.custom_fields,commerce_columns:this.commerce_columns,limit:this.limit,offset:this.offset,format:"csv"}))}}},In={name:"ActionMenu",components:{Adder:an,Importer:Object(a.a)(Pn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticClass:"fluentcrm-importer",attrs:{title:t.$t("Import Subscribers"),visible:t.visible,"append-to-body":!0,"close-on-click-modal":!1,width:"900px"},on:{close:function(e){return t.hide()}}},[t.visible?n("div",[0===t.active?[n("SourceSelector",{staticClass:"step",on:{fetch:function(e){return t.fetch()},next:function(e){return t.next()}},model:{value:t.option,callback:function(e){t.option=e},expression:"option"}})]:1===t.active?[n("source-configuration",{staticClass:"step",attrs:{option:t.option,options:t.options},on:{next:function(e){return t.next()},fetch:function(e){return t.fetch()},success:t.success}})]:2===t.active?[n("review-and-import",{staticClass:"step",attrs:{csv:t.csv,map:t.map,roles:t.roles,option:t.option,headers:t.headers,columns:t.columns,options:t.options,"list-id":t.listId,"tag-id":t.tagId},on:{close:t.close,fetch:t.fetch}})]:t._e()],2):t._e()])}),[],!1,null,null,null).exports,Exporter:Object(a.a)(qn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticClass:"fluentcrm-subscribers-export-dialog",attrs:{title:t.$t("Export Subscriber"),visible:t.visible,width:"50%","append-to-body":!0},on:{close:function(e){return t.hide()}}},[n("div",[n("div",{staticClass:"fc_form_item"},[n("h3",[t._v(t._s(t.$t("Exp_Please_sctywte")))]),t._v(" "),n("el-checkbox-group",{staticClass:"fc_2_col_items",model:{value:t.columns,callback:function(e){t.columns=e},expression:"columns"}},[n("el-checkbox",{attrs:{label:"id"}},[t._v(t._s(t.$t("ID")))]),t._v(" "),n("el-checkbox",{attrs:{label:"prefix"}},[t._v(t._s(t.$t("Name Prefix")))]),t._v(" "),n("el-checkbox",{attrs:{label:"user_id"}},[t._v(t._s(t.$t("User ID")))]),t._v(" "),n("el-checkbox",{attrs:{label:"first_name",disabled:""}},[t._v(t._s(t.$t("First Name")))]),t._v(" "),n("el-checkbox",{attrs:{label:"last_name",disabled:""}},[t._v(t._s(t.$t("Last Name")))]),t._v(" "),n("el-checkbox",{attrs:{label:"email",disabled:""}},[t._v(t._s(t.$t("Email")))]),t._v(" "),n("el-checkbox",{attrs:{label:"status"}},[t._v(t._s(t.$t("Status")))]),t._v(" "),n("el-checkbox",{attrs:{label:"address_line_1"}},[t._v(t._s(t.$t("Address Line 1")))]),t._v(" "),n("el-checkbox",{attrs:{label:"address_line_2"}},[t._v(t._s(t.$t("Address Line 2")))]),t._v(" "),n("el-checkbox",{attrs:{label:"postal_code"}},[t._v(t._s(t.$t("Postal Code")))]),t._v(" "),n("el-checkbox",{attrs:{label:"city"}},[t._v(t._s(t.$t("City")))]),t._v(" "),n("el-checkbox",{attrs:{label:"state"}},[t._v(t._s(t.$t("State")))]),t._v(" "),n("el-checkbox",{attrs:{label:"ip"}},[t._v(t._s(t.$t("IP Address")))]),t._v(" "),n("el-checkbox",{attrs:{label:"date_of_birth"}},[t._v(t._s(t.$t("Date of Birth")))]),t._v(" "),t._l(t.available_columns,(function(e){return n("el-checkbox",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.label))])}))],2),t._v(" "),t.appVars.contact_custom_fields.length?[n("h3",[t._v(t._s(t.$t("Custom Contact Fields")))]),t._v(" "),n("el-checkbox-group",{staticClass:"fc_2_col_items",model:{value:t.custom_fields,callback:function(e){t.custom_fields=e},expression:"custom_fields"}},t._l(t.appVars.contact_custom_fields,(function(e){return n("el-checkbox",{key:e.slug,attrs:{label:e.slug}},[t._v(t._s(e.label))])})),1)]:t._e(),t._v(" "),t.appVars.commerce_provider?[n("h3",[t._v(t._s(t.$t("Commerce Fields"))+" ("+t._s(t._f("ucFirst")(t.appVars.commerce_provider))+")")]),t._v(" "),n("el-checkbox-group",{staticClass:"fc_2_col_items",model:{value:t.commerce_columns,callback:function(e){t.commerce_columns=e},expression:"commerce_columns"}},[n("el-checkbox",{attrs:{label:"total_order_value"}},[t._v(t._s(t.$t("Lifetime Value")))]),t._v(" "),n("el-checkbox",{attrs:{label:"total_order_count"}},[t._v(t._s(t.$t("Total Order Count")))]),t._v(" "),n("el-checkbox",{attrs:{label:"first_order_date"}},[t._v(t._s(t.$t("Customer Since"))+"e")]),t._v(" "),n("el-checkbox",{attrs:{label:"last_order_date"}},[t._v(t._s(t.$t("Last Order Date")))])],1)]:t._e()],2),t._v(" "),n("div",{staticClass:"fc_form_item fc_t_30 wfc_well"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[n("label",{staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(t.$t("Contact Export Limit")))]),t._v(" "),n("el-input",{attrs:{type:"number"},model:{value:t.limit,callback:function(e){t.limit=e},expression:"limit"}})],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("label",{staticStyle:{"margin-bottom":"10px"}},[t._v(t._s(t.$t("Contact Export Offset")))]),t._v(" "),n("el-input",{attrs:{type:"number"},model:{value:t.offset,callback:function(e){t.offset=e},expression:"offset"}})],1)],1),t._v(" "),n("p",[t._v(t._s(t.$t("Exp_Leave_tbfnloo")))])],1),t._v(" "),t.exporting?n("p",[t._v(t._s(t.$t("Exporting... Please wait")))]):t._e()]),t._v(" "),t.has_campaign_pro?n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:t.hide}},[t._v("\n            "+t._s(t.$t("Cancel"))+"\n        ")]),t._v(" "),n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.exportContacts()}}},[t._v("\n            "+t._s(t.$t("Export Contacts"))+"\n        ")])],1):n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("generic-promo")],1)])}),[],!1,null,null,null).exports},props:["options","listId","tagId","search_query"],data:function(){return{adder:!1,importer:!1,exporter:!1}},methods:{toggle:function(t){this[t]=!this[t]},close:function(t){this[t]=!1},fetch:function(t){this.$emit("fetch",t)}}},Nn=Object(a.a)(In,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("el-button-group",[n("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"primary"},on:{click:function(e){return t.toggle("adder")}}},[t._v("\n            "+t._s(t.$t("Add Contact"))+"\n        ")]),t._v(" "),n("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-upload"},on:{click:function(e){return t.toggle("importer")}}},[t._v("\n            "+t._s(t.$t("Import"))+"\n        ")]),t._v(" "),n("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-download"},on:{click:function(e){return t.toggle("exporter")}}},[t._v("\n            "+t._s(t.$t("Export"))+"\n        ")])],1),t._v(" "),n("adder",{attrs:{visible:t.adder,listId:t.listId,tagId:t.tagId,options:t.options},on:{fetch:t.fetch,close:function(e){return t.close("adder")}}}),t._v(" "),t.importer?n("importer",{attrs:{"list-id":t.listId,"tag-id":t.tagId,visible:t.importer,options:t.options},on:{fetch:t.fetch,close:function(e){return t.close("importer")}}}):t._e(),t._v(" "),n("exporter",{attrs:{search_query:t.search_query,visible:t.exporter},on:{close:function(e){return t.close("exporter")}}})],1)}),[],!1,null,null,null).exports,Ln={name:"Filterer",props:{placement:{default:"bottom-start"},filter_type:{default:"filterer"}}},Mn=Object(a.a)(Ln,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dropdown",{staticClass:"fluentcrm-filter",attrs:{placement:t.placement,"hide-on-click":!1,trigger:"click"}},[t._t("header",(function(){return[n("el-button",{attrs:{plain:"",size:"small"}},[t._t("label",(function(){return[t._v("\n                "+t._s(t.$t("Columns"))+"\n            ")]})),t._v(" "),t._t("icon",(function(){return[n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]}))],2)]})),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t._t("items"),t._v(" "),t._t("footer")],2)],2)}),[],!1,null,null,null).exports,Rn={name:"Editor",components:{Filterer:Mn},props:{type:{required:!0},options:{required:!0,type:Array},noMatch:{required:!0,type:Boolean},matched:{required:!0},selectionCount:{required:!0,type:Number},placement:{default:"bottom-start"}},watch:{matched:function(){this.init()}},data:function(){return{query:null,selection:[],checkList:[]}},methods:{init:function(){for(var t in this.selection=[],this.matched)this.selection.includes(t)||this.selection.push(t)},search:function(){this.$emit("search",this.query&&this.query.toLowerCase())},isIndeterminate:function(t){return this.matched[t.slug]&&this.matched[t.slug]!==this.selectionCount},save:function(t){var e=Object.keys(this.matched),n=t.filter((function(t){return!e.includes(t)})),i=e.filter((function(e){return!t.includes(e)}));this.$emit("subscribe",{attach:n,detach:i})}},mounted:function(){this.init()}},zn=Object(a.a)(Rn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("filterer",{attrs:{placement:t.placement}},[t._t("header",(function(){return[n("el-button",{attrs:{plain:"",size:"mini"}},[t._v("\n            "+t._s(t.$t("Add or Remove"))+" "+t._s(t._f("ucFirst")(t.trans(t.type)))+"\n            "),t._t("icon",(function(){return[n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]}))],2)]}),{slot:"header"}),t._v(" "),n("el-dropdown-item",{staticClass:"fluentcrm-filter-option no-hover",attrs:{slot:"items"},slot:"items"},[n("el-input",{attrs:{size:"mini",placeholder:t.$t("Search...")},nativeOn:{keyup:function(e){return t.search.apply(null,arguments)}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1),t._v(" "),n("el-dropdown-item",{staticClass:"fluentcrm-filter-option no-hover",attrs:{slot:"items"},slot:"items"},[t._v("\n        "+t._s(t.$t("Choose an option:"))+"\n    ")]),t._v(" "),n("el-checkbox-group",{staticClass:"fluentcrm-filter-options",attrs:{slot:"items"},on:{change:t.save},slot:"items",model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}},t._l(t.options,(function(e){return n("el-checkbox",{key:e.id,staticClass:"el-dropdown-menu__item",attrs:{label:e.slug,indeterminate:t.isIndeterminate(e)}},[t._v("\n            "+t._s(t.trans(e.title))+"\n        ")])})),1),t._v(" "),t._t("footer",null,{slot:"footer"}),t._v(" "),t.noMatch?n("el-dropdown-item",{staticClass:"fluentcrm-filter-option",attrs:{slot:"items"},slot:"items"},[n("p",[t._v(t._s(t.$t("No items found")))])]):t._e()],2)}),[],!1,null,null,null).exports,Bn={name:"Filters",components:{Filterer:Mn},props:{type:{required:!0},options:{required:!0,type:Array},selected:{required:!0},count:{required:!0,type:Number},noMatch:{required:!0,type:Boolean}},data:function(){return{query:null,placement:"bottom-start"}},computed:{selection:{get:function(){return this.selected},set:function(t){this.$emit("filter",t)}}},methods:{search:function(){this.$emit("search",this.query&&this.query.toLowerCase())},deselect:function(t){this.selection.splice(this.selection.indexOf(t),1),this.$emit("filter",this.selection)}},mounted:function(){this.appVars.is_rtl&&(this.placement="bottom-end")}},Vn={data:function(){return{noMatch:!1}},computed:{choices:function(){return this.options.filter((function(t){return!1!==t.status}))}},methods:{search:function(t){var e=!0,n=this.options.map((function(n){return n.title.toLowerCase().includes(t)?(e=!1,n.status=!0):n.status=t&&!1,n}));this.$emit("search",this.type,n),this.noMatch=!(!t||!e)},subscribe:function(t){this.$emit("subscribe",this.payload(t))},payload:function(t){return{type:this.type,payload:t}}}},Un={name:"Manager",props:["type","matched","options","selected","selection","subscribers","selectionCount","total_match"],data:function(){return{placement:"bottom-start",new_payload:!1}},components:{Editor:zn,Filters:Object(a.a)(Bn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-filterer"},[n("filterer",{class:{"fluentcrm-filtered":t.selection.length},attrs:{placement:t.placement,filter_type:t.type}},[n("template",{slot:"label"},[(t.selection.length,[t._v("\n                "+t._s(t.$t("Filtered by"))+" "+t._s(t._f("ucFirst")(t.trans(t.type)))+"\n            ")])],2),t._v(" "),n("el-dropdown-item",{staticClass:"fluentcrm-filter-option no-hover",attrs:{slot:"items"},slot:"items"},[n("el-input",{attrs:{size:"small",placeholder:t.$t("Search...")},nativeOn:{keyup:function(e){return t.search.apply(null,arguments)}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}})],1),t._v(" "),n("el-dropdown-item",{staticClass:"fluentcrm-filter-option no-hover",attrs:{slot:"items"},slot:"items"},[t._v("\n            "+t._s(t.$t("Choose an option:"))+"\n        ")]),t._v(" "),n("el-checkbox-group",{staticClass:"fluentcrm-filter-options",attrs:{slot:"items"},slot:"items",model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}},t._l(t.options,(function(e){return n("el-checkbox",{key:e.id,staticClass:"el-dropdown-menu__item",attrs:{label:e.id}},[t._v("\n                "+t._s(e.title)+"\n            ")])})),1),t._v(" "),t.noMatch?n("el-dropdown-item",{staticClass:"fluentcrm-filter-option",attrs:{slot:"items"},slot:"items"},[n("p",[t._v(t._s(t.$t("No items found")))])]):t._e()],2),t._v(" "),t.selection.length?n("div",{staticClass:"fluentcrm-meta"},t._l(t.options,(function(e){return-1!==t.selected.indexOf(e.id)?n("el-tag",{key:e.id,attrs:{closable:""},on:{close:function(n){return t.deselect(e)}}},[t._v("\n            "+t._s(e.title)+"\n        ")]):t._e()})),1):t._e()],1)}),[],!1,null,null,null).exports},mixins:[Vn],methods:{filter:function(t){this.$emit("filter",this.payload(t))},updatePayLoad:function(t){this.new_payload=t},pushPayload:function(){var t=this;this.new_payload?(this.subscribe(this.new_payload),setTimeout((function(){t.new_payload=!1}),500)):this.$notify.error("no changes found")}},mounted:function(){this.appVars.is_rtl&&(this.placement="bottom-end")}},Hn=Object(a.a)(Un,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-filter-manager"},[t.selection?[n("editor",{attrs:{type:t.type,options:t.choices,noMatch:t.noMatch,matched:t.matched,selectionCount:t.selectionCount,placement:t.placement},on:{search:t.search,subscribe:t.updatePayLoad}},[n("div",{staticStyle:{padding:"10px","text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticStyle:{width:"100%"},attrs:{disabled:!t.new_payload,type:"success",size:"mini"},on:{click:function(e){return t.pushPayload()}}},[t._v("\n                    "+t._s(t.$t("Confirm"))+"\n                ")])],1)])]:[n("filters",{attrs:{type:t.type,options:t.choices,noMatch:t.noMatch,selected:t.selected,count:t.total_match},on:{search:t.search,filter:t.filter}})]],2)}),[],!1,null,null,null).exports,Gn={name:"ColumnToggler",components:{Filterer:Mn},data:function(){return{selection:[],subscriberColumns:z.c}},computed:{columnGroups:function(){var t=[{slug:"subscriber",label:this.$t("Primary Fields"),fields:z.c}];this.appVars.commerce_provider&&t.push({slug:"commerce",label:this.$t("Commerce Fields"),fields:[{label:this.$t("Lifetime Value"),value:"commerce.total_order_value",position:1},{label:this.$t("Purchase Count"),value:"commerce.total_order_count",position:2},{label:this.$t("Customer Since"),value:"commerce.first_order_date",position:3},{label:this.$t("Last Purchase Date"),value:"commerce.last_order_date",position:3}]});var e=[];return this.each(this.appVars.contact_custom_fields,(function(t,n){e.push({label:t.label,value:t.slug,position:n+10})})),e.length&&t.push({slug:"custom_fields",label:this.$t("Custom Fields"),fields:e}),t}},methods:{init:function(){var t=this.storage.get("columns");t?(this.selection=t,this.fire()):(this.selection=["tags","lists"],this.save())},save:function(){this.storage.set("columns",this.selection),this.fire()},fire:function(){var t=this;this.$emit("input",this.selection),setTimeout((function(){t.$emit("dataChanged",t.selection)}),400)}},mounted:function(){this.init()}},Wn=Object(a.a)(Gn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("filterer",{attrs:{name:"column-toggler"}},[n("el-button",{staticClass:"fc_columns_filter",attrs:{slot:"header",icon:"el-icon-setting",plain:"",size:"small"},slot:"header"},[t._v("\n        "+t._s(t.$t("Columns"))+"\n    ")]),t._v(" "),n("el-checkbox-group",{staticClass:"fluentcrm-filter-options fc_column_toggler_checks",attrs:{slot:"items"},slot:"items",model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}},[t._l(t.columnGroups,(function(e,i){return[n("el-checkbox",{key:i,attrs:{disabled:!0}},[t._v(t._s(e.label))]),t._v(" "),t._l(e.fields,(function(e,s){return n("el-checkbox",{key:i+" "+s,staticClass:"el-dropdown-menu__item",attrs:{label:e.value}},[t._v("\n                "+t._s(e.label)+"\n            ")])}))]}))],2),t._v(" "),n("el-dropdown-item",{staticClass:"no-hover",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"success",size:"mini"},on:{click:t.save}},[t._t("btn-label",(function(){return[t._v(t._s(t.$t("Save")))]}))],2)],1)],1)}),[],!1,null,null,null).exports,Yn={props:["value"],name:"Searcher",data:function(){return{model:this.value,timeout:null}},methods:{fire:function(){this.model&&(this.doAction("loading",!0),this.doAction("search-subscribers",this.model))}},watch:{model:function(t,e){t=jQuery.trim(t),(e=jQuery.trim(e))&&!t&&(this.doAction("loading",!0),this.doAction("search-subscribers",this.model))}}},Jn=Object(a.a)(Yn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-searcher"},[n("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Search Type and Enter...")},on:{clear:t.fire},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fire.apply(null,arguments)}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fire},slot:"append"})],1)],1)}),[],!1,null,null,null).exports,Kn={name:"BlukActionMenu"},Qn=Object(a.a)(Kn,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"fluentcrm-bulk-action-menu"},[this._t("default")],2)}),[],!1,null,"04bb8a9e",null).exports,Zn={name:"PropertyChanger",components:{Filterer:Mn},props:["options","label","prop_key","selectedSubscribers"],data:function(){return{selected_item:""}},methods:{save:function(){this.changeSubscribersProperty({type:this.prop_key,value:this.selected_item})},changeSubscribersProperty:function(t){var e=this,n=t.type,i=t.value;i?(this.loading=!0,this.$put("subscribers/subscribers-property",{property:n,value:i,subscribers:this.selectedSubscribers.map((function(t){return t.id}))}).then((function(t){e.$notify.success(t.message),e.$emit("fetch")})).catch((function(t){console.log(t)})).finally((function(){e.loading=!1}))):this.$notify.error(this.$t("Pro_Please_saof"))}}},Xn=Object(a.a)(Zn,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("filterer",{attrs:{placement:"bottom-start"}},[t._t("header",(function(){return[n("el-button",{attrs:{plain:"",size:"mini"}},[t._v("\n            "+t._s(t.$t("Change"))+" "+t._s(t.label)+"\n            "),t._t("icon",(function(){return[n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]}))],2)]}),{slot:"header"}),t._v(" "),n("el-dropdown-item",{staticClass:"fluentcrm-filter-option no-hover",attrs:{slot:"items"},slot:"items"},[t._v("\n        "+t._s(t.$t("Choose New"))+" "+t._s(t.label)+":\n    ")]),t._v(" "),n("el-radio-group",{staticClass:"fluentcrm_checkable_block",attrs:{slot:"items"},slot:"items",model:{value:t.selected_item,callback:function(e){t.selected_item=e},expression:"selected_item"}},t._l(t.options,(function(e){return n("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.title))])})),1),t._v(" "),n("el-dropdown-item",{staticClass:"no-hover",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"mini"},on:{click:t.save}},[t._t("btn-label",(function(){return[t._v(t._s(t.$t("Change"))+" "+t._s(t.label))]}))],2)],1)],2)}),[],!1,null,null,null).exports,ti=n(46),ei=n.n(ti),ni=n(169),ii=n.n(ni);function si(t,e,n,i,s,a,r){try{var o=t[a](r),l=o.value}catch(t){return void n(t)}o.done?e(l):Promise.resolve(l).then(i,s)}var ai={name:"BulkContactActions",props:["selectedSubscribers","options"],components:{Confirm:f,OptionSelector:vt},data:function(){return{delete_confirm_message:"<b>"+this.$t("Are you sure to delete?")+"</b><br />"+this.$t("delete_all_contacts_notice"),actions:{},select_job:{action_name:"",selected_options:[]},doing_action:!1,select_status:""}},watch:{"select_job.action_name":{handler:function(){this.select_job.selected_options=[],this.select_status=""},deep:!0}},computed:{currentAction:function(){return!!this.select_job.action_name&&this.actions[this.select_job.action_name]}},methods:{doBulkAction:function(){var t,e=this;return(t=ei.a.mark((function t(){var n,i,s,a,r;return ei.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],e.each(e.selectedSubscribers,(function(t){n.push(t.id)})),n.length){t.next=5;break}return e.$notify.error("Please select subscribers first"),t.abrupt("return",!1);case 5:e.doing_action=!0,i=ii()(n,100),s={action_name:e.select_job.action_name,action_options:e.select_job.selected_options,new_status:e.select_status},a=ei.a.mark((function t(n){return ei.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.repeatBulkAction(i[n],s).then((function(t){n===i.length-1&&(e.$emit("refetch"),e.$notify.success(t.message))})).catch((function(t){e.handleError(t)}));case 2:case"end":return t.stop()}}),t)})),r=0;case 10:if(!(r<i.length)){t.next=15;break}return t.delegateYield(a(r),"t0",12);case 12:r++,t.next=10;break;case 15:e.doing_action=!1;case 16:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(i,s){var a=t.apply(e,n);function r(t){si(a,i,s,r,o,"next",t)}function o(t){si(a,i,s,r,o,"throw",t)}r(void 0)}))})()},repeatBulkAction:function(t,e){return e.subscriber_ids=t,this.$post("subscribers/do-bulk-action",e)}},mounted:function(){this.actions={add_to_tags:{label:"Add To Tags",options:this.options.tags},add_to_lists:{label:"Add To Lists",options:this.options.lists},remove_from_tags:{label:"Remove From Tags",options:this.options.tags},remove_from_lists:{label:"Remove From Lists",options:this.options.lists},change_contact_status:{label:"Change Contact Status",statuses:this.options.statuses},add_to_email_sequence:{label:"Add To Email Sequence"},add_to_automation:{label:"Add To Automation Funnel"},delete_contacts:{label:"Delete Contacts"}}}};function ri(t){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var oi={name:"ContactsTable",components:{Toggler:Wn,Manager:Hn,Searcher:Jn,BulkActionMenu:Qn,PropertyChanger:Xn,Pagination:b,BulkContactActions:Object(a.a)(ai,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_bulk_wrap"},[n("div",{staticClass:"fc_bulk_item"},[n("label",[t._v(t._s(t.$t("Select Action")))]),t._v(" "),n("el-select",{staticClass:"mt-5",attrs:{clearable:"",filterable:"",size:"mini",placeholder:t.$t("Select Bulk Action")},model:{value:t.select_job.action_name,callback:function(e){t.$set(t.select_job,"action_name",e)},expression:"select_job.action_name"}},t._l(t.actions,(function(t,e){return n("el-option",{key:e,attrs:{value:e,label:t.label}})})),1)],1),t._v(" "),t.currentAction&&t.currentAction.options?[n("el-select",{staticClass:"ml-5 mt-5",attrs:{filterable:"",multiple:"",size:"mini",placeholder:t.$t("Select")},model:{value:t.select_job.selected_options,callback:function(e){t.$set(t.select_job,"selected_options",e)},expression:"select_job.selected_options"}},t._l(t.currentAction.options,(function(t){return n("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})})),1),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"ml-5 mt-5",attrs:{disable:t.doing_action,size:"mini",disabled:!t.select_job.selected_options.length,type:"success"},on:{click:function(e){return t.doBulkAction()}}},[t._v("\n            "+t._s(t.$t("Confirm"))+" ("+t._s(t.currentAction.label)+")\n        ")])]:"change_contact_status"==t.select_job.action_name?[n("el-select",{staticClass:"ml-5 mt-5",attrs:{filterable:"",size:"mini",placeholder:t.$t("Select")},model:{value:t.select_status,callback:function(e){t.select_status=e},expression:"select_status"}},t._l(t.currentAction.statuses,(function(t){return n("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})})),1),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"ml-5 mt-5",attrs:{disable:t.doing_action,size:"mini",disabled:!t.select_status,type:"success"},on:{click:function(e){return t.doBulkAction()}}},[t._v("\n            "+t._s(t.$t("Change Status"))+"\n        ")])]:"delete_contacts"==t.select_job.action_name?[n("confirm",{attrs:{placement:"top-start",message:t.delete_confirm_message},on:{yes:function(e){return t.doBulkAction()}}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"mt-5 ml-5",staticStyle:{height:"30px"},attrs:{slot:"reference",disabled:t.doing_action,size:"mini",type:"danger"},slot:"reference"},[t._v(t._s(t.$t("Delete Contacts"))+"\n            ")])],1)]:"add_to_email_sequence"==t.select_job.action_name?[t.has_campaign_pro?[n("div",{staticClass:"fc_bulk_item"},[n("label",[t._v(t._s(t.$t("Select Sequence")))]),t._v(" "),n("option-selector",{attrs:{field:{option_key:"email_sequences",clearable:!0,size:"mini"}},model:{value:t.select_status,callback:function(e){t.select_status=e},expression:"select_status"}})],1),t._v(" "),n("confirm",{attrs:{placement:"top-start",width:230,message:t.$t("Are you sure you want to add contacts to selected email sequence?")},on:{yes:function(e){return t.doBulkAction()}}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"mt-5 ml-5",staticStyle:{height:"30px"},attrs:{slot:"reference",disabled:t.doing_action||!t.select_status,size:"mini",type:"primary"},slot:"reference"},[t._v(t._s(t.$t("Add to Sequence"))+"\n                ")])],1),t._v(" "),n("p",{staticClass:"help_msg"},[t._v(t._s(t.$t("Contacts already in the email sequence will be skipped")))])]:n("span",{staticStyle:{padding:"10px"}},[t._v("Require FluentCRM Pro")])]:"add_to_automation"==t.select_job.action_name?[t.has_campaign_pro?[n("div",{staticClass:"fc_bulk_item"},[n("label",[t._v(t._s(t.$t("Select Automation Funnel")))]),t._v(" "),n("option-selector",{attrs:{field:{option_key:"automation_funnels",clearable:!0,size:"mini"}},model:{value:t.select_status,callback:function(e){t.select_status=e},expression:"select_status"}})],1),t._v(" "),n("confirm",{attrs:{placement:"top-start",width:230,message:t.$t("Are you sure you want to add contacts to selected Automation Funnel?")},on:{yes:function(e){return t.doBulkAction()}}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.doing_action,expression:"doing_action"}],staticClass:"mt-5 ml-5",staticStyle:{height:"30px"},attrs:{slot:"reference",disabled:t.doing_action||!t.select_status,size:"mini",type:"primary"},slot:"reference"},[t._v(t._s(t.$t("Add to Automation"))+"\n                ")])],1),t._v(" "),n("p",{staticClass:"help_msg"},[t._v(t._s(t.$t("Contacts already in the Automation will be skipped & only subscribed contacts will be attached")))])]:n("span",{staticStyle:{padding:"10px"}},[t._v("Require FluentCRM Pro")])]:t._e()],2)}),[],!1,null,null,null).exports},props:["subscribers","always_searchbar","is_loading","query_data","pagination","options","ui_config"],data:function(){return{selection:!1,selectedSubscribers:[],selectionCount:0,matched_tags:[],matched_lists:[],matched_statuses:[],columns:[],hasCustomFields:!1,hasCommerceFields:!1,initialFired:!1}},computed:{custom_fields:function(){var t=this,e=this.appVars.contact_custom_fields;return e?e.filter((function(e){return-1!==t.columns.indexOf(e.slug)})):[]}},methods:{fetch:function(){this.$emit("fetch")},getRelations:function(t,e){return(t[e]||[]).map((function(t){return t.title})).join(", ")},formatCellValue:function(t,e){if(!t)return"";var n=t[e];return n&&"object"==ri(n)?n.join(", "):n},onSelection:function(t){var e=this;this.selection=!!t.length,this.selectedSubscribers=t;var n={},i={};t.forEach((function(t){t.tags.forEach((function(t){return e.match(t,n)})),t.lists.forEach((function(t){return e.match(t,i)}))})),this.selectionCount=t.length,this.matched_tags=n,this.matched_lists=i},match:function(t,e){e[t.slug]?e[t.slug]++:e[t.slug]=1},handleSortable:function(t){"descending"===t.order?(this.query_data.sort_by=t.prop,this.query_data.sort_type="DESC"):(this.query_data.sort_by=t.prop,this.query_data.sort_type="ASC"),this.fetch()},subscribe:function(t){var e=this,n=t.type,i=t.payload,s=i.attach,a=i.detach;this.loading=!0;var r={type:n,attach:s,detach:a,subscribers:this.selectedSubscribers.map((function(t){return t.id}))};this.$post("subscribers/sync-segments",r).then((function(t){t.subscribers.forEach((function(t){var n=e.subscribers.findIndex((function(e){return e.id===t.id}));-1!==n&&e.subscribers.splice(n,1,t),e.$refs.subscribersTable.toggleRowSelection(e.subscribers[n])}));var i="selected_".concat(n);if(e[i]&&e[i].length&&a&&a.length){var s=e[i].filter((function(t){return a.includes(t)}));s.length&&e.filter({type:n,payload:s})}e.loading=!1,e.$notify.success({title:e.$t("Great!"),message:t.message,offset:19})}))},maybeReFetch:function(){var t=!1;!this.hasCommerceFields&&this.appVars.commerce_provider&&(this.columns.filter((function(t){return 0===t.indexOf("commerce.")})).length&&(t=!0,this.hasCommerceFields=!0,this.query_data.has_commerce=!0));!this.hasCustomFields&&this.custom_fields.length&&(this.query_data.custom_fields=!0,this.hasCustomFields=!0,this.willRefetch=!0),this.initialFired||(t=!0),t&&(this.fetch(),this.initialFired=!0)},filter:function(t){var e=t.type,n=t.payload;return this.$set(this.query_data,e,n),this.pagination.current_page=1,this.fetch()},search:function(t,e){this.options[t]=e},listeners:function(){var t=this;this.addAction("search-subscribers","fluentcrm",(function(e){t.query_data.search=e,t.pagination.current_page=1,t.fetch()})),this.addAction("loading","fluentcrm",(function(e){t.loading=e}))}},mounted:function(){this.listeners()}},li=Object(a.a)(oi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_contacts_wrap"},[n("div",{staticClass:"fluentcrm-header-secondary"},[n("bulk-action-menu",[t.selection?n("div",{staticClass:"fc_filter_boxes"},[n("bulk-contact-actions",{attrs:{selectedSubscribers:t.selectedSubscribers,options:t.options},on:{refetch:function(e){return t.fetch()}}})],1):n("div",{staticClass:"fc_filter_boxes"},[t.ui_config.disable_filters_without_selection?t._e():[t.ui_config.show_list?n("manager",{attrs:{type:"lists",selection:t.selection,options:t.options.lists,matched:t.matched_lists,subscribers:t.subscribers,total_match:t.pagination.total,selected:t.query_data.lists,selectionCount:t.selectionCount},on:{filter:t.filter,search:t.search,subscribe:t.subscribe}}):t._e(),t._v(" "),t.ui_config.show_tag?n("manager",{attrs:{type:"tags",selection:t.selection,options:t.options.tags,matched:t.matched_tags,selected:t.query_data.tags,subscribers:t.subscribers,total_match:t.pagination.total,selectionCount:t.selectionCount},on:{search:t.search,filter:t.filter,subscribe:t.subscribe}}):t._e(),t._v(" "),t.selection?[n("property-changer",{attrs:{selectedSubscribers:t.selectedSubscribers,label:t.$t("Status"),prop_key:"status",options:t.options.statuses},on:{fetch:t.fetch}})]:[n("manager",{attrs:{type:"statuses",selection:!1,options:t.options.statuses,matched:t.matched_statuses,subscribers:t.subscribers,total_match:t.pagination.total,selected:t.query_data.statuses,selectionCount:t.selectionCount},on:{filter:t.filter,search:t.search,subscribe:t.subscribe}})]]],2),t._v(" "),n("div",{staticClass:"fc_search_box"},[t._t("before_search_box"),t._v(" "),t.always_searchbar||!t.ui_config.disable_filters_without_selection||t.selection?n("searcher",{model:{value:t.query_data.search,callback:function(e){t.$set(t.query_data,"search",e)},expression:"query_data.search"}}):t._e(),t._v(" "),n("toggler",{on:{dataChanged:function(e){return t.maybeReFetch()}},model:{value:t.columns,callback:function(e){t.columns=e},expression:"columns"}})],2)])],1),t._v(" "),t._t("before_contacts_table"),t._v(" "),n("div",{staticClass:"fc_contacts_table"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.is_loading,expression:"is_loading"}],ref:"subscribersTable",staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Contacts Found"),data:t.subscribers,id:"fluentcrm-subscribers-table",stripe:""},on:{"selection-change":t.onSelection,"sort-change":t.handleSortable}},[t.hasPermission("fcrm_manage_contacts")?n("el-table-column",{attrs:{type:"selection",width:"40"}}):t._e(),t._v(" "),n("el-table-column",{attrs:{label:"",width:"55"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{name:"subscriber",params:{id:e.row.id}}}},[n("img",{staticClass:"fc_contact_photo",attrs:{title:t.$t("Contact ID:")+" "+e.row.id,src:e.row.photo}})])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Email"),property:"email",width:"200",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{name:"subscriber",params:{id:e.row.id}}}},[t._v("\n                        "+t._s(e.row.email)+"\n                    ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Name"),"min-width":"180",property:"first_name",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.full_name)+"\n                ")]}}])}),t._v(" "),-1!=t.columns.indexOf("country")?n("el-table-column",{attrs:{"min-width":"120",label:t.$t("Country"),property:"country",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.country)+"\n                ")]}}],null,!1,4294157269)}):t._e(),t._v(" "),-1!=t.columns.indexOf("lists")?n("el-table-column",{attrs:{"min-width":"180",label:t.$t("Lists"),property:"lists"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.getRelations(e.row,"lists")))])]}}],null,!1,2831366199)}):t._e(),t._v(" "),-1!=t.columns.indexOf("tags")?n("el-table-column",{attrs:{"min-width":"180",label:t.$t("Tags"),property:"tags"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.getRelations(e.row,"tags")))])]}}],null,!1,813029927)}):t._e(),t._v(" "),t.hasCommerceFields?[-1!=t.columns.indexOf("commerce.total_order_value")?n("el-table-column",{attrs:{"min-width":"120",label:t.$t("Lifetime Value"),property:"commerce_by_provider.total_order_value"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.commerce_by_provider?n("span",[t._v("\n                             "+t._s(t.appVars.commerce_currency_sign)+t._s(e.row.commerce_by_provider.total_order_value||"-")+"\n                        ")]):n("span",[t._v("-")])]}}],null,!1,4197673742)}):t._e(),t._v(" "),-1!=t.columns.indexOf("commerce.total_order_count")?n("el-table-column",{attrs:{"min-width":"120",label:t.$t("Order Count"),property:"commerce_by_provider.total_order_count"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.commerce_by_provider?n("span",[t._v("\n                                 "+t._s(e.row.commerce_by_provider.total_order_count||"-")+"\n                            ")]):n("span",[t._v("-")])]}}],null,!1,4165792080)}):t._e(),t._v(" "),-1!=t.columns.indexOf("commerce.first_order_date")?n("el-table-column",{attrs:{"min-width":"140",label:t.$t("Customer Since"),property:"commerce_by_provider.first_order_date"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.commerce_by_provider&&e.row.commerce_by_provider.first_order_date?n("span",[t._v("\n                                 "+t._s(t.nsDateFormat(e.row.commerce_by_provider.first_order_date))+"\n                            ")]):n("span",[t._v("-")])]}}],null,!1,3650785532)}):t._e(),t._v(" "),-1!=t.columns.indexOf("commerce.last_order_date")?n("el-table-column",{attrs:{"min-width":"150",label:t.$t("Last order"),property:"commerce_by_provider.last_order_date"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.commerce_by_provider&&e.row.commerce_by_provider.last_order_date?n("span",[t._v("\n                                 "+t._s(t._f("nsHumanDiffTime")(e.row.commerce_by_provider.last_order_date))+"\n                            ")]):n("span",[t._v("-")])]}}],null,!1,1503150072)}):t._e()]:t._e(),t._v(" "),-1!=t.columns.indexOf("phone")?n("el-table-column",{attrs:{"min-width":"120",label:t.$t("Phone"),property:"phone"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.phone)+"\n                ")]}}],null,!1,304553441)}):t._e(),t._v(" "),-1!=t.columns.indexOf("contact_type")?n("el-table-column",{attrs:{label:t.$t("Type"),width:"150",property:"contact_type",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t._f("ucWords")(t.trans(e.row.contact_type)))+"\n                ")]}}],null,!1,4116792083)}):t._e(),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Status"),width:"150",property:"status",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t._f("ucWords")(t.trans(e.row.status)))+"\n                ")]}}])}),t._v(" "),t._l(t.custom_fields,(function(e){return n("el-table-column",{key:e.slug,attrs:{width:"200",label:e.label},scopedSlots:t._u([{key:"default",fn:function(n){return[t._v("\n                    "+t._s(t.formatCellValue(n.row.custom_fields,e.slug))+"\n                ")]}}],null,!0)})})),t._v(" "),-1!=t.columns.indexOf("source")?n("el-table-column",{attrs:{"min-width":"150",label:t.$t("Source"),property:"source"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.source)+"\n                ")]}}],null,!1,1727937024)}):t._e(),t._v(" "),-1!=t.columns.indexOf("last_activity")?n("el-table-column",{attrs:{prop:"last_activity",label:t.$t("Last Activity"),"min-width":"150",property:"last_activity",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.last_activity?[n("i",{staticClass:"el-icon-time"}),t._v(" "),n("span",[n("span",{attrs:{title:e.row.last_activity}},[t._v(t._s(t._f("nsHumanDiffTime")(e.row.last_activity)))])])]:t._e()]}}],null,!1,2511039582)}):t._e(),t._v(" "),-1!=t.columns.indexOf("created_at")?n("el-table-column",{attrs:{label:t.$t("Date Added"),"min-width":"160",property:"created_at",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.created_at?[n("i",{staticClass:"el-icon-time"}),t._v(" "),n("span",{attrs:{title:e.row.created_at}},[t._v(t._s(t._f("nsHumanDiffTime")(e.row.created_at)))])]:t._e()]}}],null,!1,3591174071)}):t._e(),t._v(" "),-1!=t.columns.indexOf("updated_at")?n("el-table-column",{attrs:{label:t.$t("Last Changed"),"min-width":"150",property:"updated_at",sortable:"custom"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.updated_at?[n("i",{staticClass:"el-icon-time"}),t._v(" "),n("span",{attrs:{title:e.row.updated_at}},[t._v(t._s(t._f("nsHumanDiffTime")(e.row.updated_at)))])]:t._e()]}}],null,!1,380598594)}):t._e()],2)],1),t._v(" "),n("el-row",{staticClass:"d-flex items-center",attrs:{guter:20}},[n("el-col",{attrs:{xs:24,md:12}},[t.selection?n("div",{staticClass:"fc_filter_boxes mt-5",staticStyle:{"padding-left":"15px"}},[n("bulk-contact-actions",{attrs:{selectedSubscribers:t.selectedSubscribers,options:t.options},on:{refetch:function(e){return t.fetch()}}})],1):n("div",[t._v("")])]),t._v(" "),n("el-col",{attrs:{xs:24,md:12}},[n("pagination",{attrs:{pagination:t.pagination,hide_on_single:!1,extra_sizes:[200,250,300]},on:{per_page_change:function(e){t.storage.set("contact_perpage",e)},fetch:t.fetch}})],1)],1)],2)}),[],!1,null,null,null).exports;function ci(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ui(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ci(Object(n),!0).forEach((function(e){_i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ci(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function _i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var di=n(6),pi=n(5),mi={name:"Subscribers",components:{ActionMenu:Nn,ContactsTable:li,RichFilter:le,AdvancedFilterPromo:ue},data:function(){return{app_ready:!1,subscribers:[],loading:!0,pagination:{current_page:1,per_page:10,total:0},advanced_filters:[[]],filter_type:"simple",listId:null,tagId:null,query_data:{tags:[],lists:[],search:"",statuses:[],sort_by:"id",sort_type:"DESC",custom_fields:!1,has_commerce:!1},ui_config:{show_list:!0,show_tag:!0,disable_filters_without_selection:!1},options:{tags:[],lists:[],statuses:[],countries:[],sampleCsv:null,delimiter:"comma"}}},methods:{setup:function(){var t=this.$route.query;window.fcrm_sub_params&&(t=window.fcrm_sub_params),t.tags&&!pi(t.tags)&&(t.tags=[t.tags]),t.lists&&!pi(t.lists)&&(t.lists=[t.lists]),t.statuses&&!pi(t.statuses)&&(t.statuses=[t.statuses]);var e={tags:t.tags?t.tags.map((function(t){return parseInt(t)})):[],lists:t.lists?t.lists.map((function(t){return parseInt(t)})):[],search:t.search||"",statuses:t.statuses||[],sort_by:t.sort_by||"id",sort_type:t.sort_type||"DESC",custom_fields:!1,filter_type:t.filter_type||"simple"};t.page&&(this.pagination.current_page=parseInt(t.page)),"advanced"==t.filter_type?(this.filter_type="advanced",this.ui_config.disable_filters_without_selection=!0,t.advanced_filters&&"[object Object]"!=t.advanced_filters&&("string"==typeof t.advanced_filters?this.advanced_filters=JSON.parse(t.advanced_filters):this.advanced_filters=t.advanced_filters)):this.ui_config.disable_filters_without_selection=!1,this.query_data=e;var n=!1;return this.$route.params.listId?(n=!0,this.listId=this.$route.params.listId,this.query_data.lists=[parseInt(this.$route.params.listId)],this.ui_config.show_list=!1):this.$route.params.lists&&console.log(this.$route.params.lists),this.$route.params.tagId&&(n=!0,this.tagId=this.$route.params.tagId,this.query_data.tags=[this.$route.params.tagId],this.ui_config.show_tag=!1),this.app_ready=!0,n},fetch:function(){var t=this;this.loading=!0;var e={per_page:this.pagination.per_page,page:this.pagination.current_page,filter_type:this.filter_type,custom_fields:this.query_data.custom_fields,has_commerce:this.query_data.has_commerce,sort_by:this.query_data.sort_by,sort_type:this.query_data.sort_type};this.has_campaign_pro||(e.filter_type="simple"),e="advanced"==this.filter_type&&this.has_campaign_pro?ui({advanced_filters:JSON.stringify(this.advanced_filters)},e):ui(ui({},this.query_data),e);var n={};this.each(e,(function(t,e){di(t)||(n[e]=t)})),window.fcrm_sub_params=n,n.t=Date.now(),this.$router.replace({name:"subscribers",query:n}),this.$get("subscribers",e).then((function(e){t.pagination.total=e.subscribers.total,t.subscribers=e.subscribers.data})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},getOptions:function(){var t=this;this.$get("reports/options",{fields:"tags,lists,statuses,contact_types,sampleCsv,custom_fields"}).then((function(e){t.options=e.options}))},addConditionGroup:function(){this.advanced_filters.push([])},maybeRemoveGroup:function(t){this.advanced_filters.length>1&&this.advanced_filters.splice(t,1)},changedFilterType:function(){"simple"==this.filter_type?this.ui_config.disable_filters_without_selection=!1:this.ui_config.disable_filters_without_selection=!0,this.fetch()}},created:function(){this.pagination.per_page=parseInt(this.storage.get("contact_perpage",10))||10,this.getOptions(),this.setup(),this.changeTitle(this.$t("Contacts"))}},fi=Object(a.a)(mi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-subscribers fluentcrm-view-wrapper fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v("\n                "+t._s(t.$t("Contacts"))+" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.pagination.total,expression:"pagination.total"}],staticClass:"ff_small"},[t._v("("+t._s(t.pagination.total)+")")])])]),t._v(" "),t.hasPermission("fcrm_manage_contacts")?n("div",{staticClass:"fluentcrm-actions"},[n("action-menu",{attrs:{search_query:Object.assign({},t.query_data,{advanced_filters:t.advanced_filters}),options:t.options,listId:t.listId,tagId:t.tagId},on:{fetch:t.fetch}})],1):t._e()]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_body fluentcrm_pad_b_10 fluentcrm_subscribers"},[t.app_ready?n("contacts-table",{attrs:{always_searchbar:!1,options:t.options,query_data:t.query_data,is_loading:!1,ui_config:t.ui_config,subscribers:t.subscribers,pagination:t.pagination},on:{fetch:t.fetch}},[n("div",{attrs:{slot:"before_search_box"},slot:"before_search_box"},[n("el-switch",{staticClass:"fc_advanced_toggle",attrs:{"active-value":"advanced","inactive-value":"simple","active-text":t.$t("Advanced Filter")},on:{change:function(e){return t.changedFilterType()}},model:{value:t.filter_type,callback:function(e){t.filter_type=e},expression:"filter_type"}})],1),t._v(" "),"advanced"==t.filter_type?n("div",{staticClass:"fc_rich_container",attrs:{slot:"before_contacts_table"},slot:"before_contacts_table"},[n("div",{staticClass:"fc_rich_wrap"},t._l(t.advanced_filters,(function(e,i){return n("div",{key:i},[n("div",{staticClass:"fc_rich_filter"},[n("rich-filter",{attrs:{items:e},on:{maybeRemove:function(e){return t.maybeRemoveGroup(i)}}})],1),t._v(" "),n("div",{staticClass:"fc_cond_or"},[n("em",[t._v(t._s(t.$t("OR")))])])])})),0),t._v(" "),n("div",{staticClass:"fc_cond_or"},[n("em",{staticStyle:{cursor:"pointer",color:"rgb(0, 119, 204)","font-weight":"bold"},on:{click:function(e){return t.addConditionGroup()}}},[n("i",{staticClass:"el-icon-plus"}),t._v(" "+t._s(t.$t("OR")))])]),t._v(" "),t.has_campaign_pro?[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.fetch()}}},[t._v(t._s(t.$t("Filter")))]),t._v(" "),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(e){t.advanced_filters=[[]],t.fetch()}}},[t._v(t._s(t.$t("Clear Filters")))]),t._v(" "),t.appVars.advanced_filter_suggestions.length?n("div",{staticClass:"el-alert el-alert--info is-light",staticStyle:{"margin-top":"20px"}},[n("ul",{staticClass:"fc_list"},t._l(t.appVars.advanced_filter_suggestions,(function(e){return n("li",{key:e.provider},[t._v("\n                                "+t._s(e.title)+" "),n("a",{staticStyle:{"font-weight":"bold"},attrs:{href:e.btn_url}},[t._v(t._s(e.btn_text))])])})),0)]):t._e()]:n("div",[n("advanced-filter-promo")],1)],2):t._e()]):t._e()],1)])}),[],!1,null,null,null).exports,hi={name:"Form",components:{Error:Ge},props:{item:{required:!0,type:Object},errors:{required:!0,type:Object}},watch:{"item.title":function(){this.item.title&&!this.item.id&&(this.item.slug=this.slugify(this.item.title))}}};function vi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function gi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var bi={name:"Adder",components:{Forma:Object(a.a)(hi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{attrs:{"label-position":"top","label-width":"100px"}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:12}},[n("el-form-item",{staticClass:"is-required",attrs:{label:t.$t("Title")}},[n("el-input",{model:{value:t.item.title,callback:function(e){t.$set(t.item,"title",e)},expression:"item.title"}}),t._v(" "),n("error",{attrs:{error:t.errors.get("title")}})],1)],1),t._v(" "),n("el-col",{attrs:{md:12}},[n("el-form-item",{staticClass:"is-required",attrs:{label:t.$t("Slug")}},[n("el-input",{attrs:{disabled:!!t.item.id},model:{value:t.item.slug,callback:function(e){t.$set(t.item,"slug",e)},expression:"item.slug"}}),t._v(" "),n("error",{attrs:{error:t.errors.get("slug")}})],1)],1)],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("For_Internal_S_")}},[n("el-input",{attrs:{placeholder:t.$t("Internal Subtitle")},model:{value:t.item.description,callback:function(e){t.$set(t.item,"description",e)},expression:"item.description"}})],1)],1)}),[],!1,null,null,null).exports},props:{visible:Boolean,type:{type:String,required:!0},api:{type:Object,required:!0}},data:function(){return{item:this.fresh(),errors:new tn,title:this.$t("Add New")+" "+this.ucFirst(this.trans(this.type))}},methods:{fresh:function(){return{title:null,slug:null,description:""}},reset:function(){this.errors.clear(),this.item=this.fresh()},hide:function(){this.reset(),this.$emit("close")},save:function(){var t=this;this.errors.clear();var e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?vi(Object(n),!0).forEach((function(e){gi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):vi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.item);(this.item.id?this.$put(this.api.store+"/"+this.item.id,e):this.$post(this.api.store,e)).then((function(e){t.$notify.success({title:t.$t("Great!"),message:e.message,offset:19}),t.$emit("fetch",t.item),t.$bus.$emit("renew_options",t.type),t.hide()})).catch((function(e){t.errors.record(e)}))},listeners:function(){var t=this,e="edit-"+this.type;this.$bus.$on(e,(function(e){t.item={id:e.id,slug:e.slug,title:e.title,description:e.description},t.title=t.$t("Edit")+" "+t.ucFirst(t.type)}))}},mounted:function(){this.listeners()}},yi=Object(a.a)(bi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{staticClass:"fluentcrm-lists-dialog",attrs:{title:t.title,visible:t.visible,"append-to-body":!0},on:{close:function(e){return t.hide()}}},[n("forma",{attrs:{errors:t.errors,item:t.item}}),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("div",[n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.hide()}}},[t._v("\n                "+t._s(t.$t("Cancel"))+"\n            ")]),t._v(" "),n("el-button",{attrs:{size:"small",type:t.item.title?"success":"primary"},on:{click:function(e){return t.save()}}},[t._v("\n                "+t._s(t.item.title?t.$t("Update"):t.$t("Create"))+"\n            ")])],1)])],1)}),[],!1,null,null,null).exports,wi={name:"List",components:{Adder:yi,Subscribers:fi},props:["listId"],data:function(){return{list:null,adder:!1,api:{store:"lists"}}},methods:{fetch:function(){var t=this;this.$get("lists/".concat(this.listId)).then((function(e){t.list=e})).catch((function(){}))},edit:function(){this.adder=!0,this.$bus.$emit("edit-list",this.list)},update:function(t){this.list=t},close:function(){this.adder=!1}},mounted:function(){this.fetch()}},$i=(n(296),Object(a.a)(wi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.list?n("div",{staticClass:"list-stat"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"lists"}}},[t._v("\n                "+t._s(t.$t("Lists"))+"\n            ")]),t._v(" "),n("el-breadcrumb-item",[t._v("\n                "+t._s(t.list.title)+"\n                "),n("el-link",{attrs:{icon:"el-icon-edit",underline:!1},on:{click:t.edit}})],1)],1)],1):t._e(),t._v(" "),n("subscribers"),t._v(" "),n("adder",{attrs:{api:t.api,type:"list",visible:t.adder},on:{fetch:t.update,close:t.close}})],1)}),[],!1,null,null,null).exports),ki={name:"List",components:{Adder:yi,Subscribers:fi},props:["tagId"],data:function(){return{tag:null,adder:!1,api:{store:"tags"}}},methods:{fetch:function(){var t=this;this.$get("tags/".concat(this.tagId)).then((function(e){t.tag=e.tag}))},edit:function(){this.adder=!0,this.$bus.$emit("edit-tag",this.tag)},update:function(t){this.tag=t},close:function(){this.adder=!1}},mounted:function(){this.fetch()}},xi=(n(298),Object(a.a)(ki,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.tag?n("div",{staticClass:"list-stat"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"lists"}}},[t._v("\n                "+t._s(t.$t("Tags"))+"\n            ")]),t._v(" "),n("el-breadcrumb-item",[t._v("\n                "+t._s(t.tag.title)+"\n\n                "),n("el-link",{attrs:{icon:"el-icon-edit",underline:!1},on:{click:t.edit}})],1)],1)],1):t._e(),t._v(" "),n("subscribers"),t._v(" "),n("adder",{attrs:{api:t.api,type:"tag",visible:t.adder},on:{fetch:t.update,close:t.close}})],1)}),[],!1,null,null,null).exports),Ci={name:"Tagger",components:{Editor:zn,Confirm:f},data:function(){return{new_payload:!1,showItem:!0}},props:["type","taggables","options","matched"],mixins:[Vn],computed:{none:function(){return"tags"==this.type?this.$t("No tags found"):"lists"==this.type?this.$t("No lists found"):"No "+this.type+" found"}},methods:{remove:function(t){this.subscribe({attach:[],detach:[t]})},updatePayLoad:function(t){this.new_payload=t},pushPayload:function(){var t=this;this.new_payload?(this.subscribe(this.new_payload),setTimeout((function(){t.showItem=!1,t.$nextTick((function(){t.showItem=!0}))}),500)):this.$notify.error("no changes found")}}},Si={name:"ProfileListTags",props:["subscriber"],components:{Tagger:Object(a.a)(Ci,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.taggables&&t.showItem?n("div",[n("div",{staticClass:"header"},[n("h2",[t._v(t._s(t._f("ucFirst")(t.trans(t.type))))]),t._v(" "),n("editor",{attrs:{type:t.type,options:t.choices,noMatch:t.noMatch,matched:t.matched,selectionCount:1,placement:"bottom-end"},on:{search:t.search,subscribe:t.updatePayLoad}},[n("el-button",{attrs:{slot:"header",plain:"",size:"mini",icon:"el-icon-plus"},slot:"header"}),t._v(" "),n("div",{staticStyle:{padding:"10px","text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("el-button",{staticStyle:{width:"100%"},attrs:{type:"success",size:"mini"},on:{click:function(e){return t.pushPayload()}}},[t._v(t._s(t.$t("Confirm"))+"\n                ")])],1)],1)],1),t._v(" "),n("div",{staticClass:"items"},[t._l(t.taggables,(function(e){return n("el-tag",{key:e.title,staticClass:"el-tag--white"},[t._v("\n            "+t._s(e.title)+"\n            "),n("confirm",{attrs:{message:t.$t("Are you sure you want to remove this?"),placement:"top-start"},on:{yes:function(n){return t.remove(e.slug)}}},[n("i",{staticClass:"el-tag__close el-icon-close",attrs:{slot:"reference"},slot:"reference"})])],1)})),t._v(" "),t.taggables.length?t._e():n("el-alert",{attrs:{title:t.none,type:"warning",closable:!1}})],2)]):t._e()}),[],!1,null,null,null).exports},data:function(){return{options:{tags:[],lists:[]},matches:{tags:{},lists:{}},subscribing:!1}},methods:{setup:function(t){var e=this;this.matches.tags=[],this.matches.lists=[],this.subscriber.tags=t.tags,this.subscriber.lists=t.lists,t.tags.forEach((function(t){return e.match(t,e.matches.tags)})),t.lists.forEach((function(t){return e.match(t,e.matches.lists)}))},getOptions:function(){var t=this;this.$get("reports/options",{fields:"tags,lists"}).then((function(e){t.options=e.options}))},subscribe:function(t){var e=this,n=t.type,i=t.payload,s={type:n,attach:i.attach,detach:i.detach,subscribers:[this.subscriber.id]};this.subscribing=!0,this.$post("subscribers/sync-segments",s).then((function(t){var n=t.subscribers[0];e.setup(n),e.$notify.success({title:e.$t("Great!"),message:t.message,offset:19})})).catch((function(t){e.handleError(t)})).finally((function(){e.subscribing=!1}))},search:function(t,e){this.options[t]=e},match:function(t,e){e[t.slug]=1}},mounted:function(){this.getOptions(),this.setup(this.subscriber)}},Oi={name:"ProfileHeader",components:{ProfileListTags:Object(a.a)(Si,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_profile_tagger"},[n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.subscribing,expression:"subscribing"}],attrs:{gutter:60}},[n("el-col",{attrs:{lg:24,md:24,sm:24,xs:24}},[n("tagger",{staticClass:"info-item",attrs:{type:"lists",options:t.options.lists,matched:t.matches.lists,taggables:t.subscriber.lists},on:{search:t.search,subscribe:t.subscribe}})],1),t._v(" "),n("el-col",{attrs:{lg:24,md:24,sm:24,xs:24}},[n("tagger",{staticClass:"info-item",attrs:{type:"tags",options:t.options.tags,matched:t.matches.tags,taggables:t.subscriber.tags},on:{search:t.search,subscribe:t.subscribe}})],1)],1)],1)}),[],!1,null,null,null).exports,PhotoWidget:Z.a},props:["subscriber"],data:function(){return{status_visible:!1,lead_visible:!1,subscriber_statuses:window.fcAdmin.subscriber_statuses,contact_types:window.fcAdmin.contact_types}},computed:{name:function(){return this.subscriber.first_name||this.subscriber.last_name?this.subscriber.prefix?"".concat(this.subscriber.prefix||""," ").concat(this.subscriber.first_name||""," ").concat(this.subscriber.last_name||""):"".concat(this.subscriber.first_name||""," ").concat(this.subscriber.last_name||""):this.subscriber.email},hasCommerce:function(){return this.subscriber&&this.subscriber.commerce_stat&&this.subscriber.commerce_stat.length}},methods:{saveStatus:function(){var t=this;this.updateProperty("status",this.subscriber.status,(function(){t.status_visible=!1}))},saveLead:function(){var t=this;this.updateProperty("contact_type",this.subscriber.contact_type,(function(){t.lead_visible=!1}))},updateAvatar:function(t){this.updateProperty("avatar",t)},updateProperty:function(t,e,n){var i=this;this.$put("subscribers/subscribers-property",{property:t,subscribers:[this.subscriber.id],value:e}).then((function(t){i.$notify.success(t.message),n&&n(t)})).catch((function(t){i.handleError(t)}))},emitUpdate:function(t){this.$emit("updateSubscriber",t)},sendDoubleOptinEmail:function(){var t=this;this.$post("subscribers/".concat(this.subscriber.id,"/send-double-optin")).then((function(e){t.$notify.success(e.message)})).catch((function(e){t.handleError(e)})).finally((function(){}))}}},Ei={name:"Profile",components:{ProfileHeader:Object(a.a)(Oi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_profile_header_warpper"},[n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{lg:t.hasCommerce?10:12,md:t.hasCommerce?10:12,sm:24,xs:24}},[n("div",{staticClass:"fluentcrm_profile_header"},[n("div",{staticClass:"fluentcrm_profile-photo"},[n("div",{staticClass:"fc_photo_holder",style:{backgroundImage:"url("+t.subscriber.photo+")"}}),t._v(" "),n("photo-widget",{staticClass:"fc_photo_changed",attrs:{btn_type:"default",btn_text:t.$t("+ Photo"),btn_mode:!0},on:{changed:t.updateAvatar},model:{value:t.subscriber.photo,callback:function(e){t.$set(t.subscriber,"photo",e)},expression:"subscriber.photo"}})],1),t._v(" "),n("div",{staticClass:"profile-info"},[n("div",{staticClass:"profile_title"},[n("h3",[t._v(t._s(t.name))]),t._v(" "),n("div",{staticClass:"profile_action"},[n("el-popover",{attrs:{placement:t.appVars.is_rtl?"left":"right",width:"360"},model:{value:t.lead_visible,callback:function(e){t.lead_visible=e},expression:"lead_visible"}},[n("div",{staticClass:"fluentcrm_type_change_wrapper",staticStyle:{padding:"10px"}},[n("el-select",{attrs:{placeholder:t.$t("Select Status"),size:"mini"},model:{value:t.subscriber.contact_type,callback:function(e){t.$set(t.subscriber,"contact_type",e)},expression:"subscriber.contact_type"}},t._l(t.contact_types,(function(t,e){return n("el-option",{key:e,attrs:{value:e,label:t}})})),1)],1),t._v(" "),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.saveLead()}}},[t._v("\n                                        "+t._s(t.$t("Change Contact Type"))+"\n                                    ")])],1),t._v(" "),n("el-tag",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[t._v(t._s(t._f("ucFirst")(t.trans(t.subscriber.contact_type)))),n("span",{staticClass:"el-icon el-icon-caret-bottom"})])],1)],1),t._v(" "),n("div",{staticClass:"profile_action"},[n("el-popover",{attrs:{placement:t.appVars.is_rtl?"left":"right",width:"360"},model:{value:t.status_visible,callback:function(e){t.status_visible=e},expression:"status_visible"}},[n("div",{staticClass:"fluentcrm_status_change_wrapper",staticStyle:{padding:"10px"}},[n("el-select",{attrs:{placeholder:t.$t("Select Status"),size:"mini"},model:{value:t.subscriber.status,callback:function(e){t.$set(t.subscriber,"status",e)},expression:"subscriber.status"}},t._l(t.subscriber_statuses,(function(e){return n("el-option",{key:e,attrs:{value:e,label:t._f("ucFirst")(t.trans(e))}})})),1)],1),t._v(" "),n("div",{staticStyle:{"text-align":"right",margin:"0"}},[t.hasPermission("fcrm_manage_contacts")?n("el-button",{attrs:{type:"success",size:"mini"},on:{click:function(e){return t.saveStatus()}}},[t._v("\n                                        "+t._s(t.$t("Pro_Change_SS"))+"\n                                    ")]):t._e()],1),t._v(" "),n("el-tag",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[t._v(t._s(t._f("ucFirst")(t.trans(t.subscriber.status)))),n("span",{staticClass:"el-icon el-icon-caret-bottom"})])],1)],1)]),t._v(" "),n("p",[t._v(t._s(t.subscriber.email)+" "),t.subscriber.user_id&&t.subscriber.user_edit_url?n("span",[t._v(" | "),n("a",{attrs:{target:"_blank",href:t.subscriber.user_edit_url}},[t._v(t._s(t.subscriber.user_id)+" "),n("span",{staticClass:"dashicons dashicons-external"})])]):t._e()]),t._v(" "),n("p",[t._v(t._s(t.$t("Added"))+" "+t._s(t._f("nsHumanDiffTime")(t.subscriber.created_at))+" "),t.subscriber.last_activity?n("span",[t._v(" & "+t._s(t.$t("Last Activity"))+" "+t._s(t._f("nsHumanDiffTime")(t.subscriber.last_activity)))]):t._e()]),t._v(" "),n("div",{staticClass:"stats_badges"},[n("span",{attrs:{title:t.$t("Total Emails")}},[n("i",{staticClass:"el-icon el-icon-message"}),t._v(" "),n("span",[t._v(t._s(t.subscriber.stats.emails))])]),t._v(" "),n("span",{attrs:{title:t.$t("Open Rate")}},[n("i",{staticClass:"el-icon el-icon-folder-opened"}),t._v(" "),n("span",[t._v(t._s(t.percent(t.subscriber.stats.opens,t.subscriber.stats.emails)))])]),t._v(" "),n("span",{attrs:{title:t.$t("Click Rate")}},[n("i",{staticClass:"el-icon el-icon-position"}),t._v(" "),n("span",[t._v(t._s(t.percent(t.subscriber.stats.clicks,t.subscriber.stats.emails)))])])]),t._v(" "),"pending"==t.subscriber.status?n("div",{staticClass:"fc_t_10"},[n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(e){return t.sendDoubleOptinEmail()}}},[t._v("\n                            "+t._s(t.$t("Send Double Optin Email"))+"\n                        ")])],1):t._e(),t._v(" "),t.subscriber.unsubscribe_reason?n("div",{staticClass:"fc_t_10"},[n("p",[t._v(t._s(t.ucFirst(t.subscriber.status))+" "+t._s(t.$t("Reason:"))+" "+t._s(t.subscriber.unsubscribe_reason))])]):t._e()])])]),t._v(" "),n("el-col",{attrs:{lg:t.hasCommerce?8:12,md:t.hasCommerce?8:12,sm:24,xs:24}},[n("profile-list-tags",{attrs:{subscriber:t.subscriber},on:{updateSubscriber:t.emitUpdate}})],1),t._v(" "),t.hasCommerce?n("el-col",{attrs:{lg:6,md:6,sm:24,xs:24}},[n("div",{staticClass:"fc_profile_customer"},[n("h2",[t._v(t._s(t.$t("Customer Summary")))]),t._v(" "),n("ul",t._l(t.subscriber.commerce_stat,(function(e){return n("li",{key:e.key},[n("b",[t._v(t._s(e.title)+":")]),t._v(" "),n("span",{domProps:{innerHTML:t._s(e.value)}})])})),0)])]):t._e()],1)],1)}),[],!1,null,null,null).exports},props:["id"],data:function(){return{subscriber:!1,loading:!1,profile_parts:window.fcAdmin.profile_sections,custom_fields:[],subscriber_meta:{},show_profile:!0}},watch:{id:function(){this.fetch()}},computed:{lists:function(){return this.subscriber.lists.map((function(t){return t.title}))},name:function(){return this.subscriber.first_name||this.subscriber.last_name?"".concat(this.subscriber.first_name||""," ").concat(this.subscriber.last_name||""):this.subscriber.email}},methods:{setup:function(t){var e=this,n=null==t?void 0:t.custom_values;n&&(Object.keys(n).forEach((function(t){var i=n[t];if(i){var s=e.custom_fields.find((function(e){return e.slug===t}));!s||"select-multi"!==s.type&&"checkbox"!==s.type||"string"!=typeof i||(n[t]=i.split(", "))}})),t.custom_values=n),this.subscriber=t;var i=this.applyFilters("fluentcrm_profile_sections",window.fcAdmin.profile_sections,t);Object.keys(i).length!==Object.keys(this.profile_parts).length&&(this.profile_parts=i),this.changeTitle(t.full_name+" - Contact")},fetch:function(){var t=this;this.loading=!0,this.$get("subscribers/".concat(this.id),{with:["stats","custom_fields","subscriber.custom_values","commerce_stat"]}).then((function(e){t.custom_fields=e.custom_fields,t.setup(e.subscriber)})).finally((function(){t.loading=!1}))},maybeCustomHandler:function(t){var e=this;"fluentcrm_profile_extended"==t.name&&(this.show_profile=!1,setTimeout((function(){e.show_profile=!0}),100))}},mounted:function(){this.fetch(),this.changeTitle("Profile")}},ji=Object(a.a)(Ei,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"subscribers"}}},[t._v("\n                    "+t._s(t.$t("Contacts"))+"\n                ")]),t._v(" "),n("el-breadcrumb-item",[t._v("\n                    "+t._s(t.name)+"\n                ")])],1)],1),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"})]),t._v(" "),n("div",{staticClass:"fluentcrm_body fluentcrm-profile fluentcrm_pad_30"},[t.loading?n("el-skeleton",{attrs:{animated:""}},[n("template",{slot:"template"},[n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:3}},[n("el-skeleton-item",{staticStyle:{width:"145px",height:"145px"},attrs:{variant:"circle"}})],1),t._v(" "),n("el-col",{attrs:{span:20}},[n("el-skeleton")],1)],1)],1)],2):t.subscriber?n("profile-header",{attrs:{subscriber:t.subscriber},on:{updateSubscriber:t.setup}}):t._e()],1),t._v(" "),n("div",{staticClass:"fluentcrm-profile"},[n("ul",{staticClass:"fluentcrm_profile_nav"},t._l(t.profile_parts,(function(e,i){return n("router-link",{key:e.name+i,attrs:{custom:"",to:{name:e.name,hash:"#fluentcrm_sub_info_body",params:{id:t.id},query:e.query}},nativeOn:{click:function(n){return t.maybeCustomHandler(e)}},scopedSlots:t._u([{key:"default",fn:function(i){var s=i.navigate,a=i.isExactActive;return[n("li",{class:{item_active:a},domProps:{innerHTML:t._s(e.title)},on:{click:s}})]}}],null,!0)})})),1),t._v(" "),t.subscriber&&t.show_profile?n("div",{staticClass:"fluentcrm_sub_info_body"},[n("transition",[n("router-view",{key:"user_profile_route",attrs:{custom_fields:t.custom_fields,subscriber:t.subscriber,subscriber_id:t.id},on:{updateSubscriber:t.setup}})],1)],1):n("el-skeleton",{staticClass:"fc_skeleton_loader",staticStyle:{"margin-top":"20px"},attrs:{animated:""}},[n("template",{slot:"template"},[n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:12}},[n("el-skeleton",{attrs:{rows:10}})],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-skeleton",{attrs:{rows:3}})],1)],1)],1)],2)],1)])}),[],!1,null,null,null).exports,Ti={name:"Importer",data:function(){return{activeTab:"Csv",activeCsv:1,activeUser:1,uploadedFile:null,uploadUrl:window.ajaxurl+"?action=fluentcrm-post-csv-upload",tags:[],selectedTags:[],lists:[],selectedLists:[],csvColumns:[],tableColumns:[],csvMapping:[],roles:[],tableData:[],checkAll:!1,isIndeterminate:!1,selectedRoles:[],tableColumn:["date","name","address"],IsDataInDatabase:""}},methods:{tabClicked:function(t,e){this.activeTab=t.name},next:function(){var t="active"+this.activeTab;("Csv"!==this.activeTab||1!==this.active||this.uploadedFile)&&("User"!==this.activeTab||1!==this[t]||this.selectedRoles.length)&&this.active++>2&&(this[t]=0)},prev:function(){var t="active"+this.activeTab;0!==this[t]&&this[t]--},fileUploaded:function(t,e,n){this.csvColumns=t.headers,this.tableColumns=t.columns,this.uploadedFile=t.file;var i=[];for(var s in this.csvColumns)i.push({csv:this.csvColumns[s],table:null});this.csvMapping=i},fileRemoved:function(t,e){this.uploadedFile=null},confirmCsv:function(){var t=this,e=this.csvMapping.filter((function(t){return t.table}));e.length?this.$post("import/csv-import",{mappings:e,tags:this.selectedTags,lists:this.selectedLists,file:this.uploadedFile}).then((function(e){t.$notify({title:t.$t("Success"),type:"success",offset:20,message:t.$t("Map_Subscribers_is")})})).catch((function(t){return console.log(t)})):this.$notify({title:this.$t("Warning"),type:"warning",offset:20,message:this.$t("No mapping found.")})},handleCheckAllChange:function(t){this.selectedRoles=t?Object.keys(this.roles):[],this.isIndeterminate=!1},fluentcrmCheckedRolesChange:function(t){var e=Object.keys(this.roles),n=t.length;this.checkAll=n===e.length,this.isIndeterminate=n>0&&n<e.length}},created:function(){var t=this;this.$get("tags").then((function(e){t.tags=e})).catch((function(e){return t.handleError(e)})),this.$get("lists").then((function(e){t.lists=e})).catch((function(e){return t.handleError(e)})),this.$get("reports/roles").then((function(e){t.roles=e.roles})).catch((function(e){return t.handleError(e)}))}},Pi=Object(a.a)(Ti,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("el-tabs",{attrs:{type:"border-card",value:t.activeTab},on:{"tab-click":t.tabClicked}},[n("el-tab-pane",{attrs:{label:t.$t("CSV"),name:"Csv"}},[n("el-steps",{attrs:{active:t.activeCsv,"finish-status":"success","align-center":""}},[n("el-step",{attrs:{title:t.$t("Step 1")}}),t._v(" "),n("el-step",{attrs:{title:t.$t("Step 2")}})],1),t._v(" "),1===t.activeCsv?n("div",{staticStyle:{"text-align":"center"}},[n("h3",[t._v(t._s(t.$t("Upload Your CSV file"))+": ")]),t._v(" "),n("el-row",[n("el-col",[n("el-upload",{attrs:{drag:"",accept:".csv",limit:1,action:t.uploadUrl,"on-success":t.fileUploaded,"on-remove":t.fileRemoved}},[n("i",{staticClass:"el-icon-upload"}),t._v(" "),n("div",{staticClass:"el-upload__text"},[t._v(t._s(t.$t("Drop file here or"))+" "),n("em",[t._v(t._s(t.$t("click to upload")))])])])],1)],1)],1):t._e(),t._v(" "),2===t.activeCsv?n("div",[t._l(t.csvMapping,(function(e,i){return n("el-row",{key:i,attrs:{gutter:20}},[n("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[n("el-input",{attrs:{readonly:""},model:{value:t.csvMapping[i].csv,callback:function(e){t.$set(t.csvMapping[i],"csv",e)},expression:"csvMapping[key].csv"}})],1),t._v(" "),n("el-col",{attrs:{xs:12,sm:12,md:12,lg:12,xl:12}},[n("el-select",{attrs:{placeholder:t.$t("Select")},model:{value:t.csvMapping[i].table,callback:function(e){t.$set(t.csvMapping[i],"table",e)},expression:"csvMapping[key].table"}},t._l(t.tableColumns,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1)})),t._v(" "),n("el-row",{staticStyle:{"margin-top":"10px"}},[n("div",{staticStyle:{color:"#606266"}},[t._v(t._s(t.$t("Select Tags")))]),t._v(" "),n("div",[n("el-select",{attrs:{multiple:"",placeholder:t.$t("Select")},model:{value:t.selectedTags,callback:function(e){t.selectedTags=e},expression:"selectedTags"}},t._l(t.tags,(function(t){return n("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1)]),t._v(" "),n("el-row",[n("div",{staticStyle:{color:"#606266"}},[t._v(t._s(t.$t("Select Lists")))]),t._v(" "),n("div",[n("el-select",{attrs:{multiple:"",placeholder:t.$t("Select")},model:{value:t.selectedLists,callback:function(e){t.selectedLists=e},expression:"selectedLists"}},t._l(t.lists,(function(t){return n("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1)])],2):t._e(),t._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[t.activeCsv>1?n("el-button",{attrs:{size:"small"},on:{click:t.prev}},[t._v(t._s(t.$t("Prev step")))]):t._e(),t._v(" "),t.activeCsv<2?n("el-button",{attrs:{size:"small"},on:{click:t.next}},[t._v(t._s(t.$t("Next step")))]):t._e(),t._v(" "),n("el-button",{staticStyle:{float:"right"},attrs:{disabled:2!==t.activeCsv,size:"small",type:"primary"},on:{click:t.confirmCsv}},[t._v(t._s(t.$t("Confirm"))+"\n                ")])],1)],1),t._v(" "),n("el-tab-pane",{attrs:{label:t.$t("WP Users"),name:"User"}},[n("el-steps",{attrs:{active:t.activeUser,"finish-status":"success","align-center":""}},[n("el-step",{attrs:{title:t.$t("Step 1")}}),t._v(" "),n("el-step",{attrs:{title:t.$t("Step 2")}})],1),t._v(" "),1===t.activeUser?n("div",{staticStyle:{"text-align":"center"}},[n("h3",[t._v(t._s(t.$t("Select by Roles"))+": ")]),t._v(" "),n("el-row",[n("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleCheckAllChange},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}},[t._v(t._s(t.$t("All"))+"\n                    ")]),t._v(" "),n("div",{staticStyle:{margin:"15px 0"}}),t._v(" "),n("el-checkbox-group",{staticClass:"fluentcrm-subscribers-import-check",on:{change:t.fluentcrmCheckedRolesChange},model:{value:t.selectedRoles,callback:function(e){t.selectedRoles=e},expression:"selectedRoles"}},t._l(t.roles,(function(e,i){return n("el-checkbox",{key:i,attrs:{label:i}},[t._v(t._s(e.name)+"\n                        ")])})),1)],1)],1):t._e(),t._v(" "),2===t.activeUser?n("div",[n("el-row",[n("h4",[t._v(t._s(t.$t("User data from database")))]),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Available"),data:t.tableData}},t._l(t.tableColumn,(function(t,e){return n("el-table-column",{key:e,attrs:{prop:t,label:t,sortable:"",width:"auto"}})})),1),t._v(" "),n("el-form",[n("el-form-item",{attrs:{label:t.$t("Tags")}},[n("el-select",{attrs:{multiple:"",placeholder:t.$t("Select")},model:{value:t.selectedTags,callback:function(e){t.selectedTags=e},expression:"selectedTags"}},t._l(t.tags,(function(t){return n("el-option",{key:t.slug,attrs:{label:t.title,value:t.slug}})})),1)],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Lists")}},[n("el-select",{attrs:{multiple:"",placeholder:t.$t("Select")},model:{value:t.selectedLists,callback:function(e){t.selectedLists=e},expression:"selectedLists"}},t._l(t.lists,(function(t){return n("el-option",{key:t.slug,attrs:{label:t.title,value:t.slug}})})),1)],1)],1),t._v(" "),n("el-radio-group",{staticClass:"fluentcrm-subscribers-import-radio",model:{value:t.IsDataInDatabase,callback:function(e){t.IsDataInDatabase=e},expression:"IsDataInDatabase"}},[n("ul",[n("li",[n("el-radio",{attrs:{label:"skip"}},[t._v(t._s(t.$t("Skip if already in DB")))])],1),t._v(" "),n("li",[n("el-radio",{attrs:{label:"update"}},[t._v(t._s(t.$t("Update if already in DB")))])],1)])])],1)],1):t._e(),t._v(" "),n("div",{staticStyle:{"margin-top":"10px"}},[t.activeUser>1?n("el-button",{attrs:{size:"small"},on:{click:t.prev}},[t._v(t._s(t.$t("Prev step")))]):t._e(),t._v(" "),t.activeUser<2?n("el-button",{attrs:{size:"small"},on:{click:t.next}},[t._v(t._s(t.$t("Next step")))]):t._e(),t._v(" "),n("el-button",{staticStyle:{float:"right"},attrs:{disabled:2!==t.activeUser,size:"small",type:"primary"},on:{click:t.confirmCsv}},[t._v("\n                    "+t._s(t.$t("Confirm"))+"\n                ")])],1)],1)],1)],1)}),[],!1,null,null,null).exports,Ai={name:"ContactGroups",data:function(){return{router_name:this.$route.name,menu_items:[{title:this.$t("Lists"),route:"lists",icon:"el-icon-files"},{title:this.$t("Tags"),route:"tags",icon:"el-icon-price-tag"},{title:this.$t("Dynamic Segments"),route:"dynamic_segments",icon:"el-icon-cpu"}]}},methods:{changeMenu:function(t){jQuery(".fc_segment_menu li").removeClass("is-active"),jQuery(".fc_segment_menu li.fc_item_"+t).addClass("is-active")}}},Fi=Object(a.a)(Ai,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_settings_wrapper"},[n("el-row",[n("el-col",{staticClass:"fc_side_menu_wrap",attrs:{lg:4,md:5,sm:6}},[n("el-menu",{staticClass:"el-menu-vertical-demo fc_segment_menu",attrs:{router:!0,"default-active":t.router_name}},t._l(t.menu_items,(function(e){return n("el-menu-item",{key:e.route,class:"fc_item_"+e.route,attrs:{route:{name:e.route},index:e.route}},[n("i",{class:e.icon}),t._v(" "),n("span",[t._v(t._s(e.title))])])})),1)],1),t._v(" "),n("el-col",{staticClass:"fc_setting_wrap",attrs:{lg:20,md:19,sm:18}},[n("router-view",{on:{changeMenu:t.changeMenu}})],1)],1)],1)}),[],!1,null,null,null).exports,Di={name:"ActionMenu",props:{type:{type:String,required:!0},api:{type:Object,required:!0}},components:{Adder:yi},data:function(){return{adder:!1}},methods:{toggle:function(t){this[t]=!this[t]},close:function(t){this[t]=!1},fetch:function(t){this.$emit("fetch",t)},listeners:function(){var t=this,e="edit-"+this.type;this.$bus.$on(e,(function(){t.adder=!0}))}},mounted:function(){this.listeners()}},qi=Object(a.a)(Di,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{},[n("el-button-group",[n("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"primary"},on:{click:function(e){return t.toggle("adder")}}},[t._v("\n            "+t._s(t.$t("Create"))+" "+t._s(t._f("ucFirst")(t.trans(t.type)))+"\n        ")])],1),t._v(" "),n("adder",{attrs:{api:t.api,type:t.type,visible:t.adder},on:{fetch:t.fetch,close:function(e){return t.close("adder")}}})],1)}),[],!1,null,null,null).exports,Ii={name:"Lists",components:{Confirm:f,ActionMenu:qi},data:function(){return{loading:!1,lists:[],api:{store:"lists"},sortBy:"id",sortType:"DESC",search:""}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("lists",{with:["subscribersCount"],sort_by:this.sortBy,sort_order:this.sortType,search:this.search}).then((function(e){t.lists=e.lists})).finally((function(){t.loading=!1}))},edit:function(t){this.$bus.$emit("edit-list",t),this.$bus.$emit("renew_options","list")},remove:function(t){var e=this;this.$del("lists/".concat(t)).then((function(t){e.fetch(),e.$notify.success({title:e.$t("Great!"),message:t.message,offset:19}),e.$bus.$emit("renew_options","list")}))},handleSortable:function(t){"descending"===t.order?(this.sortBy=t.prop,this.sortType="DESC"):(this.sortBy=t.prop,this.sortType="ASC"),this.fetch()}},mounted:function(){this.fetch(),this.changeTitle("Lists"),this.$emit("changeMenu","lists")}},Ni=Object(a.a)(Ii,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-lists fluentcrm_min_bg fluentcrm-view-wrapper fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Lists")))]),t._v(" "),n("p",[t._v(t._s(t.$t("Lis_List_acoycYcalaa")))])]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("div",{staticClass:"fc_right_search"},[n("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetch},slot:"append"})],1)],1),t._v(" "),n("action-menu",{attrs:{type:"list",api:t.api},on:{fetch:t.fetch}})],1)]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_body"},[n("div",{staticClass:"lists-table"},[n("el-table",{staticStyle:{"padding-left":"5px"},attrs:{"empty-text":t.$t("No Data Found"),data:t.lists},on:{"sort-change":t.handleSortable}},[n("el-table-column",{attrs:{property:"id",sortable:"custom",label:t.$t("ID"),width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.id)+"\n                    ")]}}])}),t._v(" "),n("el-table-column",{attrs:{property:"title",sortable:"custom",label:t.$t("Title")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{name:"list",params:{listId:e.row.id}}}},[n("h3",{staticClass:"no-margin url"},[t._v("\n                                "+t._s(e.row.title)+"\n                            ")])]),t._v(" "),n("span",{staticClass:"list-created"},[t._v("\n                            "+t._s(e.row.description)+"\n                        ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Subscribers")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("h4",{staticClass:"no-margin"},[t._v("\n                            "+t._s(e.row.subscribersCount)+" of "+t._s(e.row.totalCount)+"\n                        ")]),t._v("\n                        "+t._s(t.$t("Subscribed"))+"\n                    ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Created")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{attrs:{title:e.row.created_at}},[t._v(t._s(t._f("nsHumanDiffTime")(e.row.created_at)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",width:"90",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"text-align-right d-flex"},[n("el-button",{staticClass:"mr-5",attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return t.edit(e.row)}}}),t._v(" "),n("confirm",{on:{yes:function(n){return t.remove(e.row.id)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1)],1)]}}])})],1)],1)])])}),[],!1,null,null,null).exports,Li={name:"Tags",components:{Confirm:f,ActionMenu:qi,Pagination:b},data:function(){return{loading:!1,api:{store:"tags"},tags:[],sortBy:"id",search:"",sortType:"DESC",pagination:{total:0,per_page:10,current_page:1}}},methods:{fetch:function(){var t=this;this.loading=!0,setTimeout((function(){t.$get("tags",{sort_by:t.sortBy,sort_order:t.sortType,per_page:t.pagination.per_page,page:t.pagination.current_page,search:t.search}).then((function(e){t.tags=e.tags.data,t.pagination.total=e.tags.total})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))}),500)},edit:function(t){this.$bus.$emit("edit-tag",t)},remove:function(t){var e=this;this.$del("tags/".concat(t)).then((function(t){e.fetch(),e.$notify.success({title:e.$t("Great!"),message:t.message,offset:19}),e.$bus.$emit("renew_options","tag")}))},handleSortable:function(t){"descending"===t.order?(this.sortBy=t.prop,this.sortType="DESC"):(this.sortBy=t.prop,this.sortType="ASC"),this.fetch()}},mounted:function(){this.fetch(),this.changeTitle("Tags"),this.$emit("changeMenu","tags")}},Mi=Object(a.a)(Li,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm-lists fluentcrm_min_bg fluentcrm-view-wrapper fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Tags")))]),t._v(" "),n("p",[t._v(t._s(t.$t("Tag_Tags_alLbmwtfyci")))])]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("div",{staticClass:"fc_right_search"},[n("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetch},slot:"append"})],1)],1),t._v(" "),n("action-menu",{attrs:{type:"tag",api:t.api},on:{fetch:t.fetch}})],1)]),t._v(" "),n("div",{staticClass:"fluentcrm_body"},[n("div",{staticClass:"lists-table"},[n("el-table",{staticStyle:{"padding-left":"5px"},attrs:{"empty-text":t.$t("No Data Found"),data:t.tags},on:{"sort-change":t.handleSortable}},[n("el-table-column",{attrs:{property:"id",sortable:"custom",label:t.$t("ID"),width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.id)+"\n                    ")]}}])}),t._v(" "),n("el-table-column",{attrs:{property:"title",sortable:"custom",label:t.$t("Title")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{name:"tag",params:{tagId:e.row.id}}}},[n("h3",{staticClass:"no-margin url"},[t._v("\n                                "+t._s(e.row.title)+"\n                            ")])]),t._v(" "),n("span",{staticClass:"list-created"},[t._v(t._s(e.row.description))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Contacts")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("h4",{staticClass:"no-margin"},[t._v("\n                            "+t._s(e.row.subscribersCount)+"\n                        ")]),t._v("\n                        "+t._s(t.$t("Subscribed"))+"\n                    ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Created")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{attrs:{title:e.row.created_at}},[t._v(t._s(t._f("nsHumanDiffTime")(e.row.created_at)))])]}}])}),t._v(" "),n("el-table-column",{attrs:{fixed:"right",width:"90",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"text-align-right d-flex"},[n("el-button",{staticClass:"mr-5",attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return t.edit(e.row)}}}),t._v(" "),n("confirm",{on:{yes:function(n){return t.remove(e.row.id)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1)],1)]}}])})],1),t._v(" "),n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)])])}),[],!1,null,null,null).exports,Ri={name:"DynamicSegmentPromo"},zi={name:"AllDynamicSegments",components:{Confirm:f,DynamicSegmentPromo:Object(a.a)(Ri,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_promo_wrapper"},[n("div",{staticClass:"text-align-center fluentcrm_header fc_promo_heading"},[n("h1",{},[t._v(t._s(t.$t("Dynamic Segments")))]),t._v(" "),n("p",[t._v(t._s(t.$t("create_dynamic_segments_of_contacts_introduction")))]),t._v(" "),n("a",{staticClass:"el-button el-button--success",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n            "+t._s(t.$t("Get FluentCRM Email Pro"))+"\n        ")])]),t._v(" "),n("div",{staticClass:"fc_promo_body fluentcrm_body fluentcrm_pad_around"},[n("div",{staticClass:"promo_block"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{sm:24,md:12}},[n("div",{staticClass:"promo_content"},[n("img",{staticClass:"promo_image",attrs:{src:t.appVars.images_url+"/promo/segment_create.png"}})])]),t._v(" "),n("el-col",{attrs:{sm:24,md:12}},[n("h2",[t._v(t._s(t.$t("Filter By Property and find appropriate Contacts")))]),t._v(" "),n("p",[t._v(t._s(t.$t("Simple enough to be quick to use, but powerful enough to really filter down your contacts into target segments")))]),t._v(" "),n("div",{},[n("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                            "+t._s(t.$t("Get FluentCRM Pro"))+"\n                        ")])])])],1)],1),t._v(" "),n("div",{staticClass:"promo_block"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{sm:24,md:12}},[n("h2",[t._v(t._s(t.$t("Use your dynamic segment to broadcast Email Campaigns")))]),t._v(" "),n("p",[t._v("\n                        "+t._s(t.$t("create_as_many_dynamic_segment_introduction"))+"\n                    ")]),t._v(" "),n("div",{},[n("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                            "+t._s(t.$t("Get FluentCRM Pro"))+"\n                        ")])])]),t._v(" "),n("el-col",{attrs:{sm:24,md:12}},[n("div",{staticClass:"promo_content"},[n("img",{staticClass:"promo_image",attrs:{src:t.appVars.images_url+"/promo/segment_campaign.png"}})])])],1)],1),t._v(" "),n("div",{staticClass:"promo_block"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{sm:24,md:12}},[n("div",{staticClass:"promo_content"},[n("img",{staticClass:"promo_image",attrs:{src:t.appVars.images_url+"/promo/dynamic_segment_all.png"}})])]),t._v(" "),n("el-col",{attrs:{sm:24,md:12}},[n("h2",[t._v(t._s(t.$t("Get Pre-Defined Contact Lists")))]),t._v(" "),n("p",[t._v("\n                        "+t._s(t.$t("use_the_predefined_dynamic_segment_introduction"))+"\n                    ")]),t._v(" "),n("div",{},[n("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                            "+t._s(t.$t("Get FluentCRM Pro"))+"\n                        ")])])])],1)],1)])])}),[],!1,null,null,null).exports},data:function(){return{segments:[],loading:!1}},methods:{fetchSegments:function(){var t=this;this.loading=!0,setTimeout((function(){t.$get("dynamic-segments").then((function(e){t.segments=e.dynamic_segments})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))}),500)},edit:function(t){this.$router.push({name:"view_segment",params:{slug:t.slug,id:t.id}})},remove:function(t){var e=this;this.loading=!0,this.$del("dynamic-segments/".concat(t.id)).then((function(t){e.fetchSegments(),e.$notify.success(t.message)})).catch((function(t){e.handleError(t)})).finally((function(){e.loading=!1}))}},mounted:function(){this.has_campaign_pro&&this.fetchSegments(),this.changeTitle(this.$t("Dynamic Segments")),this.$emit("changeMenu","dynamic_segments")}},Bi=Object(a.a)(zi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.has_campaign_pro?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm-lists fluentcrm_min_bg fluentcrm-view-wrapper fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Dynamic Segments")))]),t._v(" "),n("p",[t._v(t._s(t.$t("AllSegments.desc")))])]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.$router.push({name:"create_custom_segment"})}}},[t._v("\n                "+t._s(t.$t("Create Custom Segment"))+"\n            ")])],1)]),t._v(" "),n("div",{staticClass:"fluentcrm_body"},[n("div",{staticClass:"lists-table"},[n("el-table",{staticStyle:{"padding-left":"5px"},attrs:{"empty-text":t.$t("No Data Available"),data:t.segments}},[n("el-table-column",{attrs:{"min-width":"300px",label:t.$t("Title")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{name:"view_segment",params:{slug:e.row.slug,id:e.row.id}}}},[n("h3",{staticClass:"no-margin url"},[t._v("\n                                "+t._s(e.row.title)+"\n                            ")])]),t._v(" "),n("span",{staticClass:"list-description"},[t._v("\n                            "+t._s(e.row.subtitle)+"\n                        ")])]}}],null,!1,1840119999)}),t._v(" "),n("el-table-column",{attrs:{width:"150",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.is_system?n("p",[t._v(t._s(t.$t("System Defined")))]):n("div",{staticClass:"text-align-left"},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return t.edit(e.row)}}}),t._v(" "),n("confirm",{on:{yes:function(n){return t.remove(e.row)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1)],1)]}}],null,!1,2127885928)})],1)],1)])]):n("dynamic-segment-promo")}),[],!1,null,null,null).exports,Vi={name:"customSegmentEditor",props:["value","segment_id"],components:{RichFilter:le},data:function(){return{fields:{},loading:!1,filters:this.value,estimated_count:"",estimating:!1,require_estimating:!1}},watch:{filters:{deep:!0,handler:function(){this.$emit("input",this.filters),this.require_estimating=!0,this.estimating?this.changed_in_time||(this.changed_in_time=!0):this.getEstimatedCount()}}},methods:{fetchFields:function(){var t=this;this.loading=!0,this.$get("dynamic-segments/custom-fields").then((function(e){t.fields=e.fields,t.segment_id||t.$set(t,"settings",e.settings_defaults),t.$emit("loaded")})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},getEstimatedCount:function(){var t=this;this.estimating=!0,this.$post("dynamic-segments/estimated-contacts",{filters:this.filters}).then((function(e){t.estimated_count=e.count,t.changed_in_time&&(t.changed_in_time=!1,t.getEstimatedCount())})).catch((function(e){t.handleError(e)})).finally((function(){t.estimating=!1}))},addConditionGroup:function(){this.filters.push([])},maybeRemoveGroup:function(t){this.filters.length>1&&this.filters.splice(t,1)},fetch:function(){this.$emit("updateSegment"),this.getEstimatedCount()}},mounted:function(){this.fetchFields()}},Ui=Object(a.a)(Vi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fc_segment_fields"},[n("div",{staticClass:"fc_rich_container"},[n("div",{staticClass:"fc_rich_wrap"},t._l(t.filters,(function(e,i){return n("div",{key:i},[n("div",{staticClass:"fc_rich_filter"},[n("rich-filter",{attrs:{items:e},on:{maybeRemove:function(e){return t.maybeRemoveGroup(i)}}})],1),t._v(" "),n("div",{staticClass:"fc_cond_or"},[n("em",[t._v(t._s(t.$t("OR")))])])])})),0),t._v(" "),n("div",{staticClass:"fc_cond_or"},[n("em",{staticStyle:{cursor:"pointer",color:"rgb(0, 119, 204)","font-weight":"bold"},on:{click:function(e){return t.addConditionGroup()}}},[n("i",{staticClass:"el-icon-plus"}),t._v(" "+t._s(t.$t("OR")))])]),t._v(" "),t.segment_id?n("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){return t.fetch()}}},[t._v(t._s(t.$t("Update Segment")))]):n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.fetch()}}},[t._v(t._s(t.$t("Create Segment")))])],1),t._v(" "),""!==t.estimated_count?n("h3",{directives:[{name:"loading",rawName:"v-loading",value:t.estimating,expression:"estimating"}],staticClass:"fc_counting_heading text-align-center"},[t._v("\n        "+t._s(t.$t("_Cu_Estimated_Cboys"))+" "),n("span",[t._v(t._s(t.estimated_count))])]):t._e()])}),[],!1,null,null,null).exports;function Hi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Gi(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Wi={name:"DynamicSegmentViewer",props:["slug","id"],components:{CustomSegmentSettings:Ui,ContactsTable:li},data:function(){return{segment:{},loading:!0,saving:!1,subscribers:[],columns:[],pagination:{current_page:1,per_page:10,total:0},is_editing:!1,field_loading:!0,query_data:{tags:[],lists:[],search:"",statuses:[],sort_by:"id",sort_type:"DESC",custom_fields:!1},ui_config:{show_list:!0,show_tag:!0,disable_filters_without_selection:!0},options:{tags:[],lists:[],statuses:[],countries:[],sampleCsv:null,delimiter:"comma"}}},methods:{fetchSegment:function(){var t=this;this.loading=!0,this.$get("dynamic-segments/".concat(this.slug,"/subscribers/").concat(this.id),function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Hi(Object(n),!0).forEach((function(e){Gi(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Hi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({per_page:this.pagination.per_page,page:this.pagination.current_page},this.query_data)).then((function(e){t.segment=e.segment,t.subscribers=e.subscribers.data,t.pagination.total=e.subscribers.total,t.changeTitle(t.segment.title+" - Dynamic Segments")})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},updateSegment:function(){var t=this,e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.segment.title?(this.saving=!0,this.$put("dynamic-segments/".concat(this.segment.id),{segment:JSON.stringify({title:this.segment.title,filters:this.segment.filters}),with_subscribers:!1}).then((function(n){t.$notify.success(n.message),t.pagination.current_page=1,t.fetchSegment(),e&&(t.is_editing=!1)})).catch((function(e){t.handleError(e)})).finally((function(){t.saving=!1}))):this.$notify.error(this.$t("Cre_Please_pNotS"))},getOptions:function(){var t=this;this.$get("reports/options",{fields:"tags,lists,statuses,contact_types,sampleCsv,custom_fields"}).then((function(e){t.options=e.options}))}},mounted:function(){this.getOptions()}},Yi=Object(a.a)(Wi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm-lists fluentcrm_min_bg fluentcrm-view-wrapper fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"dynamic_segments"}}},[t._v("\n                    "+t._s(t.$t("Dynamic Segments"))+"\n                ")]),t._v(" "),n("el-breadcrumb-item",[t._v("\n                    "+t._s(t.segment.title)+"\n                ")])],1),t._v(" "),n("p",[t._v(t._s(t.segment.subtitle))])],1),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.push({name:"dynamic_segments"})}}},[t._v("\n                "+t._s(t.$t("Back"))+"\n            ")])],1)]),t._v(" "),n("div",{staticClass:"fluentcrm_pad_around"},[n("div",{staticClass:"fc_segment_desc_block"},[n("h3",[t._v(t._s(t.segment.description))]),t._v(" "),t.segment.is_system?t._e():n("div",[n("el-button",{attrs:{type:t.is_editing?"danger":"info"},on:{click:function(e){t.is_editing=!t.is_editing}}},[t.is_editing?n("span",[t._v(t._s(t.$t("Cancel Editing")))]):n("span",[t._v(t._s(t.$t("Edit Configuration")))])])],1),t._v(" "),t.is_editing?n("div",{staticClass:"text-align-left fc_segment_editor"},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.field_loading,expression:"field_loading"}],staticClass:"fc_segment_form",attrs:{"label-position":"top",data:t.segment}},[n("div",{staticClass:"fc_section_heading"},[n("h3",[t._v(t._s(t.$t("Name this Custom Segment")))]),t._v(" "),n("p",[t._v(t._s(t.$t("custom_segment.name_desc")))]),t._v(" "),n("el-input",{attrs:{placeholder:t.$t("eg: Active Contacts"),type:"text"},model:{value:t.segment.title,callback:function(e){t.$set(t.segment,"title",e)},expression:"segment.title"}})],1),t._v(" "),n("custom-segment-settings",{attrs:{segment_id:t.segment.id},on:{loaded:function(){t.field_loading=!1},updateSegment:function(e){return t.updateSegment(!1)}},model:{value:t.segment.filters,callback:function(e){t.$set(t.segment,"filters",e)},expression:"segment.filters"}})],1)],1):t._e()]),t._v(" "),n("div",{staticClass:"lists-table fcrm_segment_contacts"},[n("contacts-table",{attrs:{always_searchbar:!0,options:t.options,query_data:t.query_data,is_loading:t.loading,ui_config:t.ui_config,subscribers:t.subscribers,pagination:t.pagination},on:{fetch:t.fetchSegment}})],1)])])}),[],!1,null,null,null).exports,Ji={name:"CreateCustomSegment",components:{CustomSegmentSettings:Ui},data:function(){return{loading:!1,saving:!1,field_loading:!0,segment:{title:"",filters:[[]]}}},methods:{createSegment:function(){var t=this;this.segment.title?(this.saving=!0,this.$post("dynamic-segments",{segment:JSON.stringify(this.segment),with_subscribers:!1}).then((function(e){t.$notify.success(e.message),t.$router.push({name:"view_segment",params:{slug:e.segment.slug,id:e.segment.id}})})).catch((function(e){t.handleError(e)})).finally((function(){t.saving=!1}))):this.$notify.error(this.$t("Cre_Please_pNotS"))}},mounted:function(){this.changeTitle(this.$t("New Dynamic Segment"))}},Ki=Object(a.a)(Ji,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.field_loading,expression:"field_loading"}],staticClass:"fluentcrm-lists fluentcrm_min_bg fluentcrm-view-wrapper fluentcrm_view",staticStyle:{background:"#f1f1f1",border:"1px solid #e3e8ee"}},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"dynamic_segments"}}},[t._v("\n                    "+t._s(t.$t("Dynamic Segments"))+"\n                ")]),t._v(" "),n("el-breadcrumb-item",[t._v("\n                    "+t._s(t.$t("Create Custom Segment"))+"\n                ")])],1)],1),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.$router.push({name:"dynamic_segments"})}}},[t._v(t._s(t.$t("Back")))])],1)]),t._v(" "),n("div",{staticClass:"fluentcrm_pad_around"},[n("el-form",{staticClass:"fc_segment_form",attrs:{"label-position":"top",data:t.segment}},[n("div",{staticClass:"fc_section_heading"},[n("h3",[t._v(t._s(t.$t("Name this Custom Segment")))]),t._v(" "),n("p",[t._v(t._s(t.$t("custom_segment.name_desc")))]),t._v(" "),n("el-input",{attrs:{placeholder:t.$t("eg: Active Contacts"),type:"text"},model:{value:t.segment.title,callback:function(e){t.$set(t.segment,"title",e)},expression:"segment.title"}})],1),t._v(" "),n("custom-segment-settings",{attrs:{segment_id:!1},on:{loaded:function(){t.field_loading=!1}},model:{value:t.segment.filters,callback:function(e){t.$set(t.segment,"filters",e)},expression:"segment.filters"}}),t._v(" "),n("el-form-item",{staticClass:"text-align-right"},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving,expression:"saving"}],attrs:{type:"primary"},on:{click:function(e){return t.createSegment()}}},[t._v(t._s(t.$t("Create Custom Segment")))])],1)],1)],1)])}),[],!1,null,null,null).exports,Qi={name:"ProfileOverview",props:["subscriber","custom_fields"],components:{CustomFields:Ke},data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>=Date.now()}},subscriber_statuses:window.fcAdmin.subscriber_statuses,errors:null,updating:!1,countries:window.fcAdmin.countries,name_prefixes:window.fcAdmin.contact_prefixes}},methods:{updateSubscriber:function(){var t=this;this.errors=null,this.updating=!0,this.$put("subscribers/".concat(this.subscriber.id),{subscriber:JSON.stringify(this.subscriber)}).then((function(e){t.$notify.success(e.message)})).catch((function(e){t.errors=e,t.$notify.error(e.email.required)})).finally((function(){t.updating=!1}))}}},Zi=Object(a.a)(Qi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_databox"},[n("el-form",{ref:"basic_form",attrs:{"label-position":"top",model:t.subscriber,"label-width":"120px"}},[n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[n("h3",[t._v(t._s(t.$t("Basic Information")))]),t._v(" "),n("div",{staticClass:"fluentcrm_edit_basic"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{lg:4,md:4,sm:24,xs:24}},[n("el-form-item",{attrs:{label:t.$t("Prefix")}},[n("el-select",{attrs:{placeholder:t.$t("Select"),size:"small"},model:{value:t.subscriber.prefix,callback:function(e){t.$set(t.subscriber,"prefix",e)},expression:"subscriber.prefix"}},t._l(t.name_prefixes,(function(t){return n("el-option",{key:t,attrs:{label:t,value:t}})})),1)],1)],1),t._v(" "),n("el-col",{attrs:{lg:10,md:10,sm:24,xs:24}},[n("el-form-item",{attrs:{label:t.$t("First Name")}},[n("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.first_name,callback:function(e){t.$set(t.subscriber,"first_name",e)},expression:"subscriber.first_name"}})],1)],1),t._v(" "),n("el-col",{attrs:{lg:10,md:10,sm:24,xs:24}},[n("el-form-item",{attrs:{label:t.$t("Last Name")}},[n("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.last_name,callback:function(e){t.$set(t.subscriber,"last_name",e)},expression:"subscriber.last_name"}})],1)],1)],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Email Address")}},[n("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.email,callback:function(e){t.$set(t.subscriber,"email",e)},expression:"subscriber.email"}}),t._v(" "),t.errors?n("span",{staticClass:"error"},[t._v(t._s(t.errors.email.required))]):t._e()],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Phone/Mobile")}},[n("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.phone,callback:function(e){t.$set(t.subscriber,"phone",e)},expression:"subscriber.phone"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Date of Birth")}},[n("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date","value-format":"yyyy-MM-dd","picker-options":t.pickerOptions,placeholder:t.$t("Pick a date")},model:{value:t.subscriber.date_of_birth,callback:function(e){t.$set(t.subscriber,"date_of_birth",e)},expression:"subscriber.date_of_birth"}})],1)],1)]),t._v(" "),n("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[n("h3",[t._v(t._s(t.$t("Address Information")))]),t._v(" "),n("div",{staticClass:"fluentcrm_edit_basic"},[n("el-form-item",{attrs:{label:t.$t("Address Line 1")}},[n("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.address_line_1,callback:function(e){t.$set(t.subscriber,"address_line_1",e)},expression:"subscriber.address_line_1"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Address Line 2")}},[n("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.address_line_2,callback:function(e){t.$set(t.subscriber,"address_line_2",e)},expression:"subscriber.address_line_2"}})],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[n("el-form-item",{attrs:{label:t.$t("City")}},[n("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.city,callback:function(e){t.$set(t.subscriber,"city",e)},expression:"subscriber.city"}})],1)],1),t._v(" "),n("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[n("el-form-item",{attrs:{label:t.$t("State")}},[n("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.state,callback:function(e){t.$set(t.subscriber,"state",e)},expression:"subscriber.state"}})],1)],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[n("el-form-item",{attrs:{label:t.$t("ZIP Code")}},[n("el-input",{attrs:{autocomplete:"new-password"},model:{value:t.subscriber.postal_code,callback:function(e){t.$set(t.subscriber,"postal_code",e)},expression:"subscriber.postal_code"}})],1)],1),t._v(" "),n("el-col",{attrs:{lg:12,md:12,sm:24,xs:24}},[n("el-form-item",{attrs:{label:t.$t("Country")}},[n("el-select",{staticClass:"el-select-multiple",attrs:{clearable:"",filterable:"",autocomplete:"new-password",placeholder:t.$t("Select country")},model:{value:t.subscriber.country,callback:function(e){t.$set(t.subscriber,"country",e)},expression:"subscriber.country"}},t._l(t.countries,(function(e){return n("el-option",{key:e.code,attrs:{value:e.code,label:e.title}},[t._v("\n                                        "+t._s(e.title)+"\n                                    ")])})),1)],1)],1)],1)],1)])],1),t._v(" "),n("custom-fields",{attrs:{subscriber:t.subscriber,custom_fields:t.custom_fields}}),t._v(" "),t.hasPermission("fcrm_manage_contacts")?n("el-form-item",{staticClass:"text-align-right"},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{size:"small",type:"success"},on:{click:function(e){return t.updateSubscriber()}}},[t._v("\n                "+t._s(t.$t("Update Contact"))+"\n            ")])],1):t._e()],1)],1)}),[],!1,null,null,null).exports,Xi={name:"ProfileEmailSequence",components:{Confirm:f,Pagination:b},props:["subscriber_id"],data:function(){return{sequences:[],loading:!1,removing:!1,pagination:{total:0,per_page:10,current_page:1}}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("sequences/subscriber/".concat(this.subscriber_id,"/sequences"),{per_page:this.pagination.per_page,page:this.pagination.current_page}).then((function(e){t.sequences=e.sequence_trackers.data,t.pagination.total=e.sequence_trackers.total})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},removeFromSequence:function(t,e){var n=this;this.removing=!0,this.$del("sequences/".concat(t,"/subscribers"),{tracker_ids:[e]}).then((function(t){n.$notify.success(t.message),n.fetch()})).catch((function(t){n.handleError(t)})).finally((function(){n.removing=!1}))}},mounted:function(){this.fetch()}},ts=Object(a.a)(Xi,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_profile_sub"},[n("h3",[t._v(t._s(t.$t("Email Sequences")))]),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Available"),stripe:"",border:"",data:t.sequences}},[n("el-table-column",{attrs:{label:t.$t("Sequence")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.sequence?n("span",[t._v(t._s(e.row.sequence.title))]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Started At")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{attrs:{title:e.row.created_at}},[t._v("\n                    "+t._s(t._f("nsHumanDiffTime")(e.row.created_at))+"\n                ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Next Email")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.next_sequence?n("span",[t._v(t._s(e.row.next_sequence.title))]):t._e(),t._v(" "),"active"==e.row.status?n("span",{attrs:{title:e.row.next_execution_time}},[t._v("\n                    - ("+t._s(t._f("nsHumanDiffTime")(e.row.next_execution_time))+")\n                ")]):n("span",[t._v("\n                    --\n                ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"160",label:t.$t("Status")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.status)+"\n            ")]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"160",label:t.$t("Action")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("confirm",{directives:[{name:"loading",rawName:"v-loading",value:t.removing,expression:"removing"}],on:{yes:function(n){return t.removeFromSequence(e.row.campaign_id,e.row.id)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1)]}}])})],1),t._v(" "),n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)}),[],!1,null,null,null).exports,es={name:"ProfileAutomations",props:["subscriber_id"],components:{Confirm:f,Pagination:b},data:function(){return{automations:[],loading:!1,deleting:!1,pagination:{total:0,per_page:10,current_page:1},updating:!1}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("funnels/subscriber/".concat(this.subscriber_id,"/automations"),{per_page:this.pagination.per_page,page:this.pagination.current_page}).then((function(e){t.automations=e.automations.data,t.pagination.total=e.automations.total})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},removeFromFunnel:function(t,e){var n=this;this.deleting=!0,this.$del("funnels/".concat(t,"/subscribers"),{subscriber_ids:[e]}).then((function(t){n.$notify.success(t.message),n.fetch()})).catch((function(t){n.handleError(t)})).finally((function(){n.deleting=!1}))},changeFunnelSubscriptionStatus:function(t,e,n){var i=this;this.updating=!0,this.$put("funnels/".concat(t,"/subscribers/").concat(e,"/status"),{status:n}).then((function(t){i.$notify.success(t.message),i.fetch()})).catch((function(t){i.handleError(t)})).finally((function(){i.updating=!1}))}},mounted:function(){this.fetch()}},ns=Object(a.a)(es,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_profile_sub"},[n("h3",[t._v(t._s(t.$t("Automations")))]),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Available"),stripe:"",border:"",data:t.automations}},[n("el-table-column",{attrs:{label:t.$t("Sequence")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{name:"funnel_subscribers",params:{funnel_id:e.row.funnel.id}}}},[t._v(t._s(e.row.funnel.title))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Started At")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{attrs:{title:e.row.created_at}},[t._v("\n                    "+t._s(t._f("nsHumanDiffTime")(e.row.created_at))+"\n                ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Next Step")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.next_sequence_item&&"completed"!=e.row.status?n("span",[t._v(t._s(e.row.next_sequence_item.title))]):n("span",[n("i",{staticClass:"el-icon el-icon-success",staticStyle:{"font-size":"22px"},attrs:{title:t.$t("Completed")}})]),t._v(" "),"active"==e.row.status?n("span",{attrs:{title:e.row.next_execution_time}},[t._v("\n                    - ("+t._s(t._f("nsHumanDiffTime")(e.row.next_execution_time))+")\n                ")]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"160",label:t.$t("Status")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.status)+"\n            ")]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"160",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("confirm",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],on:{yes:function(n){return t.removeFromFunnel(e.row.funnel_id,e.row.subscriber_id)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1),t._v(" "),"cancelled"==e.row.status?n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{type:"info",size:"mini"},on:{click:function(n){return t.changeFunnelSubscriptionStatus(e.row.funnel_id,e.row.subscriber_id,"active")}}},[t._v("\n                    "+t._s(t.$t("Resume"))+"\n                ")]):t._e(),t._v(" "),"active"==e.row.status?n("el-button",{directives:[{name:"loadin",rawName:"v-loadin",value:t.updating,expression:"updating"}],attrs:{type:"info",size:"mini"},on:{click:function(n){return t.changeFunnelSubscriptionStatus(e.row.funnel_id,e.row.subscriber_id,"cancelled")}}},[t._v("\n                    "+t._s(t.$t("Cancel"))+"\n                ")]):t._e(),t._v(" "),"fcrm_manual_attach"==e.row.source_trigger_name?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Contact has been added manually to this automation funnel"),placement:"top-start"}},[n("i",{staticClass:"el-icon el-icon-info"})]):t._e()]}}])})],1),t._v(" "),n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)}),[],!1,null,null,null).exports,is={name:"EmailComposer",props:["campaign","label_align","disable_subject","disable_templates","disable_fixed","enable_test","show_merge","extra_tags"],components:{EmailBlockComposer:zt,InputPopover:x},data:function(){return{smartcodes:window.fcAdmin.globalSmartCodes,email_subject_status:!0,send_test_pop:!1,sending_test:!1,test_email:""}},methods:{triggerSave:function(){this.$emit("save")},resetSubject:function(){var t=this;this.email_subject_status=!1,this.$nextTick((function(){t.email_subject_status=!0}))},sendTestEmail:function(){var t=this;return this.campaign.email_body?this.campaign.email_subject?(this.sending_test=!0,void this.$post("campaigns/send-test-email",{campaign:{email_subject:this.campaign.email_subject,email_pre_header:this.campaign.email_pre_header,email_body:this.campaign.email_body,design_template:this.campaign.design_template,settings:this.campaign.settings},email:this.test_email,test_campaign:"yes"}).then((function(e){t.$notify.success(e.message)})).catch((function(e){t.$notify.error(e.message)})).finally((function(){t.sending_test=!1,t.send_test_pop=!1}))):this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peS"),offset:19}):this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peb"),offset:19})}}},ss=Object(a.a)(is,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"email_composer_wrapper"},[t.disable_subject?t._e():n("el-form",{attrs:{"label-position":t.label_align,model:t.campaign}},[n("el-row",{staticClass:"mb-10",attrs:{gutter:20}},[n("el-col",{attrs:{sm:24,md:12}},[n("el-form-item",{attrs:{label:t.$t("Email Subject")}},[t.email_subject_status?n("input-popover",{attrs:{popper_extra:"fc_with_c_fields",placeholder:t.$t("Email Subject"),data:t.smartcodes},model:{value:t.campaign.email_subject,callback:function(e){t.$set(t.campaign,"email_subject",e)},expression:"campaign.email_subject"}}):t._e()],1)],1),t._v(" "),n("el-col",{attrs:{sm:24,md:12}},[n("el-form-item",{attrs:{label:t.$t("Email Pre-Header")}},[n("el-input",{attrs:{type:"textarea",placeholder:t.$t("Email Pre-Header"),rows:2},model:{value:t.campaign.email_pre_header,callback:function(e){t.$set(t.campaign,"email_pre_header",e)},expression:"campaign.email_pre_header"}})],1)],1)],1)],1),t._v(" "),n("email-block-composer",{attrs:{extra_tags:t.extra_tags,show_merge:!0,enable_template_save:!0,disable_fixed:t.disable_fixed,enable_templates:!t.disable_templates,campaign:t.campaign},on:{template_inserted:function(e){return t.resetSubject()}}},[n("template",{slot:"fc_editor_actions"},[t._t("actions")],2)],2),t._v(" "),t.enable_test?n("div",[n("el-popover",{attrs:{placement:"left",width:"400",trigger:"manual"},model:{value:t.send_test_pop,callback:function(e){t.send_test_pop=e},expression:"send_test_pop"}},[n("div",[n("p",[t._v(t._s(t.$t("Cam_Type_cetstolbtsc")))]),t._v(" "),n("el-input",{attrs:{placeholder:t.$t("Email Address")},model:{value:t.test_email,callback:function(e){t.test_email=e},expression:"test_email"}},[n("template",{slot:"append"},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.sending_test,expression:"sending_test"}],attrs:{type:"success"},on:{click:function(e){return t.sendTestEmail()}}},[t._v("\n                            "+t._s(t.$t("Send"))+"\n                        ")])],1)],2)],1),t._v(" "),n("el-button",{staticClass:"fc_with_select",attrs:{slot:"reference",size:"small",type:"danger"},on:{click:function(e){t.send_test_pop=!t.send_test_pop}},slot:"reference"},[t._v("\n                "+t._s(t.$t("Send a test email"))+"\n            ")])],1)],1):t._e()],1)}),[],!1,null,null,null).exports,as={name:"ProfileEmails",props:["subscriber_id"],components:{Pagination:b,EmailPreview:be,EmailSequences:ts,ProfileAutomations:ns,EmailComposer:ss,Confirm:f},data:function(){return{loading:!1,emails:[],pagination:{total:0,per_page:20,current_page:1},preview:{id:null,isVisible:!1},sendEmailModal:!1,custom_email:{},resending:!1,selections:[],deleting:!1,loadingCustomEmailSettings:!1,sending_custom_email:!1}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("subscribers/".concat(this.subscriber_id,"/emails"),{per_page:this.pagination.per_page,page:this.pagination.current_page}).then((function(e){t.emails=e.emails.data,t.pagination.total=e.emails.total})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1}))},resendEmail:function(t){var e=this;if(!this.has_campaign_pro)return this.$notify.error("_Ca_Please_utptutf"),!1;this.resending=!0,this.$post("campaigns-pro/".concat(t.campaign_id,"/resend-emails"),{email_ids:[t.id]}).then((function(t){e.$notify.success(t.message),e.fetch()})).catch((function(t){e.handleError(t)})).finally((function(){e.resending=!1}))},previewEmail:function(t){this.preview.id=t,this.preview.isVisible=!0},sendCustomEmail:function(){var t=this;this.sending_custom_email=!0,this.$post("subscribers/".concat(this.subscriber_id,"/emails/send"),{campaign:this.custom_email}).then((function(e){t.$notify.success(e.message),t.sendEmailModal=!1,t.custom_email={},t.fetch()})).catch((function(t){console.log(t)})).finally((function(){t.sending_custom_email=!1}))},handleSelectionChange:function(t){this.selections=t},deleteSelected:function(){var t=this;this.deleting=!0;var e=this.selections.map((function(t){return t.id}));this.$del("subscribers/".concat(this.subscriber_id,"/emails"),{email_ids:e}).then((function(e){t.selections=[],t.$notify.success(e.message),t.fetch()})).catch((function(e){t.handleError(e)})).finally((function(){t.deleting=!1}))},openCustomEmailModal:function(){var t=this;if(this.loadingCustomEmailSettings=!0,this.sendEmailModal=!0,window.fc_subscriber_email_mock)return this.custom_email=JSON.parse(JSON.stringify(window.fc_subscriber_email_mock)),void(this.loadingCustomEmailSettings=!1);this.$get("subscribers/".concat(this.subscriber_id,"/emails/template-mock")).then((function(e){window.fc_subscriber_email_mock=e.email_mock,t.custom_email=e.email_mock})).catch((function(t){console.log(t)})).finally((function(){t.loadingCustomEmailSettings=!1}))}},mounted:function(){this.fetch()}},rs=Object(a.a)(as,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_databox"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:16}},[n("h3",[t._v(t._s(t.$t("Pro_Emails_fdcaa")))])]),t._v(" "),n("el-col",{staticClass:"text-align-right",attrs:{span:8}},[t.has_campaign_pro&&t.hasPermission("fcrm_manage_contacts")?n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.openCustomEmailModal()}}},[t._v("\n                "+t._s(t.$t("Send Email"))+"\n            ")]):t._e()],1)],1),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading||t.resending,expression:"loading || resending"}],staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Available"),stripe:"",border:"",data:t.emails},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Subject")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.email_subject)+"\n                "),n("span",{staticClass:"ns_counter",attrs:{title:t.$t("Total Clicks")}},[n("i",{staticClass:"el-icon el-icon-position"}),t._v(" "+t._s(e.row.click_counter||0))]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:e.row.click_counter||1==e.row.is_open,expression:"scope.row.click_counter || scope.row.is_open == 1"}],staticClass:"ns_counter",attrs:{title:t.$t("Email opened")}},[n("i",{staticClass:"el-icon el-icon-folder-opened"})])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"190",label:t.$t("Date")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.scheduled_at)+"\n            ")]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"120",label:t.$t("Status"),align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{class:"status-"+e.row.status},[t._v("\n                                    "+t._s(t._f("ucFirst")(t.trans(e.row.status)))+"\n                                ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Preview"),width:"180",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-view"},on:{click:function(n){return t.previewEmail(e.row.id)}}}),t._v(" "),"sent"!=e.row.status&&"failed"!=e.row.status||!e.row.campaign_id?t._e():n("el-button",{attrs:{size:"mini",type:"info",icon:"el-icon-refresh-right"},on:{click:function(n){return t.resendEmail(e.row)}}},[t._v(t._s(t.$t("Resend"))+"\n                ")])]}}])})],1),t._v(" "),n("el-row",[n("el-col",{attrs:{md:12,sm:24}},[t.selections.length?n("confirm",{attrs:{placement:"top-start"},on:{yes:function(e){return t.deleteSelected()}}},[t.selections.length?n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],staticStyle:{"margin-top":"10px"},attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[t._v("\n                    "+t._s(t.$t("Delete Selected"))+"\n                ")]):t._e()],1):t._e(),t._v("\n            \n        ")],1),t._v(" "),n("el-col",{attrs:{md:12,sm:24}},[n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)],1),t._v(" "),t.has_campaign_pro?[n("email-sequences",{attrs:{subscriber_id:t.subscriber_id}}),t._v(" "),n("profile-automations",{attrs:{subscriber_id:t.subscriber_id}})]:t._e(),t._v(" "),n("email-preview",{attrs:{preview:t.preview}}),t._v(" "),n("el-dialog",{staticClass:"fc_funnel_block_modal",attrs:{visible:t.sendEmailModal,width:"60%","append-to-body":!0,"close-on-click-modal":!1,title:t.$t("Send Custom Email")},on:{"update:visible":function(e){t.sendEmailModal=e}}},[t.loadingCustomEmailSettings?n("div",[n("h3",[t._v(t._s(t.$t("Loading Settings...")))])]):n("div",[t.sendEmailModal?n("div",{staticClass:"fc_block_white"},[n("email-composer",{staticClass:"fc_into_modal",attrs:{enable_test:!0,disable_fixed:!0,campaign:t.custom_email,label_align:"top"}})],1):t._e(),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){t.sendEmailModal=!1}}},[t._v("\n                    "+t._s(t.$t("Cancel"))+"\n                ")]),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.sending_custom_email,expression:"sending_custom_email"}],attrs:{size:"small",type:"primary"},on:{click:function(e){return t.sendCustomEmail()}}},[t._v("\n                    "+t._s(t.$t("Send Email"))+"\n                ")])],1)])])],2)}),[],!1,null,null,null).exports,os={name:"FormSubmissionsBlock",props:["provider","subscriber_id"],components:{Pagination:b},data:function(){return{loading:!1,submissions:[],pagination:{per_page:10,current_page:1,total:0}}},computed:{table_columns:function(){var t=[];return this.submissions.length&&(t=this.submissions[0]),t}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("subscribers/".concat(this.subscriber_id,"/form-submissions"),{provider:this.provider.provider_key,page:this.pagination.current_page,per_page:this.pagination.per_page}).then((function(e){t.submissions=e.submissions.data,t.pagination.total=parseInt(e.submissions.total)})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1}))}},mounted:function(){this.fetch()}},ls=Object(a.a)(os,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"purchase_history_block"},[n("h3",{staticClass:"history_title"},[t._v(t._s(t.provider.title))]),t._v(" "),n("div",{staticClass:"provider_data"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"empty-text":t.$t("No Data Found"),border:"",stripe:"",data:t.submissions}},[t._l(t.table_columns,(function(e,i){return n("el-table-column",{key:i,attrs:{label:t._f("ucWords")(i)},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{domProps:{innerHTML:t._s(e.row[i])}})]}}],null,!0)})})),t._v(" "),n("template",{slot:"empty"},[n("p",[t._v(t._s(t.$t("Form Submissions from"))+" "),n("b",[t._v(t._s(t.provider.name))]),t._v(" "+t._s(t.$t("no_form_submissions_found_for_this_subscriber")))])])],2),t._v(" "),n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)])}),[],!1,null,null,null).exports,cs=n(6),us={name:"ProfileFormSubmissions",props:["subscriber_id"],components:{FormSubmissionBlock:ls},data:function(){return{providersData:{},app_ready:!1}},computed:{is_empty:function(){return cs(this.providersData)}},mounted:function(){var t=this;this.each(window.fcAdmin.form_submission_providers,(function(e,n){var i={title:e.title,name:e.name,provider_key:n};t.providersData[n]=i})),this.app_ready=!0}},_s=Object(a.a)(us,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.app_ready?n("div",{staticClass:"fluentcrm_databox"},[t.is_empty?n("div",[n("h3",{staticClass:"text-align-center"},[t._v("\n            "+t._s(t.$t("Pro_Form_SfFFwbshCFF"))+"\n        ")])]):t._l(t.providersData,(function(e,i){return n("form-submission-block",{key:i,attrs:{provider:e,subscriber_id:t.subscriber_id}})}))],2):t._e()}),[],!1,null,null,null).exports,ds={name:"ProfileNotes",props:["subscriber_id"],components:{Pagination:b,Confirm:f,WpEditor:V},data:function(){return{loading:!1,adding_note:!1,notes:[],types:window.fcAdmin.activity_types,pagination:{total:0,per_page:10,current_page:1},new_note:{title:"",description:"",type:"note"},editing_note:{},is_editing_note:!1,updating:!1}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("subscribers/".concat(this.subscriber_id,"/notes"),{per_page:this.pagination.per_page,page:this.pagination.current_page}).then((function(e){t.notes=e.notes.data,t.pagination.total=e.notes.total,t.new_note={title:"",description:"",type:"note"},t.adding_note=!1})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1}))},saveNote:function(){var t=this;this.$post("subscribers/".concat(this.subscriber_id,"/notes"),{note:this.new_note}).then((function(e){t.$notify.success(e.message),t.fetch()})).catch((function(e){t.$notify.error({title:t.$t("Error"),message:e.title.required+e.description.required})})).finally((function(){t.loading=!1}))},remove:function(t){var e=this;this.$del("subscribers/".concat(this.subscriber_id,"/notes/").concat(t)).then((function(t){e.fetch(),e.$notify.success({title:e.$t("Great!"),message:t.message,offset:19})})).catch((function(t){e.handleError(t)}))},editNote:function(t){this.editing_note=t,this.is_editing_note=!0},updateNote:function(){var t=this;this.updating=!0,this.$put("subscribers/".concat(this.subscriber_id,"/notes/").concat(this.editing_note.id),{note:this.editing_note}).then((function(e){t.$notify.success(e.message),t.is_editing_note=!1,t.editing_note={}})).catch((function(e){t.handleError(e)})).finally((function(){t.updating=!1}))},exportNotes:function(){if(!this.has_campaign_pro)return this.$notify.error("Notes export feature is only available on pro version"),!1;location.href=window.ajaxurl+"?"+jQuery.param({action:"fluentcrm_export_notes",subscriber_id:this.subscriber_id})}},mounted:function(){this.fetch()}},ps=Object(a.a)(ds,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_databox"},[n("div",{staticClass:"fluentcrm_contact_header"},[n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:12}},[n("h3",[t._v(t._s(t.$t("Pro_Contact_N_A")))])]),t._v(" "),t.hasPermission("fcrm_manage_contacts")?n("el-col",{staticClass:"text-align-right",attrs:{span:12}},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.adding_note=!t.adding_note}}},[t._v("\n                    "+t._s(t.$t("Add New"))+"\n                ")]),t._v(" "),n("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-download"},on:{click:function(e){return t.exportNotes()}}})],1):t._e()],1)],1),t._v(" "),t.adding_note?n("div",{staticClass:"fluentcrm_create_note_wrapper"},[n("el-form",{ref:"basic_form",attrs:{"label-position":"top",model:t.new_note}},[n("el-form-item",{attrs:{label:t.$t("Type")}},[n("el-select",{attrs:{size:"small",placeholder:t.$t("Select Activity Type")},model:{value:t.new_note.type,callback:function(e){t.$set(t.new_note,"type",e)},expression:"new_note.type"}},t._l(t.types,(function(t,e){return n("el-option",{key:e,attrs:{value:e,label:t}})})),1)],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Title")}},[n("el-input",{attrs:{size:"small",type:"text",placeholder:t.$t("Your Note Title")},model:{value:t.new_note.title,callback:function(e){t.$set(t.new_note,"title",e)},expression:"new_note.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Description")}},[n("wp-editor",{model:{value:t.new_note.description,callback:function(e){t.$set(t.new_note,"description",e)},expression:"new_note.description"}})],1),t._v(" "),n("el-form-item",{attrs:{label:""}},[n("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){return t.saveNote()}}},[t._v(" "+t._s(t.$t("Create")))]),t._v(" "),n("el-button",{attrs:{size:"small",type:"default"},on:{click:function(e){t.adding_note=!1}}},[t._v("\n                    "+t._s(t.$t("Cancel"))+"\n                ")])],1)],1)],1):t._e(),t._v(" "),t.pagination.total?[n("div",{staticClass:"fluentcrm_notes"},t._l(t.notes,(function(e){return n("div",{key:e.id,staticClass:"fluentcrm_note"},[n("div",{staticClass:"note_header"},[n("div",{staticClass:"note_title"},[t._v(t._s(t.types[e.type]||e.type)+" : "+t._s(e.title))]),t._v(" "),n("div",{staticClass:"note_meta"},[e.added_by&&e.added_by.display_name?n("span",[t._v(t._s(t.$t("By"))+"\n                            "+t._s(e.added_by.display_name)+"\n                        ")]):t._e(),t._v("\n                        "+t._s(t.$t("at"))+" "),n("span",{attrs:{title:e.created_at}},[t._v(t._s(t._f("nsHumanDiffTime")(e.created_at)))])]),t._v(" "),t.hasPermission("fcrm_manage_contacts")?n("div",{staticClass:"note_delete"},[n("confirm",{on:{yes:function(n){return t.remove(e.id)}}},[n("i",{staticClass:"el-icon el-icon-delete"})]),t._v(" "),n("i",{staticClass:"el-icon el-icon-edit",staticStyle:{"margin-left":"5px"},on:{click:function(n){return t.editNote(e)}}})],1):t._e()]),t._v(" "),n("div",{staticClass:"note_body",domProps:{innerHTML:t._s(e.description)}})])})),0),t._v(" "),n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})]:n("div",[n("h4",{staticClass:"text-align-center"},[t._v(t._s(t.$t("Pro_No_NfPatfn")))])]),t._v(" "),n("el-dialog",{attrs:{title:t.$t("Edit Note"),visible:t.is_editing_note,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.is_editing_note=e}}},[t.is_editing_note?n("el-form",{ref:"editing_note",attrs:{"label-position":"top",model:t.editing_note}},[n("el-form-item",{attrs:{label:t.$t("Type")}},[n("el-select",{attrs:{placeholder:t.$t("Select Activity Type")},model:{value:t.editing_note.type,callback:function(e){t.$set(t.editing_note,"type",e)},expression:"editing_note.type"}},t._l(t.types,(function(t,e){return n("el-option",{key:e,attrs:{value:e,label:t}})})),1)],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Title")}},[n("el-input",{attrs:{size:"small",type:"text",placeholder:t.$t("Your Note Title")},model:{value:t.editing_note.title,callback:function(e){t.$set(t.editing_note,"title",e)},expression:"editing_note.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Description")}},[n("wp-editor",{model:{value:t.editing_note.description,callback:function(e){t.$set(t.editing_note,"description",e)},expression:"editing_note.description"}})],1)],1):t._e(),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.updateNote()}}},[t._v("\n                    "+t._s(t.$t("Update Note"))+"\n                ")])],1)],1)],2)}),[],!1,null,null,null).exports,ms={name:"PurchaseHistoryBlock",props:["provider","subscriber_id"],components:{Pagination:b},data:function(){return{loading:!1,orders:[],pagination:{per_page:10,current_page:1,total:0},sidebar_html:"",after_html:""}},computed:{table_columns:function(){var t=[];return this.orders&&this.orders.length&&(t=this.orders[0]),t}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("subscribers/".concat(this.subscriber_id,"/purchase-history"),{provider:this.provider.provider_key,page:this.pagination.current_page,per_page:this.pagination.per_page}).then((function(e){t.orders=e.orders.data,t.pagination.total=parseInt(e.orders.total),e.orders.sidebar_html&&(t.sidebar_html=e.orders.sidebar_html),e.orders.after_html&&(t.after_html=e.orders.after_html)})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))}},mounted:function(){this.fetch()}},fs=Object(a.a)(ms,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"purchase_history_block"},[n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{md:16,sm:24}},[n("h3",{staticClass:"history_title"},[t._v(t._s(t.provider.title))]),t._v(" "),n("div",{staticClass:"provider_data"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"empty-text":t.$t("No Data Found"),border:"",stripe:"",data:t.orders}},[t._l(t.table_columns,(function(e,i){return n("el-table-column",{key:i,attrs:{label:t._f("ucWords")(t.$t(i))},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{domProps:{innerHTML:t._s(e.row[i])}})]}}],null,!0)})})),t._v(" "),n("template",{slot:"empty"},[n("p",[t._v(t._s(t.$t("Purchase History from"))+" "),n("b",[t._v(t._s(t.provider.name))]),t._v(" "+t._s(t.$t("will be shown here, Currently no purchase history found for this contact")))])])],2),t._v(" "),n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1),t._v(" "),t.after_html?n("div",{staticClass:"fc_history_before",domProps:{innerHTML:t._s(t.after_html)}}):t._e()]),t._v(" "),n("el-col",{attrs:{md:8,sm:24}},[t.sidebar_html?n("div",{staticClass:"fc_history_sidebar",domProps:{innerHTML:t._s(t.sidebar_html)}}):t._e()])],1)],1)}),[],!1,null,null,null).exports,hs=n(6),vs={name:"ProfilePurchaseHistory",props:["subscriber_id"],components:{PurchaseHistoryBlock:fs},data:function(){return{providersData:{},app_ready:!1}},computed:{is_empty:function(){return hs(this.providersData)}},mounted:function(){var t=this;this.each(window.fcAdmin.purchase_providers,(function(e,n){var i={title:e.title,name:e.name,provider_key:n};t.providersData[n]=i})),this.app_ready=!0}},gs=Object(a.a)(vs,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_databox"},[t.app_ready?n("div",{staticClass:"fluentcrm_purchase_history_wrapper"},[t.is_empty?n("div",[n("h3",{staticClass:"text-align-center"},[t._v("\n                "+t._s(t.$t("Pro_Purchase_hfEwbsh"))+"\n            ")])]):t._l(t.providersData,(function(e,i){return n("purchase-history-block",{key:i,attrs:{provider:e,subscriber_id:t.subscriber_id}})}))],2):t._e()])}),[],!1,null,null,null).exports,bs={name:"SupportTicketsBlock",props:["provider","subscriber_id"],components:{Pagination:b},data:function(){return{loading:!1,tickets:[],pagination:{per_page:10,current_page:1,total:0}}},computed:{table_columns:function(){var t=[];return this.tickets&&this.tickets.length&&(t=this.tickets[0]),t}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("subscribers/".concat(this.subscriber_id,"/support-tickets"),{provider:this.provider.provider_key,page:this.pagination.current_page,per_page:this.pagination.per_page}).then((function(e){t.tickets=e.tickets.data,t.pagination.total=parseInt(e.tickets.total)})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))}},mounted:function(){this.fetch()}},ys=Object(a.a)(bs,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"purchase_history_block"},[n("h3",{staticClass:"history_title"},[t._v(t._s(t.provider.title))]),t._v(" "),n("div",{staticClass:"provider_data"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"empty-text":t.$t("No Data Found"),border:"",stripe:"",data:t.tickets}},[t._l(t.table_columns,(function(e,i){return n("el-table-column",{key:i,attrs:{label:t._f("ucWords")(i)},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{domProps:{innerHTML:t._s(e.row[i])}})]}}],null,!0)})})),t._v(" "),n("template",{slot:"empty"},[n("p",[t._v(t._s(t.$t("Support Tickets from"))+" "),n("b",[t._v(t._s(t.provider.name))]),t._v(" "+t._s(t.$t("no_tickets_found_for_this_subscriber")))])])],2),t._v(" "),n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)])}),[],!1,null,null,null).exports,ws=n(6),$s={name:"ProfileSuportTickets",props:["subscriber_id"],components:{SupportTicketsBlock:ys},data:function(){return{providersData:{},app_ready:!1}},computed:{is_empty:function(){return ws(this.providersData)}},mounted:function(){var t=this;this.each(window.fcAdmin.support_tickets_providers,(function(e,n){var i={title:e.title,name:e.name,provider_key:n};t.providersData[n]=i})),this.app_ready=!0}},ks=Object(a.a)($s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.app_ready?n("div",{staticClass:"fluentcrm_databox"},t._l(t.providersData,(function(e,i){return n("support-tickets-block",{key:i,attrs:{provider:e,subscriber_id:t.subscriber_id}})})),1):t._e()}),[],!1,null,null,null).exports,xs={name:"ProfileFiles",props:["subscriber_id"],data:function(){return{adding_file:!1,files:[],loading:!1,pagination:{total:0,per_page:10,current_page:1},new_note:{title:"",description:"",type:"note"}}},methods:{fetchAttachments:function(){}},mounted:function(){this.fetchAttachments()}},Cs=Object(a.a)(xs,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_databox"},[n("div",{staticClass:"fluentcrm_contact_header"},[n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:12}},[n("h3",[t._v(t._s(t.$t("Pro_Contact_F_A")))])]),t._v(" "),n("el-col",{staticClass:"text-align-right",attrs:{span:12}},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.adding_file=!t.adding_file}}},[t._v(t._s(t.$t("Add New")))])],1)],1)],1),t._v(" "),n("div",{staticClass:"fc_uploader_drawer"},[n("el-uploader")],1),t._v(" "),n("div")])}),[],!1,null,null,null).exports,Ss={name:"SubscriberProfileExternalView",props:["subscriber","subscriber_id"],data:function(){return{profile_section:this.$route.query.handler,heading:"",content_html:"",loading:!0}},methods:{fetchData:function(){var t=this;this.loading=!0,this.$get("subscribers/".concat(this.subscriber_id,"/external_view"),{section_provider:this.profile_section}).then((function(e){t.heading=e.heading,t.content_html=e.content_html})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))}},mounted:function(){this.fetchData()}},Os=Object(a.a)(Ss,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.loading?n("el-skeleton",{staticClass:"fc_skeleton_loader",staticStyle:{"margin-top":"20px"},attrs:{animated:""}},[n("template",{slot:"template"},[n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:12}},[n("el-skeleton",{attrs:{rows:10}})],1),t._v(" "),n("el-col",{attrs:{span:12}},[n("el-skeleton",{attrs:{rows:3}})],1)],1)],1)],2):n("div",{staticClass:"fluentcrm_databox"},[n("h3",[t._v(t._s(t.heading))]),t._v(" "),n("div",{staticClass:"fc_external_profile_data",class:"fc_section_"+t.profile_section,domProps:{innerHTML:t._s(t.content_html)}})])}),[],!1,null,null,null).exports,Es={name:"GlobalSettings",data:function(){return{router_name:this.$route.name,menuItems:[{icon:"el-icon-document",title:this.$t("Business Settings"),route:"business_settings"},{route:"email_settings",icon:"el-icon-message",title:this.$t("Email Settings")},{icon:"el-icon-set-up",route:"other_settings",title:this.$t("General Settings")},{route:"custom_contact_fields",icon:"el-icon-s-custom",title:this.$t("Custom Contact Fields")},{route:"smart_links",icon:"el-icon-connection",title:this.$t("Smart Links")},{route:"integration_settings",icon:"el-icon-setting",title:this.$t("Integration Settings")},{icon:"el-icon-s-check",route:"double-optin-settings",title:this.$t("Double Opt-in Settings")},{icon:"el-icon-connection",route:"webhook-settings",title:this.$t("Incoming Web Hooks")},{icon:"el-icon-connection",route:"managers",title:this.$t("Managers")},{icon:"el-icon-attract",route:"rest-api",title:this.$t("REST API")},{icon:"el-icon-bangzhu",route:"settings_tools",title:this.$t("Tools")},{icon:"el-icon-guide",route:"smtp_settings",title:this.$t("Set_SMTP_Email_SS")}]}},mounted:function(){this.changeTitle("Settings"),this.has_campaign_pro&&this.menuItems.push({icon:"el-icon-lock",route:"license_settings",title:this.$t("License Management")})}},js=Object(a.a)(Es,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_settings_wrapper"},[n("el-row",[n("el-col",{attrs:{span:5}},[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:!0,"default-active":t.router_name}},t._l(t.menuItems,(function(e){return n("el-menu-item",{key:e.route,attrs:{route:{name:e.route},index:e.route}},[n("i",{class:e.icon}),t._v(" "),n("span",[t._v(t._s(e.title))])])})),1)],1),t._v(" "),n("el-col",{staticClass:"fc_settings_wrapper",attrs:{span:19}},[n("router-view")],1)],1)],1)}),[],!1,null,null,null).exports,Ts={name:"EmailSettings",components:{FormBuilder:Ft},data:function(){return{btnFromLoading:!1,loading:!1,settings:{},settings_loaded:!1,fields_email:{from_name:{wrapper_class:"fc_item_half",type:"input-text",placeholder:this.$t("Email From Name"),label:this.$t("From Name"),help:this.$t("Name that will be used to send emails")},from_email:{wrapper_class:"fc_item_half",type:"verified-email-input",placeholder:"name@domain.com",data_type:"email",label:this.$t("From Email Address"),help:this.$t("Provide Valid Email Address that will be used to send emails"),inline_help:this.$t("verified_email_help")},reply_to_name:{wrapper_class:"fc_item_half",type:"input-text",placeholder:this.$t("Reply to Name (Optional)"),label:this.$t("Reply to Name"),help:this.$t("Default Reply to Name (Optional)")},reply_to_email:{wrapper_class:"fc_item_half",type:"input-text",placeholder:"name@domain.com",data_type:"email",label:this.$t("Reply to Email (Optional)"),help:this.$t("Provide Valid Email Address that will be used in reply to (Optional)")},emails_per_second:{type:"input-text",placeholder:this.$t("Maximum Email Limit Per Second"),data_type:"number",label:this.$t("Maximum Email Limit Per Second"),help:this.$t("set_maximum_emails_will_be_sent_per_second")}},fields_footer:{email_footer:{type:"wp-editor",placeholder:this.$t("Email Footer Text"),label:this.$t("Email Footer Text"),help:this.$t("This email footer text will be used to all your email"),inline_help:this.$t("You should provide your business address")+" {{crm.business_address}} "+this.$t("and manage subscription/unsubscribe url for best user experience")+"<br/>"+this.$t("Smartcode:")+" {{crm.business_name}}, {{crm.business_address}}, ##crm.manage_subscription_url##, ##crm.unsubscribe_url## "+this.$t("will be replaced with dynamic values.")+"<br/>"+this.$t("recommended_texts_default_aligned")}},email_list_pref_fields:{pref_list_type:{type:"input-radio",wrapper_class:"fluentcrm_line_items",label:this.$t("Can a subscriber manage list subscriptions?"),options:[{id:"no",label:this.$t("No, Contact can not manage list subscriptions")},{id:"filtered_only",label:this.$t("Contact only see and manage the following list subscriptions")},{id:"all",label:this.$t("Contact can see all lists and manage subscriptions")}]},pref_list_items:{type:"option-selector",label:this.$t("Select Lists that you want to show for contacts"),option_key:"lists",is_multiple:!0,dependency:{depends_on:"pref_list_type",operator:"=",value:"filtered_only"}}}}},methods:{save:function(){var t=this;this.btnFromLoading=!0,this.$put("setting",{settings:{email_settings:this.settings}}).then((function(e){t.$notify.success({title:t.$t("Great!"),message:t.$t("Settings Updated."),offset:19})})).finally((function(){t.btnFromLoading=!1}))},fetchSettings:function(){var t=this;this.loading=!0,this.$get("setting",{settings_keys:["email_settings"]}).then((function(e){e.email_settings&&(t.settings=e.email_settings)})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1,t.settings_loaded=!0}))}},mounted:function(){this.fetchSettings(),this.changeTitle("Email Settings")}},Ps=(n(300),Object(a.a)(Ts,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Global Email Settings")))])]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-button",{attrs:{type:"success",size:"medium",loading:t.btnFromLoading||t.loading},on:{click:t.save}},[t._v("\n                "+t._s(t.$t("Save Settings"))+"\n            ")])],1)]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_pad_around"},[n("div",{staticClass:"settings-section fluentcrm_databox"},[n("strong",{staticStyle:{"font-size":"15px"}},[t._v(t._s(t.$t("Default From Settings")))]),n("br"),t._v("\n            "+t._s(t.$t("email_settings_subheading"))+"\n            "),n("hr",{staticStyle:{"margin-bottom":"20px"}}),t._v(" "),t.settings_loaded?n("form-builder",{attrs:{formData:t.settings,fields:t.fields_email}}):t._e()],1),t._v(" "),n("div",{staticClass:"settings-section fluentcrm_databox"},[n("strong",{staticStyle:{"font-size":"15px"}},[t._v(t._s(t.$t("Email Footer Settings")))]),n("br"),t._v(" "),n("hr",{staticStyle:{"margin-bottom":"20px"}}),t._v(" "),t.settings_loaded?n("form-builder",{attrs:{formData:t.settings,fields:t.fields_footer}}):t._e()],1),t._v(" "),n("div",{staticClass:"settings-section fluentcrm_databox"},[n("strong",{staticStyle:{"font-size":"15px"}},[t._v(t._s(t.$t("Email Preference Settings")))]),n("br"),t._v("\n            "+t._s(t.$t("Please specify if you want to let your subscribers manage the associate lists or not"))+"\n            "),n("hr",{staticStyle:{"margin-bottom":"20px"}}),t._v(" "),t.settings_loaded?n("form-builder",{attrs:{formData:t.settings,fields:t.email_list_pref_fields}}):t._e()],1),t._v(" "),n("div",{staticClass:"text-align-right"},[n("el-button",{attrs:{type:"success",size:"medium",loading:t.btnFromLoading||t.loading},on:{click:t.save}},[t._v("\n                "+t._s(t.$t("Save Settings"))+"\n            ")])],1)])])}),[],!1,null,null,null).exports),As={name:"BusinessSettings",components:{FormBuilder:Ft},data:function(){return{btnFromLoading:!1,loading:!1,settings:{},settings_loaded:!1,fields:{business_name:{type:"input-text",placeholder:this.$t("MyAwesomeBusiness Inc."),label:this.$t("Business Name"),help:this.$t("business_settings.name_help")},business_address:{type:"input-text",placeholder:this.$t("street, state, zip, country"),label:this.$t("Business Full Address"),help:this.$t("business_settings.address_help")},logo:{type:"photo-widget",label:this.$t("Logo"),help:this.$t("business_settings.logo_help"),btn_text:this.$t("Upload")}}}},methods:{save:function(){var t=this;this.btnFromLoading=!0,this.$put("setting",{settings:{business_settings:this.settings}}).then((function(e){t.$notify.success({title:t.$t("Great!"),message:t.$t("Settings Updated."),offset:19})})).finally((function(){t.btnFromLoading=!1}))},fetchSettings:function(){var t=this;this.loading=!0,this.$get("setting",{settings_keys:["business_settings"]}).then((function(e){e.business_settings&&(t.settings=e.business_settings)})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1,t.settings_loaded=!0}))}},mounted:function(){this.fetchSettings(),this.changeTitle("Business Settings")}},Fs=(n(302),Object(a.a)(As,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Business Settings")))])]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-button",{attrs:{type:"success",size:"medium",loading:t.btnFromLoading||t.loading},on:{click:t.save}},[t._v(t._s(t.$t("Save Settings"))+"\n            ")])],1)]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_pad_around"},[n("div",{staticClass:"settings-section"},[t.settings_loaded?n("form-builder",{attrs:{formData:t.settings,fields:t.fields}}):t._e()],1)])])}),[],!1,null,null,null).exports),Ds={name:"FieldForm",props:["field_types","item","form_type"],data:function(){return{optionInputVisible:!1,optionInputValue:""}},methods:{maybeSetSlug:function(){if("new"!=this.form_type)return!1;var t=this.item.label.toLowerCase().replace(//gi,"d").replace(/\s*$/g,"").replace(/\s+/g,"_").substring(0,25);this.$set(this.item,"slug",t)},changeFieldType:function(){var t=this.item.field_key,e=this.field_types[t];this.$set(this.item,"type",e.type),this.$set(this.item,"label",""),this.hasOptions(e.type)?this.item.options||this.$set(this.item,"options",["Value Option 1"]):this.$delete(this.item,"options")},hasOptions:function(t){return-1!==["select-one","select-multi","radio","checkbox"].indexOf(t)},showOptionInput:function(){var t=this;this.optionInputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()}))},handleOptionInputConfirm:function(){var t=this.optionInputValue;t&&this.item.options.push(t),this.optionInputVisible=!1,this.optionInputValue=""},removeOptionItem:function(t){this.item.options.splice(t,1)}},mounted:function(){}},qs={name:"custom_contact_fields",components:{Confirm:f,CustomFieldForm:Object(a.a)(Ds,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{attrs:{"label-position":"top",data:t.item}},[n("el-form-item",{attrs:{label:t.$t("Field Type")}},[n("el-select",{attrs:{placeholder:t.$t("Select Field Type")},on:{change:function(e){return t.changeFieldType()}},model:{value:t.item.field_key,callback:function(e){t.$set(t.item,"field_key",e)},expression:"item.field_key"}},t._l(t.field_types,(function(t,e){return n("el-option",{key:e,attrs:{label:t.label,value:e}})})),1),t._v(" "),t.item.type?[n("el-form-item",{attrs:{label:t.$t("Label")}},[n("el-input",{attrs:{placeholder:t.$t("Custom Field Label")},nativeOn:{keyup:function(e){return t.maybeSetSlug()}},model:{value:t.item.label,callback:function(e){t.$set(t.item,"label",e)},expression:"item.label"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Slug (Optional)")}},[n("el-input",{attrs:{maxlength:"25",placeholder:t.$t("Custom Field Slug"),disabled:"update"==t.form_type},model:{value:t.item.slug,callback:function(e){t.$set(t.item,"slug",e)},expression:"item.slug"}}),t._v(" "),"new"==t.form_type?n("p",[t._v(t._s(t.$t("You can not change the slug once save a custom field")))]):t._e()],1),t._v(" "),t.hasOptions(t.item.type)?n("el-form-item",{attrs:{label:t.$t("Field Value Options")}},[n("ul",{staticClass:"fluentcrm_option_lists"},t._l(t.item.options,(function(e,i){return n("li",{key:i},[t._v("\n                        "+t._s(e)+"\n                        "),n("i",{staticClass:"fluentcrm_clickable el-icon-close",on:{click:function(e){return t.removeOptionItem(i)}}})])})),0),t._v(" "),t.optionInputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{placeholder:t.$t("type and press enter"),size:"mini"},on:{blur:t.handleOptionInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleOptionInputConfirm.apply(null,arguments)}},model:{value:t.optionInputValue,callback:function(e){t.optionInputValue=e},expression:"optionInputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:t.showOptionInput}},[t._v("\n                    "+t._s(t.$t("+ New Option"))+"\n                ")])],1):t._e()]:t._e()],2)],1)}),[],!1,null,null,null).exports},data:function(){return{loading:!1,fields:[],new_item:{},field_types:{},addFieldVisible:!1,updateFieldVisible:!1,update_field:{}}},methods:{fetchFields:function(){var t=this;this.loading=!0,this.$get("custom-fields/contacts",{with:["field_types"]}).then((function(e){t.fields=e.fields,t.field_types=e.field_types})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},saveFields:function(){var t=this;this.loading=!0,this.$put("custom-fields/contacts",{fields:JSON.stringify(this.fields)}).then((function(e){t.fields=e.fields,t.$notify.success(e.message)})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},createField:function(){if(!this.validateField(this.new_item))return!1;this.fields.push(this.new_item),this.addFieldVisible=!1,this.new_item={},this.saveFields()},validateField:function(t){return t.label?!(t.options&&!t.options.length)||(this.$notify.error("Please Field Option Values"),!1):(this.$notify.error("Please Provide label"),!1)},updateFieldModal:function(t){this.update_field=this.fields[t],this.updateFieldVisible=!0},updateField:function(){if(!this.validateField(this.update_field))return!1;this.updateFieldVisible=!1,this.update_field={},this.saveFields()},deleteField:function(t){this.fields.splice(t,1),this.saveFields()},movePosition:function(t,e){var n=t-1;"down"===e&&(n=t+1);var i=this.fields,s=i[t];i.splice(t,1),i.splice(n,0,s),this.$set(this,"fields",i),this.saveFields()}},mounted:function(){this.fetchFields(),this.changeTitle("Custom Fields")}},Is=Object(a.a)(qs,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Custom Contact Fields")))])]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addFieldVisible=!0}}},[t._v(t._s(t.$t("Add Field")))])],1)]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_pad_around"},[n("el-table",{attrs:{"empty-text":t.$t("No Data Found"),border:"",stripe:"",data:t.fields}},[n("el-table-column",{attrs:{label:t.$t("Label"),prop:"label"}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Slug"),prop:"slug"}}),t._v(" "),n("el-table-column",{attrs:{width:"160",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return t.updateFieldModal(e.$index)}}}),t._v(" "),n("confirm",{on:{yes:function(n){return t.deleteField(e.$index)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1),t._v(" "),n("el-button-group",[n("el-button",{attrs:{disabled:0==e.$index,size:"mini",icon:"el-icon-arrow-up"},on:{click:function(n){return t.movePosition(e.$index,"up")}}}),t._v(" "),n("el-button",{attrs:{disabled:e.$index==t.fields.length-1,size:"mini",icon:"el-icon-arrow-down"},on:{click:function(n){return t.movePosition(e.$index,"down")}}})],1)]}}])})],1)],1),t._v(" "),n("el-dialog",{attrs:{title:t.$t("Add New Custom Field"),visible:t.addFieldVisible,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.addFieldVisible=e}}},[n("custom-field-form",{attrs:{form_type:"new",field_types:t.field_types,item:t.new_item}}),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.createField()}}},[t._v("\n                "+t._s(t.$t("Add"))+"\n            ")])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:t.$t("Update Custom Field"),visible:t.updateFieldVisible,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.updateFieldVisible=e}}},[n("custom-field-form",{attrs:{form_type:"update",field_types:t.field_types,item:t.update_field}}),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"success",size:"small"},on:{click:function(e){return t.updateField()}}},[t._v(t._s(t.$t("Update Field")))])],1)],1)],1)}),[],!1,null,null,null).exports,Ns={name:"DoubleOptionIn",components:{FormBuilder:Ft},data:function(){return{btnFromLoading:!1,loading:!1,settings:{},settings_loaded:!1,fields:{}}},methods:{save:function(){var t=this;this.btnFromLoading=!0,this.$put("setting/double-optin",{settings:this.settings}).then((function(e){t.$notify.success({title:t.$t("Great!"),message:e.message,offset:19})})).catch((function(e){t.handleError(e)})).finally((function(){t.btnFromLoading=!1,t.settings_loaded=!0}))},fetchSettings:function(){var t=this;this.loading=!0,this.$get("setting/double-optin",{with:["settings_fields"]}).then((function(e){t.settings=e.settings,t.fields=e.settings_fields})).catch((function(t){console.log(t)})).finally((function(){t.loading=!1,t.settings_loaded=!0}))}},mounted:function(){this.fetchSettings(),this.changeTitle("Double Opt-in Settings")}},Ls=(n(304),Object(a.a)(Ns,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Double Opt-in Email Settings Details")))])]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-button",{attrs:{type:"success",size:"medium",loading:t.btnFromLoading||t.loading},on:{click:t.save}},[t._v("\n                "+t._s(t.$t("Save Settings"))+"\n            ")])],1)]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_pad_around"},[n("div",{staticClass:"settings-section"},[t.settings_loaded?n("form-builder",{attrs:{fields:t.fields,formData:t.settings}}):t._e()],1)])])}),[],!1,null,null,null).exports),Ms={name:"ItemCopier",props:["text"],data:function(){return{copy_success:!1}},computed:{icon:function(){return this.copy_success?"el-icon-check":"el-icon-copy-document"}},methods:{copyItem:function(){this.copy_success=!1;var t=this.text,e=!1;if(window.clipboardData&&window.clipboardData.setData)window.clipboardData.clipboardData.setData("Text",t),e=!0;else if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=t,n.style.position="fixed",document.body.appendChild(n),n.select();try{document.execCommand("copy"),e=!0}catch(t){console.warn("Copy to clipboard failed.",t),e=!1}finally{document.body.removeChild(n)}}e?(this.copy_success=!0,this.$notify({message:this.$t("Copied to your clipboard"),position:"bottom-right",customClass:"bottom_right",type:"success"})):this.$notify({message:this.$t("Your Browser does not support JS copy. Please copy manually"),position:"bottom-right",customClass:"bottom_right",type:"error"})}}},Rs=Object(a.a)(Ms,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-input",{attrs:{size:"mini",readonly:!0},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}},[n("el-button",{attrs:{slot:"append",type:"primary",icon:t.icon},on:{click:function(e){return t.copyItem()}},slot:"append"})],1)}),[],!1,null,null,null).exports,zs=n(114),Bs=n.n(zs),Vs={name:"listTagItems",props:["items","item_type"],computed:{text_lists:function(){var t=this,e=this.appVars["available_"+this.item_type];if(!e)return"";var n=[];return this.each(e,(function(e){(Bs()(t.items,e.title)||Bs()(t.items,e.id))&&n.push(e.title)})),n.join(", ")},item_class:function(){return"lists"==this.item_type?"el-icon-files":"el-icon-price-tag"}}},Us=Object(a.a)(Vs,(function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"fc_tag_items fc_list"},[e("i",{class:this.item_class}),this._v(" "+this._s(this.text_lists||"n/a"))])}),[],!1,null,null,null).exports,Hs={name:"IncomingWebhookPromo"};function Gs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ws(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gs(Object(n),!0).forEach((function(e){Ys(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ys(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Js={name:"WebHookSettings",components:{Confirm:f,Error:Ge,WebhookPromo:Object(a.a)(Hs,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_narrow_box fluentcrm_databox text-align-center"},[n("h2",{},[t._v(t._s(t.$t("Incoming Webhooks")))]),t._v(" "),n("p",{staticClass:"text-align-center"},[t._v(t._s(t.$t("Create or Update contacts from Incoming Webhooks")))]),t._v(" "),n("hr"),t._v(" "),n("p",[t._v(t._s(t.$t("To Activate this module please upgrade to pro")))]),t._v(" "),n("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v(t._s(t.$t("Get FluentCRM Pro")))])])}),[],!1,null,null,null).exports,ItemCopier:Rs,ListTagItems:Us},data:function(){return{statuses:[{value:"pending",label:this.$t("Pending")},{value:"subscribed",label:this.$t("Subscribed")}],dialogTitle:this.$t("Create New Incoming Webhook"),addWebhookVisible:!1,btnFromLoading:!1,labelPosition:"left",errors:new tn,loading:!1,editing:!1,lists:[],tags:[],webhooks:[],webhook:{},fields:[],customFields:[],schema:{},id:null,search:""}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("webhooks",{search:this.search}).then((function(e){t.webhooks=e.webhooks,t.fields=e.fields,t.customFields=e.custom_fields,t.schema=e.schema,t.lists=e.lists,t.tags=e.tags})).catch((function(){})).finally((function(){t.loading=!1}))},create:function(){this.editing=!1,this.addWebhookVisible=!0,this.webhook=Ws({},this.schema),this.dialogTitle=this.$t("Create New Incoming Webhook")},store:function(){var t=this;this.errors.clear(),this.btnFromLoading=!0,this.$post("webhooks",this.webhook).then((function(e){t.webhooks=e.webhooks,t.edit(t.webhook,e.id),t.$notify.success(e.message)})).catch((function(e){t.errors.record(e)})).finally((function(){t.btnFromLoading=!1}))},edit:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.id=e,this.editing=!0,this.webhook=Ws({},t),this.addWebhookVisible=!0,this.dialogTitle=this.webhook.name},update:function(){var t=this;this.errors.clear(),this.btnFromLoading=!0,this.$put("webhooks/".concat(this.id),this.webhook).then((function(e){t.webhooks=e.webhooks,t.$notify.success(e.message)})).catch((function(e){t.errors.record(e)})).finally((function(){t.btnFromLoading=!1,t.addWebhookVisible=!1}))},remove:function(t){var e=this;this.$del("webhooks/".concat(t)).then((function(t){e.webhooks=t.webhooks,e.$notify.success(t.message)})).catch((function(t){e.errors.record(t)}))},getListTitles:function(t){var e=[];for(var n in t)this.lists[n]&&e.push(this.lists[n].title);return e.join(", ")},getTagTitle:function(t){var e=this.tags.find((function(e){return e.id===t}));return e?e.title:""}},mounted:function(){this.has_campaign_pro&&this.fetch(),this.changeTitle("Webhook Settings")}},Ks=(n(313),Object(a.a)(Js,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Incoming Webhook Settings")))])]),t._v(" "),t.has_campaign_pro?n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("div",{staticClass:"fc-search-box"},[n("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetch},slot:"append"})],1)],1),t._v(" "),n("el-button",{staticStyle:{height:"32px","line-height":"10px"},attrs:{type:"primary",size:"medium",loading:t.btnFromLoading||t.loading},on:{click:t.create}},[t._v("\n                "+t._s(t.$t("Create Webhook"))+"\n            ")])],1):t._e()]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_pad_around fluentcrm_smart_links_wrap"},[t.has_campaign_pro?n("el-table",{attrs:{"empty-text":t.$t("No Data Found"),border:"",stripe:"",data:t.webhooks}},[n("el-table-column",{staticClass:"hello",attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticStyle:{"padding-left":"47px"}},[n("h4",{staticStyle:{margin:"8px 0 8px 0"}},[t._v(t._s(t.$t("Attached Tags and Lists")))]),t._v(" "),n("p",[e.row.value.lists&&e.row.value.lists.length?n("list-tag-items",{attrs:{item_type:"lists",items:e.row.value.lists}}):t._e(),t._v(" "),n("list-tag-items",{attrs:{item_type:"tags",items:e.row.value.tags}})],1)])]}}],null,!1,2436373407)}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Title")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.value.name)+"\n                ")]}}],null,!1,2113086399)}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Smart URL")},scopedSlots:t._u([{key:"default",fn:function(t){return[n("item-copier",{attrs:{text:t.row.value.url}})]}}],null,!1,97710912)}),t._v(" "),n("el-table-column",{attrs:{width:"120",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return t.edit(e.row.value,e.row.id)}}}),t._v(" "),n("confirm",{on:{yes:function(n){return t.remove(e.row.id)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1)]}}],null,!1,1264350880)})],1):n("div",[n("webhook-promo")],1)],1),t._v(" "),n("el-dialog",{attrs:{width:"60%",title:t.dialogTitle,"append-to-body":!0,visible:t.addWebhookVisible},on:{"update:visible":function(e){t.addWebhookVisible=e}}},[n("el-form",{attrs:{"label-position":t.labelPosition,"label-width":"100px",model:t.webhook}},[[n("el-form-item",{attrs:{label:t.$t("Name")}},[n("el-input",{model:{value:t.webhook.name,callback:function(e){t.$set(t.webhook,"name",e)},expression:"webhook.name"}}),t._v(" "),n("error",{attrs:{error:t.errors.get("name")}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("List")}},[n("el-select",{attrs:{multiple:"",placeholder:t.$t("Select lists")},model:{value:t.webhook.lists,callback:function(e){t.$set(t.webhook,"lists",e)},expression:"webhook.lists"}},t._l(t.lists,(function(t){return n("el-option",{key:t.id,attrs:{label:t.title,value:String(t.id)}})})),1)],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Tags")}},[n("el-select",{attrs:{multiple:"",placeholder:t.$t("Select tags")},model:{value:t.webhook.tags,callback:function(e){t.$set(t.webhook,"tags",e)},expression:"webhook.tags"}},t._l(t.tags,(function(t){return n("el-option",{key:t.id,attrs:{label:t.title,value:String(t.id)}})})),1)],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Status")}},[n("el-select",{attrs:{placeholder:t.$t("Select status")},model:{value:t.webhook.status,callback:function(e){t.$set(t.webhook,"status",e)},expression:"webhook.status"}},t._l(t.statuses,(function(t){return n("el-option",{key:t.value,attrs:{value:t.value,label:t.label}})})),1),t._v(" "),n("error",{attrs:{error:t.errors.get("status")}}),t._v(" "),"pending"==t.webhook.status?n("p",[t._v(t._s(t.$t("A double opt-in email will be sent if the contact is new")))]):t._e()],1)],t._v(" "),t.editing?[n("el-alert",{attrs:{type:"info",closable:!1,title:t.$t("Copy the webhook URL you want to send your POST request to.")}}),t._v(" "),n("el-input",{staticStyle:{margin:"20px 0"},attrs:{readonly:"",value:t.webhook.url}}),t._v(" "),n("el-alert",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"info",closable:!1}},[t._v("\n                    "+t._s(t.$t("copy_webhook_keys_intro"))+"\n                    "),n("span",{staticStyle:{color:"#E6A23C"}},[t._v(t._s(t.$t("The email address is required!")))]),t._v(" "),n("a",{attrs:{target:"_blank",rel:"noopener",href:"https://fluentcrm.com/docs/webhook-integration/"}},[t._v(t._s(t.$t("Read the documentation")))])]),t._v(" "),n("el-table",{attrs:{"empty-text":t.$t("No Data Found"),border:"",stripe:"",height:"250",data:t.fields}},[n("el-table-column",{attrs:{label:t.$t("Contact Field"),prop:"field",width:"300"}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Key"),prop:"key"}})],1),t._v(" "),t.customFields?n("div",[n("el-alert",{staticStyle:{margin:"20px 0"},attrs:{title:t.$t("Custom Contact Fields"),type:"info",closable:!1}},[t._v("\n                        "+t._s(t.$t("custom_contact_fields"))+"\n                    ")]),t._v(" "),n("el-table",{attrs:{"empty-text":t.$t("No Data Found"),border:"",stripe:"",height:"250",data:t.customFields}},[n("el-table-column",{attrs:{label:t.$t("Custom Contact Field"),prop:"field",width:"300"}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Key"),prop:"key"}})],1)],1):t._e()]:t._e()],2),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.editing?n("el-button",{attrs:{type:"success",size:"small"},on:{click:t.update}},[t._v(t._s(t.$t("Update")))]):n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.store}},[t._v(t._s(t.$t("Create")))])],1)],1)],1)}),[],!1,null,null,null).exports);function Qs(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Zs(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Qs(Object(n),!0).forEach((function(e){Xs(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Qs(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Xs(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ta={name:"DataCleanup",components:{Confirm:f},data:function(){return{loading:!1,cleanup:{selected_logs:[],days_before:30},log_options:{emails:this.$t("Email History Logs"),email_clicks:this.$t("Email Click Logs"),email_open:this.$t("Email Open Logs")},log_counters:[],showing_log:!1,reset_message:""}},methods:{deleteOldLogs:function(){var t=this;this.loading=!0,this.$del("setting/old_logs",Zs({},this.cleanup)).then((function(e){t.$notify.success(e.message),t.resetData(),t.reset_message=e.message})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},getOldLogs:function(){var t=this;this.loading=!0,this.$get("setting/old_logs",Zs({},this.cleanup)).then((function(e){t.showing_log=!0,t.log_counters=e.log_counts})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},resetData:function(){this.cleanup={selected_logs:[],days_before:30},this.showing_log=!1,this.log_counters=[]}}},ea={name:"SettingsTools",components:{Confirm:f,DataCleanup:Object(a.a)(ta,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"settings-section fluentcrm_databox",staticStyle:{border:"2px solid #deb373"}},[n("div",{staticClass:"fluentcrm_header",staticStyle:{"background-color":"white",padding:"0 0 10px 0","margin-bottom":"20px"}},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Data Cleanup")))]),t._v(" "),n("p",[t._v(t._s(t.$t("cleanup_old_data_like_email_log")))])])]),t._v(" "),n("div",{staticClass:"fc_global_form_builder"},[t.reset_message?n("div",{staticClass:"text-align-center"},[n("h3",[t._v(t._s(t.reset_message))])]):t.showing_log?n("div",[n("h3",[t._v(t._s(t.$t("Please review before you delete your old logs")))]),t._v(" "),n("el-table",{attrs:{"empty-text":t.$t("No Data Found"),data:t.log_counters,stripe:"",border:""}},[n("el-table-column",{attrs:{label:t.$t("Type"),prop:"title"}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Counts"),prop:"count"}})],1),t._v(" "),n("p"),t._v(" "),n("confirm",{attrs:{placement:"top-start",message:t.$t("delete_old_log_data_permanently_notice")},on:{yes:function(e){return t.deleteOldLogs()}}},[n("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v("\n                    "+t._s(t.$t("Yes, I want to delete Old Logs"))+"\n                ")])],1),t._v(" "),n("el-button",{on:{click:function(e){return t.resetData()}}},[t._v(t._s(t.$t("Never-mind, I changed my mind")))]),t._v(" "),n("p",{staticStyle:{color:"#f56c6b"}},[t._v(t._s(t.$t("All the selected logs that are"))+" "),n("b",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("older than"))+" "+t._s(t.cleanup.days_before)+" "+t._s(t.$t("days")))]),t._v(" "+t._s(t.$t("will be deleted"))+" "+t._s(t.$t("permanently"))+". "),n("b",[t._v(t._s(t.$t("You can not reverse this action.")))])])],1):n("el-form",{attrs:{data:t.cleanup,"label-position":"top"}},[n("el-form-item",{attrs:{label:t.$t("Select Logs you want to delete")}},[n("el-checkbox-group",{model:{value:t.cleanup.selected_logs,callback:function(e){t.$set(t.cleanup,"selected_logs",e)},expression:"cleanup.selected_logs"}},t._l(t.log_options,(function(e,i){return n("el-checkbox",{key:i,attrs:{label:i}},[t._v(t._s(e))])})),1),t._v(" "),n("p",[t._v(t._s(t.$t("Your Selected logs will be deleted permanently")))])],1),t._v(" "),n("el-form-item",{staticClass:"mb-10",attrs:{label:t.$t("Delete older data more than?")}},[n("el-input",{attrs:{type:"number",min:7},model:{value:t.cleanup.days_before,callback:function(e){t.$set(t.cleanup,"days_before",e)},expression:"cleanup.days_before"}}),t._v(" "),n("p",[t._v(t._s(t.$t("All the selected logs that are"))+" "),n("b",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("older than"))+" "+t._s(t.cleanup.days_before)+" "+t._s(t.$t("days")))]),t._v(" "+t._s(t.$t("will be deleted")))])],1),t._v(" "),t.cleanup.selected_logs.length?[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(e){return t.getOldLogs()}}},[t._v(t._s(t.$t("Preview Log Summary")))])]:t._e()],2)],1)])}),[],!1,null,null,null).exports},data:function(){return{rest_statuses:{get_request_status:"checking",post_request_status:"checking",put_request_status:"checking",delete_request_status:"checking"},fetching_cron:!1,loading:!1,cron_events:[]}},methods:{checkRestRequest:function(t,e,n){var i=this;this[e]("setting/test").then((function(e){e.message?i.rest_statuses[t]=i.$t("Working"):i.rest_statuses[t]=i.$t("Not Working. Please make sure your server has this request type enabled")})).catch((function(e){i.rest_statuses[t]=i.$t("Not Working. Please make sure your server has this request type enabled")})).finally((function(){n&&n()}))},resetDatabase:function(){var t=this;this.loading=!0,this.$post("setting/reset_db").then((function(e){t.$notify.success(e.message),t.loading=!1})).catch((function(e){t.handleError(e),t.loading=!1})).finally((function(){t.loading=!1}))},fetchCronEvents:function(){var t=this;this.fetching_cron=!0,this.$get("setting/cron_status").then((function(e){t.cron_events=e.cron_events})).catch((function(e){t.handleError(e)})).finally((function(){t.fetching_cron=!1}))},runCron:function(t){var e=this;this.fetching_cron=!0,this.$post("setting/run_cron",{hook:t}).then((function(t){e.$notify.success(t.message)})).catch((function(t){e.handleError(t)})).finally((function(){e.fetching_cron=!1}))}},mounted:function(){var t=this;this.fetchCronEvents(),this.checkRestRequest("put_request_status","$put",(function(){t.checkRestRequest("delete_request_status","$del",(function(){t.checkRestRequest("get_request_status","$get",(function(){t.checkRestRequest("post_request_status","$post")}))}))})),this.changeTitle("Tools")}},na=Object(a.a)(ea,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Tools")))])])]),t._v(" "),n("div",{staticClass:"fluentcrm_pad_around"},[n("div",{staticClass:"settings-section fluentcrm_databox"},[n("div",{staticClass:"fluentcrm_header",staticStyle:{"background-color":"white",padding:"0 0 10px 0","margin-bottom":"20px"}},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Rest API Status")))])])]),t._v(" "),n("div",{staticClass:"fc_global_form_builder"},[n("ul",t._l(t.rest_statuses,(function(e,i){return n("li",{key:i},[n("b",[t._v(t._s(i))]),t._v(": "+t._s(e)+"\n                    ")])})),0)])]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching_cron,expression:"fetching_cron"}],staticClass:"settings-section fluentcrm_databox"},[n("div",{staticClass:"fluentcrm_header",staticStyle:{"background-color":"white",padding:"0 0 10px 0","margin-bottom":"20px"}},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("CRON Job Status")))])]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-button",{attrs:{size:"mini",icon:"el-icon-refresh"},on:{click:t.fetchCronEvents}})],1)]),t._v(" "),n("div",{staticClass:"fc_global_form_builder"},[n("el-table",{attrs:{"empty-text":t.$t("No Data Found"),data:t.cron_events,border:"",stripe:""}},[n("el-table-column",{attrs:{label:t.$t("Event Name"),prop:"human_name"}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Next Run"),prop:"next_run"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                            "+t._s(t.$t("In"))+" "+t._s(e.row.next_run)+"\n                        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Action")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(n){return t.runCron(e.row.hook)}}},[t._v("\n                                "+t._s(t.$t("Run Manually"))+"\n                            ")])]}}])})],1)],1)]),t._v(" "),n("div",{staticClass:"settings-section fluentcrm_databox",staticStyle:{border:"2px solid red"}},[n("h3",{staticStyle:{"margin-top":"0"}},[t._v(t._s(t.$t("Danger Zone")))]),t._v(" "),n("p",[t._v(t._s(t.$t("delete_all_crm_specific_data")))]),t._v(" "),n("p",[t._v(t._s(t.$t("You have to add"))+" "),n("code",[t._v("define('FLUENTCRM_IS_DEV_FEATURES', true);")]),t._v(" "+t._s(t.$t("in your"))+" wp-config.php "+t._s(t.$t("to make this feature work")))]),t._v(" "),n("hr"),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fc_global_form_builder text-align-center"},[n("h3",[t._v(t._s(t.$t("Reset FluentCRM Database tables")))]),t._v(" "),n("p",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("reset_db_warning")))]),t._v(" "),n("confirm",{attrs:{placement:"top-start",message:t.$t("reset_db_conf_warning")},on:{yes:function(e){return t.resetDatabase()}}},[n("el-button",{attrs:{slot:"reference",type:"danger"},slot:"reference"},[t._v("\n                        "+t._s(t.$t("Yes, Delete and Reset All CRM Data"))+"\n                    ")])],1)],1)]),t._v(" "),n("data-cleanup")],1)])}),[],!1,null,null,null).exports,ia={name:"Managers",components:{Confirm:f,Pagination:b},data:function(){return{managers:[],pagination:{total:0,current_page:1,per_page:10},loading:!1,permissions:{},editing_manager:{},show_modal:!1,saving:!1}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("campaign-pro-settings/managers",{per_page:this.pagination.per_page,page:this.pagination.current_page}).then((function(e){t.permissions=e.permissions,t.managers=e.managers.data,t.pagination.total=e.managers.total})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},readable:function(t){return this.permissions[t]?this.permissions[t].title:t},addManager:function(){this.editing_manager={email:"",permissions:[]},this.show_modal=!0},removeManager:function(t){var e=this;this.$del("campaign-pro-settings/managers/".concat(t.id)).then((function(t){e.$notify.success(t.message),e.fetch()})).catch((function(t){e.handleError(t)}))},initEdit:function(t){this.editing_manager=t,this.show_modal=!0},save:function(){var t=this;this.saving=!0;var e=this.$post("campaign-pro-settings/managers",{manager:this.editing_manager});this.editing_manager.id&&(e=this.$put("campaign-pro-settings/managers/".concat(this.editing_manager.id),{manager:this.editing_manager})),e.then((function(e){t.$notify.success(e.message),t.fetch(),t.show_modal=!1})).catch((function(e){t.handleError(e)})).finally((function(){t.saving=!1}))}},mounted:function(){this.has_campaign_pro&&this.fetch()}},sa=Object(a.a)(ia,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.has_campaign_pro?n("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header d-flex items-center justify-between"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("CRM Managers")))]),t._v(" "),n("p",[t._v(t._s(t.$t("All Administrators automatically will get full access of FluentCRM")))])]),t._v(" "),t.has_campaign_pro?n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.addManager()}}},[t._v("\n                "+t._s(t.$t("Add New Manager"))+"\n            ")])],1):t._e()]),t._v(" "),t.has_campaign_pro?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("el-table",{staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Found"),stripe:"",data:t.managers}},[n("el-table-column",{attrs:{label:t.$t("ID"),prop:"id",width:"80"}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Name"),width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.first_name)+" "+t._s(e.row.last_name)+"\n                ")]}}],null,!1,3785257120)}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Email"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.email)+"\n                ")]}}],null,!1,3087387761)}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Permissions")},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.permissions,(function(e){return n("el-tag",{key:e,attrs:{type:"info",size:"mini"}},[t._v("\n                        "+t._s(t.readable(e))+"\n                    ")])}))}}],null,!1,2463043339)}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Actions"),width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(n){return t.initEdit(e.row)}}}),t._v(" "),n("confirm",{on:{yes:function(n){return t.removeManager(e.row)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1)]}}],null,!1,2933693006)})],1),t._v(" "),n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1):t._e(),t._v(" "),n("el-dialog",{attrs:{title:t.editing_manager.id?t.$t("Edit Manager"):t.$t("Add new Manager"),visible:t.show_modal,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.show_modal=e}}},[n("el-form",{attrs:{data:t.editing_manager,"label-position":"top"}},[n("el-form-item",{attrs:{label:t.$t("User Email")}},[n("el-input",{attrs:{type:"email",disabled:!!t.editing_manager.id,placeholder:t.$t("User Email Address")},model:{value:t.editing_manager.email,callback:function(e){t.$set(t.editing_manager,"email",e)},expression:"editing_manager.email"}}),t._v(" "),n("p",{directives:[{name:"show",rawName:"v-show",value:!t.editing_manager.id,expression:"!editing_manager.id"}]},[t._v(t._s(t.$t("Please Provide Email address of your existing system user")))])],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Permissions")}},[n("el-checkbox-group",{model:{value:t.editing_manager.permissions,callback:function(e){t.$set(t.editing_manager,"permissions",e)},expression:"editing_manager.permissions"}},t._l(t.permissions,(function(e,i){return n("el-checkbox",{key:i,staticStyle:{"min-width":"250px"},attrs:{label:i}},[t._v("\n                        "+t._s(e.title)+"\n                    ")])})),1)],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:t.editing_manager.id?"success":"primary"},on:{click:function(e){return t.save()}}},[t._v("\n                "+t._s(t.editing_manager.id?t.$t("Update"):t.$t("Create"))+"\n            ")])],1)],1)],1):n("div",[n("div",{staticClass:"fc_narrow_box fluentcrm_databox text-align-center"},[n("h2",{},[t._v(t._s(t.$t("CRM Managers - Roles and Permissions")))]),t._v(" "),n("p",{staticClass:"text-align-center"},[t._v(t._s(t.$t("crm_managers_roles_and_permissions")))]),t._v(" "),n("hr"),t._v(" "),n("p",[t._v(t._s(t.$t("To Activate this module please upgrade to pro")))]),t._v(" "),n("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v(t._s(t.$t("Get FluentCRM Pro")))])])])}),[],!1,null,null,null).exports;function aa(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function ra(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var oa={name:"RestKeys",components:{ItemCopier:Rs},data:function(){return{rest_keys:[],managers:[],loading:!1,adding_key:{},show_modal:!1,saving:!1,created_key:!1}},methods:{fetch:function(){var t=this;this.loading=!0,this.$get("setting/rest-keys").then((function(e){t.rest_keys=e.rest_keys,t.managers=e.managers})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},addKey:function(){this.adding_key={api_user_id:"",api_name:""},this.created_key=!1,this.show_modal=!0},save:function(){var t=this;this.saving=!0,this.$post("setting/rest-keys",function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?aa(Object(n),!0).forEach((function(e){ra(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.adding_key)).then((function(e){t.$notify.success(e.message),t.created_key=e.item,t.fetch()})).catch((function(e){t.handleError(e)})).finally((function(){t.saving=!1}))}},mounted:function(){this.has_campaign_pro&&this.fetch()}},la=Object(a.a)(oa,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("REST API Access Management")))]),t._v(" "),n("p",[t._v(t._s(t.$t("rest_api_sub_heading")))])]),t._v(" "),t.has_campaign_pro?n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.addKey()}}},[t._v(t._s(t.$t("Add New Key"))+"\n            ")]),t._v(" "),n("a",{staticClass:"el-button el-button--info el-button--medium",attrs:{target:"_blank",rel:"noopener",href:"https://rest-api.fluentcrm.com/"}},[t._v("\n                "+t._s(t.$t("Documentation"))+"\n            ")])],1):t._e()]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("el-table",{staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Found"),stripe:"",data:t.rest_keys}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticStyle:{"padding-left":"60px","padding-bottom":"6px"}},[n("h2",{staticStyle:{margin:"8px 0 8px 0"}},[t._v(t._s(t.$t("APIs")))]),t._v(" "),t._l(e.row.api_keys,(function(e){return n("el-tag",{key:e.name,attrs:{type:"info",size:"mini"}},[t._v("\n                            "+t._s(e.name)+"\n                        ")])}))],2)]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("ID"),prop:"id",width:"80"}}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Name")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.first_name)+" "+t._s(e.row.last_name)+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Email")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.email)+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Actions"),width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("a",{staticClass:"el-button el-button--info el-button--mini",attrs:{href:e.row.manage_url}},[t._v(t._s(t.$t("Manage APIs")))])]}}])})],1)],1),t._v(" "),n("el-dialog",{attrs:{title:t.$t("Add New REST API Key"),visible:t.show_modal,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.show_modal=e}}},[t.managers.length?t.created_key?n("div",{staticClass:"fc_api_created_response"},[n("h3",[t._v(t._s(t.$t("REST API key has been created to selected user")))]),t._v(" "),n("p",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("Please save the details as you can not retrieve again")))]),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:12}},[t._v("\n                    "+t._s(t.$t("API Username:"))+"\n                    "),n("item-copier",{attrs:{text:t.created_key.info.api_username}})],1),t._v(" "),n("el-col",{attrs:{span:12}},[t._v("\n                    "+t._s(t.$t("API Password:"))+"\n                    "),n("item-copier",{attrs:{text:t.created_key.info.api_password}})],1),t._v(" "),n("el-col",{attrs:{span:24}},[n("p",{staticStyle:{"margin-bottom":"50px"}},[t._v(t._s(t.$t("Use Basic Authorization for REST API requests. Please check the official documentation for more details")))])])],1)],1):n("el-form",{attrs:{data:t.adding_key,"label-position":"top"}},[n("el-form-item",{attrs:{label:t.$t("Name of this key")}},[n("el-input",{attrs:{type:"text",placeholder:t.$t("Friendly Name for identification")},model:{value:t.adding_key.api_name,callback:function(e){t.$set(t.adding_key,"api_name",e)},expression:"adding_key.api_name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Associate FluentCRM Manager (Non-Admin Only)"}},[n("el-select",{model:{value:t.adding_key.api_user_id,callback:function(e){t.$set(t.adding_key,"api_user_id",e)},expression:"adding_key.api_user_id"}},t._l(t.managers,(function(t){return n("el-option",{key:t.id,attrs:{value:t.id,label:t.full_name+" "+t.email}})})),1)],1)],1):[n("h3",[t._v(t._s(t.$t("Looks like you did not have any additional Manager yet. Please create a manager (non administrator role) first for FluentCRM")))])],t._v(" "),t.created_key?t._e():n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.save()}}},[t._v(t._s(t.$t("Create")))])],1)],2)],1)}),[],!1,null,null,null).exports,ca={name:"FunnelRoute",data:function(){return{app_ready:!1,options:{}}},methods:{getOptions:function(){var t=this;this.app_ready=!1;this.$get("reports/options",{fields:"tags,lists,editable_statuses,campaigns,email_sequences"}).then((function(e){t.options=e.options})).catch((function(e){t.handleError(e)})).finally((function(){t.app_ready=!0}))}},mounted:function(){this.getOptions(),this.changeTitle("Automations")}},ua=Object(a.a)(ca,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fc_funnel_root"},[this.app_ready?e("router-view",{attrs:{options:this.options}}):e("div",[e("h3",[this._v(this._s(this.$t("Loading...")))])])],1)}),[],!1,null,null,null).exports,_a={name:"CreateFunnelModal",props:["visible","triggers"],data:function(){return{saving:!1,funnel:{title:"",trigger_name:""},dialogVisible:this.visible,selected_category:this.$t("CRM")}},watch:{dialogVisible:function(){this.$emit("close")}},computed:{funnel_categories:function(){var t=[];return this.each(this.triggers,(function(e){-1===t.indexOf(e.category)&&t.push(e.category)})),t.sort()},funnelTriggers:function(){var t=this;if(!this.selected_category)return[];var e={};return this.each(this.triggers,(function(n,i){n.category===t.selected_category&&(e[i]=n)})),e}},methods:{saveFunnel:function(){var t=this;this.saving=!0,this.$post("funnels",{funnel:this.funnel}).then((function(e){t.$notify.success(e.message),t.$router.push({name:"edit_funnel",params:{funnel_id:e.funnel.id},query:{is_new:"yes"}})})).catch((function(e){t.handleError(e)})).finally((function(){t.saving=!1}))},getCatIcon:function(t){t=t.replaceAll(" ","").toLowerCase();var e=this.appVars.funnel_cat_icons[t];return e?'<i class="'+e+'"></i>':' <i class="el-icon el-icon-finished"></i>'}}},da={name:"AutomationFunnels",components:{CreateFunnelModal:Object(a.a)(_a,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.$t("_Cr_Create_aAF"),visible:t.dialogVisible,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[n("div",[n("el-form",{attrs:{data:t.funnel,"label-position":"top"},nativeOn:{submit:function(e){return e.preventDefault(),t.saveFunnel.apply(null,arguments)}}},[n("el-form-item",{attrs:{label:t.$t("Internal Label")}},[n("el-input",{attrs:{placeholder:t.$t("Internal Label")},model:{value:t.funnel.title,callback:function(e){t.$set(t.funnel,"title",e)},expression:"funnel.title"}})],1),t._v(" "),n("div",{staticClass:"fc_a_cat_selection_wrapper"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:6,xs:12}},[n("el-menu",{staticClass:"fc_trigger_selectors",attrs:{"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b","default-active":t.selected_category},on:{select:function(e){t.selected_category=e,t.funnel.trigger_name=""}}},t._l(t.funnel_categories,(function(e){return n("el-menu-item",{key:e,attrs:{index:e}},[n("span",{staticClass:"fc_trigger_icon",domProps:{innerHTML:t._s(t.getCatIcon(e))}}),t._v(" "),n("span",[t._v(t._s(e))])])})),1)],1),t._v(" "),n("el-col",{attrs:{md:18,xs:12}},[n("div",{staticClass:"fc_choice_header"},[n("h2",{staticClass:"fc_choice_title"},[t._v(t._s(t.$t("Select the trigger for this automation")))])]),t._v(" "),t.selected_category?n("el-row",{staticClass:"fc_choice_row",attrs:{gutter:20}},t._l(t.funnelTriggers,(function(e,i){return n("el-col",{key:i,staticClass:"fc_choice_block",attrs:{md:8,sm:24,xs:24}},[n("div",{staticClass:"fc_choice_card",class:{fc_trigger_selected:t.funnel.trigger_name==i},on:{click:function(e){t.funnel.trigger_name=i}}},[e.disabled?n("div",{staticClass:"fc_pro_ribbon"},[t._v(t._s(t.$t("Pro")))]):t._e(),t._v(" "),n("h3",[n("i",{class:e.icon?e.icon:"fc-icon-trigger"}),t._v(t._s(e.label))]),t._v(" "),n("p",{domProps:{innerHTML:t._s(e.description)}})])])})),1):t._e(),t._v(" "),t.funnel.trigger_name&&t.triggers[t.funnel.trigger_name].disabled?n("div",{staticClass:"promo_block",staticStyle:{background:"whitesmoke",padding:"20px 10px",margin:"0","text-align":"center",display:"block",overflow:"hidden"}},[n("p",[t._v(t._s(t.$t("install_fluentcrm_pro")))]),t._v(" "),n("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                                "+t._s(t.$t("Get FluentCRM Pro"))+"\n                            ")])]):t._e()],1)],1)],1)],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.funnel.trigger_name&&!t.triggers[t.funnel.trigger_name].disabled?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveFunnel()}}},[t._v("\n            "+t._s(t.$t("Continue"))+"\n        ")]):t._e()],1)])}),[],!1,null,null,null).exports,Confirm:f,Pagination:b},data:function(){return{pagination:{total:0,per_page:10,current_page:1},funnels:[],search:"",create_modal:!1,triggers:{},loading:!1,duplicating:!1,sortBy:"id",sortType:"DESC"}},methods:{getFunnels:function(){var t=this;this.loading=!0,this.$get("funnels",{per_page:this.pagination.per_page,page:this.pagination.current_page,with:["triggers"],search:this.search,sort_by:this.sortBy,sort_type:this.sortType}).then((function(e){t.funnels=e.funnels.data,t.pagination.total=e.funnels.total,t.triggers=e.triggers})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},handleSortable:function(t){"descending"===t.order?(this.sortBy=t.prop,this.sortType="DESC"):(this.sortBy=t.prop,this.sortType="ASC"),this.getFunnels()},getTriggerTitle:function(t){return this.triggers[t]?this.triggers[t].label:t},edit:function(t){this.$router.push({name:"edit_funnel",params:{funnel_id:t.id}})},subscribers:function(t){this.$router.push({name:"funnel_subscribers",params:{funnel_id:t.id}})},remove:function(t){var e=this;this.$del("funnels/".concat(t.id)).then((function(t){e.$notify.success(t.message),e.getFunnels()})).catch((function(t){e.handleError(t)}))},duplicate:function(t){var e=this;this.duplicating=!0,this.$post("funnels/".concat(t.id,"/clone")).then((function(t){e.$notify.success(t.message),e.$router.push({name:"edit_funnel",params:{funnel_id:t.funnel.id},query:{is_new:"yes"}})})).catch((function(t){e.handleError(t)})).finally((function(){e.duplicating=!1}))},exportFunnel:function(t){location.href=window.ajaxurl+"?"+jQuery.param({action:"fluentcrm_export_funnel",funnel_id:t.id})}},mounted:function(){this.getFunnels(),this.changeTitle("Automation Funnels")}},pa=Object(a.a)(da,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_settings_wrapper"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Automation Funnels")))])]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-input",{staticClass:"input-with-select mr-10",attrs:{size:"mini",placeholder:t.$t("Search")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getFunnels.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.getFunnels()}},slot:"append"})],1),t._v(" "),t.hasPermission("fcrm_write_funnels")?n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(e){t.create_modal=!0}}},[t._v("\n                "+t._s(t.$t("Create a New Automation"))+"\n            ")]):t._e(),t._v(" "),n("el-button",{attrs:{size:"small",type:"info",icon:"el-icon-upload"},on:{click:function(e){return t.$router.push({name:"import_funnel"})}}},[t._v("\n                "+t._s(t.$t("Import"))+"\n            ")])],1)]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_body fluentcrm_pad_b_20"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.duplicating,expression:"duplicating"}],attrs:{"empty-text":t.$t("No Data Found"),border:"",stripe:"",data:t.funnels},on:{"sort-change":t.handleSortable}},[n("el-table-column",{attrs:{sortable:"custom",property:"id",width:"60",label:t.$t("ID")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(e.row.id)+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{sortable:"custom",property:"title",label:t.$t("Title")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{name:"edit_funnel",params:{funnel_id:e.row.id}}}},[t._v("\n                        "+t._s(e.row.title)+"\n                    ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{sortable:"custom",property:"trigger_name",label:t.$t("Trigger")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t.getTriggerTitle(e.row.trigger_name))+"\n                ")]}}])}),t._v(" "),n("el-table-column",{attrs:{sortable:"custom",property:"status",width:"170",label:t.$t("Status")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                    "+t._s(t._f("ucFirst")(t.$t(e.row.status)))+"\n                    "),n("span",{staticClass:"stats_badge_inline"},[n("span",[n("i",{staticClass:"el-icon el-icon-user"}),t._v(" "+t._s(e.row.subscribers_count))])])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"320",label:t.$t("Action")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-data-line"},on:{click:function(n){return t.subscribers(e.row)}}},[t._v("\n                        "+t._s(t.$t("Reports"))+"\n                    ")]),t._v(" "),t.hasPermission("fcrm_write_funnels")?[n("confirm",{on:{yes:function(n){return t.remove(e.row)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1),t._v(" "),n("el-button",{attrs:{type:"info",size:"mini",icon:"el-icon-copy-document"},on:{click:function(n){return t.duplicate(e.row)}}},[t._v("\n                            "+t._s(t.$t("Duplicate"))+"\n                        ")]),t._v(" "),n("el-button",{staticStyle:{"margin-left":"0"},attrs:{type:"info",size:"mini",icon:"el-icon-download"},on:{click:function(n){return t.exportFunnel(e.row)}}},[t._v("\n                            "+t._s(t.$t("Export"))+"\n                        ")])]:t._e()]}}])})],1),t._v(" "),n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.getFunnels}})],1),t._v(" "),t.create_modal?n("create-funnel-modal",{attrs:{triggers:t.triggers,visible:t.create_modal},on:{close:function(){t.create_modal=!1}}}):t._e()],1)}),[],!1,null,null,null).exports,ma={name:"MultiTextOptions",props:{value:{type:Array,default:function(){return[""]}},field:{type:Object}},data:function(){return{options:[]}},watch:{options:{deep:!0,handler:function(){var t=[];this.options.forEach((function(e){e.value&&t.push(e.value)})),this.$emit("input",t)}}},methods:{addMoreUrl:function(){this.options.push({value:""})},deleteUrl:function(t){this.options.splice(t,1)}},mounted:function(){var t=this,e=JSON.parse(JSON.stringify(this.value));e&&e.length?(this.options=[],e.forEach((function(e){t.options.push({value:e})}))):this.options=[{value:""}]}},fa=Object(a.a)(ma,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_url_boxes"},[t._l(t.options,(function(e,i){return n("div",{key:i,staticClass:"fc_each_text_option"},[n("el-input",{attrs:{type:t.field.input_type,placeholder:t.field.placeholder},model:{value:e.value,callback:function(n){t.$set(e,"value",n)},expression:"option.value"}},[n("el-button",{attrs:{slot:"append",disabled:1==t.options.length,icon:"el-icon-delete"},on:{click:function(e){return t.deleteUrl(i)}},slot:"append"})],1)],1)})),t._v(" "),n("el-button",{attrs:{size:"small",type:"info"},on:{click:function(e){return t.addMoreUrl()}}},[t._v(t._s(t.$t("Add More")))])],2)}),[],!1,null,null,null).exports,ha={name:"FormFieldsGroupMapper",props:["field","model"]},va=Object(a.a)(ha,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"fc_horizontal_table"},[n("thead",[n("tr",[n("th",[t._v(t._s(t.field.local_label))]),t._v(" "),n("th",[t._v(t._s(t.field.remote_label))])])]),t._v(" "),n("tbody",t._l(t.field.fields,(function(e,i){return n("tr",{key:i},[n("td",[t._v(t._s(e.label))]),t._v(" "),n("td",[n("el-select",{attrs:{clearable:"",filterable:"",placeholder:t.$t("Select Value")},model:{value:t.model[i],callback:function(e){t.$set(t.model,i,e)},expression:"model[fieldKey]"}},t._l(t.field.value_options,(function(t){return n("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})})),1)],1)])})),0)])}),[],!1,null,null,null).exports,ga={name:"WPUrlSelector",props:["field","value"],data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}}},ba=Object(a.a)(ga,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-input",{attrs:{type:"url",placeholder:t.field.placeholder},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})}),[],!1,null,null,null).exports;function ya(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function wa(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ya(Object(n),!0).forEach((function(e){$a(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ya(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function $a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var ka={name:"ConditionGroup",props:["field","value"],components:{OptionSelector:vt,AjaxSelector:bt},data:function(){return{model:this.value}},computed:{flat_properties:function(){var t={};return this.each(this.field.condition_properties,(function(e){t=wa(wa({},t),e.options)})),t}},watch:{model:function(t){this.$emit("input",t)}},methods:{addCondition:function(t){this.model[t].conditions.push({data_key:"",operator:"=",data_value:""})},deleteProp:function(t,e){this.model[t].conditions.splice(e,1)},removeGroup:function(t){this.model.splice(t,1)},addConditionalGroup:function(){this.model.push({conditions:[{data_key:"",operator:"=",data_value:""}],match_type:"match_all"})}}},xa=ka,Ca=(n(315),Object(a.a)(xa,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_condition_groups"},[t._l(t.model,(function(e,i){return n("div",{key:i,staticClass:"fc_condition_wrapper"},[0!=i?n("div",{staticClass:"fc_cond_and"},[t._v("OR")]):t._e(),t._v(" "),n("div",{staticClass:"fc_condition_group"},[n("table",{staticClass:"wp-list-table widefat fixed striped table-view-list posts"},[n("thead",[n("tr",[n("th",{staticStyle:{width:"180px"}},[t._v(t._s(t.field.labels.data_key_label))]),t._v(" "),n("th",{staticStyle:{width:"180px"}},[t._v(t._s(t.field.labels.condition_label))]),t._v(" "),n("th",[t._v(t._s(t.field.labels.data_value_label))]),t._v(" "),n("th",{staticStyle:{width:"90px"}})])]),t._v(" "),n("tbody",t._l(e.conditions,(function(s,a){return n("tr",{key:a},[n("td",[n("el-select",{attrs:{clearable:"",placeholder:t.$t("Select"),size:"small"},on:{change:function(t){s.operator="=",s.data_value=""}},model:{value:s.data_key,callback:function(e){t.$set(s,"data_key",e)},expression:"condition.data_key"}},t._l(t.field.condition_properties,(function(e,i){return n("el-option-group",{key:i,attrs:{label:e.label}},t._l(e.options,(function(t,e){return n("el-option",{key:e,attrs:{value:e,label:t.label}})})),1)})),1)],1),t._v(" "),n("td",[s.data_key?n("el-select",{attrs:{clearable:"",placeholder:t.$t("Select Condition"),size:"small"},model:{value:s.operator,callback:function(e){t.$set(s,"operator",e)},expression:"condition.operator"}},[t.flat_properties[s.data_key].multiple?[n("el-option",{attrs:{value:"=",label:t.$t("Match any Of")}}),t._v(" "),n("el-option",{attrs:{value:"match_all",label:t.$t("Match all of")}}),t._v(" "),n("el-option",{attrs:{value:"match_none_of",label:t.$t("Match none of")}})]:[n("el-option",{attrs:{value:"=",label:t.$t("Equal")}}),t._v(" "),n("el-option",{attrs:{value:"!=",label:t.$t("Not Equal")}}),t._v(" "),"text"==t.flat_properties[s.data_key].type?[n("el-option",{attrs:{value:"contains",label:t.$t("Contains")}}),t._v(" "),n("el-option",{attrs:{value:"doNotContains",label:t.$t("Not Contains")}}),t._v(" "),n("el-option",{attrs:{value:"startsWith",label:t.$t("Starts With")}}),t._v(" "),n("el-option",{attrs:{value:"endsWith",label:t.$t("Ends With")}})]:"number"==t.flat_properties[s.data_key].type?[n("el-option",{attrs:{value:">",label:t.$t("Greater Than")}}),t._v(" "),n("el-option",{attrs:{value:"<",label:t.$t("Less Than")}})]:t._e()]],2):t._e()],1),t._v(" "),n("td",[s.data_key&&s.operator?n("div",["text"==t.flat_properties[s.data_key].type?n("el-input",{attrs:{size:"small",type:"text"},model:{value:s.data_value,callback:function(e){t.$set(s,"data_value",e)},expression:"condition.data_value"}}):"number"==t.flat_properties[s.data_key].type?n("el-input",{attrs:{size:"small",type:"number"},model:{value:s.data_value,callback:function(e){t.$set(s,"data_value",e)},expression:"condition.data_value"}}):"select"==t.flat_properties[s.data_key].type?n("el-select",{attrs:{size:"small",clearable:""},model:{value:s.data_value,callback:function(e){t.$set(s,"data_value",e)},expression:"condition.data_value"}},t._l(t.flat_properties[s.data_key].options,(function(t){return n("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1):"option_selector"==t.flat_properties[s.data_key].type?[n("option-selector",{attrs:{field:{placeholder:"Select",is_multiple:t.flat_properties[s.data_key].multiple,option_key:t.flat_properties[s.data_key].option_key}},model:{value:s.data_value,callback:function(e){t.$set(s,"data_value",e)},expression:"condition.data_value"}})]:"rest_selector"==t.flat_properties[s.data_key].type?[n("ajax-selector",{attrs:{field:{placeholder:"Select",is_multiple:t.flat_properties[s.data_key].multiple,option_key:t.flat_properties[s.data_key].option_key}},model:{value:s.data_value,callback:function(e){t.$set(s,"data_value",e)},expression:"condition.data_value"}})]:t._e()],2):n("div",[t._v(t._s(t.$t("Select data source and operator first")))])]),t._v(" "),n("td",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return t.addCondition(i)}}}),t._v(" "),n("el-button",{attrs:{disabled:1==e.conditions.length,size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.deleteProp(i,a)}}})],1)])})),0)]),t._v(" "),t.field.hide_match_type?n("p",{staticStyle:{margin:"0",padding:"0"}},[t._v("Inside group conditions are "),n("b",[t._v("match all")])]):n("div",[n("p",[n("b",[t._v(t._s(t.$t("Match Type")))])]),t._v(" "),n("el-radio-group",{model:{value:e.match_type,callback:function(n){t.$set(e,"match_type",n)},expression:"group.match_type"}},[n("el-radio",{attrs:{label:"match_all"}},[t._v(t._s(t.field.labels.match_type_all_label))]),t._v(" "),n("el-radio",{attrs:{label:"match_any"}},[t._v(t._s(t.field.labels.match_type_any_label))])],1)],1),t._v(" "),t.model.length>1?n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(e){return t.removeGroup(i)}}},[t._v("\n                "+t._s(t.$t("Delete this group"))+"\n            ")]):t._e()],1)])})),t._v(" "),t.field.is_multiple_grouping?n("div",{staticClass:"text-align-right"},[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return t.addConditionalGroup()}}},[t._v("\n            "+t._s(t.$t("Add Another Conditional Group"))+"\n        ")])],1):t._e()],2)}),[],!1,null,null,null)),Sa=Ca.exports,Oa={name:"ConditionGroup",props:["field","value"],components:{OptionSelector:vt},data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}},methods:{addProperty:function(){this.model.push({data_key:"",data_value:""})},deleteProp:function(t){this.model.splice(t,1)}}},Ea=Oa,ja=Object(a.a)(Ea,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_value_property_group"},[n("table",{staticClass:"wp-list-table widefat fixed striped table-view-list posts"},[n("thead",[n("tr",[n("th",{staticStyle:{width:"180px"}},[t._v(t._s(t.field.data_key_label))]),t._v(" "),n("th",[t._v(t._s(t.field.data_value_label))]),t._v(" "),n("th",{staticStyle:{width:"50px"}})])]),t._v(" "),n("tbody",t._l(t.model,(function(e,i){return n("tr",{key:i},[n("td",[n("el-select",{attrs:{clearable:"",placeholder:t.$t("Select"),size:"small"},on:{change:function(t){e.data_value,delete e.data_operation}},model:{value:e.data_key,callback:function(n){t.$set(e,"data_key",n)},expression:"condition.data_key"}},t._l(t.field.property_options,(function(t,e){return n("el-option",{key:e,attrs:{value:e,label:t.label}})})),1)],1),t._v(" "),n("td",[e.data_key?n("div",["text"==t.field.property_options[e.data_key].type?n("el-input",{attrs:{size:"small",type:"text"},model:{value:e.data_value,callback:function(n){t.$set(e,"data_value",n)},expression:"condition.data_value"}}):"number"==t.field.property_options[e.data_key].type?["yes"==t.field.support_operations?[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:18}},[n("el-input",{staticClass:"input-with-select",attrs:{size:"small",type:"number"},model:{value:e.data_value,callback:function(n){t.$set(e,"data_value",n)},expression:"condition.data_value"}})],1),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-select",{attrs:{size:"mini",placeholder:t.$t("Replace Value")},model:{value:e.data_operation,callback:function(n){t.$set(e,"data_operation",n)},expression:"condition.data_operation"}},[n("el-option",{attrs:{value:"",label:t.$t("Replace Value")}}),t._v(" "),n("el-option",{attrs:{value:"subtract",label:t.$t("Subtract Value")}}),t._v(" "),n("el-option",{attrs:{value:"add",label:t.$t("Add Value")}})],1)],1)],1)]:n("el-input",{staticClass:"input-with-select",attrs:{size:"small",type:"number"},model:{value:e.data_value,callback:function(n){t.$set(e,"data_value",n)},expression:"condition.data_value"}})]:"select"==t.field.property_options[e.data_key].type?["yes"==t.field.support_operations&&t.field.property_options[e.data_key].multiple?[n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:18}},[n("el-select",{attrs:{size:"small",clearable:"",multiple:t.field.property_options[e.data_key].multiple},model:{value:e.data_value,callback:function(n){t.$set(e,"data_value",n)},expression:"condition.data_value"}},t._l(t.field.property_options[e.data_key].options,(function(t){return n("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)],1),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-select",{attrs:{size:"mini",placeholder:t.$t("Replace Value")},model:{value:e.data_operation,callback:function(n){t.$set(e,"data_operation",n)},expression:"condition.data_operation"}},[n("el-option",{attrs:{value:"",label:t.$t("Replace Options")}}),t._v(" "),n("el-option",{attrs:{value:"subtract",label:t.$t("Subtract Options")}}),t._v(" "),n("el-option",{attrs:{value:"add",label:t.$t("Add Options")}})],1)],1)],1)]:n("el-select",{attrs:{size:"small",clearable:"",multiple:t.field.property_options[e.data_key].multiple},model:{value:e.data_value,callback:function(n){t.$set(e,"data_value",n)},expression:"condition.data_value"}},t._l(t.field.property_options[e.data_key].options,(function(t){return n("el-option",{key:t.id,attrs:{label:t.title,value:t.id}})})),1)]:"option_selector"==t.field.property_options[e.data_key].type?[n("option-selector",{attrs:{field:{placeholder:"Select",is_multiple:t.field.property_options[e.data_key].multiple,option_key:t.field.property_options[e.data_key].option_key}},model:{value:e.data_value,callback:function(n){t.$set(e,"data_value",n)},expression:"condition.data_value"}})]:t._e()],2):t._e()]),t._v(" "),n("td",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{disabled:1==t.model.length,size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.deleteProp(i)}}})],1)])})),0)]),t._v(" "),n("div",{staticClass:"text-align-right"},[n("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return t.addProperty()}}},[t._v("\n            "+t._s(t.$t("Add More"))+"\n        ")])],1)])}),[],!1,null,null,null),Ta=ja.exports,Pa={name:"TextValueMultiProperties",props:["field","value"],components:{InputTextPopper:nt},data:function(){return{model:this.value}},watch:{model:function(t){this.$emit("input",t)}},methods:{addProperty:function(){this.model.push({data_key:"",data_value:""})},deleteProp:function(t){this.model.splice(t,1)}}},Aa=Pa,Fa=Object(a.a)(Aa,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_value_property_group"},[n("table",{staticClass:"wp-list-table widefat fixed striped table-view-list posts"},[n("thead",[n("tr",[n("th",{staticStyle:{width:"180px"}},[t._v(t._s(t.field.data_key_label))]),t._v(" "),n("th",[t._v(t._s(t.field.data_value_label))]),t._v(" "),n("th",{staticStyle:{width:"50px"}})])]),t._v(" "),n("tbody",t._l(t.model,(function(e,i){return n("tr",{key:i},[n("td",[n("el-input",{attrs:{placeholder:t.field.data_key_placeholder,type:"text"},model:{value:e.data_key,callback:function(n){t.$set(e,"data_key",n)},expression:"condition.data_key"}})],1),t._v(" "),n("td",["text-popper"==t.field.value_input_type?[n("input-text-popper",{attrs:{field:{placeholder:t.field.data_value_placeholder,popper_class:"fc_limit_height"}},model:{value:e.data_value,callback:function(n){t.$set(e,"data_value",n)},expression:"condition.data_value"}})]:n("el-input",{attrs:{type:"text",placeholder:t.field.data_value_placeholder},model:{value:e.data_value,callback:function(n){t.$set(e,"data_value",n)},expression:"condition.data_value"}})],2),t._v(" "),n("td",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{disabled:1==t.model.length,size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.deleteProp(i)}}})],1)])})),0)]),t._v(" "),n("div",{staticClass:"text-align-right"},[n("el-button",{attrs:{type:"success",size:"mini",icon:"el-icon-plus"},on:{click:function(e){return t.addProperty()}}},[t._v("\n            "+t._s(t.$t("Add More"))+"\n        ")])],1)])}),[],!1,null,null,null),Da=Fa.exports,qa={name:"RichFilterContainer",components:{RichFilter:le},props:{advanced_filters:{type:Array,default:function(){return[[]]}},add_label:{type:String,default:"Add new filter to narrow down your contacts based on different properties"},filterOptions:{type:Array,default:function(){return[]}}},methods:{maybeRemoveGroup:function(t){this.advanced_filters.length>1&&this.advanced_filters.splice(t,1)},addConditionGroup:function(){this.advanced_filters.push([])}},mounted:function(){this.advanced_filters&&Kt()(this.advanced_filters)&&0!=this.advanced_filters.length||(this.advanced_filters=[[]])}},Ia=qa,Na=Object(a.a)(Ia,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_rich_container"},[n("div",{staticClass:"fc_rich_wrap"},t._l(t.advanced_filters,(function(e,i){return n("div",{key:i},[n("div",{staticClass:"fc_rich_filter"},[n("rich-filter",{attrs:{filterOptions:t.filterOptions,add_label:t.add_label,items:e},on:{maybeRemove:function(e){return t.maybeRemoveGroup(i)}}})],1),t._v(" "),n("div",{staticClass:"fc_cond_or"},[n("em",[t._v(t._s(t.$t("OR")))])])])})),0),t._v(" "),n("div",{staticClass:"fc_cond_or"},[n("em",{staticStyle:{cursor:"pointer",color:"rgb(0, 119, 204)","font-weight":"bold"},on:{click:function(e){return t.addConditionGroup()}}},[n("i",{staticClass:"el-icon-plus"}),t._v(" "+t._s(t.$t("OR")))])])])}),[],!1,null,null,null),La=Na.exports,Ma={name:"FormField",props:["value","field","options"],components:{MultiTextOptions:fa,EmailComposer:ss,FormGroupMapper:va,FormManyDropDownMapper:Pt,WpUrlSelector:ba,OptionSelector:vt,ConditionGroups:Sa,InputValueProperties:Ta,WpBaseEditor:V,TextValueMultiProperties:Da,InputTextPopper:nt,AjaxSelector:bt,RichFilterContainer:La},data:function(){return{model:this.value,context_codes:!1}},watch:{model:{deep:!0,handler:function(t){this.$emit("input",t)}}},methods:{saveAndReload:function(){var t=this;this.$nextTick((function(){t.$emit("save_reload")}))}},created:function(){"email_campaign_composer"==this.field.type&&(this.context_codes=window.fcrm_funnel_context_codes)}},Ra=Ma,za=Object(a.a)(Ra,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form-item",[t.field.label?n("template",{slot:"label"},[t._v("\n        "+t._s(t.field.label)+"\n        "),t.field.help?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.field.help,placement:"top-start"}},[n("i",{staticClass:"el-icon el-icon-info"})]):t._e()],1):t._e(),t._v(" "),"option_selectors"==t.field.type?[n("option-selector",{attrs:{field:t.field},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"multi-select"==t.field.type||"select"==t.field.type?[n("el-select",{attrs:{multiple:"multi-select"==t.field.type,placeholder:t.field.placeholder,clearable:"",filterable:""},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,(function(t){return n("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})})),1)]:"radio"==t.field.type?[n("el-radio-group",{model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,(function(e){return n("el-radio",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.title)+"\n            ")])})),1)]:"input-number"==t.field.type?[n("el-input-number",{model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"input-text"==t.field.type?[n("el-input",{attrs:{readonly:t.field.readonly,placeholder:t.field.placeholder},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"input-text-popper"==t.field.type?[n("input-text-popper",{attrs:{field:t.field,placeholder:t.field.placeholder},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"yes_no_check"==t.field.type?[n("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},[t._v(t._s(t.field.check_label))])]:"grouped-select"==t.field.type?[n("el-select",{attrs:{multiple:t.field.is_multiple,placeholder:t.field.placeholder,clearable:"",filterable:""},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,(function(e){return n("el-option-group",{key:e.slug,attrs:{label:e.title}},t._l(e.options,(function(t){return n("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})})),1)})),1)]:"multi_text_options"==t.field.type?[n("multi-text-options",{attrs:{field:t.field},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"email_campaign_composer"==t.field.type?[n("email-composer",{staticClass:"fc_into_modal",attrs:{extra_tags:t.context_codes,show_merge:!0,enable_test:!0,disable_fixed:!0,campaign:t.model,label_align:"top"}})]:"reload_field_selection"==t.field.type?[n("el-select",{attrs:{multiple:"multi-select"==t.field.type,placeholder:t.field.placeholder,clearable:"",filterable:""},on:{change:function(e){return t.saveAndReload()}},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}},t._l(t.field.options,(function(t){return n("el-option",{key:t.id,attrs:{value:t.id,label:t.title}})})),1)]:"form-group-mapper"==t.field.type?[n("form-group-mapper",{attrs:{field:t.field,model:t.model}})]:"form-many-drop-down-mapper"==t.field.type?[n("form-many-drop-down-mapper",{attrs:{field:t.field},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"html"==t.field.type?[n("div",{domProps:{innerHTML:t._s(t.field.info)}})]:"url_selector"==t.field.type?[n("wp-url-selector",{attrs:{field:t.field},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"date_time"==t.field.type?[n("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",placeholder:t.field.placeholder,type:"datetime"},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"condition_groups"==t.field.type?[n("condition-groups",{attrs:{field:t.field},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"input_value_pair_properties"==t.field.type?[n("input-value-properties",{attrs:{field:t.field},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"text-value-multi-properties"==t.field.type?[n("text-value-multi-properties",{attrs:{field:t.field},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"html_editor"==t.field.type?[n("wp-base-editor",{model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"rest_selector"==t.field.type?[n("ajax-selector",{attrs:{field:t.field},model:{value:t.model,callback:function(e){t.model=e},expression:"model"}})]:"condition_block_groups"==t.field.type?[n("rich-filter-container",{attrs:{add_label:t.field.add_label,advanced_filters:t.model,filterOptions:t.field.groups}})]:[n("pre",[t._v(t._s(t.field))])],t._v(" "),t.field.inline_help?n("p",{domProps:{innerHTML:t._s(t.field.inline_help)}}):t._e()],2)}),[],!1,null,null,null),Ba=za.exports,Va={name:"FieldEditor",components:{FormField:Ba},props:["data","settings","options","show_controls","title_badge"],data:function(){return{is_settings_missing:!1}},methods:{saveFunnelSequences:function(){this.$emit("save",1)},deleteFunnelSequences:function(){this.$emit("deleteSequence",1)},movePosition:function(t){this.$emit("movePosition",t)},compare:function(t,e,n){switch(e){case"=":return t===n;case"!=":return t!==n}},dependancyPass:function(t){if(t.dependency){var e=t.dependency.depends_on.split("/").reduce((function(t,e){return t[e]}),this.data);return!!this.compare(t.dependency.value,t.dependency.operator,e)}return!0},saveAndReload:function(){this.$emit("save_reload")},doNothing:function(){}},mounted:function(){this.settings?this.is_settings_missing=!1:(this.is_settings_missing=!0,this.settings={})}},Ua=Va,Ha=Object(a.a)(Ua,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form",{attrs:{data:t.data,"label-position":"top"},nativeOn:{submit:function(e){return e.preventDefault(),t.doNothing.apply(null,arguments)}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.settings.title,expression:"settings.title"}],staticClass:"fluentcrm_funnel_header"},[n("h3",[t._v("\n            "+t._s(t.settings.title)+"\n            "),t.title_badge?n("span",{staticClass:"ff_funnel_badge"},[t._v(t._s(t.title_badge))]):t._e()]),t._v(" "),n("p",{domProps:{innerHTML:t._s(t.settings.sub_title)}})]),t._v(" "),[t._t("after_header")],t._v(" "),t.settings.fields?n("div",{staticClass:"fc_funnerl_editor fc_block_white"},t._l(t.settings.fields,(function(e,i){return n("div",{key:i,class:e.wrapper_class},[t.dependancyPass(e)?[n("form-field",{attrs:{options:t.options,field:e},on:{save_reload:function(e){return t.saveAndReload()}},model:{value:t.data[i],callback:function(e){t.$set(t.data,i,e)},expression:"data[fieldKey]"}})]:t._e()],2)})),0):t._e(),t._v(" "),t.is_settings_missing?[n("h3",[t._v(t._s(t.$t("block_does_not_exist")))])]:t._e(),t._v(" "),t.show_controls?n("div",{staticClass:"fluentcrm-sequence_control"},[n("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.saveFunnelSequences(!1)}}},[t._v("\n            "+t._s(t.$t("Save Settings"))+"\n        ")]),t._v(" "),n("div",{staticClass:"fluentcrm_pull_right"},[n("el-button",{attrs:{size:"mini",icon:"el-icon-delete",type:"danger"},on:{click:function(e){return t.deleteFunnelSequences(!1)}}})],1)],1):t._e()],2)}),[],!1,null,null,null),Ga=Ha.exports,Wa={name:"blockChoice",props:["blocks","condition_type"],watch:{condition_type:function(){this.selectType="action"}},computed:{current_items:function(){var t=this;if("all"==this.selectType){var e={action:{title:this.$t("Actions"),categories:{}},benchmark:{title:this.$t("Goals / Benchmark"),categories:{}},conditional:{title:this.$t("Conditionals"),categories:{}}};return this.each(this.blocks,(function(t,n){if(e[t.type]){var i=t.category||"Other";e[t.type].categories[i]||(e[t.type].categories[i]={title:i,items:{}}),e[t.type].categories[i].items[n]=t}})),e}var n={title:"",categories:{}};return this.each(this.blocks,(function(e,i){if(e.type===t.selectType){var s=e.category||"Other";n.categories[s]||(n.categories[s]={title:s,items:{}}),n.categories[s].items[i]=e}})),{items:n}}},data:function(){return{selectType:"action"}},methods:{insert:function(t,e){if(e)return this.$alert('<p><strong>This block require pro version of FluentCRM</strong></p><p style="line-height: 22px; margin-bottom: 15px !important;">Please download and install FluentCRM Pro to activate this block</p><p><a class="el-button el-button--danger" :href="'+this.appVars.crm_pro_url+'" target="_blank" rel="noopener">Get FluentCRM Pro</a></p>',"Require FluentCRM Pro",{dangerouslyUseHTMLString:!0,showConfirmButton:!1}),!1;this.$emit("insert",t)}}},Ya=Object(a.a)(Wa,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_block_choice_wrapper"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:4}},[n("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b","default-active":t.selectType},on:{select:function(e){t.selectType=e}}},[n("el-menu-item",{attrs:{index:"action"}},[n("i",{staticClass:"fc-icon-action"}),t._v(" "),n("span",[t._v(t._s(t.$t("Actions")))])]),t._v(" "),t.condition_type?t._e():[n("el-menu-item",{attrs:{index:"benchmark"}},[n("i",{staticClass:"fc-icon-benchmark"}),t._v(" "),n("span",[t._v(t._s(t.$t("Goals")))])]),t._v(" "),n("el-menu-item",{attrs:{index:"all"}},[n("i",{staticClass:"el-icon el-icon-menu"}),t._v(" "),n("span",[t._v(t._s(t.$t("View All")))])])]],2)],1),t._v(" "),n("el-col",{attrs:{span:20}},[n("div",{staticClass:"fc_choice_blocks"},["action"==t.selectType?n("div",{staticClass:"fc_choice_header"},[n("h2",{staticClass:"fc_choice_title"},[t._v(t._s(t.$t("Action Blocks")))]),t._v(" "),n("p",[t._v(t._s(t.$t("_Bl_Actions_battywtf")))])]):"benchmark"==t.selectType?n("div",{staticClass:"fc_choice_header"},[n("h2",{staticClass:"fc_choice_title"},[t._v(t._s(t.$t("Goals / Trigger Blocks (Benchmark)")))]),t._v(" "),n("p",[t._v(t._s(t.$t("_Bl_These_aygityuwda")))])]):"conditional"==t.selectType?n("div",{staticClass:"fc_choice_header"},[n("h2",{staticClass:"fc_choice_title"},[t._v(t._s(t.$t("Condition Blocks")))]),t._v(" "),n("p",[t._v(t._s(t.$t("_Bl_Use_tbtcspfysc")))])]):"all"==t.selectType?n("div",{staticClass:"fc_choice_header"}):t._e(),t._v(" "),t._l(t.current_items,(function(e,i){return n("div",{key:i,class:["fc_choice_wrap_"+i,"fc_choice_selected_"+t.selectType]},[e.title?n("h2",{staticClass:"fc_choice_title"},[t._v(t._s(e.title))]):t._e(),t._v(" "),t._l(e.categories,(function(e,i){return n("div",{key:i,staticClass:"fc_choice_category"},[!e.title||"action"!=t.selectType&&"all"!=t.selectType?t._e():n("h3",[t._v(t._s(e.title))]),t._v(" "),n("el-row",{staticClass:"fc_choice_row",class:"fc_items_"+t.selectType,attrs:{gutter:20}},t._l(e.items,(function(e,i){return n("el-col",{key:i,staticClass:"fc_choice_block",attrs:{sm:24,xs:24,md:8,lg:8}},[n("div",{staticClass:"fc_choice_card",on:{click:function(n){return t.insert(i,e.is_pro)}}},[e.is_pro?n("div",{staticClass:"fc_pro_ribbon"},[t._v(t._s(t.$t("Pro")))]):t._e(),t._v(" "),n("h3",[n("i",{class:e.icon?e.icon:"fc-icon-trigger"}),t._v(" "+t._s(e.title))]),t._v(" "),n("p",{domProps:{innerHTML:t._s(e.description)}})])])})),1)],1)}))],2)}))],2)])],1)],1)}),[],!1,null,null,null),Ja=Ya.exports,Ka={name:"reportWidget",props:["stat"]},Qa=Object(a.a)(Ka,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.stat?n("div",{staticClass:"fluentcrm_block_stats mt-5"},[n("el-tag",{attrs:{size:"mini",effect:"plain"}},[n("i",{staticClass:"el-icon el-icon-user"}),t._v("\n        "+t._s(t.stat.count)+"\n    ")]),t._v(" "),n("el-tag",{attrs:{size:"mini",effect:"plain"}},[t._v("\n        "+t._s(t.stat.percent)+"%\n    ")]),t._v(" "),t.stat.drop_percent?n("el-tag",{attrs:{size:"mini",type:"danger",effect:"plain"}},[n("i",{staticClass:"el-icon el-icon-bottom"}),t._v("\n        "+t._s(t.stat.drop_percent)+"%\n    ")]):t._e()],1):t._e()}),[],!1,null,null,null),Za=Qa.exports,Xa={name:"DomPath",props:["from","to","label","side"],data:function(){return{css:{}}},methods:{generateCss:function(){var t=jQuery(this.$el).closest(".block_item_holder_conditional"),e=t.offset(),n=t.find("."+this.from).offset(),i=t.find("."+this.to).offset().top-n.top,s={position:"absolute",border:"2px solid #2f2925",width:"81px",left:("left"==this.side?n.left-e.left-72:n.left-e.left)+"px",top:"50px",height:i+"px",borderBottom:"0",padding:"8px 20px 0 0",fontWeight:"600",marginLeft:"0"};"left"==this.side?(s.borderRight="0",s.borderTopLeftRadius="20px"):(s.borderLeft="0",s.borderTopRightRadius="20px",s.padding="8px 0 0 20px",s.marginLeft="-2px"),this.css=s}},mounted:function(){var t=this;this.generateCss(),jQuery(window).on("resize",(function(){t.generateCss()}))}},tr=Xa,er=Object(a.a)(tr,(function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"fc_dom_path",class:"fc_dom_path_"+this.side,style:this.css},[this._v(this._s(this.label))])}),[],!1,null,null,null),nr=er.exports,ir={name:"ChildBlocks",components:{ReportWidget:Za,BlockChoice:Ja,FieldEditor:Ga},props:["blocks","block_fields","all_blocks","show_inline_report","getBlockDescription","getBlockIcon","stats","options"],data:function(){return{show_choice_modal:!1,editing_block:!1,editing_modal:!1,editing_index:0}},computed:{current_block_fields:function(){if(!this.editing_block)return{};var t=this.editing_block.action_name;return this.block_fields[t]}},methods:{addBlock:function(t){var e=this,n=JSON.parse(JSON.stringify(this.all_blocks[t]));n.action_name=t,this.blocks.push(n),this.show_choice_modal=!1;var i=this.blocks.length-1;this.editing_index=i,this.editing_block=JSON.parse(JSON.stringify(this.blocks[i])),this.$nextTick((function(){e.editing_modal=!0}))},save:function(){this.$set(this.blocks,this.editing_index,this.editing_block),this.editing_modal=!1,this.editing_block=!1,this.$emit("save")},deleteBlock:function(){this.blocks.splice(this.editing_index,1),this.editing_modal=!1,this.editing_block=!1,this.$emit("save")},setCurrentBlock:function(t,e){var n=this;this.editing_block=JSON.parse(JSON.stringify(t)),this.editing_index=e,this.$nextTick((function(){n.editing_modal=!0}))},moveToPosition:function(t,e){var n=e-1;"down"===t&&(n=e+1);var i=this.blocks,s=i[e];i.splice(e,1),i.splice(n,0,s),this.$set(this,"blocks",i),this.$emit("save")}}},sr=ir,ar=(n(317),Object(a.a)(sr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_child_blocks"},[t._l(t.blocks,(function(e,i){return n("div",{key:i,staticClass:"fluentcrm_block",class:"fluentcrm_block_"+e.action_name},[n("div",{staticClass:"fluentcrm_blockin",style:{backgroundImage:t.getBlockIcon(e)},on:{click:function(n){return t.setCurrentBlock(e,i)}}},[n("div",{staticClass:"fluentcrm_block_title"},[n("i",{class:t.getBlockIcon(e)}),t._v(" "+t._s(e.title)+"\n            ")]),t._v(" "),n("div",{staticClass:"fluentcrm_block_desc"},[t._v("\n                "+t._s(t.$t(t.getBlockDescription(e)))+"\n            ")]),t._v(" "),t.show_inline_report?n("report-widget",{attrs:{stat:t.stats[e.id]}}):t._e()],1),t._v(" "),n("el-button-group",{staticClass:"fc_block_controls"},[n("el-button",{attrs:{disabled:0==i,size:"mini",icon:"el-icon-arrow-up"},on:{click:function(e){return t.moveToPosition("up",i)}}}),t._v(" "),n("el-button",{attrs:{disabled:i+1==t.blocks.length,size:"mini",icon:"el-icon-arrow-down"},on:{click:function(e){return t.moveToPosition("down",i)}}})],1)],1)})),t._v(" "),n("el-button",{staticStyle:{width:"100%"},attrs:{icon:"el-icon-plus",type:"default"},on:{click:function(e){t.show_choice_modal=!0}}},[t._v("\n        "+t._s(t.$t("Add Action"))+"\n    ")]),t._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.$t("Add Action"),visible:t.show_choice_modal,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.show_choice_modal=e}}},[n("block-choice",{attrs:{condition_type:"action",blocks:t.all_blocks},on:{insert:t.addBlock}})],1),t._v(" "),n("el-dialog",{staticClass:"fc_funnel_block_modal",attrs:{"close-on-click-modal":!1,visible:t.editing_modal,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.editing_modal=e}}},[n("div",{staticClass:"fluentcrm_block_editor_body"},[t.editing_block&&t.editing_modal?[n("field-editor",{key:t.editing_index+"_"+t.editing_block.action_name,attrs:{title_badge:t.editing_block.type,show_controls:!0,data:t.editing_block.settings,options:t.options,is_first:0===t.editing_index,is_last:t.editing_index===t.blocks.length-1,settings:t.current_block_fields},on:{save:function(e){return t.save()},deleteSequence:function(e){return t.deleteBlock()}},scopedSlots:t._u([{key:"after_header",fn:function(){return[n("el-form-item",{attrs:{label:t.$t("Internal Label")}},[n("el-input",{attrs:{placeholder:t.$t("Internal Label")},model:{value:t.editing_block.title,callback:function(e){t.$set(t.editing_block,"title",e)},expression:"editing_block.title"}})],1)]},proxy:!0}],null,!1,4218782535)})]:t._e()],2)])],2)}),[],!1,null,null,null)),rr=ar.exports,or={name:"TriggerChanger",props:["funnel"],data:function(){return{funnel_data:JSON.parse(JSON.stringify(this.funnel)),triggers:[],fetching:!0,saving:!1}},methods:{getTriggers:function(){var t=this;this.fetching=!0,this.$get("funnels/triggers").then((function(e){t.triggers=e.triggers})).catch((function(e){t.handleError(e)})).finally((function(){t.fetching=!1}))},changeTrigger:function(){var t=this;this.saving=!0,this.$put("funnels/".concat(this.funnel.id,"/change-trigger"),{title:this.funnel_data.title,trigger_name:this.funnel_data.trigger_name}).then((function(e){t.$notify.success(e.message),t.$emit("refreshTrigger",e.funnel)})).catch((function(e){t.handleError(e)})).finally((function(){t.saving=!1}))}},mounted:function(){this.getTriggers()}},lr=or,cr=Object(a.a)(lr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fcrm_funnel_changer"},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],attrs:{data:t.funnel_data,"label-position":"top"}},[n("el-form-item",[n("template",{slot:"label"},[t._v("\n                "+t._s(t.$t("Select New Automation Trigger"))+"\n                "),n("p",[t._v(t._s(t.$t("You may change the trigger for this automation. Once you change, Please reconfigure the trigger settings")))])]),t._v(" "),n("el-select",{attrs:{placeholder:t.$t("Select")},model:{value:t.funnel_data.trigger_name,callback:function(e){t.$set(t.funnel_data,"trigger_name",e)},expression:"funnel_data.trigger_name"}},t._l(t.triggers,(function(t,e){return n("el-option",{key:e,attrs:{label:t.label,value:e}})})),1),t._v(" "),t.triggers[t.funnel_data.trigger_name]?n("p",{domProps:{innerHTML:t._s(t.triggers[t.funnel_data.trigger_name].description)}}):t._e()],2),t._v(" "),t.funnel_data.trigger_name!=t.funnel.trigger_name?[n("el-form-item",[n("template",{slot:"label"},[t._v("\n                    "+t._s(t.$t("Automation Trigger Title"))+"\n                ")]),t._v(" "),n("el-input",{attrs:{type:"text",placeholder:t.$t("Trigger Title")},model:{value:t.funnel_data.title,callback:function(e){t.$set(t.funnel_data,"title",e)},expression:"funnel_data.title"}})],2),t._v(" "),n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving,expression:"saving"}],attrs:{type:"primary"},on:{click:function(e){return t.changeTrigger()}}},[t._v(t._s(t.$t("Change Automation Trigger")))])]:t._e()],2)],1)}),[],!1,null,null,null),ur=cr.exports,_r=n(6),dr={name:"FunnelEditor",props:["funnel_id","options"],components:{FieldEditor:Ga,FormField:Ba,BlockChoice:Ja,ReportWidget:Za,DomPath:nr,ChildBlocks:rr,TriggerChanger:ur},data:function(){return{showPopTest:!1,funnel:!1,working:!1,blocks:{},actions:[],funnel_sequences:[],block_fields:{},loading:!1,current_block:!1,current_block_index:!1,is_editing_root:!0,show_choice_modal:!1,choice_modal_index:"last",show_blocK_editor:!1,is_new_funnel:"yes"===this.$route.query.is_new,stats:{},show_inline_report:!1,show_trigger_changer:!1}},computed:{funnelTitle:function(){var t=" ("+this.funnel.status+")";return"draft"==this.funnel.status&&(t='<span class="funnel_trigger_inst">'+t+"</span>"),this.funnel.title+t},action:function(){if(!this.actions)return{};var t=this.funnel.key;return this.actions[t]||{}},current_block_fields:function(){if(!this.current_block)return{};var t=this.current_block.action_name;return this.block_fields[t]}},methods:{fetchFunnel:function(){var t=this;this.loading=!0,this.$get("funnels/".concat(this.funnel_id),{with:["blocks","block_fields","funnel_sequences"]}).then((function(e){e.funnel.trigger?(t.funnel=e.funnel,t.block_fields=e.block_fields||{},t.blocks=e.blocks,t.actions=e.actions,window.fcrm_funnel_context_codes=e.composer_context_codes,t.funnel_sequences=e.funnel_sequences,t.current_block_index?(t.current_block=!1,t.$nextTick((function(){t.current_block=t.funnel_sequences[t.current_block_index]}))):t.is_new_funnel&&t.showRootSettings(),t.is_new_funnel=!1):t.$notify.error("Attached Trigger could not be found")})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1,t.working=!1}))},addBlock:function(t){var e=this,n=JSON.parse(JSON.stringify(this.blocks[t])),i=this.choice_modal_index;"last"===i?i=this.funnel_sequences.length:i+=1,n.settings||(n.settings={}),"conditional"==n.type&&(n.children={yes:[],no:[]}),n.action_name=t,this.funnel_sequences.splice(i,0,n),this.current_block=!1,this.current_block_index=!1,this.$nextTick((function(){e.current_block=e.funnel_sequences[i],e.current_block_index=i})),n.reload_on_insert&&this.saveAndFetchSettings(),this.show_blocK_editor=!0,this.show_choice_modal=!1},handleBlockAdd:function(t){this.choice_modal_index=t,this.show_choice_modal=!0},setCurrentBlock:function(t,e){this.is_editing_root=!1,this.current_block=t,this.current_block_index=e,this.show_blocK_editor=!0},deleteFunnelSequence:function(){var t=this.current_block_index;this.is_editing_root=!1,this.current_block=!1,this.current_block_index=!1,this.show_blocK_editor=!1,this.funnel_sequences.splice(t,1),this.saveFunnelSequences()},showRootSettings:function(){this.current_block=!1,this.current_block_index=!1,this.is_editing_root=!0,this.show_blocK_editor=!0},saveFunnelSequences:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(window.fluencrm_fallback_funnel_ajax)return this.fallbackSaveFunnelSequence(t,n);this.working=!0,this.$post("funnels/".concat(this.funnel.id,"/sequences"),{funnel_settings:JSON.stringify(this.funnel.settings),conditions:JSON.stringify(this.funnel.conditions),funnel_title:this.funnel.title,status:this.funnel.status,sequences:JSON.stringify(this.funnel_sequences)}).then((function(t){n?n(t):(e.$set(e,"funnel_sequences",t.sequences),e.$notify.success(t.message),e.show_blocK_editor=!1,e.current_block=!1,e.current_block_index=!1)})).catch((function(i){"rest_no_route"==i.code?(e.$notify.error("Trying fallback save. Please Wait..."),e.fallbackSaveFunnelSequence(t,n)):e.handleError(i)})).finally((function(){n||(e.working=!1)}))},fallbackSaveFunnelSequence:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];window.fluencrm_fallback_funnel_ajax=!0,this.working=!0,window.jQuery.post(window.ajaxurl,{action:"fluentcrm_save_funnel_sequence_ajax",funnel_id:this.funnel.id,funnel_settings:JSON.stringify(this.funnel.settings),conditions:JSON.stringify(this.funnel.conditions),funnel_title:this.funnel.title,status:this.funnel.status,sequences:JSON.stringify(this.funnel_sequences)}).then((function(t){n?n(t):(e.$set(e,"funnel_sequences",t.sequences),e.$notify.success(t.message),e.show_blocK_editor=!1,e.current_block=!1,e.current_block_index=!1)})).catch((function(t){console.log(t),e.handleError(t)})).finally((function(){n||(e.working=!1)}))},saveFunnelBlockSequence:function(){var t=this;this.$set(this.funnel_sequences,this.current_block_index,this.current_block),this.$nextTick((function(){t.saveFunnelSequences(!1)}))},moveToPosition:function(t,e){var n=e-1;"down"===t&&(n=e+1);var i=this.funnel_sequences,s=i[e];i.splice(e,1),i.splice(n,0,s),this.$set(this,"funnel_sequences",i),this.saveFunnelSequences()},isEmpty:_r,getBlockDescription:function(t){var e="";switch(t.action_name){case"send_custom_email":_r(t.settings.campaign.email_subject)||(e=t.settings.campaign.email_subject);break;case"fluentcrm_wait_times":"yes"==t.settings.is_timestamp_wait?e="Wait till "+t.settings.wait_date_time:_r(t.settings.wait_time_unit)||(e="Wait "+t.settings.wait_time_amount+" "+t.settings.wait_time_unit);break;case"add_contact_to_list":case"detach_contact_from_list":case"fcrm_has_contact_list":if(!_r(t.settings.lists)){var n=[];this.each(this.options.lists,(function(e){-1!==t.settings.lists.indexOf(e.id.toString())&&n.push(e.title)})),e=n.join(", ")}break;case"add_contact_to_tag":case"detach_contact_from_tag":case"fcrm_has_contact_tag":_r(t.settings.tags)||(e=this.getTagNames(t.settings.tags));break;case"send_campaign_email":if(!_r(t.settings.campaign_id)){var i=[];this.each(this.options.campaigns,(function(e){t.settings.campaign_id===e.id&&i.push(e.title)})),e=i.join(", ")}break;case"add_to_email_sequence":if(!_r(t.settings.sequence_id)){e="Add To Sequence: ";var s=[];this.each(this.options.email_sequences,(function(e){t.settings.sequence_id===e.id&&s.push(e.title)})),e=s.join(", ")}break;default:e=t.description}return e||t.description},getTriggerDescription:function(t){var e="";switch(t.trigger_name){case"fluentcrm_contact_added_to_tags":case"fluentcrm_contact_removed_from_tags":if(_r(t.settings.tags))return'<span class="funnel_trigger_inst">Set Tag</span>';var n=[];this.each(this.options.tags,(function(e){-1!=t.settings.tags.indexOf(e.id.toString())&&n.push(e.title)})),e=n.join(", ");break;case"fluentcrm_contact_added_to_lists":case"fluentcrm_contact_removed_from_lists":if(_r(t.settings.lists))return'<span class="funnel_trigger_inst">Set Lists</span>';var i=[];this.each(this.options.lists,(function(e){-1!==t.settings.lists.indexOf(e.id.toString())&&i.push(e.title)})),e=i.join(", ");break;default:e=t.trigger.label}return e||t.trigger.label},getTagNames:function(t){var e=[];return this.each(this.options.tags,(function(n){-1!=t.indexOf(n.id.toString())&&e.push(n.title)})),e.join(", ")},saveAndFetchSettings:function(){var t=this;this.$nextTick((function(){t.saveFunnelSequences(!1,(function(e){t.fetchFunnel()}))}))},gotoReports:function(){this.$router.push({name:"funnel_subscribers",params:{funnel_id:this.funnel_id}})},getBlockIcon:function(t){var e=t.action_name;return this.blocks[e]&&this.blocks[e].icon?this.blocks[e].icon:""},getStats:function(){var t=this;this.$get("funnels/".concat(this.funnel_id,"/report")).then((function(e){var n=e.stats.metrics,i={};t.each(n,(function(t){i[t.sequence_id]=t})),t.stats=i})).catch((function(e){t.handleError(e)})).finally((function(){}))},getBlockClasses:function(t,e){var n=["fc_block_type_"+t.type,"fluentcrm_block_"+t.action_name];return"required"==t.settings.type&&n.push("fc_funnel_benchmark_required"),this.current_block_index===e&&n.push("fluentcrm_block_active"),n},showEditTriggerModal:function(){this.show_trigger_changer=!0},handleTriggerChanged:function(){this.show_trigger_changer=!1,this.is_new_funnel=!0,this.fetchFunnel()},handleConditionAdd:function(t){return this.has_campaign_pro?this.blocks.funnel_condition?(this.choice_modal_index=t,void this.addBlock("funnel_condition")):(this.$notify.error("Condition block is not available"),!1):(this.$alert('<p><strong>This block require pro version of FluentCRM</strong></p><p style="line-height: 22px; margin-bottom: 15px !important;">Please download and install FluentCRM Pro to activate this block</p><p><a class="el-button el-button--danger" :href="'+this.appVars.crm_pro_url+'" target="_blank" rel="noopener">Get FluentCRM Pro</a></p>',"Require FluentCRM Pro",{dangerouslyUseHTMLString:!0,showConfirmButton:!1}),!1)}},mounted:function(){this.fetchFunnel(),this.getStats(),this.changeTitle("Edit Funnel")}},pr=Object(a.a)(dr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_settings_wrapper"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"funnels"}}},[t._v("\n                    "+t._s(t.$t("Automation Funnel"))+"\n                ")]),t._v(" "),t.funnel?n("el-breadcrumb-item",[n("el-popover",{attrs:{placement:"right",title:t.funnel.trigger.label,width:"300",trigger:"hover",content:t.funnel.trigger.description}},[n("span",{attrs:{slot:"reference"},domProps:{innerHTML:t._s(t.funnelTitle)},slot:"reference"})])],1):t._e()],1)],1),t._v(" "),t.funnel?n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-button",{staticClass:"mr-5",staticStyle:{padding:"6px 15px 7px"},attrs:{size:"small",icon:"el-icon-setting"},on:{click:function(e){return t.showEditTriggerModal()}}}),t._v(" "),n("el-checkbox",{attrs:{size:"mini",border:""},model:{value:t.show_inline_report,callback:function(e){t.show_inline_report=e},expression:"show_inline_report"}},[t._v(t._s(t.$t("Stats")))]),t._v(" "),n("span",{staticClass:"mr-5 ml-5",staticStyle:{"vertical-align":"middle"}},[t._v(t._s(t.$t("Status"))+": "+t._s(t.funnel.status))]),t._v(" "),n("el-switch",{staticClass:"mr-5",attrs:{"active-value":t.$t("published"),"inactive-value":t.$t("draft")},on:{change:function(e){return t.saveFunnelSequences(!0)}},model:{value:t.funnel.status,callback:function(e){t.$set(t.funnel,"status",e)},expression:"funnel.status"}}),t._v(" "),"published"==t.funnel.status?n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.gotoReports()}}},[t._v("\n                "+t._s(t.$t("View Reports"))+"\n            ")]):t._e()],1):t._e()]),t._v(" "),t.funnel?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.working,expression:"working"}],staticClass:"fluentcrm_body fluentcrm_tile_bg"},[n("div",{staticClass:"fluentcrm_blocks_container"},[n("div",{staticClass:"fluentcrm_blocks_wrapper"},[n("div",{staticClass:"fluentcrm_blocks"},[n("div",{staticClass:"block_item_holder"},[n("div",{staticClass:"fluentcrm_block",class:t.is_editing_root?"fluentcrm_block_active":""},[t.appVars.icons.trigger_icon?n("div",{staticClass:"fluentcrm_blockin",on:{click:function(e){return t.showRootSettings()}}},[n("div",{staticClass:"fluentcrm_block_title"},[n("i",{class:t.appVars.icons.trigger_icon}),t._v(" "+t._s(t.funnel.title)+"\n                                ")]),t._v(" "),n("div",{staticClass:"fluentcrm_block_desc",domProps:{innerHTML:t._s(t.getTriggerDescription(t.funnel))}}),t._v(" "),t.show_inline_report?n("report-widget",{staticClass:"fluentcrm_block_stats mt-5",attrs:{stat:t.stats[0]}}):t._e()],1):t._e()]),t._v(" "),n("div",{staticClass:"block_item_add"},[n("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[n("div",{staticClass:"fc_action_selector"},[n("ul",[n("li",{on:{click:function(e){return t.handleBlockAdd(-1)}}},[n("h4",[t._v(t._s(t.$t("Add Action / Goal")))]),t._v(" "),n("p",[t._v(t._s(t.$t("Run Action Task to do particular task on the contact")))])]),t._v(" "),n("li",{on:{click:function(e){return t.handleConditionAdd(-1)}}},[n("h4",[t._v(t._s(t.$t("Conditional Action")))]),t._v(" "),n("p",[t._v(t._s(t.$t("Add Conditional Action, apply rules and split your automation funnel")))])])])]),t._v(" "),n("div",{staticClass:"fc_show_plus",attrs:{slot:"reference"},on:{click:function(e){return t.handleBlockAdd(-1)}},slot:"reference"},[n("i",{staticClass:"el-icon el-icon-circle-plus-outline"})])])],1)]),t._v(" "),t._l(t.funnel_sequences,(function(e,i){return n("div",{key:i,staticClass:"block_item_holder",class:"block_item_holder_"+e.type},[n("div",{staticClass:"fluentcrm_block",class:t.getBlockClasses(e,i)},[n("div",{staticClass:"fluentcrm_blockin",on:{click:function(n){return t.setCurrentBlock(e,i)}}},[n("div",{staticClass:"fluentcrm_block_title"},[n("i",{class:t.getBlockIcon(e)}),t._v(" "+t._s(e.title)+"\n                                ")]),t._v(" "),n("div",{staticClass:"fluentcrm_block_desc"},[t._v("\n                                    "+t._s(t.getBlockDescription(e))+"\n                                ")]),t._v(" "),t.show_inline_report?n("report-widget",{staticClass:"fluentcrm_block_stats mt-5",attrs:{stat:t.stats[e.id]}}):t._e()],1),t._v(" "),n("el-button-group",{staticClass:"fc_block_controls"},[n("el-button",{attrs:{disabled:0==i,size:"mini",icon:"el-icon-arrow-up"},on:{click:function(e){return t.moveToPosition("up",i)}}}),t._v(" "),n("el-button",{attrs:{disabled:i+1==t.funnel_sequences.length,size:"mini",icon:"el-icon-arrow-down"},on:{click:function(e){return t.moveToPosition("down",i)}}})],1),t._v(" "),"conditional"===e.type?[n("span",{staticClass:"fc_b_yes_node"}),t._v(" "),n("span",{staticClass:"fc_b_no_node"})]:t._e(),t._v(" "),n("span")],2),t._v(" "),"conditional"==e.type?[n("dom-path",{attrs:{side:"left",label:t.$t("No"),from:"fc_b_no_node",to:"fc_b_no_node_point"}}),t._v(" "),n("dom-path",{attrs:{side:"right",label:t.$t("Yes"),from:"fc_b_yes_node",to:"fc_b_yes_node_point"}}),t._v(" "),n("div",{staticClass:"block_conditional_wrapper"},[n("div",{staticClass:"block_cond_holder block_cond_no"},[n("span",{staticClass:"fc_b_no_node_point"}),t._v(" "),n("div",{staticClass:"block_cond_inner"},[n("child-blocks",{attrs:{all_blocks:t.blocks,blocks:e.children.no,show_inline_report:t.show_inline_report,getBlockDescription:t.getBlockDescription,getBlockIcon:t.getBlockIcon,stats:t.stats,options:t.options,block_fields:t.block_fields},on:{save:function(e){return t.saveFunnelSequences()}}})],1)]),t._v(" "),n("div",{staticClass:"block_cond_holder block_cond_yes"},[n("span",{staticClass:"fc_b_yes_node_point"}),t._v(" "),n("div",{staticClass:"block_cond_inner"},[n("child-blocks",{attrs:{all_blocks:t.blocks,blocks:e.children.yes,show_inline_report:t.show_inline_report,getBlockDescription:t.getBlockDescription,getBlockIcon:t.getBlockIcon,stats:t.stats,options:t.options,block_fields:t.block_fields},on:{save:function(e){return t.saveFunnelSequences()}}})],1)])]),t._v(" "),n("div",{staticClass:"fc_cond_border_no_top"})]:t._e(),t._v(" "),n("div",{staticClass:"block_item_add"},[n("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[n("div",{staticClass:"fc_action_selector"},[n("ul",[n("li",{on:{click:function(e){return t.handleBlockAdd(i)}}},[n("h4",[t._v(t._s(t.$t("Add Action / Goal")))]),t._v(" "),n("p",[t._v(t._s(t.$t("Run Action Task to do particular task on the contact")))])]),t._v(" "),n("li",{on:{click:function(e){return t.handleConditionAdd(i)}}},[n("h4",[t._v(t._s(t.$t("Conditional Action")))]),t._v(" "),n("p",[t._v(t._s(t.$t("Add Conditional Action, apply rules and split your automation funnel")))])])])]),t._v(" "),n("div",{staticClass:"fc_show_plus",attrs:{slot:"reference"},on:{click:function(e){return t.handleBlockAdd(i)}},slot:"reference"},[n("i",{staticClass:"el-icon el-icon-circle-plus-outline"})])])],1)],2)}))],2)])])]):t._e(),t._v(" "),n("el-dialog",{staticClass:"fc_funnel_block_modal",attrs:{"close-on-click-modal":!1,visible:t.show_blocK_editor,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.show_blocK_editor=e}}},[n("div",{staticClass:"fluentcrm_block_editor_body"},[t.current_block?[n("field-editor",{key:t.current_block_index+"_"+t.current_block.action_name,attrs:{title_badge:t.trans(t.current_block.type),show_controls:!0,data:t.current_block.settings,options:t.options,is_first:0===t.current_block_index,is_last:t.current_block_index===t.funnel_sequences.length-1,settings:t.current_block_fields},on:{save:function(e){return t.saveFunnelBlockSequence()},deleteSequence:function(e){return t.deleteFunnelSequence()}},scopedSlots:t._u([{key:"after_header",fn:function(){return[n("el-form-item",{attrs:{label:t.$t("Internal Label")}},[n("el-input",{attrs:{placeholder:t.$t("Internal Label")},model:{value:t.current_block.title,callback:function(e){t.$set(t.current_block,"title",e)},expression:"current_block.title"}})],1),t._v(" "),"conditional"==t.current_block.type?n("el-form-item",{attrs:{label:t.$t("Internal Description")}},[n("el-input",{attrs:{type:"textarea",placeholder:t.$t("Internal Description")},model:{value:t.current_block.description,callback:function(e){t.$set(t.current_block,"description",e)},expression:"current_block.description"}})],1):t._e()]},proxy:!0}],null,!1,3330629171)})]:t.is_editing_root?[n("field-editor",{key:"is_editing_root",attrs:{show_controls:!1,options:t.options,data:t.funnel.settings,settings:t.funnel.settingsFields},on:{save_reload:function(e){return t.saveAndFetchSettings()}},scopedSlots:t._u([{key:"after_header",fn:function(){return[n("el-form-item",{attrs:{label:t.$t("Automation Name")}},[n("el-input",{attrs:{placeholder:t.$t("Automation Name")},model:{value:t.funnel.title,callback:function(e){t.$set(t.funnel,"title",e)},expression:"funnel.title"}})],1)]},proxy:!0}])}),t._v(" "),t.isEmpty(t.funnel.conditions)?t._e():n("el-form",{staticClass:"fc_funnel_conditions fc_block_white",attrs:{"label-position":"top",data:t.funnel.conditions}},[n("h3",[t._v(t._s(t.$t("Conditions")))]),t._v(" "),t._l(t.funnel.conditionFields,(function(e,i){return n("div",{key:i},[n("form-field",{key:i,attrs:{field:e,options:t.options},on:{save_reload:function(e){return t.saveAndFetchSettings()}},model:{value:t.funnel.conditions[i],callback:function(e){t.$set(t.funnel.conditions,i,e)},expression:"funnel.conditions[conditionKey]"}})],1)}))],2),t._v(" "),n("div",{staticClass:"fluentcrm-text-right"},[n("el-button",{attrs:{size:"small",type:"success"},on:{click:function(e){return t.saveFunnelSequences(!1)}}},[t._v("\n                        "+t._s(t.$t("Save Settings"))+"\n                    ")])],1)]:t._e()],2)]),t._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.$t("Add Action / Goal"),visible:t.show_choice_modal,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.show_choice_modal=e}}},[n("block-choice",{attrs:{blocks:t.blocks},on:{insert:t.addBlock}})],1),t._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,title:t.$t("Edit Primary Automation Trigger"),visible:t.show_trigger_changer,"append-to-body":!0,width:"60%"},on:{"update:visible":function(e){t.show_trigger_changer=e}}},[t.show_trigger_changer?n("trigger-changer",{attrs:{funnel:t.funnel},on:{refreshTrigger:function(e){return t.handleTriggerChanged()}}}):t._e()],1)],1)}),[],!1,null,null,null).exports,mr={name:"ContactCardPop",props:{subscriber:{type:Object,default:function(){return{}}},display_key:{type:String,default:function(){return"email"}},placement:{type:String,default:function(){return"top-start"}},trigger_type:{type:String,default:function(){return"click"}}},methods:{viewProfile:function(){}}},fr=Object(a.a)(mr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-popover",{staticClass:"fc_dark",attrs:{placement:t.placement,width:"400",trigger:t.trigger_type}},[n("div",{staticClass:"fc_profile_card fluentcrm_profile_header fc_profile_pop"},[n("div",{staticClass:"fluentcrm_profile-photo"},[n("img",{attrs:{src:t.subscriber.photo}})]),t._v(" "),n("div",{staticClass:"profile-info"},[n("div",{staticClass:"profile_title"},[n("h3",[t._v(t._s(t.subscriber.full_name))]),t._v(" "),n("div",{staticClass:"profile_action"},[n("el-tag",{attrs:{slot:"reference",size:"mini"},slot:"reference"},[t._v(t._s(t._f("ucFirst")(t.subscriber.status)))])],1)]),t._v(" "),n("p",[t._v(t._s(t.subscriber.email)+" "),t.subscriber.user_id&&t.subscriber.user_edit_url?n("span",[t._v(" | "),n("a",{attrs:{target:"_blank",href:t.subscriber.user_edit_url}},[t._v(t._s(t.subscriber.user_id)+" "),n("span",{staticClass:"dashicons dashicons-external"})])]):t._e()]),t._v(" "),n("p",[t._v(t._s(t.$t("Added"))+" "+t._s(t._f("nsHumanDiffTime")(t.subscriber.created_at)))]),t._v(" "),n("router-link",{attrs:{to:{name:"subscriber",params:{id:t.subscriber.id}}}},[t._v("\n                "+t._s(t.$t("View Full Profile"))+"\n            ")])],1)]),t._v(" "),n("span",{class:"fc_trigger_"+t.trigger_type,attrs:{slot:"reference"},slot:"reference"},["photo"==t.display_key?[n("img",{staticClass:"fc_contact_photo",attrs:{title:"Contact ID: "+t.subscriber.id,src:t.subscriber.photo}})]:[t._v("\n             "+t._s(t.subscriber[t.display_key])+"\n        ")]],2)])}),[],!1,null,null,null).exports,hr=n(170),vr=n.n(hr),gr={name:"individualProgress",props:["sequences","funnel_subscriber","funnel"],computed:{keyedMetrics:function(){return vr()(this.funnel_subscriber.metrics,"sequence_id")},timelines:function(){var t=this,e="Entrance ("+this.funnel.title+")";"pending"===this.funnel_subscriber.status?e+=this.$t("_In_Wfdoc"):"waiting"===this.funnel_subscriber.status&&(e+=this.$t("_In_Wfna"));var n=[{content:e,timestamp:this.nsHumanDiffTime(this.funnel_subscriber.created_at),size:"large",type:"primary",icon:"el-icon-more"}];return console.log(this.sequences),this.each(this.sequences,(function(e,i){var s=t.keyedMetrics[e.id]||{},a=e.title;"pending"===a?a+=t.$t("_In_Wfdc"):"waiting"===a&&(a+=t.$t("_In_Wfna")),e.condition_type&&(a+=" ( "+t.$t("Condition:")+" "+e.condition_type+")"),n.push({content:a,timestamp:t.nsHumanDiffTime(s.created_at),color:t.getTimelineColor(s)})})),n}},methods:{getTimelineColor:function(t){return t.status&&"completed"===t.status?"#0bbd87":""}}},br=Object(a.a)(gr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_individual_progress"},[n("el-timeline",t._l(t.timelines,(function(e,i){return n("el-timeline-item",{key:i,attrs:{icon:e.icon,type:e.type,color:e.color,size:e.size,timestamp:e.timestamp}},[t._v("\n            "+t._s(e.content)+"\n        ")])})),1)],1)}),[],!1,null,null,null).exports,yr={name:"funnel-reporting-bar",props:["funnel_id","stats"],components:{GrowthChart:{extends:window.VueChartJs.Bar,mixins:[window.VueChartJs.mixins.reactiveProp],props:["stats","maxCumulativeValue"],data:function(){return{options:{responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{id:"byDate",type:"linear",position:"left",gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0,userCallback:function(t,e,n){if(Math.floor(t)===t)return t}}},{id:"byCumulative",type:"linear",position:"right",gridLines:{drawOnChartArea:!0},ticks:{beginAtZero:!0,userCallback:function(t,e,n){if(Math.floor(t)===t)return t}}}],xAxes:[{gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0,autoSkip:!1,maxTicksLimit:100}}]},drawBorder:!1,layout:{padding:{left:0,right:0,top:0,bottom:20}}}}},methods:{},mounted:function(){this.renderChart(this.chartData,this.options)}}},data:function(){return{fetching:!0,chartData:{},maxCumulativeValue:0}},computed:{},methods:{setupChartItems:function(){var t=[],e={label:this.$t("Funnel Items"),yAxisID:"byDate",backgroundColor:"rgba(81, 52, 178, 0.5)",borderColor:"#b175eb",data:[],fill:!0,gridLines:{display:!1}},n={label:this.$t("Line"),backgroundColor:"rgba(55, 162, 235, 0.1)",borderColor:"#37a2eb",data:[],yAxisID:"byCumulative",type:"line"};e.backgroundColor=this.getBackgroundColors(this.stats.metrics.length);var i=0;this.each(this.stats.metrics,(function(s,a){e.data.push(s.count),t.push([s.label,s.percent+"%"]),n.data.push(s.count),s.count>i&&(i=s.count),"benchmark"===s.type&&(e.backgroundColor[a]="red")})),this.maxCumulativeValue=i+10,this.chartData={labels:t,datasets:[e,n]},this.fetching=!1},getBackgroundColors:function(t){return["#255A65","#22666C","#227372","#258077","#2D8C79","#3A997A","#4BA579","#5EB177","#73BD73","#8AC870","#A4D36C","#BFDC68","#DBE566","#544b66","#4f30c6","#190b1f","#6f23a7","#2d2134","#483ba6","#0e0d2c","#7a2d88","#181837","#2d187b","#2e2d4e","#491963","#1e052c","#3d3e8a","#2d163c","#644378","#210a50","#3f2c5b","#19164b","#461748"].slice(0,t)}},mounted:function(){this.setupChartItems()}},wr=Object(a.a)(yr,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:this.fetching,expression:"fetching"}],staticStyle:{"min-height":"400px"}},[e("growth-chart",{attrs:{maxCumulativeValue:this.maxCumulativeValue,"chart-data":this.chartData}})],1)}),[],!1,null,null,null).exports,$r={name:"FunnelTextReport",props:["stats","funnel"],data:function(){return{colors:[{color:"#f56c6c",percentage:20},{color:"#e6a23c",percentage:40},{color:"#5cb87a",percentage:60},{color:"#1989fa",percentage:80},{color:"#6f7ad3",percentage:100}]}},methods:{format:function(t){return function(){return"".concat(t,"%")}}},computed:{lastItem:function(){return!!this.stats.metrics.length&&this.stats.metrics[this.stats.metrics.length-1]}},mounted:function(){}},kr=(n(355),{name:"FunnelEmails",props:["funnel_id"],components:{CampaignEmails:ke,LinkMetrics:Ee},data:function(){return{email_sequences:[],fetching:!1,show_email_report:!1,show_email_report_id:!1,link_clicks_modal:!1,link_click_id:!1}},methods:{fetchEmailSequences:function(){var t=this;this.fetching=!0,this.$get("funnels/".concat(this.funnel_id,"/email_reports")).then((function(e){t.email_sequences=e.email_sequences})).catch((function(e){t.handleError(e)})).finally((function(){t.fetching=!1}))},getPercent:function(t,e){return e&&t?parseFloat(t/e*100).toFixed(2)+"%":"--"},showEmailReport:function(t){this.show_email_report_id=t,this.show_email_report=!0},showLinkReport:function(t){this.link_click_id=t,this.link_clicks_modal=!0}},mounted:function(){this.fetchEmailSequences()}}),xr={name:"FunnelSubscribers",props:["funnel_id"],components:{Pagination:b,ContactCard:fr,IndividualProgress:br,FunnelChart:wr,FunnelTextReport:Object(a.a)($r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_individual_progress"},[n("el-row",{attrs:{gutter:20}},[t._l(t.stats.metrics,(function(e,i){return n("el-col",{key:i,staticClass:"fc_progress_card",attrs:{md:6,xs:24,lg:6,sm:12}},[n("div",{staticClass:"fc_progress_item",class:"fc_sequence_type_"+e.type},[n("el-progress",{attrs:{type:"circle",percentage:e.percent>100?100:e.percent,format:t.format(e.percent_text),color:t.colors}}),t._v(" "),n("h3",[t._v(t._s(e.label))]),t._v(" "),n("div",{staticClass:"stats_badges"},[n("span",[t._v(t._s(t.$t("Total Contact"))+": "+t._s(e.count))]),t._v(" "),"root"!=e.type?n("span",[t._v(t._s(t.$t("Drop"))+": "+t._s(e.drop_percent)+"%")]):t._e()])],1)])})),t._v(" "),t.lastItem?n("el-col",{staticClass:"fc_progress_card",attrs:{md:6,xs:24,lg:6,sm:12}},[n("div",{staticClass:"fc_progress_item fc_sequence_type_result"},[n("el-progress",{attrs:{type:"circle",percentage:100,status:"success"}}),t._v(" "),n("h3",[t._v(t._s(t.$t("Overall Conversion Rate"))+": "+t._s(t.lastItem.percent)+"%")]),t._v(" "),n("div",{staticClass:"stats_badges"},[n("span",[t._v(t._s(t.$t("(y)")))])])],1)]):t._e()],2)],1)}),[],!1,null,null,null).exports,Confirm:f,FunnelEmails:Object(a.a)(kr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],staticClass:"fc_email_reports"},[n("div",{staticClass:"campaigns-table"},[t.email_sequences.length?n("div",{staticClass:"fluentcrm_title_cards"},t._l(t.email_sequences,(function(e){return n("div",{key:e.id,staticClass:"fluentcrm_title_card"},[n("el-row",{staticClass:"d-flex items-center justify-between",attrs:{gutter:20}},[n("el-col",{attrs:{sm:24,md:12}},[n("div",{staticClass:"fluentcrm_card_desc"},[n("div",{staticClass:"fluentcrm_card_title",staticStyle:{cursor:"pointer"},on:{click:function(n){return t.showEmailReport(e.campaign.id)}}},[t._v("\n                                "+t._s(e.title)+" ( "+t._s(e.campaign.subject)+" )\n                            ")]),t._v(" "),n("div",{staticClass:"fluentcrm_card_actions fluentcrm_card_actions_hidden"},[n("el-button",{attrs:{icon:"el-icon-data-analysis",type:"text",size:"mini"},on:{click:function(n){return t.showEmailReport(e.campaign.id)}}},[t._v(t._s(t.$t("Show Individual Emails")))])],1)])]),t._v(" "),n("el-col",{attrs:{sm:24,md:12}},[n("div",{staticClass:"fluentcrm_card_stats"},[n("ul",{staticClass:"fluentcrm_inline_stats"},[n("li",{staticStyle:{cursor:"pointer"},on:{click:function(n){return t.showEmailReport(e.campaign.id)}}},[n("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(e.campaign.stats.sent||"--"))]),t._v(" "),n("p",[t._v(t._s(t.$t("Sent")))])]),t._v(" "),n("li",{attrs:{title:e.campaign.stats.views}},[n("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(t.getPercent(e.campaign.stats.views,e.campaign.stats.sent)))]),t._v(" "),n("p",[t._v(t._s(t.$t("Opened")))])]),t._v(" "),n("li",{staticStyle:{cursor:"pointer"},attrs:{title:e.campaign.stats.clicks},on:{click:function(n){return t.showLinkReport(e.campaign.id)}}},[n("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(t.getPercent(e.campaign.stats.clicks,e.campaign.stats.sent)))]),t._v(" "),n("p",[t._v(t._s(t.$t("Clicked")))])]),t._v(" "),n("li",{attrs:{title:e.campaign.stats.unsubscribers}},[n("span",{staticClass:"fluentcrm_digit"},[t._v("\n                                        "+t._s(t.getPercent(e.campaign.stats.unsubscribers,e.campaign.stats.sent))+"\n                                    ")]),t._v(" "),n("p",[t._v(t._s(t.$t("Unsubscribed")))])]),t._v(" "),e.campaign.stats.revenue?n("li",[n("span",{staticClass:"fluentcrm_digit"},[t._v("\n                                        "+t._s(e.campaign.stats.revenue.total)+"\n                                    ")]),t._v(" "),n("p",[t._v(t._s(e.campaign.stats.revenue.label))])]):t._e()])])])],1)],1)})),0):n("h3",[t._v(t._s(t.$t("Sorry, No emails found in this automation")))])]),t._v(" "),n("el-dialog",{attrs:{title:t.$t("View Campaign Emails"),width:"60%","append-to-body":!0,visible:t.show_email_report},on:{closed:function(e){t.show_email_report_id=""},"update:visible":function(e){t.show_email_report=e}}},[t.show_email_report_id?n("campaign-emails",{attrs:{campaign_id:t.show_email_report_id}}):t._e()],1),t._v(" "),n("el-dialog",{attrs:{title:t.$t("Link Metrics"),width:"60%","append-to-body":!0,visible:t.link_clicks_modal},on:{closed:function(e){t.link_click_id=""},"update:visible":function(e){t.link_clicks_modal=e}}},[t.link_click_id?n("link-metrics",{attrs:{campaign_id:t.link_click_id,hide_title:!0}}):t._e()],1)],1)}),[],!1,null,null,null).exports},data:function(){return{funnel:{},subscribers:[],loading:!1,pagination:{total:0,per_page:10,current_page:1},sequences:{},stats:{metrics:[],total_revenue:0,revenue_currency:"USD"},visualization_type:"chart",search:"",deleting:!1,updating:!1,selectedSubscribers:[]}},methods:{fetchSubscribers:function(){var t=this;this.loading=!0,this.$get("funnels/".concat(this.funnel_id,"/subscribers"),{per_page:this.pagination.per_page,page:this.pagination.current_page,with:["funnel","sequences"],search:this.search}).then((function(e){t.subscribers=e.funnel_subscribers.data,t.pagination.total=e.funnel_subscribers.total,t.funnel=e.funnel,t.sequences=e.sequences})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},fetchReport:function(){var t=this;this.$get("funnels/".concat(this.funnel_id,"/report")).then((function(e){t.stats=e.stats})).catch((function(e){t.handleError(e)})).finally((function(){}))},getSequenceName:function(t){if(t=parseInt(t),this.sequences[t]){var e=this.sequences[t];return e.sequence+" - "+e.title}return"-"},rowStatusClass:function(t){return"fc_table_row_"+t.row.status},removeFromFunnel:function(t){var e=this;this.deleting=!0,this.$del("funnels/".concat(this.funnel_id,"/subscribers"),{subscriber_ids:[t]}).then((function(t){e.$notify.success(t.message),e.fetchSubscribers()})).catch((function(t){e.handleError(t)})).finally((function(){e.deleting=!1}))},bulkRemove:function(){var t=this;if(!this.selectedSubscribers.length)return this.$notify.error(this.$t("Please select subscribers first")),!1;this.deleting=!0,this.$del("funnels/".concat(this.funnel_id,"/subscribers"),{subscriber_ids:this.selectedSubscribers}).then((function(e){t.$notify.success(e.message),t.selectedSubscribers=[],t.fetchSubscribers()})).catch((function(e){t.handleError(e)})).finally((function(){t.deleting=!1}))},changeFunnelSubscriptionStatus:function(t,e){var n=this;this.updating=!0,this.$put("funnels/".concat(this.funnel_id,"/subscribers/").concat(t,"/status"),{status:e}).then((function(t){n.$notify.success(t.message),n.fetchSubscribers()})).catch((function(t){n.handleError(t)})).finally((function(){n.updating=!1}))},onSelection:function(t){var e=[];this.each(t,(function(t){e.push(t.subscriber_id)})),this.selectedSubscribers=e}},mounted:function(){this.fetchSubscribers(),this.fetchReport(),this.changeTitle("Funnel Report")}},Cr=(n(357),Object(a.a)(xr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_settings_wrapper"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"funnels"}}},[t._v("\n                    "+t._s(t.$t("Automation Funnels"))+"\n                ")]),t._v(" "),n("el-breadcrumb-item",{attrs:{to:{name:"edit_funnel",params:{funnel_id:t.funnel_id}}}},[t._v("\n                    "+t._s(t.funnel.title)+"\n                ")]),t._v(" "),n("el-breadcrumb-item",[t._v("\n                    "+t._s(t.$t("Subscribers"))+"\n                ")])],1)],1)]),t._v(" "),t.stats.metrics.length?n("div",{staticClass:"fluentcrm_body fc_chart_box",staticStyle:{padding:"20px"}},[n("div",{staticClass:"text-align-center fluentcrm_pad_b_30"},[n("el-radio-group",{attrs:{size:"small"},model:{value:t.visualization_type,callback:function(e){t.visualization_type=e},expression:"visualization_type"}},[n("el-radio-button",{attrs:{label:"chart"}},[t._v(t._s(t.$t("Chart Report")))]),t._v(" "),n("el-radio-button",{attrs:{label:"text"}},[t._v(t._s(t.$t("Step Report")))]),t._v(" "),n("el-radio-button",{attrs:{label:"emails"}},[t._v(t._s(t.$t("Emails Analytics")))])],1)],1),t._v(" "),"chart"==t.visualization_type?n("funnel-chart",{attrs:{stats:t.stats,funnel_id:t.funnel_id}}):"text"==t.visualization_type?n("funnel-text-report",{attrs:{stats:t.stats,funnel:t.funnel}}):"emails"==t.visualization_type?n("funnel-emails",{attrs:{funnel_id:t.funnel_id}}):t._e(),t._v(" "),t.stats.total_revenue?n("h3",{staticClass:"text-align-center"},[t._v(t._s(t.$t("Fun_Total_Rftf"))+":\n            "+t._s(t.stats.revenue_currency)+" "+t._s(t.stats.total_revenue_formatted))]):t._e()],1):t._e(),t._v(" "),n("div",{staticClass:"fluentcrm_body fluentcrm_automation_funnel_reports"},[n("div",{staticClass:"fluentcrm_title_cards"},[n("div",{staticClass:"fluentcrm_inner_header"},[n("h3",{staticClass:"fluentcrm_inner_title"},[t._v(t._s(t.$t("Individual Reporting")))]),t._v(" "),n("div",{staticClass:"fluentcrm_inner_actions"},[n("el-input",{staticClass:"input-with-select",staticStyle:{width:"200px"},attrs:{size:"mini",placeholder:t.$t("Search")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchSubscribers.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(e){return t.fetchSubscribers()}},slot:"append"})],1)],1)]),t._v(" "),n("el-table",{attrs:{"empty-text":t.$t("No Data Available"),border:"",stripe:"",data:t.subscribers,"row-class-name":t.rowStatusClass},on:{"selection-change":t.onSelection}},[n("el-table-column",{attrs:{type:"selection"}}),t._v(" "),n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("individual-progress",{attrs:{funnel:t.funnel,funnel_subscriber:e.row,sequences:t.sequences}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"",width:"64"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("contact-card",{attrs:{trigger_type:"click",display_key:"photo",subscriber:t.row.subscriber}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Subscriber")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.subscriber?n("span",[t._v(t._s(e.row.subscriber.full_name||e.row.subscriber.email))]):n("span",[t._v(t._s(t.$t("No Subscriber Found")))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Latest Action")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.last_sequence?n("span",[t._v(t._s(e.row.last_sequence.title))]):"pending"==e.row.status?n("span",[t._v("\n                            "+t._s(t.$t("Fun_Waiting_fdoc"))+"\n                        ")]):t._e(),t._v(" "),n("span",[t._v("("+t._s(e.row.status)+")")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Next Step")},scopedSlots:t._u([{key:"default",fn:function(e){return["completed"!=e.row.status?[e.row.next_sequence_item?n("span",[t._v(t._s(e.row.next_sequence_item.title))]):t._e(),t._v(" "),"active"==e.row.status?n("span",{attrs:{title:e.row.next_execution_time}},[t._v("\n                                - ("+t._s(t._f("nsHumanDiffTime")(e.row.next_execution_time))+")\n                            ")]):t._e()]:n("span",[n("i",{staticClass:"el-icon el-icon-success",staticStyle:{"font-size":"22px"},attrs:{title:"Completed"}})])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"160",label:t.$t("Last Executed At")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{attrs:{title:e.row.last_executed_time}},[t._v("\n                            "+t._s(t._f("nsHumanDiffTime")(e.row.last_executed_time))+"\n                        ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"160",label:t.$t("Created At")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{attrs:{title:e.row.created_at}},[t._v("\n                            "+t._s(t._f("nsHumanDiffTime")(e.row.created_at))+"\n                        ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"160",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("confirm",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],on:{yes:function(n){return t.removeFromFunnel(e.row.subscriber_id)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1),t._v(" "),"cancelled"==e.row.status?n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{type:"info",size:"mini"},on:{click:function(n){return t.changeFunnelSubscriptionStatus(e.row.subscriber_id,"active")}}},[t._v("\n                            "+t._s(t.$t("Resume"))+"\n                        ")]):t._e(),t._v(" "),"active"==e.row.status?n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.updating,expression:"updating"}],attrs:{type:"info",size:"mini"},on:{click:function(n){return t.changeFunnelSubscriptionStatus(e.row.subscriber_id,"cancelled")}}},[t._v("\n                            "+t._s(t.$t("Cancel"))+"\n                        ")]):t._e(),t._v(" "),"fcrm_manual_attach"==e.row.source_trigger_name?n("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("Contact has been added manually to this automation funnel"),placement:"top-start"}},[n("i",{staticClass:"el-icon el-icon-info"})]):t._e()]}}])})],1),t._v(" "),n("el-row",{attrs:{guter:20}},[n("el-col",{staticStyle:{"padding-top":"10px"},attrs:{xs:24,md:12}},[t.selectedSubscribers.length?n("confirm",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],on:{yes:function(e){return t.bulkRemove()}}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.deleting,expression:"deleting"}],attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[t._v(t._s(t.$t("Delete Selected Contacts"))+" ("+t._s(t.selectedSubscribers.length)+")\n                        ")])],1):n("div",[t._v("")])],1),t._v(" "),n("el-col",{attrs:{xs:24,md:12}},[n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetchSubscribers}})],1)],1)],1)])])}),[],!1,null,null,null).exports),Sr={name:"ImportFunnel",components:{FieldEditor:Ga,FormField:Ba},props:["options"],data:function(){return{sequences:[],funnel:{},blocks:{},block_fields:{},step:"upload",sequence_step:0,importing:!1,inline_errors:!1}},computed:{url:function(){return window.ajaxurl+"?"+jQuery.param({action:"fluentcrm_import_funnel"})},current_block:function(){return this.sequences[this.sequence_step]||!1},current_block_fields:function(){if(!this.current_block)return{};var t=this.current_block.action_name;return this.block_fields[t]}},methods:{success:function(t){this.sequences=t.funnel_sequences,this.funnel=t.funnel,this.blocks=t.blocks,this.block_fields=t.block_fields,this.step="root_editor"},error:function(t){var e=JSON.parse(t.message);this.$notify.error(e.message),e.requires&&(this.inline_errors=e.requires)},isEmpty:n(6),showSequenceEditor:function(t){jQuery("html, body").animate({scrollTop:0},"slow"),this.sequence_step=t,this.step="sequence_editor"},completeImport:function(){var t=this;this.importing=!0,this.$post("funnels/import",{funnel:this.funnel,sequences:JSON.stringify(this.sequences)}).then((function(e){t.$notify.success(e.message),t.$router.push({name:"edit_funnel",params:{funnel_id:e.funnel.id}})})).catch((function(e){t.handleError(e)})).finally((function(){t.importing=!1}))}}},Or=Object(a.a)(Sr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_settings_wrapper fc_sequence_import"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Import Automation Funnel")))])])]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.importing,expression:"importing"}],staticClass:"fluentcrm_body fluentcrm_title_cards fc_narrow_box fc_white_inverse",staticStyle:{"margin-top":"30px","max-width":"1160px"}},[t.has_campaign_pro?["upload"==t.step?n("div",{staticClass:"fc_funnel_upload text-align-center"},[n("h3",[t._v(t._s(t.$t("import_your_exported_automation_json_file")))]),t._v(" "),n("el-upload",{ref:"uploader",attrs:{drag:"",limit:1,action:t.url,multiple:!1,"on-error":t.error,"on-success":t.success}},[n("i",{staticClass:"el-icon-upload"}),t._v(" "),n("div",{staticClass:"el-upload__text"},[t._v("\n                        "+t._s(t.$t("Drop JSON file here or"))+" "),n("em",[t._v(t._s(t.$t("click to upload")))])])]),t._v(" "),t.inline_errors?n("pre",[t._v(t._s(t.inline_errors))]):t._e()],1):"root_editor"==t.step?n("div",{staticClass:"fc_funnel_editor"},[n("field-editor",{key:"is_editing_root",attrs:{title_badge:t.$t("Trigger"),show_controls:!1,options:t.options,data:t.funnel.settings,settings:t.funnel.settingsFields},scopedSlots:t._u([{key:"after_header",fn:function(){return[n("el-form-item",{attrs:{label:t.$t("Funnel Name")}},[n("el-input",{attrs:{placeholder:t.$t("Funnel Name")},model:{value:t.funnel.title,callback:function(e){t.$set(t.funnel,"title",e)},expression:"funnel.title"}})],1)]},proxy:!0}],null,!1,2596356023)}),t._v(" "),t.isEmpty(t.funnel.conditions)?t._e():n("el-form",{staticClass:"fc_funnel_conditions fc_block_white",attrs:{"label-position":"top",data:t.funnel.conditions}},[n("h3",[t._v(t._s(t.$t("Conditions")))]),t._v(" "),t._l(t.funnel.conditionFields,(function(e,i){return n("div",{key:i},[n("form-field",{key:i,attrs:{field:e,options:t.options},model:{value:t.funnel.conditions[i],callback:function(e){t.$set(t.funnel.conditions,i,e)},expression:"funnel.conditions[conditionKey]"}})],1)}))],2),t._v(" "),n("div",{staticClass:"fc_sequence_navigation"},[n("el-button",{attrs:{size:"large",type:"success"},on:{click:function(e){return t.showSequenceEditor(0)}}},[t._v("\n                        "+t._s(t.$t("Next"))+"\n                    ")])],1)],1):"sequence_editor"==t.step&&t.current_block?n("div",[n("field-editor",{key:t.sequence_step+"_"+t.current_block.action_name,attrs:{title_badge:t.current_block.type,show_controls:!1,data:t.current_block.settings,options:t.options,settings:t.current_block_fields},scopedSlots:t._u([{key:"after_header",fn:function(){return[n("el-form-item",{attrs:{label:t.$t("Internal Label")}},[n("el-input",{attrs:{placeholder:t.$t("Internal Label")},model:{value:t.current_block.title,callback:function(e){t.$set(t.current_block,"title",e)},expression:"current_block.title"}})],1)]},proxy:!0}],null,!1,3307252594)}),t._v(" "),n("div",{staticClass:"fc_sequence_navigation"},[t.sequence_step>0?n("el-button",{attrs:{type:"text"},on:{click:function(e){return t.showSequenceEditor(t.sequence_step-1)}}},[t._v("\n                        "+t._s(t.$t("Go Back"))+"\n                    ")]):t._e(),t._v(" "),t.sequence_step+1<t.sequences.length?n("el-button",{attrs:{size:"large",type:"success"},on:{click:function(e){return t.showSequenceEditor(t.sequence_step+1)}}},[t._v("\n                        "+t._s(t.$t("Next"))+" "+t._s(t.sequence_step+1)+" / "+t._s(t.sequences.length)+"\n                    ")]):n("el-button",{attrs:{size:"large",type:"primary"},on:{click:function(e){return t.completeImport()}}},[t._v("\n                        "+t._s(t.$t("Complete Import"))+"\n                    ")])],1)],1):t._e()]:n("div",{staticClass:"text-align-center"},[n("h2",[t._v(t._s(t.$t("Import Funnel From JSON File")))]),t._v(" "),n("p",[t._v("\n                "+t._s(t.$t("importing_funnel_from_json_file"))+"\n            ")]),t._v(" "),n("hr"),t._v(" "),n("p",[t._v(t._s(t.$t("To Activate this module please upgrade to pro")))]),t._v(" "),n("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                "+t._s(t.$t("Get FluentCRM Pro"))+"\n            ")])])],2)])}),[],!1,null,null,null).exports,Er={name:"EmailSequencePromo"},jr={name:"sequence-view",components:{EmailSequencePromo:Object(a.a)(Er,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_narrow_box fluentcrm_databox text-align-center"},[n("h2",{},[t._v(t._s(t.$t("Email Sequences")))]),t._v(" "),n("p",{staticClass:"text-align-center"},[t._v(t._s(t.$t("Send Sequence/Drip emails to your subscribers with Email Sequence Module")))]),t._v(" "),n("hr"),t._v(" "),n("p",[t._v(t._s(t.$t("To Activate this module please upgrade to pro")))]),t._v(" "),n("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v(t._s(t.$t("Get FluentCRM Pro")))])])}),[],!1,null,null,null).exports},data:function(){return{}},mounted:function(){this.changeTitle("Email Sequences")}},Tr=Object(a.a)(jr,(function(){var t=this.$createElement,e=this._self._c||t;return this.has_campaign_pro?e("div",{staticClass:"fc_sequence_root"},[e("router-view")],1):e("div",[e("email-sequence-promo")],1)}),[],!1,null,null,null).exports,Pr={name:"CreateSequence",props:["dialogVisible"],data:function(){return{sequence:{title:""},errors:{title:""},saving:!1}},methods:{save:function(){var t=this;this.sequence.title?(this.errors={title:""},this.saving=!0,this.$post("sequences",this.sequence).then((function(e){t.$notify.success(e.message),t.$router.push({name:"edit-sequence",params:{id:e.sequence.id}})})).catch((function(e){var n=e.data?e.data:e;if(n.status&&403===n.status)t.notify.error(n.message);else if(n.title){var i=Object.keys(n.title);t.errors.title=n.title[i[0]]}})).finally((function(e){t.saving=!1}))):this.errors.title=this.$t("Title field is required")}},computed:{isVisibile:{get:function(){return this.dialogVisible},set:function(t){this.$emit("toggleDialog",t)}}}},Ar={name:"all-sequences",components:{CreateSequence:Object(a.a)(Pr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{title:t.$t("Create new email sequence"),visible:t.isVisibile,"append-to-body":!0,"close-on-click-modal":!1,width:"60%"},on:{"update:visible":function(e){t.isVisibile=e}}},[n("div",[n("el-form",{attrs:{model:t.sequence,"label-position":"top"},nativeOn:{submit:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[n("el-form-item",{attrs:{label:t.$t("Sequence Title")}},[n("el-input",{ref:"title",attrs:{placeholder:t.$t("Sequence Title")},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.save.apply(null,arguments)}},model:{value:t.sequence.title,callback:function(e){t.$set(t.sequence,"title",e)},expression:"sequence.title"}}),t._v(" "),n("span",{staticClass:"error"},[t._v(t._s(t.errors.title))])],1)],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.saving,expression:"saving"}],attrs:{disabled:t.saving,type:"primary"},on:{click:function(e){return t.save()}}},[t._v(t._s(t.$t("Next")))])],1)])}),[],!1,null,null,null).exports,Confirm:f,Pagination:b},data:function(){return{sequences:[],pagination:{total:0,per_page:10,current_page:1},loading:!0,dialogVisible:!1,duplicating:!1,search:"",options:{sampleCsv:null,delimiter:"comma"},order:"desc",orderBy:"ID"}},methods:{fetch:function(){var t=this;this.loading=!0;var e={per_page:this.pagination.per_page,page:this.pagination.current_page,with:["stats"],order:this.order,orderBy:this.orderBy,search:this.search};this.$get("sequences",e).then((function(e){t.sequences=e.sequences.data,t.pagination.total=e.sequences.total})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},remove:function(t){var e=this;this.$del("sequences/".concat(t.id)).then((function(t){e.fetch(),e.$notify.success({title:e.$t("Great!"),message:t.message,offset:19})})).catch((function(t){e.handleError(t)}))},duplicateSequence:function(t){var e=this;this.duplicating=!0,this.$post("sequences/".concat(t.id,"/duplicate")).then((function(t){e.$notify.success(t.message),e.$router.push({name:"edit-sequence",params:{id:t.sequence.id}})})).catch((function(t){e.handleError(t)})).finally((function(){e.duplicating=!0}))},handleSortable:function(t){"descending"===t.order?(this.orderBy=t.prop,this.order="desc"):(this.orderBy=t.prop,this.order="asc"),this.fetch()},getPercent:function(t,e){return e&&t?parseFloat(t/e*100).toFixed(2)+"%":"--"}},mounted:function(){this.fetch(),this.changeTitle("Email Sequences")}},Fr=Object(a.a)(Ar,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Email Sequences"))+" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.pagination.total,expression:"pagination.total"}],staticClass:"ff_small"},[t._v("("+t._s(t.pagination.total)+")")])])]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("div",{staticClass:"fc-search-box"},[n("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetch},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetch.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetch},slot:"append"})],1)],1),t._v(" "),t.hasPermission("fcrm_manage_emails")?n("el-button",{staticClass:"ml-5",attrs:{icon:"el-icon-plus",size:"small",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("\n                    "+t._s(t.$t("Create New Sequence"))+"\n                ")]):t._e()],1)]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading||t.duplicating,expression:"loading || duplicating"}],staticClass:"fluentcrm_body fluentcrm_pad_b_20"},[t.pagination.total?n("div",{staticClass:"fluentcrm_sequences_table"},[n("el-table",{attrs:{stripe:"",data:t.sequences},on:{"sort-change":t.handleSortable}},[n("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"fluentcrm_title_cards"},[n("h3",{staticStyle:{margin:"0"}},[t._v(t._s(t.$t("Quick Stats")))]),t._v(" "),n("ul",{staticClass:"fluentcrm_inline_stats"},[n("li",[n("span",{staticClass:"fluentcrm_digit"},[n("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(e.row.stats.emails||"--"))]),t._v(" "),n("p",[t._v("\n                                                "+t._s(t.$t("Emails"))+"\n                                            ")])])]),t._v(" "),n("li",[n("span",{staticClass:"fluentcrm_digit"},[n("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(e.row.stats.subscribers||"--"))]),t._v(" "),n("p",[t._v(t._s(t.$t("Subscribers")))])])])]),t._v(" "),n("div",{staticClass:"fluentcrm_card_actions fluentcrm_card_actions_hidden"},[n("router-link",{attrs:{to:{name:"edit-sequence",params:{id:e.row.id},query:{t:(new Date).getTime()}}}},[n("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"}},[t._v("\n                                            "+t._s(t.$t("Emails"))+"\n                                        ")])],1),t._v(" "),n("router-link",{attrs:{to:{name:"sequence-subscribers",params:{id:e.row.id},query:{t:(new Date).getTime()}}}},[n("el-button",{attrs:{size:"mini",type:"text",icon:"el-icon-s-custom"}},[t._v("\n                                            "+t._s(t.$t("Subscribers"))+"\n                                        ")])],1),t._v(" "),n("el-button",{staticClass:"fluentcrm-duplicate-campaign",attrs:{size:"mini",type:"text",icon:"el-icon-document-copy"},on:{click:function(n){return t.duplicateSequence(e.row)}}},[t._v(t._s(t.$t("Duplicate"))+"\n                                    ")]),t._v(" "),n("confirm",{on:{yes:function(n){return t.remove(e.row)}}},[n("el-button",{staticClass:"fluentcrm-delete-campaign",attrs:{slot:"reference",size:"mini",type:"text",icon:"el-icon-delete"},slot:"reference"},[t._v(t._s(t.$t("Delete"))+"\n                                        ")])],1)],1)])]}}],null,!1,314155579)}),t._v(" "),n("el-table-column",{attrs:{sortable:"",property:"title",label:t.$t("Title"),prop:"title"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{name:"edit-sequence",params:{id:e.row.id},query:{t:(new Date).getTime()}}}},[t._v("\n                                "+t._s(e.row.title)+"\n                            ")])]}}],null,!1,1754734632)}),t._v(" "),n("el-table-column",{attrs:{sortable:"",property:"created_at",label:t.$t("Created at"),prop:"created_at"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t._f("nsHumanDiffTime")(e.row.created_at)))])]}}],null,!1,1673373615)}),t._v(" "),n("el-table-column",{attrs:{sortable:"",property:"recipients_count",label:t.$t("Subscribers"),prop:"recipients_count"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.stats.subscribers||"--"))])]}}],null,!1,1940503168)}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Emails")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.stats?n("span",[t._v("\n                                "+t._s(e.row.stats.emails)+"\n                            ")]):t._e()]}}],null,!1,2079788040)})],1),t._v(" "),n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1):n("div",[n("div",{staticClass:"fluentcrm_hero_box"},[n("h2",[t._v(t._s(t.$t("All_Looks_lydnsasey")))]),t._v(" "),n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"success"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("\n                        "+t._s(t.$t("All_Create_YFES"))+"\n                    ")])],1)])]),t._v(" "),n("create-sequence",{attrs:{"dialog-visible":t.dialogVisible},on:{"update:dialogVisible":function(e){t.dialogVisible=e},"update:dialog-visible":function(e){t.dialogVisible=e},toggleDialog:function(e){t.dialogVisible=!1}}})],1)}),[],!1,null,null,null).exports,Dr={name:"EditSequence",components:{Confirm:f,VerifiedEmailInput:E,CampaignEmails:ke,LinkMetrics:Ee},props:["id"],data:function(){return{sequence:{},sequence_emails:[],loading:!1,addEmailModal:!1,showSequenceSettings:!1,savingSequence:!0,show_email_report:!1,show_email_report_id:!1,link_clicks_modal:!1,link_click_id:!1,order:"desc",orderBy:"id",duplicating:!1}},methods:{showEmailReport:function(t){this.show_email_report_id=t,this.show_email_report=!0},showLinkReport:function(t){this.link_click_id=t,this.link_clicks_modal=!0},fetchSequence:function(){var t=this;this.loading=!0;var e={with:["sequence_emails","email_stats"],order:this.order,orderBy:this.orderBy};this.$get("sequences/".concat(this.id),e).then((function(e){t.sequence=e.sequence,t.sequence_emails=e.sequence_emails,t.changeTitle(t.sequence.title+" - Sequence")})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},gotToSubscribers:function(){this.$router.push({name:"sequence-subscribers",params:{id:this.id},query:{t:(new Date).getTime()}})},toSequenceEmailEdit:function(t){this.$router.push({name:"edit-sequence-email",params:{sequence_id:this.sequence.id,email_id:t}})},remove:function(t){var e=this;this.$del("sequences/".concat(this.sequence.id,"/email/").concat(t.id)).then((function(t){e.fetchSequence(),e.$notify.success({title:e.$t("Great!"),message:t.message,offset:19})})).catch((function(t){e.handleError(t)}))},getScheduleTiming:function(t){return t.delay&&"0"!==t.delay?"After ".concat(t.delay," ").concat(t.delay_unit," from starting point"):"Immediately"},getRelativeWaitTimes:function(t){var e=this.sequence_emails[t].delay;return 0==t?e:e-this.sequence_emails[t-1].delay},saveSequence:function(){var t=this;this.savingSequence=!0,this.$put("sequences/"+this.sequence.id,{title:this.sequence.title,settings:this.sequence.settings}).then((function(e){t.$notify.success(e.message),t.savingSequence=!1,t.fetchSequence()})).catch((function(e){t.handleError(e)})).finally((function(){t.showSequenceSettings=!1}))},duplicateSequence:function(t){var e=this;this.duplicating=!0,this.$post("sequences/".concat(t.id,"/email/duplicate")).then((function(t){e.$notify.success(t.message),e.fetchSequence(),e.duplicating=!1})).catch((function(t){e.handleError(t)})).finally((function(){e.duplicating=!1}))}},mounted:function(){this.fetchSequence(),this.changeTitle("View Sequence")}},qr=Object(a.a)(Dr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"email-sequences"}}},[t._v("\n                    "+t._s(t.$t("Email Sequences"))+"\n                ")]),t._v(" "),n("el-breadcrumb-item",[t._v("\n                    "+t._s(t.sequence.title)+"\n                ")])],1)],1),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[t.hasPermission("fcrm_manage_emails")?n("el-button",{attrs:{type:"info",size:"small",icon:"el-icon-setting"},on:{click:function(e){t.showSequenceSettings=!0}}}):t._e(),t._v(" "),t.hasPermission("fcrm_manage_emails")?n("div",{staticClass:"text-align-center ml-5"},[n("el-button",{attrs:{size:"small",icon:"el-icon-plus",type:"primary"},on:{click:function(e){return t.toSequenceEmailEdit(0)}}},[t._v("\n                    "+t._s(t.$t("Add a Sequence Email"))+"\n                ")])],1):t._e(),t._v(" "),n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.gotToSubscribers()}}},[t._v("\n                "+t._s(t.$t("View Subscribers"))+"\n            ")])],1)]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading||t.duplicating,expression:"loading || duplicating"}],staticClass:"fluentcrm_body"},[n("div",{staticClass:"fluentcrm_body"},[t.sequence_emails.length?n("div",[n("div",{staticClass:"fluentcrm_title_cards"},[t._l(t.sequence_emails,(function(e,i){return n("div",{key:e.id,staticClass:"fc_sequence_section"},[n("div",{staticClass:"fluentcrm_title_card"},[n("el-row",{staticClass:"d-flex items-center fluentcrm_title_card_row",attrs:{gutter:20}},[n("el-col",{attrs:{sm:24,md:16}},[n("span",{staticClass:"fc_seq_number"},[t._v(t._s(i+1))]),t._v(" "),n("div",{staticClass:"fluentcrm_card_desc"},[n("div",{staticClass:"fluentcrm_card_sub",attrs:{title:"From beginning date"}},[t._v("\n                                            "+t._s(t.getScheduleTiming(e.settings.timings))+"\n                                        ")]),t._v(" "),n("div",{staticClass:"fluentcrm_card_title"},[n("router-link",{attrs:{to:{name:"edit-sequence-email",params:{sequence_id:e.parent_id,email_id:e.id},query:{t:(new Date).getTime()}}}},[t._v("\n                                                "+t._s(e.title)+"\n                                            ")])],1),t._v(" "),n("div",{staticClass:"fluentcrm_card_actions fluentcrm_card_actions_hidden"},[n("router-link",{attrs:{to:{name:"edit-sequence-email",params:{sequence_id:e.parent_id,email_id:e.id},query:{t:(new Date).getTime()}}}},[n("el-button",{attrs:{type:"text",size:"mini",icon:"el-icon-edit"}},[t._v("\n                                                    "+t._s(t.$t("edit"))+"\n                                                ")])],1),t._v(" "),n("el-button",{staticClass:"fluentcrm-report-text-btn",attrs:{icon:"el-icon-data-analysis",type:"text",size:"mini"},on:{click:function(n){return t.showEmailReport(e.id)}}},[t._v(t._s(t.$t("Show Report")))]),t._v(" "),n("el-button",{staticClass:"fluentcrm-duplicate-campaign",attrs:{size:"mini",type:"text",icon:"el-icon-document-copy"},on:{click:function(n){return t.duplicateSequence(e)}}},[t._v(t._s(t.$t("Duplicate"))+"\n                                            ")]),t._v(" "),n("confirm",{attrs:{placement:"top-start"},on:{yes:function(n){return t.remove(e)}}},[n("el-button",{staticClass:"fluentcrm-delete-campaign",attrs:{slot:"reference",size:"mini",type:"text",icon:"el-icon-delete"},slot:"reference"},[t._v("\n                                                    "+t._s(t.$t("Delete"))+"\n                                                ")])],1)],1)])]),t._v(" "),n("el-col",{attrs:{sm:24,md:8}},[n("div",{staticClass:"fluentcrm_card_stats"},[n("ul",{staticClass:"fluentcrm_inline_stats"},[n("li",{staticStyle:{cursor:"pointer"},on:{click:function(n){return t.showEmailReport(e.id)}}},[n("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(e.stats.sent||"--"))]),t._v(" "),n("p",[t._v(t._s(t.$t("Sent")))])]),t._v(" "),n("li",[n("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(t.percent(e.stats.views,e.stats.sent)))]),t._v(" "),n("p",[t._v(t._s(t.$t("Opened")))])]),t._v(" "),n("li",{staticStyle:{cursor:"pointer"},on:{click:function(n){return t.showLinkReport(e.id)}}},[n("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(t.percent(e.stats.clicks,e.stats.sent)))]),t._v(" "),n("p",[t._v(t._s(t.$t("Clicked")))])]),t._v(" "),n("li",[n("span",{staticClass:"fluentcrm_digit"},[t._v(t._s(t.percent(e.stats.unsubscribers,e.stats.sent)))]),t._v(" "),n("p",[t._v(t._s(t.$t("Unsubscribed")))])]),t._v(" "),e.stats.revenue?n("li",[n("span",{staticClass:"fluentcrm_digit"},[t._v("\n                                            "+t._s(e.stats.revenue.total)+"\n                                        ")]),t._v(" "),n("p",[t._v(t._s(e.stats.revenue.label))])]):t._e()])])])],1)],1)])})),t._v(" "),t.hasPermission("fcrm_manage_emails")?n("div",{staticClass:"text-align-center",staticStyle:{"padding-bottom":"30px"}},[n("el-button",{attrs:{icon:"el-icon-plus",type:"primary"},on:{click:function(e){return t.toSequenceEmailEdit(0)}}},[t._v("\n                            "+t._s(t.$t("Vie_Add_aSE"))+"\n                        ")])],1):t._e()],2)]):n("div",[n("div",{staticClass:"fluentcrm_hero_box"},[n("h2",[t._v(t._s(t.$t("All_Looks_lydnsasey")))]),t._v(" "),n("el-button",{attrs:{icon:"el-icon-plus",size:"small",type:"success"},on:{click:function(e){return t.toSequenceEmailEdit(0)}}},[t._v("\n                        "+t._s(t.$t("All_Create_YFES"))+"\n                    ")])],1)])])]),t._v(" "),n("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.savingSequence,expression:"savingSequence"}],attrs:{title:t.$t("Edit Sequence and Settings"),width:"60%","append-to-body":!0,visible:t.showSequenceSettings},on:{"update:visible":function(e){t.showSequenceSettings=e}}},[t.sequence.settings?n("el-form",{attrs:{"label-position":"top",data:t.sequence}},[n("el-form-item",{attrs:{label:t.$t("Internal Title")}},[n("el-input",{attrs:{placeholder:t.$t("Internal Title")},model:{value:t.sequence.title,callback:function(e){t.$set(t.sequence,"title",e)},expression:"sequence.title"}})],1),t._v(" "),t.sequence.settings.mailer_settings?[n("el-form-item",[n("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.sequence.settings.mailer_settings.is_custom,callback:function(e){t.$set(t.sequence.settings.mailer_settings,"is_custom",e)},expression:"sequence.settings.mailer_settings.is_custom"}},[t._v("\n                        "+t._s(t.$t("Vie_Set_CFNaE"))+"\n                    ")])],1),t._v(" "),"yes"==t.sequence.settings.mailer_settings.is_custom?n("div",{staticClass:"fluentcrm_highlight_gray"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:12,sm:24}},[n("el-form-item",{attrs:{label:t.$t("From Name")}},[n("el-input",{attrs:{placeholder:t.$t("From Name")},model:{value:t.sequence.settings.mailer_settings.from_name,callback:function(e){t.$set(t.sequence.settings.mailer_settings,"from_name",e)},expression:"sequence.settings.mailer_settings.from_name"}})],1)],1),t._v(" "),n("el-col",{attrs:{md:12,sm:24}},[n("el-form-item",{attrs:{label:t.$t("From Email")}},[n("verified-email-input",{attrs:{field:{placeholder:t.$t("From Email"),"data-type":"email"}},model:{value:t.sequence.settings.mailer_settings.from_email,callback:function(e){t.$set(t.sequence.settings.mailer_settings,"from_email",e)},expression:"sequence.settings.mailer_settings.from_email"}}),t._v(" "),n("p",{staticStyle:{margin:"0",padding:"0","font-size":"10px"}},[t._v(t._s(t.$t("Vie_Please_msteisbyS")))])],1)],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:12,sm:24}},[n("el-form-item",{attrs:{label:t.$t("Reply To Name")}},[n("el-input",{attrs:{placeholder:t.$t("Reply To Name")},model:{value:t.sequence.settings.mailer_settings.reply_to_name,callback:function(e){t.$set(t.sequence.settings.mailer_settings,"reply_to_name",e)},expression:"sequence.settings.mailer_settings.reply_to_name"}})],1)],1),t._v(" "),n("el-col",{attrs:{md:12,sm:24}},[n("el-form-item",{attrs:{label:t.$t("Reply To Email")}},[n("el-input",{attrs:{placeholder:t.$t("Reply To Email"),type:"email"},model:{value:t.sequence.settings.mailer_settings.reply_to_email,callback:function(e){t.$set(t.sequence.settings.mailer_settings,"reply_to_email",e)},expression:"sequence.settings.mailer_settings.reply_to_email"}})],1)],1)],1)],1):t._e()]:t._e()],2):t._e(),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{attrs:{type:"success"},on:{click:function(e){return t.saveSequence()}}},[t._v(t._s(t.$t("Save Settings")))])],1)],1),t._v(" "),n("el-dialog",{attrs:{title:t.$t("View Campaign Emails"),width:"60%","append-to-body":!0,visible:t.show_email_report},on:{closed:function(e){t.show_email_report_id=""},"update:visible":function(e){t.show_email_report=e}}},[t.show_email_report_id?n("campaign-emails",{attrs:{campaign_id:t.show_email_report_id}}):t._e()],1),t._v(" "),n("el-dialog",{attrs:{title:t.$t("Link Metrics"),width:"60%","append-to-body":!0,visible:t.link_clicks_modal},on:{closed:function(e){t.link_click_id=""},"update:visible":function(e){t.link_clicks_modal=e}}},[t.link_click_id?n("link-metrics",{attrs:{campaign_id:t.link_click_id,hide_title:!0}}):t._e()],1)],1)}),[],!1,null,null,null).exports,Ir={name:"SequenceEmailEdit",props:["sequence_id","email_id"],components:{EmailBlockComposer:zt,InputPopover:x},data:function(){return{sequence:{},email:{},loading:!1,saving:!1,app_loaded:!1,smartcodes:window.fcAdmin.globalSmartCodes,email_subject_status:!0,send_test_pop:!1,test_email:"",sending_test:!1}},watch:{email_id:function(){this.fetchSequenceEmail()}},methods:{backToSequence:function(){this.$router.push({name:"edit-sequence",params:{id:this.sequence_id},query:{t:(new Date).getTime()}})},fetchSequenceEmail:function(){var t=this;this.loading=!0,this.$get("sequences/".concat(this.sequence_id,"/email/").concat(this.email_id),{with:["sequence"]}).then((function(e){t.sequence=e.sequence,t.email=e.email})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1,t.app_loaded=!0}))},save:function(){var t=this;if(!this.email.email_body)return this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peb"),offset:19});if(!this.email.email_subject)return this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peS"),offset:19});this.saving=!0;(parseInt(this.email_id)?this.$put("sequences/".concat(this.sequence_id,"/email/").concat(this.email_id),{email:this.email}):this.$post("sequences/".concat(this.sequence_id,"/email"),{email:this.email})).then((function(e){t.$notify.success(e.message),parseInt(t.email_id)||t.$router.push({name:"edit-sequence-email",params:{sequence_id:e.email.parent_id,email_id:e.email.id}})})).catch((function(e){t.handleError(e)})).finally((function(){t.saving=!1}))},resetSubject:function(){var t=this;this.email_subject_status=!1,this.$nextTick((function(){t.email_subject_status=!0}))},sendTestEmail:function(){var t=this;return this.email.email_body?this.email.email_subject?(this.sending_test=!0,void this.$post("campaigns/send-test-email",{campaign:{email_subject:this.email.email_subject,email_pre_header:this.email.email_pre_header,email_body:this.email.email_body,design_template:this.email.design_template,settings:this.email.settings},email:this.test_email,test_campaign:"yes"}).then((function(e){t.$notify.success(e.message)})).catch((function(e){t.$notify.error(e.message)})).finally((function(){t.sending_test=!1,t.send_test_pop=!1}))):this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peS"),offset:19}):this.$notify.error({title:this.$t("Oops!"),message:this.$t("Cam_Please_peb"),offset:19})},changingSpecificDaysStatus:function(){"yes"!=this.email.settings.timings.selected_days_only||this.email.settings.timings.allowed_days||this.$set(this.email.settings.timings,"allowed_days",["Mon","Tue","Wed","Thu","Fri","Sat","Sun"])}},mounted:function(){this.fetchSequenceEmail()}},Nr=Object(a.a)(Ir,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"email-sequences"}}},[t._v("\n                    "+t._s(t.$t("Email Sequences"))+"\n                ")]),t._v(" "),n("el-breadcrumb-item",{attrs:{to:{name:"edit-sequence",params:{id:t.sequence_id}}}},[t._v("\n                    "+t._s(t.sequence.title)+"\n                ")]),t._v(" "),n("el-breadcrumb-item",[t._v("\n                    "+t._s(t.email.email_subject)+"\n                ")])],1)],1),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-button",{staticClass:"mr-5",attrs:{size:"small"},on:{click:function(e){return t.backToSequence()}}},[t._v("\n                "+t._s(t.$t("Back to Sequence"))+"\n            ")]),t._v(" "),n("el-popover",{directives:[{name:"loading",rawName:"v-loading",value:t.sending_test,expression:"sending_test"}],attrs:{placement:"left",width:"400",trigger:"manual"},model:{value:t.send_test_pop,callback:function(e){t.send_test_pop=e},expression:"send_test_pop"}},[n("div",[n("p",[t._v(t._s(t.$t("Cam_Type_cetstolbtsc")))]),t._v(" "),n("el-input",{attrs:{placeholder:t.$t("Email Address")},model:{value:t.test_email,callback:function(e){t.test_email=e},expression:"test_email"}},[n("template",{slot:"append"},[n("el-button",{attrs:{type:"success"},on:{click:function(e){return t.sendTestEmail()}}},[t._v(t._s(t.$t("Send")))])],1)],2)],1),t._v(" "),n("el-button",{staticClass:"fc_with_select",attrs:{slot:"reference",size:"small",type:"danger"},on:{click:function(e){t.send_test_pop=!t.send_test_pop}},slot:"reference"},[t._v("\n                    "+t._s(t.$t("Send a test email"))+"\n                ")])],1)],1)]),t._v(" "),t.app_loaded?[n("div",{staticClass:"fluentcrm_body fluentcrm_pad_30"},[n("el-form",{attrs:{"label-position":"top",model:t.email}},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{sm:24,md:12}},[n("el-form-item",{attrs:{label:t.$t("Email Subject")}},[t.email_subject_status?n("input-popover",{attrs:{popper_extra:"fc_with_c_fields",placeholder:t.$t("Email Subject"),data:t.smartcodes},model:{value:t.email.email_subject,callback:function(e){t.$set(t.email,"email_subject",e)},expression:"email.email_subject"}}):t._e()],1)],1),t._v(" "),n("el-col",{attrs:{sm:24,md:12}},[n("el-form-item",{attrs:{label:t.$t("Email Pre-Header")}},[n("el-input",{attrs:{type:"textarea",placeholder:t.$t("Email Pre-Header"),rows:2},model:{value:t.email.email_pre_header,callback:function(e){t.$set(t.email,"email_pre_header",e)},expression:"email.email_pre_header"}})],1)],1)],1),t._v(" "),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:8,sm:24}},[n("el-form-item",{attrs:{label:t.$t("Delay")}},[n("el-row",{staticClass:"d-flex items-center"},[n("el-col",{staticStyle:{"min-width":"200px"},attrs:{md:6,sm:12}},[n("el-input-number",{model:{value:t.email.settings.timings.delay,callback:function(e){t.$set(t.email.settings.timings,"delay",e)},expression:"email.settings.timings.delay"}})],1),t._v(" "),n("el-col",{attrs:{md:12,sm:12}},[n("el-select",{model:{value:t.email.settings.timings.delay_unit,callback:function(e){t.$set(t.email.settings.timings,"delay_unit",e)},expression:"email.settings.timings.delay_unit"}},[n("el-option",{attrs:{value:"minutes",label:t.$t("Minutes")}}),t._v(" "),n("el-option",{attrs:{value:"days",label:t.$t("Days")}}),t._v(" "),n("el-option",{attrs:{value:"weeks",label:t.$t("Weeks")}}),t._v(" "),n("el-option",{attrs:{value:"Months",label:t.$t("Months")}})],1)],1)],1),t._v(" "),n("p",[t._v(t._s(t.$t("Set after how many"))+" "+t._s(t.email.settings.timings.delay_unit||"time unit")+" "+t._s(t.$t("the email will be triggered from the starting date")))])],1)],1),t._v(" "),n("el-col",{attrs:{md:8,sm:24}},[n("el-form-item",{staticClass:"fluentcrm_width_input",attrs:{label:t.$t("Sending Time Range")}},[n("el-time-picker",{attrs:{"is-range":"","value-format":"HH:mm",format:"HH:mm","range-separator":"To","start-placeholder":t.$t("Start Range"),"end-placeholder":t.$t("End Range")},model:{value:t.email.settings.timings.sending_time,callback:function(e){t.$set(t.email.settings.timings,"sending_time",e)},expression:"email.settings.timings.sending_time"}}),t._v(" "),n("p",[t._v(t._s(t.$t("Edi_If_ysatrtFstettt")))])],1)],1),t._v(" "),n("el-col",{attrs:{md:8,sm:24}},[n("el-checkbox",{staticClass:"mt-20",attrs:{"true-label":"yes","false-label":"no"},on:{change:function(e){return t.changingSpecificDaysStatus()}},model:{value:t.email.settings.timings.selected_days_only,callback:function(e){t.$set(t.email.settings.timings,"selected_days_only",e)},expression:"email.settings.timings.selected_days_only"}},[t._v("\n                            "+t._s(t.$t("Enable Specific Days Only"))+"\n                        ")]),t._v(" "),"yes"==t.email.settings.timings.selected_days_only?n("el-form-item",{staticStyle:{"margin-top":"10px"},attrs:{label:t.$t("Please select allowed days to send emails")}},[n("el-checkbox-group",{model:{value:t.email.settings.timings.allowed_days,callback:function(e){t.$set(t.email.settings.timings,"allowed_days",e)},expression:"email.settings.timings.allowed_days"}},[n("el-checkbox",{attrs:{label:"Mon"}},[t._v(t._s(t.$t("Monday")))]),t._v(" "),n("el-checkbox",{attrs:{label:"Tue"}},[t._v(t._s(t.$t("Tuesday")))]),t._v(" "),n("el-checkbox",{attrs:{label:"Wed"}},[t._v(t._s(t.$t("Wednesday")))]),t._v(" "),n("el-checkbox",{attrs:{label:"Thu"}},[t._v(t._s(t.$t("Thursday")))]),t._v(" "),n("el-checkbox",{attrs:{label:"Fri"}},[t._v(t._s(t.$t("Friday")))]),t._v(" "),n("el-checkbox",{attrs:{label:"Sat"}},[t._v(t._s(t.$t("Saturday")))]),t._v(" "),n("el-checkbox",{attrs:{label:"Sun"}},[t._v(t._s(t.$t("Sunday")))])],1)],1):t._e()],1)],1)],1)],1),t._v(" "),n("email-block-composer",{attrs:{show_merge:!0,enable_template_save:!0,enable_templates:!0,campaign:t.email},on:{template_inserted:function(e){return t.resetSubject()}}},[n("template",{slot:"fc_editor_actions"},[n("el-button",{attrs:{size:"small",type:"success"},on:{click:t.save}},[t._v(t._s(t.$t("Save")))])],1)],2)]:n("div",{staticClass:"fluentcrm_body fluentcrm_pad_30 text-align-center"},[n("h3",[t._v(t._s(t.$t("Loading")))])])],2)}),[],!1,null,null,null).exports,Lr={name:"sequence_sub_adder",props:["sequence_id"],components:{RecipientTaggerForm:de},data:function(){return{settings:{subscribers:[{list:null,tag:null}],excludedSubscribers:[{list:null,tag:null}],sending_filter:"list_tag",dynamic_segment:{id:"",slug:""}},ready_tagger:!0,inserting_page:1,inserting_total_page:0,inserting_now:!1,btnSubscribing:!1,batch_completed:!1,in_total:0,estimated_count:0}},watch:{},methods:{processSubscribers:function(){var t=this,e=this.settings,n=e.subscribers.filter((function(t){return t.list&&t.tag})),i=e.excludedSubscribers.filter((function(t){return t.list&&t.tag}));if("list_tag"===e.sending_filter){if(n.length!==e.subscribers.length||i.length&&i.length!==e.excludedSubscribers.length)return void this.$notify.error({title:this.$t("Oops!"),message:this.$t("_Su_Invalid_solatisi"),offset:19})}else if("dynamic_segment"==e.sending_filter){if(!e.dynamic_segment.uid)return void this.$notify.error({title:this.$t("Oops!"),message:this.$t("Please select the segment"),offset:19})}else if("advanced_filters"==e.sending_filter){var s=!1;if(ne()(e.advanced_filters,(function(t){me()(t)||(s=!0)})),!s)return void this.$notify.error({title:this.$t("Oops!"),message:this.$t("Please select the filters"),offset:19})}var a={subscribers:n,excludedSubscribers:i,sending_filter:e.sending_filter,dynamic_segment:e.dynamic_segment,page:this.inserting_page,advanced_filters:JSON.stringify(e.advanced_filters)};this.btnSubscribing=!0,this.inserting_now=!0,this.ready_tagger=!1,this.$post("sequences/".concat(this.sequence_id,"/subscribers"),a).then((function(e){e.remaining?(1===t.inserting_page&&(t.inserting_total_page=e.page_total),t.inserting_page=e.next_page,t.$nextTick((function(){t.processSubscribers()}))):(t.batch_completed=!0,t.$notify.success({title:t.$t("Great!"),message:t.$t("_Su_Subscribers_hbas"),offset:19}),t.in_total=e.in_total)})).catch((function(e){t.handleError(e),t.btnSubscribing=!1,t.inserting_now=!1})).finally((function(){}))},resetSettings:function(){var t=this;this.ready_tagger=!1,this.batch_completed=!1,this.inserting_now=!1,this.btnSubscribing=!1,this.inserting_page=1,this.inserting_total_page=0,this.settings={subscribers:[{list:null,tag:null}],excludedSubscribers:[{list:null,tag:null}],sending_filter:"list_tag",dynamic_segment:{id:"",slug:""}},this.$nextTick((function(){t.ready_tagger=!0}))}}},Mr={name:"SequenceSubscribers",components:{Pagination:b,Confirm:f},props:["sequence_id","reload_count"],data:function(){return{loading:!1,subscribers:[],pagination:{total:0,per_page:20,current_page:1},selected_subscribers:[],removing:!1}},watch:{reload_count:function(){this.page=1,this.fetch()}},methods:{fetch:function(){var t=this;this.loading=!0,this.selected_subscribers=[];var e={per_page:this.pagination.per_page,page:this.pagination.current_page};this.$get("sequences/".concat(this.sequence_id,"/subscribers"),e).then((function(e){t.subscribers=e.data,t.pagination.total=e.total})).catch((function(e){t.handleError(e)})).finally((function(e){t.loading=!1}))},removeSubscribers:function(){var t=this,e=[];this.each(this.selected_subscribers,(function(t){e.push(t.id)})),this.removing=!0,this.$del("sequences/".concat(this.sequence_id,"/subscribers"),{tracker_ids:e}).then((function(e){t.$notify.success(e.message),t.fetch()})).catch((function(e){t.handleError(e)})).finally((function(){t.removing=!1}))},handleSelectionChange:function(t){this.selected_subscribers=t}},mounted:function(){this.fetch()}},Rr={name:"SequenceSubscribers",props:["id"],components:{SubscribersAdder:Object(a.a)(Lr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_sequence_sub_adder",staticStyle:{"margin-bottom":"20px"}},[t.ready_tagger?[n("recipient-tagger-form",{model:{value:t.settings,callback:function(e){t.settings=e},expression:"settings"}},[n("template",{slot:"fc_tagger_bottom"},[n("div",{staticClass:"text-align-center"},[n("p",[t._v("\n                        "+t._s(t.$t("_Su_Please_ntsewbstt"))+"\n                    ")])]),t._v(" "),n("div",{staticClass:"text-align-center"},[n("el-button",{attrs:{type:"success",size:"large"},on:{click:function(e){return t.processSubscribers()}}},[t._v("\n                        "+t._s(t.$t("Add to this Sequence"))+"\n                    ")])],1)])],2)]:n("div",{staticClass:"text-align-center fluentcrm_hero_box"},[t.batch_completed?[n("h3",[t._v(t._s(t.$t("Completed")))]),t._v(" "),n("h4",[t._v(t._s(t.$t("_Su_All_SLashbaSttsE")))]),t._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.batch_completed,expression:"batch_completed"}],attrs:{type:"success",size:"small"},on:{click:function(e){return t.resetSettings()}}},[t._v("\n                "+t._s(t.$t("Back"))+"\n            ")]),t._v(" "),n("p",[n("b",[t._v(t._s(t.in_total))]),t._v(" "+t._s(t.$t("_Su_Subscribers_hbat")))])]:[n("h3",[t._v(t._s(t.$t("Processing now...")))]),t._v(" "),n("h4",[t._v(t._s(t.$t("Rec_Please_dnctw")))]),t._v(" "),t.inserting_total_page?[n("h2",[t._v(t._s(t.inserting_page)+"/"+t._s(t.inserting_total_page))]),t._v(" "),n("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:parseInt(t.inserting_page/t.inserting_total_page*100),status:"success"}})]:t._e()]],2)],2)}),[],!1,null,null,null).exports,SequenceSubscribersView:Object(a.a)(Mr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_campaign_emails"},[n("h3",[t._v(t._s(t.$t("Sequence Subscribers")))]),t._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{"empty-text":t.$t("No Data Found"),stripe:"",border:"",data:t.subscribers},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),n("el-table-column",{attrs:{label:"",width:"64",fixed:""},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{name:"subscriber",params:{id:e.row.subscriber_id}}}},[n("img",{staticClass:"fc_contact_photo",attrs:{title:t.$t("Contact ID:")+e.row.subscriber_id,src:e.row.subscriber.photo}})])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Name"),width:"250"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(e.row.subscriber.full_name))])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Email")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("router-link",{attrs:{to:{name:"subscriber",params:{id:e.row.subscriber_id}}}},[t._v(t._s(e.row.subscriber.email)+"\n                ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Status")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(e.row.status)+"\n            ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Started At")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{attrs:{title:e.row.created_at}},[t._v("\n                    "+t._s(t._f("nsHumanDiffTime")(e.row.created_at))+"\n                ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Next Email")},scopedSlots:t._u([{key:"default",fn:function(e){return["active"==e.row.status?n("span",{attrs:{title:e.row.created_at}},[t._v("\n                    "+t._s(t._f("nsHumanDiffTime")(e.row.next_execution_time))+"\n                ")]):n("span",[t._v("\n                    --\n                ")])]}}])})],1),t._v(" "),n("el-row",{staticStyle:{"margin-top":"10px"},attrs:{guter:20}},[n("el-col",{attrs:{xs:24,md:12}},[t.selected_subscribers.length?n("confirm",{directives:[{name:"loading",rawName:"v-loading",value:t.removing,expression:"removing"}],attrs:{message:t.$t("Are you sure, you want to remove these subscribers from this sequence?")},on:{yes:function(e){return t.removeSubscribers()}}},[n("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"},[t._v(" "+t._s(t.$t("Remove From Sequence"))+"\n                ")])],1):n("div",[t._v("")])],1),t._v(" "),n("el-col",{attrs:{xs:24,md:12}},[n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetch}})],1)],1)],1)}),[],!1,null,null,null).exports},data:function(){return{loading:!1,sequence:{},reload_count:0,show_adder:!1}},methods:{fetchSequence:function(){var t=this;this.loading=!0,this.$get("sequences/".concat(this.id)).then((function(e){t.sequence=e.sequence})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},backToEmails:function(){this.$router.push({name:"edit-sequence",params:{id:this.id},query:{t:(new Date).getTime()}})},reloadSubscribers:function(){this.show_adder=!1,this.reload_count+=1}},mounted:function(){this.fetchSequence()}},zr=Object(a.a)(Rr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm-campaigns fluentcrm-view-wrapper fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("el-breadcrumb",{staticClass:"fluentcrm_spaced_bottom",attrs:{separator:"/"}},[n("el-breadcrumb-item",{attrs:{to:{name:"email-sequences"}}},[t._v("\n                    "+t._s(t.$t("Email Sequences"))+"\n                ")]),t._v(" "),n("el-breadcrumb-item",{attrs:{to:{name:"edit-sequence",params:{id:t.id}}}},[t._v("\n                    "+t._s(t.sequence.title)+"\n                ")]),t._v(" "),n("el-breadcrumb-item",[t._v("\n                    "+t._s(t.$t("Subscribers"))+"\n                ")])],1)],1),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-button",{attrs:{size:"small"},on:{click:function(e){return t.backToEmails()}}},[t._v("\n                "+t._s(t.$t("View Emails"))+"\n            ")]),t._v(" "),t.hasPermission("fcrm_manage_emails")?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.show_adder=!t.show_adder}}},[t.show_adder?n("span",[t._v(t._s(t.$t("Show Subscribers")))]):n("span",[t._v(t._s(t.$t("Add Subscribers")))])]):t._e()],1)]),t._v(" "),n("div",{staticClass:"fluentcrm_body fluentcrm_pad_30"},[t.show_adder?n("subscribers-adder",{attrs:{sequence_id:t.id},on:{completed:function(e){return t.reloadSubscribers()}}}):n("div",{staticClass:"fluentcrm_sequence_subs"},[n("sequence-subscribers-view",{attrs:{reload_count:t.reload_count,sequence_id:t.id}})],1)],1)])}),[],!1,null,null,null).exports,Br={name:"CreateForm",components:{OptionSelector:vt},data:function(){return{active_step:"template_selection",templates:[],fetching:!1,form:{template_id:"",title:"",selected_tags:[],selected_list:"",double_optin:!0},created_form:!1,creating:!1}},methods:{create:function(){var t=this;if(!this.form.template_id||!this.form.title||!this.form.selected_list)return this.$notify.error(this.$t("_Cr_Please_fuatf"));this.creating=!0,this.$post("forms",this.form).then((function(e){t.$notify.success(e.message),t.created_form=e.created_form})).catch((function(e){t.handleError(e)})).finally((function(){t.creating=!1}))},changeToStep:function(t){this.active_step=t},fetchFormTemplates:function(){var t=this;this.fetching=!0,this.$get("forms/templates").then((function(e){t.templates=e})).catch((function(e){t.handleError(e)})).finally((function(){t.fetching=!1}))}},mounted:function(){this.fetchFormTemplates()}},Vr={name:"FluentForms",components:{createForm:Object(a.a)(Br,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],staticClass:"fc_create_form_wrapper"},[t.created_form?n("div",{staticClass:"fc_created_form text-align-center",staticStyle:{padding:"20px"}},[n("h3",[t._v(t._s(t.$t("_Cr_Your_fhbcs")))]),t._v(" "),n("p",[t._v(t._s(t.$t("CreateForm.desc")))]),t._v(" "),n("code",[t._v(t._s(t.created_form.shortcode))]),t._v(" "),n("hr"),t._v(" "),n("ul",{staticClass:"fc_links_inline d-flex items-center justify-center"},[n("li",[n("a",{staticClass:"el-button el-button--primary el-button--small",attrs:{target:"_blank",href:t.created_form.preview_url}},[t._v(t._s(t.$t("Preview The form")))])]),t._v(" "),n("li",{staticClass:"ml-5"},[n("a",{staticClass:"el-button el-button--info el-button--small",attrs:{target:"_blank",href:t.created_form.edit_url}},[t._v(t._s(t.$t("Edit The form")))])]),t._v(" "),n("li",{staticClass:"ml-5"},[n("a",{staticClass:"el-button el-button--info el-button--small",attrs:{target:"_blank",href:t.created_form.feed_url}},[t._v(t._s(t.$t("Edit Connection")))])])])]):["template_selection"==t.active_step?n("div",{staticClass:"fc_select_template_wrapper",staticStyle:{padding:"0 20px 40px"}},[n("h3",[t._v(t._s(t.$t("Select a template")))]),t._v(" "),n("el-radio-group",{on:{change:function(e){return t.changeToStep("config")}},model:{value:t.form.template_id,callback:function(e){t.$set(t.form,"template_id",e)},expression:"form.template_id"}},t._l(t.templates,(function(t,e){return n("el-radio",{key:e,attrs:{label:t.id}},[n("el-tooltip",{attrs:{content:t.label,placement:"bottom"}},[n("div",[n("img",{staticStyle:{width:"200px",height:"168px"},attrs:{src:t.image}})])])],1)})),1)],1):"config"==t.active_step?[n("div",{staticClass:"fc_config_template",staticStyle:{padding:"20px"}},[n("el-form",{attrs:{data:t.form,"label-position":"top"}},[n("el-form-item",{attrs:{label:t.$t("Form Title")}},[n("el-input",{attrs:{type:"text",placeholder:t.$t("Please Provide a Form Title")},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Add to List")}},[n("option-selector",{attrs:{field:{option_key:"lists",placeholder:t.$t("Select a List")}},model:{value:t.form.selected_list,callback:function(e){t.$set(t.form,"selected_list",e)},expression:"form.selected_list"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Add to Tags")}},[n("option-selector",{attrs:{field:{option_key:"tags",creatable:!0,placeholder:t.$t("Select Tags"),is_multiple:!0}},model:{value:t.form.selected_tags,callback:function(e){t.$set(t.form,"selected_tags",e)},expression:"form.selected_tags"}})],1),t._v(" "),n("el-form-item",{attrs:{label:t.$t("Double Opt-In")}},[n("el-checkbox",{model:{value:t.form.double_optin,callback:function(e){t.$set(t.form,"double_optin",e)},expression:"form.double_optin"}},[t._v(t._s(t.$t("_Cr_Enable_DOC")))])],1)],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{md:12,sm:24}},[n("p",{staticStyle:{"text-align":"left","margin-left":"30px"}},[t._v(t._s(t.$t("_Cr_This_fwbciFFaycc")))])]),t._v(" "),n("el-col",{attrs:{md:12,sm:24}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.creating,expression:"creating"}],attrs:{type:"primary"},on:{click:function(e){return t.create()}}},[t._v(t._s(t.$t("Create Form")))])],1)],1)],1)]:t._e()]],2)}),[],!1,null,null,null).exports,Pagination:b,ItemCopier:Rs},data:function(){return{forms:[],pagination:{page:1,per_page:10,total:0},loading:!1,installing_ff:!1,need_installation:!1,create_form_modal:!1,search:""}},methods:{fetchForms:function(){var t=this,e={per_page:this.pagination.per_page,page:this.pagination.current_page,search:this.search};this.loading=!0,this.$get("forms",e).then((function(e){e.installed?(t.forms=e.forms.data,t.pagination.total=e.forms.total,t.need_installation=!1):t.need_installation=!0})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},installFF:function(){var t=this;this.installing_ff=!0,this.$post("setting/install-fluentform").then((function(e){t.fetchForms(),t.$notify.success(e.message)})).catch((function(e){t.handleError(e)})).finally((function(){t.installing_ff=!1}))},handleActionCommand:function(t){var e=t.form[t.url],n=t.target;e&&("blank"===n?window.open(e,"_blank"):window.location.href=e)}},mounted:function(){this.fetchForms(),this.changeTitle("Forms")}},Ur=Object(a.a)(Vr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-forms fluentcrm-view-wrapper fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header align-center justify-between"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Forms")))]),t._v(" "),t.pagination.total?n("p",[t._v(t._s(t.$t("For_Fluent_FtacwyC")))]):t._e()]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("div",{staticClass:"fc-search-box"},[n("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetchForms},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchForms.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetchForms},slot:"append"})],1)],1),t._v(" "),t.need_installation?t._e():n("el-button",{staticStyle:{height:"30px","line-height":"10px"},attrs:{size:"small",type:"primary"},on:{click:function(e){t.create_form_modal=!0}}},[t._v("\n                "+t._s(t.$t("Create a New Form"))+"\n            ")])],1)]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_body"},[t.need_installation?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.installing_ff,expression:"installing_ff"}],staticClass:"fc_narrow_box fc_white_inverse text-align-center",attrs:{"element-loading-text":"Installing Fluent Forms..."}},[n("h2",[t._v(t._s(t.$t("For_Grow_YAbOF")))]),t._v(" "),n("p",[t._v(t._s(t.$t("Forms.desc")))]),t._v(" "),n("el-button",{attrs:{type:"success"},on:{click:function(e){return t.installFF()}}},[t._v(t._s(t.$t("Das_Activate_FFI")))])],1):n("div",{staticClass:"fc_forms"},[t.pagination.total?n("div",[n("el-table",{attrs:{"empty-text":t.$t("No Form Found"),stripe:"",data:t.forms}},[n("el-table-column",{attrs:{width:"80",label:t.$t("ID"),prop:"id"}}),t._v(" "),n("el-table-column",{attrs:{"min-width":"250",label:t.$t("Title")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                            "+t._s(e.row.title)+"\n                        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{"min-width":"300",label:t.$t("Info")},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.associate_lists?n("span",{staticClass:"fc_tag_items fc_list"},[n("i",{staticClass:"el-icon-files"}),t._v(t._s(e.row.associate_lists))]):t._e(),t._v(" "),e.row.associate_tags?n("span",{staticClass:"fc_tag_items fc_tag"},[n("i",{staticClass:"el-icon-price-tag"}),t._v(" "+t._s(e.row.associate_tags))]):t._e()]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"230",label:t.$t("Shortcode")},scopedSlots:t._u([{key:"default",fn:function(t){return[n("item-copier",{attrs:{text:t.row.shortcode}})]}}])}),t._v(" "),n("el-table-column",{attrs:{"min-width":"130",label:t.$t("Created at")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",{attrs:{title:e.row.created_at}},[t._v("\n                                "+t._s(t._f("nsHumanDiffTime")(e.row.created_at))+"\n                            ")])]}}])}),t._v(" "),n("el-table-column",{attrs:{width:"150",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-dropdown",{on:{command:t.handleActionCommand}},[n("el-button",{attrs:{size:"small",type:"info"}},[t._v("\n                                    "+t._s(t.$t("Actions"))+" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",{attrs:{command:{form:e.row,url:"preview_url",target:"blank"}}},[t._v("\n                                        "+t._s(t.$t("Preview Form"))+"\n                                    ")]),t._v(" "),e.row.feed_url?n("el-dropdown-item",{attrs:{command:{form:e.row,url:"feed_url",target:"blank"}}},[t._v("\n                                        "+t._s(t.$t("Edit Integration Settings"))+"\n                                    ")]):t._e(),t._v(" "),e.row.funnel_url?n("el-dropdown-item",{attrs:{command:{form:e.row,url:"funnel_url",target:"same"}}},[t._v("\n                                        "+t._s(t.$t("Edit Connected Funnel"))+"\n                                    ")]):t._e(),t._v(" "),n("el-dropdown-item",{attrs:{command:{form:e.row,url:"edit_url",target:"blank"}}},[t._v("\n                                        "+t._s(t.$t("Edit Form"))+"\n                                    ")])],1)],1)]}}])})],1),t._v(" "),n("el-row",{staticStyle:{padding:"20px"},attrs:{gutter:20}},[n("el-col",{attrs:{md:12,sm:24}},[t._v("\n                        "+t._s(t.$t("Forms.if_need_desc"))+"\n                    ")]),t._v(" "),n("el-col",{attrs:{md:12,sm:24}},[n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetchForms}})],1)],1)],1):n("div",{staticClass:"fc_narrow_box fc_white_inverse text-align-center"},[n("h2",[t._v(t._s(t.$t("For_Looks_Lydncafy")))]),t._v(" "),n("el-button",{attrs:{type:"danger"},on:{click:function(e){t.create_form_modal=!0}}},[t._v(t._s(t.$t("Create Your First Form")))])],1)])]),t._v(" "),n("el-dialog",{attrs:{"close-on-click-modal":!1,"min-width":"600px",title:t.$t("Create a Form"),"append-to-body":!0,visible:t.create_form_modal,width:"60%"},on:{close:t.fetchForms,"update:visible":function(e){t.create_form_modal=e}}},[t.create_form_modal?n("create-form"):t._e()],1)],1)}),[],!1,null,null,null).exports,Hr={name:"SmtpSettings",components:{},data:function(){return{loading:!1,fetching:!1,bounce_settings:{ses:{}},active_provider_key:"ses",installing:!1,fluentsmtp_info:!1,fluentsmtp_just_installed:!1,fluentsmtp_config_url:"#",switching:!1}},computed:{activeProvider:function(){return this.bounce_settings[this.active_provider_key]}},methods:{getBounceSettings:function(){var t=this;this.fetching=!0,this.$get("setting/bounce_configs").then((function(e){t.bounce_settings=e.bounce_settings,e.fluentsmtp_info&&(t.fluentsmtp_info=e.fluentsmtp_info)})).catch((function(e){t.handleError(e)})).finally((function(){t.fetching=!1}))},installFluentSMTP:function(){var t=this;this.installing=!0,this.$post("setting/install-fluentsmtp").then((function(e){e.is_installed?(t.$notify.success(e.message),t.appVars.has_fluentsmtp=!0,t.appVars.disable_fluentmail_suggest=!0,t.fluentsmtp_just_installed=!0,t.fluentsmtp_config_url=e.config_url,t.getBounceSettings()):t.$notify.error("Sorry! The plugin could not be installed. Please install manually")})).catch((function(e){t.handleError(e)})).finally((function(){t.installing=!1}))},switchingProvider:function(){var t=this;this.switching=!0,setTimeout((function(){t.switching=!1}),300)}},mounted:function(){this.getBounceSettings(),this.changeTitle("Email Service Provider Settings")}},Gr=Object(a.a)(Hr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("SMTP/Email Sending Service Settings")))])])]),t._v(" "),n("div",{staticClass:"fluentcrm_pad_around"},[t.appVars.has_fluentsmtp?t.fluentsmtp_just_installed?n("div",{staticClass:"settings-section fluentcrm_databox fc_smtp_desc text-center"},[n("h3",[t._v(t._s(t.$t("FluentSMTP plugin has successfully installed")))]),t._v(" "),n("p",[t._v(t._s(t.$t("fluentSMTP_requires_to_configure_properly")))]),t._v(" "),n("a",{staticClass:"button button-primary",attrs:{href:t.fluentsmtp_config_url}},[t._v(t._s(t.$t("Configure FluentSMTP")))])]):t.fluentsmtp_info?n("div",{staticClass:"settings-section fluentcrm_databox fc_smtp_desc"},[t.fluentsmtp_info.configured?[n("h3",[t._v(t._s(t.$t("Your WordPress & FluentCRM is set to send using FluentSMTP Plugin")))]),t._v(" "),n("hr"),t._v(" "),n("h3",[t._v(t._s(t.$t("Verified Email Senders")))]),t._v(" "),n("ul",t._l(t.fluentsmtp_info.verified_senders,(function(e){return n("li",{key:e},[t._v(t._s(e))])})),0),t._v(" "),n("a",{staticClass:"button",attrs:{href:t.fluentsmtp_info.config_url}},[t._v(t._s(t.$t("Goto FluentSMTP Settings")))])]:[n("h3",[t._v(t._s(t.$t("Looks like your FluentSMTP plugin is not configured yet")))]),t._v(" "),n("a",{staticClass:"button button-primary",attrs:{href:t.fluentsmtp_info.config_url}},[t._v(t._s(t.$t("Configure FluentSMTP")))])]],2):t._e():n("div",{staticClass:"settings-section fluentcrm_databox fc_smtp_desc"},[n("h3",[t._v(t._s(t.$t("FluentSMTP - The ultimate SMTP & Email Service Connection Plugin for WordPress")))]),t._v(" "),n("hr"),t._v(" "),n("p",[t._v(t._s(t.$t("learn_about_fluentSMTP"))+" "),n("a",{attrs:{target:"_blank",href:"https://fluentsmtp.com"}},[t._v(t._s(t.$t("Learn more about FluentSMTP Plugin.")))])]),t._v(" "),n("el-row",{attrs:{gutter:12}},[n("el-col",{attrs:{span:12}},[n("h3",[t._v(t._s(t.$t("Dedicated API and SMTP connections")))]),t._v(" "),n("ul",[n("li",[t._v("Amazon SES")]),t._v(" "),n("li",[t._v("Mailgun")]),t._v(" "),n("li",[t._v("SendGrid")]),t._v(" "),n("li",[t._v("SendInBlue")]),t._v(" "),n("li",[t._v("PepiPost")]),t._v(" "),n("li",[t._v("SparkPost")]),t._v(" "),n("li",[t._v("+ Any SMTP Provider")])])]),t._v(" "),n("el-col",{attrs:{span:12}},[n("h3",[t._v("Features of Fluent SMTP Plugin")]),t._v(" "),n("ul",[n("li",[t._v(t._s(t.$t("Optimized API connection with Mail Service Providers")))]),t._v(" "),n("li",[t._v(t._s(t.$t("Email Logging for better visibility")))]),t._v(" "),n("li",[t._v(t._s(t.$t("Email Routing based on the sender email address")))]),t._v(" "),n("li",[t._v(t._s(t.$t("Real-Time Email Delivery")))]),t._v(" "),n("li",[t._v(t._s(t.$t("Resend Any Emails")))]),t._v(" "),n("li",[t._v(t._s(t.$t("In Details Reporting")))]),t._v(" "),n("li",[t._v(t._s(t.$t("Super fast UI powered by VueJS")))])])])],1),t._v(" "),n("hr"),t._v(" "),n("div",{staticClass:"fc_call_action text-align-center"},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.installing,expression:"installing"}],attrs:{disabled:t.installing,type:"success"},on:{click:function(e){return t.installFluentSMTP()}}},[t._v("\n                    "+t._s(t.$t("install_fluentSMTP"))+"\n                ")])],1)],1),t._v(" "),t.fetching?n("el-skeleton",{staticClass:"fluentcrm_databox"}):n("div",{staticClass:"settings-section fluentcrm_databox fc_smtp_desc"},[n("h2",[t._v(t._s(t.$t("Bounce Handling Settings")))]),t._v(" "),n("hr"),t._v(" "),n("h3",[t._v(t._s(t.$t("Select Your Email Service Provider")))]),t._v(" "),n("el-select",{on:{change:function(e){return t.switchingProvider()}},model:{value:t.active_provider_key,callback:function(e){t.active_provider_key=e},expression:"active_provider_key"}},t._l(t.bounce_settings,(function(t,e){return n("el-option",{key:e,attrs:{value:e,label:t.label}})})),1),t._v(" "),n("hr"),t._v(" "),t.switching?n("el-skeleton",{attrs:{rows:8}}):[n("h2",[t._v(t._s(t.activeProvider.label)+" "+t._s(t.$t("Bounce Handler")))]),t._v(" "),n("p",{staticStyle:{"font-size":"14px"}},[t._v(t._s(t.$t("If you use"))+" "),n("b",[t._v(t._s(t.activeProvider.label))]),t._v(" "+t._s(t.$t("for sending your WordPress emails. This section is for you")))]),t._v(" "),n("p",[t._v(t._s(t.activeProvider.input_title))]),t._v(" "),n("el-input",{attrs:{readonly:""},model:{value:t.activeProvider.webhook_url,callback:function(e){t.$set(t.activeProvider,"webhook_url",e)},expression:"activeProvider.webhook_url"}}),t._v(" "),n("p",{domProps:{innerHTML:t._s(t.activeProvider.input_info)}}),t._v(" "),n("p",[t._v(t._s(t.$t("For Step by Step instruction please"))+" "),n("a",{attrs:{target:"_blank",rel:"noopener",href:t.activeProvider.doc_url}},[t._v(t._s(t.$t("follow this tutorial")))])])]],2)],1)])}),[],!1,null,null,null).exports,Wr={name:"General Settings",components:{FormBuilder:Ft},data:function(){return{loading:!1,fetching:!1,user_syncing:{},user_syncing_fields:{},registration_setting:{},registration_fields:{},role_based_tagging_settings:{},role_based_tagging_settings_fields:{},user_syncing_settings:{},comment_settings:{},comment_fields:{},woo_checkout_fields:!1,woo_checkout_settings:{},app_ready:!1}},methods:{getSettings:function(){var t=this;this.fetching=!0,this.$get("setting/auto_subscribe_settings",{with:["fields"]}).then((function(e){t.user_syncing_settings=e.user_syncing_settings,t.user_syncing_fields=e.user_syncing_fields,t.registration_setting=e.registration_setting,t.registration_fields=e.registration_fields,t.comment_settings=e.comment_settings,t.comment_fields=e.comment_fields,t.role_based_tagging_settings=e.role_based_tagging_settings,t.role_based_tagging_settings_fields=e.role_based_tagging_settings_fields,e.woo_checkout_fields&&(t.woo_checkout_fields=e.woo_checkout_fields,t.woo_checkout_settings=e.woo_checkout_settings),t.app_ready=!0})).catch((function(e){t.handleError(e)})).finally((function(){t.fetching=!1}))},saveSettings:function(){var t=this;this.loading=!0,this.$post("setting/auto_subscribe_settings",{registration_setting:this.registration_setting,comment_settings:this.comment_settings,user_syncing_settings:this.user_syncing_settings,woo_checkout_settings:this.woo_checkout_settings,role_based_tagging_settings:this.role_based_tagging_settings}).then((function(e){t.$notify.success(e.message)})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))}},mounted:function(){this.getSettings(),this.changeTitle("General Settings")}},Yr=Object(a.a)(Wr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],staticClass:"fluentcrm-settings fc-general-settings fluentcrm_min_bg fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("General Settings")))])]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[t.app_ready?n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{type:"success",size:"medium"},on:{click:function(e){return t.saveSettings()}}},[t._v("\n                "+t._s(t.$t("Save Settings"))+"\n            ")]):t._e()],1)]),t._v(" "),t.app_ready?n("div",{staticClass:"fluentcrm_pad_around"},[n("div",{staticClass:"settings-section fluentcrm_databox",staticStyle:{"padding-bottom":"15px"}},[n("h2",[t._v(t._s(t.user_syncing_fields.title))]),t._v(" "),n("p",[t._v(t._s(t.user_syncing_fields.sub_title))]),t._v(" "),n("hr"),t._v(" "),n("form-builder",{staticClass:"mt-20",attrs:{formData:t.user_syncing_settings,fields:t.user_syncing_fields.fields}})],1),t._v(" "),n("div",{staticClass:"settings-section fluentcrm_databox"},[n("h2",[t._v(t._s(t.registration_fields.title))]),t._v(" "),n("p",[t._v(t._s(t.registration_fields.sub_title))]),t._v(" "),n("hr"),t._v(" "),n("form-builder",{staticClass:"mt-20",attrs:{formData:t.registration_setting,fields:t.registration_fields.fields}})],1),t._v(" "),n("div",{staticClass:"settings-section fluentcrm_databox",staticStyle:{"padding-bottom":"15px"}},[n("h2",[t._v(t._s(t.role_based_tagging_settings_fields.title))]),t._v(" "),n("p",[t._v(t._s(t.role_based_tagging_settings_fields.sub_title))]),t._v(" "),n("hr"),t._v(" "),t.has_campaign_pro||"yes"!=t.role_based_tagging_settings.status?t._e():n("p",{staticStyle:{color:"red"}},[t._v(t._s(t.$t("This feature only available on FluentCRM Pro."))+" "),n("a",{attrs:{target:"_blank",rel:"noopener",href:"https://fluentcrm.com"}},[t._v(t._s(t.$t("Please purchase Pro")))]),t._v(" "+t._s(t.$t("to enable this feature")))]),t._v(" "),n("form-builder",{staticClass:"mt-20",attrs:{formData:t.role_based_tagging_settings,fields:t.role_based_tagging_settings_fields.fields}})],1),t._v(" "),n("div",{staticClass:"settings-section fluentcrm_databox",staticStyle:{"padding-bottom":"15px"}},[n("h2",[t._v(t._s(t.comment_fields.title))]),t._v(" "),n("p",[t._v(t._s(t.comment_fields.sub_title))]),t._v(" "),n("hr"),t._v(" "),n("form-builder",{staticClass:"mt-20",attrs:{formData:t.comment_settings,fields:t.comment_fields.fields}})],1),t._v(" "),t.woo_checkout_fields?n("div",{staticClass:"settings-section fluentcrm_databox",staticStyle:{"padding-bottom":"15px"}},[n("h2",[t._v(t._s(t.woo_checkout_fields.title))]),t._v(" "),n("p",[t._v(t._s(t.woo_checkout_fields.sub_title))]),t._v(" "),n("hr"),t._v(" "),n("form-builder",{staticClass:"mt-20",attrs:{formData:t.woo_checkout_settings,fields:t.woo_checkout_fields.fields}})],1):t._e(),t._v(" "),t.app_ready?n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{type:"success",size:"medium"},on:{click:function(e){return t.saveSettings()}}},[t._v("\n            "+t._s(t.$t("Save Settings"))+"\n        ")]):t._e()],1):t._e()])}),[],!1,null,null,null).exports,Jr={name:"LicenseSettings",components:{},data:function(){return{fetching:!0,verifying:!1,licenseData:{},licenseKey:"",showNewLicenseInput:!1,errorMessage:""}},methods:{getSettings:function(){var t=this;this.errorMessage="",this.fetching=!0,this.$get("campaign-pro-settings/license",{verify:!0}).then((function(e){t.licenseData=e})).catch((function(e){t.handleError(e)})).finally((function(){t.fetching=!1}))},verifyLicense:function(){var t=this;if(!this.licenseKey)return this.$notify.error("Please provide a license key"),void(this.errorMessage=this.$t("Please provide a license key"));this.verifying=!0,this.errorMessage="",this.$post("campaign-pro-settings/license",{license_key:this.licenseKey}).then((function(e){t.licenseData=e.license_data,t.$notify.success(e.message)})).catch((function(e){var n="";(n="string"==typeof e?e:e&&e.message?e.message:window.FLUENTCRM.convertToText(e))||(n=t.$t("Something is wrong!")),t.errorMessage=n,t.handleError(e)})).finally((function(){t.verifying=!1}))},deactivateLicense:function(){var t=this;this.verifying=!0,this.$del("campaign-pro-settings/license").then((function(e){t.licenseData=e.license_data,t.$notify.success(e.message)})).catch((function(e){t.handleError(e)})).finally((function(){t.verifying=!1}))}},mounted:function(){this.has_campaign_pro&&this.getSettings(),this.changeTitle("General Settings")}},Kr=Object(a.a)(Jr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.has_campaign_pro?n("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("License Management")))])]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("el-button",{attrs:{type:"text",size:"medium",icon:"el-icon-refresh"},on:{click:t.getSettings}})],1)]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.verifying,expression:"verifying"}],staticClass:"fluentcrm_pad_around"},[t.fetching?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],staticClass:"text-align-center"},[n("h3",[t._v(t._s(t.$t("Fetching License Information Please wait")))])]):n("div",{staticClass:"fc_narrow_box fc_white_inverse text-align-center",class:"fc_license_"+t.licenseData.status},["expired"==t.licenseData.status?n("div",[n("h3",[t._v(t._s(t.$t("Looks like your license has been expired"))+" "+t._s(t._f("nsHumanDiffTime")(t.licenseData.expires)))]),t._v(" "),n("a",{staticClass:"el-button el-button--danger el-button--small",attrs:{href:t.licenseData.renew_url,target:"_blank"}},[t._v(t._s(t.$t("Click Here to Renew your License")))]),t._v(" "),n("hr",{staticStyle:{margin:"20px 0px"}}),t._v(" "),t.showNewLicenseInput?n("div",[n("h3",[t._v(t._s(t.$t("Your License Key")))]),t._v(" "),n("el-input",{attrs:{placeholder:"License Key"},model:{value:t.licenseKey,callback:function(e){t.licenseKey=e},expression:"licenseKey"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-lock"},on:{click:function(e){return t.verifyLicense()}},slot:"append"},[t._v(t._s(t.$t("Verify License")))])],1)],1):n("p",[t._v(t._s(t.$t("Have a new license Key?"))+" "),n("a",{attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.showNewLicenseInput=!t.showNewLicenseInput}}},[t._v(t._s(t.$t("Click here")))])])]):"valid"==t.licenseData.status?n("div",[t._m(0),t._v(" "),n("h2",[t._v(t._s(t.$t("You license key is valid and activated")))]),t._v(" "),n("hr",{staticStyle:{margin:"20px 0px"}}),t._v(" "),n("p",[t._v(t._s(t.$t("Want to deactivate this license?"))+" "),n("a",{attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.deactivateLicense()}}},[t._v(t._s(t.$t("Click here")))])])]):n("div",[n("h3",[t._v(t._s(t.$t("Please Provide a license key of FluentCRM - Email Marketing Addon")))]),t._v(" "),n("el-input",{attrs:{placeholder:"License Key"},model:{value:t.licenseKey,callback:function(e){t.licenseKey=e},expression:"licenseKey"}},[n("el-button",{attrs:{slot:"append",type:"success",icon:"el-icon-lock"},on:{click:function(e){return t.verifyLicense()}},slot:"append"},[t._v(t._s(t.$t("Verify License")))])],1),t._v(" "),n("hr",{staticStyle:{margin:"20px 0 30px"}}),t._v(" "),t.showNewLicenseInput?t._e():n("p",[t._v(t._s(t.$t("dont_have_license_key"))+" "),n("a",{attrs:{target:"_blank",href:t.licenseData.purchase_url}},[t._v(t._s(t.$t("Purchase one here")))])])],1)]),t._v(" "),n("p",{staticClass:"text-align-center",staticStyle:{color:"red"},domProps:{innerHTML:t._s(t.errorMessage)}})])]):t._e()}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"text-align-center"},[e("span",{staticClass:"el-icon el-icon-circle-check",staticStyle:{"font-size":"50px"}})])}],!1,null,null,null).exports,Qr={name:"IntegrationSettings",components:{OptionSelector:vt},data:function(){return{loading:!1,integrations:{},selected_integration:"",syncing_data:!1,syncing_status:!1,syncing_page:1,last_sync_id:0,saving:!1,switching:!1,syncing_error:!1}},computed:{currentIntegration:function(){return!(me()(this.integrations)||!this.selected_integration)&&this.integrations[this.selected_integration]}},methods:{fetchIntegrations:function(){var t=this;this.loading=!0,this.$get("setting/integrations",{with:["fields"]}).then((function(e){t.integrations=e.integrations,me()(t.integrations)||(t.$route.query.selected_integration&&t.integrations[t.$route.query.selected_integration]?t.selected_integration=t.$route.query.selected_integration:t.selected_integration=Object.keys(t.integrations)[0])})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},syncData:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e&&(this.syncing_page=1);var n={tags:this.currentIntegration.settings.tags,lists:this.currentIntegration.settings.lists,contact_status:this.currentIntegration.settings.contact_status,provider:this.selected_integration,action:"sync",syncing_page:this.syncing_page,last_sync_id:this.last_sync_id};this.syncing_data=!0,this.syncing_error=!1,this.$post("setting/integrations",n).then((function(e){e&&e.syncing_status?(t.syncing_status=e.syncing_status,t.syncing_status.has_more?(t.syncing_page+=1,t.last_sync_id=t.syncing_status.last_sync_id,t.syncData(!1)):t.syncing_data=!1):(console.log(e),e||(e=t.$t("Something went wrong, when syncing data")),t.syncing_error=e)})).catch((function(e){console.log(e),e||(e=t.$t("Something went wrong!")),t.syncing_error=e,t.handleError(e)})).finally((function(){}))},saveSettings:function(){var t=this,e={tags:this.currentIntegration.settings.tags,lists:this.currentIntegration.settings.lists,contact_status:this.currentIntegration.settings.contact_status,provider:this.selected_integration,action:"save"};this.saving=!0,this.$post("setting/integrations",e).then((function(e){t.$notify.success(e.message)})).catch((function(e){t.handleError(e)})).finally((function(){t.saving=!1}))},reloadPage:function(){window.location.reload(!0)},switchProvider:function(t){var e=this;this.syncing_data||(this.switching=!0,this.$nextTick((function(){e.selected_integration=t,e.$router.push({name:"integration_settings",query:{selected_integration:t}}),e.switching=!1,e.syncing_error=""})))}},mounted:function(){this.fetchIntegrations()}},Zr=Object(a.a)(Qr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fc_integration_settings"},[n("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[t.selected_integration?[n("div",{staticClass:"fluentcrm_header"},[n("ul",{staticClass:"fc_settings_sub_menu"},t._l(t.integrations,(function(e,i){return n("li",{key:i,class:{fc_active:i==t.selected_integration},on:{click:function(e){return t.switchProvider(i)}}},[t._v("\n                        "+t._s(e.title)+"\n                    ")])})),0)]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_pad_around"},[t.currentIntegration?n("div",{staticClass:"fc_integration"},[n("p",{staticStyle:{"line-height":"140%"}},[t._v(t._s(t.currentIntegration.sub_title))]),t._v(" "),t.switching?t._e():n("div",{staticClass:"fc_integration_sync fluentcrm_databox"},[t.currentIntegration.settings.is_enabled?t._e():n("div",[n("h2",[t._v(t._s(t.currentIntegration.sync_title))]),t._v(" "),n("p",[t._v(t._s(t.currentIntegration.sync_desc))])]),t._v(" "),t.syncing_status?n("div",{staticClass:"text-align-center"},[t.syncing_status.has_more?[t.syncing_error?[n("h3",[t._v(t._s(t.$t("Looks like there had a problem to sync the data")))]),t._v(" "),n("el-button",{attrs:{type:"success"},on:{click:function(e){return t.syncData(!1)}}},[t._v("\n                                        "+t._s(t.$t("Resume"))+"\n                                    ")]),t._v(" "),n("h5",[t._v(t._s(t.$t("Error Details")))]),t._v(" "),n("pre",[t._v(t._s(t.syncing_error))])]:[n("h3",[t._v(t._s(t.$t("Importing now...")))]),t._v(" "),n("h4",[t._v(t._s(t.$t("Please do not close this window or navigate to other page")))]),t._v(" "),n("h2",[t._v(t._s(t.syncing_status.current_page)+"/"+t._s(t.syncing_status.page_total))]),t._v(" "),n("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:parseInt(t.syncing_status.current_page/t.syncing_status.page_total*100),status:"success"}}),t._v(" "),n("p",{directives:[{name:"loading",rawName:"v-loading",value:!0,expression:"true"}]},[t._v(t._s(t.$t("Syncing...")))])]]:n("div",[n("h3",[t._v(t._s(t.$t("Data syncing has been completed. Please reload this page now")))]),t._v(" "),n("el-button",{attrs:{type:"success"},on:{click:function(e){return t.reloadPage()}}},[t._v(t._s(t.$t("Reload Page")))])],1)],2):n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.syncing_data,expression:"syncing_data"}],attrs:{"label-position":"top",data:t.currentIntegration.settings}},[n("el-form-item",{attrs:{label:"Default List to Contact (Optional)"}},[n("option-selector",{attrs:{field:{option_key:"lists",creatable:!0,is_multiple:!0}},model:{value:t.currentIntegration.settings.lists,callback:function(e){t.$set(t.currentIntegration.settings,"lists",e)},expression:"currentIntegration.settings.lists"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Default Tag for Contact (Optional)"}},[n("option-selector",{attrs:{field:{option_key:"tags",creatable:!0,is_multiple:!0}},model:{value:t.currentIntegration.settings.tags,callback:function(e){t.$set(t.currentIntegration.settings,"tags",e)},expression:"currentIntegration.settings.tags"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"Default contact status (for new contacts)"}},[n("option-selector",{attrs:{field:{option_key:"editable_statuses"}},model:{value:t.currentIntegration.settings.contact_status,callback:function(e){t.$set(t.currentIntegration.settings,"contact_status",e)},expression:"currentIntegration.settings.contact_status"}}),t._v(" "),"pending"==t.currentIntegration.settings.contact_status?n("p",[t._v("\n                                    "+t._s(t.$t("A double optin email will be sent automatically")))]):t._e()],1),t._v(" "),t.currentIntegration.settings.is_enabled?n("div",[n("el-button",{attrs:{type:"success"},on:{click:function(e){return t.saveSettings()}}},[t._v(t._s(t.$t("Save Settings"))+"\n                                ")]),t._v(" "),n("p",{staticStyle:{"margin-top":"30px"}},[t._v("or "),n("span",{staticStyle:{cursor:"pointer","text-decoration":"underline"},on:{click:function(e){return t.syncData(!0)}}},[t._v(t._s(t.$t("click here")))]),t._v("\n                                    "+t._s(t.$t("to re-sync the data again")))])],1):n("div",[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.syncData(!0)}}},[t._v("\n                                    "+t._s(t.currentIntegration.sync_button)+"\n                                ")]),t._v(" "),n("p",[t._v("\n                                    "+t._s(t.$t("Syncing may take few seconds to minutes based on your customers size in"))+"\n                                    "+t._s(t.currentIntegration.title))])],1)],1)],1)]):t._e()])]:t.loading?t._e():n("div",{staticClass:"fc_integrations_list"},[n("div",{staticClass:"fluentcrm_header",staticStyle:{padding:"0px 15px"}},[n("h3",[t._v(t._s(t.$t("Integrations")))])]),t._v(" "),n("div",{staticClass:"fluentcrm_pad_around"},[n("p",[t._v(t._s(t.$t("fluentcrtm_integrations_with_all_of_plugins"))+" "),n("a",{attrs:{rel:"noopener noffollow",href:"https://fluentcrm.com"}},[t._v(t._s(t.$t("pro version of FluentCRM")))])]),t._v(" "),n("h4",[t._v(t._s(t.$t("ECOMMERCE INTEGRATION:")))]),t._v(" "),n("ul",[n("li",[n("b",[t._v(t._s(t.$t("WooCommerce Integration:")))]),t._v(" "+t._s(t.$t("Collect and segment email contacts from wooCommerce checkout and send emails. Run funnels, segment your customers into FluentCRM"))+"\n                    ")]),t._v(" "),n("li",[n("b",[t._v(t._s(t.$t("EDD Integration:")))]),t._v(" "+t._s(t.$t("edd_integration_instruction"))+"\n                    ")])]),t._v(" "),n("h4",[t._v(t._s(t.$t("LMS INTEGRATION:")))]),t._v(" "),n("ul",[n("li",[n("b",[t._v(t._s(t.$t("LifterLMS:")))]),t._v(" "+t._s(t.$t("lifterlms_integration_instruction"))+"\n                    ")]),t._v(" "),n("li",[n("b",[t._v(t._s(t.$t("LearnDash Integration:")))]),t._v(" "+t._s(t.$t("learndash_integration_instruction"))+"\n                    ")]),t._v(" "),n("li",[n("b",[t._v(t._s(t.$t("TutorLMS Integration:")))]),t._v(" "+t._s(t.$t("tutorlms_integration_instruction"))+"\n                    ")])]),t._v(" "),n("h4",[t._v("MEMBERSHIP INTEGRATION:")]),t._v(" "),t._m(0),t._v(" "),n("h4",[t._v("Form INTEGRATION:")]),t._v(" "),t._m(1),t._v(" "),n("h4",[t._v("Page Builder INTEGRATIONS:")]),t._v(" "),t._m(2)])])],2)])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("Paid Membership Pro integration.")]),t._v(" "),n("li",[t._v("MemberPress.")]),t._v(" "),n("li",[t._v("Wishlist Members.")]),t._v(" "),n("li",[t._v("Restrict Content Pro Integration")]),t._v(" "),n("li",[t._v("WPFusion Integration")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("ul",[e("li",[this._v("Fluent Forms Integration")]),this._v(" "),e("li",[this._v("Elementor Pro Form Integration")]),this._v(" "),e("li",[this._v("Divi Bloom Integration")]),this._v(" "),e("li",[this._v("ThriveArchitect")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",[n("li",[t._v("ThriveThemes integration")]),t._v(" "),n("li",[t._v("Divi Themes")]),t._v(" "),n("li",[t._v("Elementor Page Builder")]),t._v(" "),n("li",[t._v("Gutenberg / WordPress Editor Conditional Blocks")]),t._v(" "),n("li",[t._v("Oxygen Builder Integration")])])}],!1,null,null,null).exports,Xr={name:"CreateLink",components:{FormBuilder:Ft},props:["editing_row","item_mode"],data:function(){return{link:{title:"",notes:"",target_url:"",actions:{tags:[],lists:[]},detach_actions:{tags:[],lists:[]}},creating:!1,fields:{title:{type:"input-text",placeholder:this.$t("Link Title"),label:this.$t("Link Title"),help:this.$t("Your link title so you do not forget it")},target_url:{type:"input-text",data_type:"url",placeholder:this.$t("Your target URL"),label:this.$t("Target Full URL"),help:this.$t("Insert a valid url that this link will direct to")},actions:{type:"input-tag-list",label:"",wrapper_class:"fc_group_field_half",tag_label:this.$t("Apply Tags when clicked"),tag_help:this.$t("These tags will be applied to the contact whenever this link is clicked"),list_label:this.$t("Apply Lists when clicked (optional)"),list_help:this.$t("These Lists will be applied to the contact whenever this link is clicked")},detach_actions:{type:"input-tag-list",label:"",wrapper_class:"fc_group_field_half",tag_label:this.$t("Remove Tags when clicked (optional)"),tag_help:this.$t("These tags will be removed from the contact whenever this link is clicked"),list_label:this.$t("Remove Lists when clicked (optional)"),list_help:this.$t("These Tags will be removed to a contact whenever this link is clicked")},notes:{type:"input-text",placeholder:this.$t("Your URL Note"),data_type:"textarea",label:this.$t("Note (Optional)"),help:this.$t("Feel free to add a note regarding this URL")}},link_created:!1}},methods:{createLink:function(){var t=this;this.creating=!0,this.$post("smart-links",{link:this.link}).then((function(e){t.$emit("linkCreated",e.link),t.$notify.success(e.message),t.link.short_url=e.link.short_url,t.link_created=!0})).catch((function(e){t.handleError(e)})).finally((function(){t.creating=!1}))},updateLink:function(){var t=this;this.$put("smart-links/".concat(this.link.id),{link:this.link}).then((function(e){t.$emit("linkCreated",e.link),t.$notify.success(e.message),t.link_created=!0})).catch((function(e){t.handleError(e)})).finally((function(){t.creating=!1}))}},created:function(){"edit"==this.item_mode&&(this.link=JSON.parse(JSON.stringify(this.editing_row)))}},to={name:"ItemCopier",props:["url"],methods:{gotoUrl:function(){}}},eo={name:"actionLinks",components:{CreateLink:Object(a.a)(Xr,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_create_link_wrapper"},[t.link_created?n("div",{staticClass:"fc_narrow_box fc_white_inverse text-align-center"},[n("p",[t._v("\n            "+t._s(t.$t("_Cr_Please_utfsuawau"))+"\n        ")]),t._v(" "),n("el-input",{attrs:{type:"textarea",readonly:!0},model:{value:t.link.short_url,callback:function(e){t.$set(t.link,"short_url",e)},expression:"link.short_url"}})],1):n("div",[n("form-builder",{attrs:{fields:t.fields,formData:t.link}}),t._v(" "),"create"==t.item_mode?n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.createLink()}}},[t._v("\n            "+t._s(t.$t("Create Smart Link"))+"\n        ")]):n("el-button",{attrs:{type:"success"},on:{click:function(e){return t.updateLink()}}},[t._v("\n            "+t._s(t.$t("Update Smart Link"))+"\n        ")])],1)])}),[],!1,null,null,null).exports,Confirm:f,Pagination:b,ItemCopier:Rs,UrlGoTo:Object(a.a)(to,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-input",{attrs:{size:"mini",readonly:!0},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}},[n("a",{attrs:{slot:"append",href:t.url,target:"_blank",rel:"nofollow"},slot:"append"},[n("i",{staticClass:"el-icon-link"})])])}),[],!1,null,null,null).exports,ListTagItems:Us},data:function(){return{links:[],loading:!1,activating:!1,require_activation:!1,create_link_modal:!1,pagination:{total:0,per_page:20,current_page:1},search:"",editingRow:!1,edit_modal:!1}},methods:{fetchLinks:function(){var t=this;this.loading=!0,this.$get("smart-links",{per_page:this.pagination.per_page,page:this.pagination.current_page,search:this.search}).then((function(e){t.links=e.action_links.data,t.pagination.total=e.action_links.total})).catch((function(e){"disabled"===e.status?t.require_activation=!0:t.handleError(e)})).finally((function(){t.loading=!1}))},activateModule:function(){var t=this;this.activating=!0,this.$post("smart-links/activate").then((function(e){t.require_activation=!1,t.create_link_modal=!0,window.fcAdmin.has_smart_link=!0})).catch((function(e){t.handleError(e)})).finally((function(){t.activating=!1}))},remove:function(t){var e=this;this.$del("smart-links/".concat(t.id)).then((function(t){e.$notify.success(t.message),e.fetchLinks()})).catch((function(t){e.handleError(t)}))},showEdit:function(t){t.detach_actions||(t.detach_actions={tags:[],lists:[]}),this.editingRow=t,this.edit_modal=!0}},created:function(){this.has_campaign_pro&&this.fetchLinks(),this.changeTitle("Smart Links")}},no=Object(a.a)(eo,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v("\n                "+t._s(t.$t("Smart Links"))+"\n                "),n("el-popover",{attrs:{placement:"right",width:"400",trigger:"hover"}},[n("p",[t._v("\n                        "+t._s(t.$t("Lin_SmartLinks_aytta"))+"\n                    ")]),t._v(" "),n("el-button",{attrs:{slot:"reference",type:"text",icon:"el-icon-info"},slot:"reference"})],1)],1)]),t._v(" "),t.has_campaign_pro?n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"},[n("div",{staticClass:"fc-search-box"},[n("el-input",{attrs:{clearable:"",size:"mini",placeholder:t.$t("Type and Enter...")},on:{clear:t.fetchLinks},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.fetchLinks.apply(null,arguments)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.fetchLinks},slot:"append"})],1)],1),t._v(" "),n("el-button",{attrs:{disabled:t.require_activation,type:"primary",size:"small"},on:{click:function(e){t.create_link_modal=!0}}},[t._v("\n                "+t._s(t.$t("Add New Smart Link"))+"\n            ")])],1):t._e()]),t._v(" "),t.has_campaign_pro?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_pad_around fluentcrm_smart_links_wrap"},[t.require_activation?n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.activating,expression:"activating"}],staticClass:"fc_narrow_box fc_white text-align-center"},[n("h1",[t._v(t._s(t.$t("SmartLinks")))]),t._v(" "),n("p",[t._v("\n                "+t._s(t.$t("Lin_SmartLinks_aytta"))+"\n            ")]),t._v(" "),n("el-button",{attrs:{type:"success",size:"large"},on:{click:function(e){return t.activateModule()}}},[t._v("\n                "+t._s(t.$t("Start Using SmartLinks"))+"\n            ")])],1):n("div",{staticClass:"settings-section settings-general"},[n("el-table",{attrs:{"empty-text":t.$t("No Data Found"),stripe:"",data:t.links}},[n("el-table-column",{staticClass:"hello",attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("h4",[t._v(t._s(t.$t("Attached Tags and Lists")))]),t._v(" "),n("p",[n("list-tag-items",{attrs:{item_type:"tags",items:e.row.actions.tags}}),t._v(" "),n("list-tag-items",{attrs:{item_type:"lists",items:e.row.actions.lists}})],1),t._v(" "),e.row.detach_actions?[n("h4",[t._v(t._s(t.$t("Detach Tags and Lists")))]),t._v(" "),n("p",[n("list-tag-items",{attrs:{item_type:"tags",items:e.row.detach_actions.tags}}),t._v(" "),n("list-tag-items",{attrs:{item_type:"lists",items:e.row.detach_actions.lists}})],1)]:t._e(),t._v(" "),n("p",[n("b",[t._v(t._s(t.$t("Subscriber Clicks"))+":")]),t._v(" "+t._s(e.row.contact_clicks))]),t._v(" "),n("p",[n("b",[t._v(t._s(t.$t("Public User Clicks"))+":")]),t._v(" "+t._s(e.row.all_clicks-e.row.contact_clicks))]),t._v(" "),e.row.notes?[n("h4",[t._v(t._s(t.$t("Note"))+":")]),t._v(" "),n("p",{domProps:{innerHTML:t._s(e.row.notes)}})]:t._e()]}}],null,!1,1988563605)}),t._v(" "),n("el-table-column",{attrs:{width:"170",label:t.$t("Title")},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.title)+"\n                    ")]}}],null,!1,2426795613)}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Smart URL")},scopedSlots:t._u([{key:"default",fn:function(t){return[n("item-copier",{attrs:{text:t.row.short_url}})]}}],null,!1,4064985928)}),t._v(" "),n("el-table-column",{attrs:{label:t.$t("Target URL")},scopedSlots:t._u([{key:"default",fn:function(t){return[n("url-go-to",{attrs:{url:t.row.target_url}})]}}],null,!1,2251746495)}),t._v(" "),n("el-table-column",{attrs:{width:"100",label:t.$t("Actions")},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(n){return t.showEdit(e.row)}}}),t._v(" "),n("confirm",{on:{yes:function(n){return t.remove(e.row)}}},[n("el-button",{attrs:{slot:"reference",size:"mini",type:"danger",icon:"el-icon-delete"},slot:"reference"})],1)]}}],null,!1,1109812164)})],1),t._v(" "),n("pagination",{attrs:{pagination:t.pagination},on:{fetch:t.fetchLinks}})],1)]):n("div",{staticClass:"fluentcrm_pad_around"},[n("div",{staticClass:"fc_narrow_box fc_white text-align-center"},[n("h1",[t._v(t._s(t.$t("SmartLinks")))]),t._v(" "),n("p",[t._v("\n                "+t._s(t.$t("Lin_SmartLinks_aytta"))+"\n            ")]),t._v(" "),n("p",[t._v("\n                "+t._s(t.$t("Lin_This_iapfPdtFPta"))+"\n            ")]),t._v(" "),n("div",{},[n("a",{staticClass:"el-button el-button--danger",attrs:{href:t.appVars.crm_pro_url,target:"_blank",rel:"noopener"}},[t._v("\n                    "+t._s(t.$t("Get FluentCRM Pro"))+"\n                ")])])])]),t._v(" "),n("el-dialog",{attrs:{width:"60%","append-to-body":!0,visible:t.create_link_modal,title:t.$t("Create a new Smart link")},on:{"update:visible":function(e){t.create_link_modal=e}}},[t.create_link_modal?n("create-link",{attrs:{item_mode:"create"},on:{linkCreated:t.fetchLinks}}):t._e()],1),t._v(" "),n("el-dialog",{attrs:{width:"60%","append-to-body":!0,visible:t.edit_modal,title:t.$t("Edit Smart link")},on:{"update:visible":function(e){t.edit_modal=e}}},[t.edit_modal?n("create-link",{attrs:{item_mode:"edit",editing_row:t.editingRow},on:{linkCreated:t.fetchLinks}}):t._e()],1)],1)}),[],!1,null,null,null).exports,io=n(171),so=n.n(io),ao={name:"Documentations",data:function(){return{search:"",fetching:!1,docs:[],utl_param:"?utm_source=wp&utm_medium=doc&utm_campaign=doc"}},computed:{doc_cats:function(){if(!this.docs.length)return[];var t={item_3:{label:this.$t("Getting Started With Audience"),docs:[]},item_7:{label:this.$t("Grow Your Audience"),docs:[]},item_4:{label:this.$t("Email Campaign"),docs:[]},item_5:{label:this.$t("Automation Funnels"),docs:[]}};return this.each(this.docs,(function(e){var n="item_"+e.category.value;t[n]||(t[n]={label:e.category.label,cat_id:e.category.value,docs:[]}),t[n].docs.push(e)})),Object.values(t)},search_items:function(){var t=this;return this.search&&this.docs.length?so()(this.docs,(function(e){return e.title.includes(t.search)||e.content.includes(t.search)})):[]}},methods:{openSearch:function(){},fetchDocs:function(){var t=this;this.fetching=!0,this.$get("docs").then((function(e){t.docs=e.docs})).catch((function(e){t.handleError(e)})).finally((function(){t.fetching=!1}))}},mounted:function(){this.fetchDocs()}},ro=Object(a.a)(ao,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_docs"},[n("div",{staticClass:"fc_doc_header text-align-center",staticStyle:{"max-width":"800px",margin:"50px auto",padding:"0px 20px"}},[n("h1",[t._v(t._s(t.$t("How can we help you?")))]),t._v(" "),n("p",[t._v(t._s(t.$t("Please view the"))+" "),n("a",{attrs:{href:"https://fluentcrm.com/docs"}},[t._v(t._s(t.$t("documentation")))]),t._v(" "+t._s(t.$t("still_cant_find_the_answer"))+" "),n("a",{attrs:{href:"https://wpmanageninja.com/support-tickets/"}},[t._v(t._s(t.$t("open a support ticket")))]),t._v(" "+t._s(t.$t("and we will be happy to answer your questions and assist you with any problems."))+"\n        ")]),t._v(" "),n("el-input",{directives:[{name:"loading",rawName:"v-loading",value:t.fetching,expression:"fetching"}],attrs:{clearable:"",disabled:t.fetching,size:"large",placeholder:t.$t("Search Type and Enter...")},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),t._v(" "),t.search?n("div",{staticClass:"search_result"},[n("div",{staticClass:"fc_doc_items"},[n("div",{staticClass:"fc_doc_header"},[n("h3",[t._v(t._s(t.$t("Search Results for:"))+" "+t._s(t.search))])]),t._v(" "),n("div",{staticClass:"fc_doc_lists"},[t.search_items.length?n("ul",t._l(t.search_items,(function(e){return n("li",{key:e.id},[n("a",{attrs:{target:"_blank",href:e.link+t.utl_param},domProps:{innerHTML:t._s(e.title)}})])})),0):n("p",[t._v(t._s(t.$t("Sorry! No docs found")))])])])]):t._e()],1),t._v(" "),n("div",{staticClass:"doc_body"},t._l(t.doc_cats,(function(e,i){return n("div",{key:i,staticClass:"doc_each_items"},[n("div",{staticClass:"fc_doc_items"},[n("div",{staticClass:"fc_doc_header"},[n("h3",[t._v(t._s(e.label))])]),t._v(" "),n("div",{staticClass:"fc_doc_lists"},[n("ul",t._l(e.docs,(function(e){return n("li",{key:e.id},[n("a",{attrs:{target:"_blank",href:e.link+t.utl_param},domProps:{innerHTML:t._s(e.title)}})])})),0)])])])})),0)])}),[],!1,null,null,null).exports,oo={name:"Addons",data:function(){return{addOns:[],loading:!0,installing:!1}},methods:{fetchAddons:function(){var t=this;this.loading=!0,this.$get("docs/addons").then((function(e){t.addOns=e.addons})).catch((function(e){t.$handleError(e)})).finally((function(){t.loading=!1}))},installPlugin:function(t){var e=this;this.installing=!0,this.$post("setting/install-"+t).then((function(t){t.is_installed?e.$notify.success(t.message):e.$notify.error("Sorry, the selected plugins could not be installed"),e.fetchAddons()})).catch((function(t){e.handleError(t)})).finally((function(){e.installing=!1}))}},mounted:function(){this.fetchAddons()}},lo=Object(a.a)(oo,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_docs",staticStyle:{"max-width":"1000px",margin:"50px auto",padding:"0px 20px"}},[n("div",{staticClass:"fc_doc_header text-align-center"},[n("h1",[t._v(t._s(t.$t("FluentCRM Recommended Plugins and Addons")))]),t._v(" "),n("p",[t._v(t._s(t.$t("Extend FluentCRM functionalities and supercharge your email marketing and automation")))])]),t._v(" "),n("div",{staticClass:"addons_wrap",staticStyle:{"margin-top":"30px"}},[t.loading?n("el-skeleton",{staticStyle:{width:"100%"},attrs:{animated:""}},[n("template",{slot:"template"},[n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{span:8}},[n("el-skeleton",{staticStyle:{background:"white",padding:"15px"},attrs:{rows:5}})],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-skeleton",{staticStyle:{background:"white",padding:"15px"},attrs:{rows:5}})],1),t._v(" "),n("el-col",{attrs:{span:8}},[n("el-skeleton",{staticStyle:{background:"white",padding:"15px"},attrs:{rows:5}})],1)],1)],1)],2):n("div",[t.has_campaign_pro?t._e():n("div",{staticClass:"fc_addon fc_pro_wrapper"},[n("h2",[t._v(t._s(t.$t("Supercharge your Email Marketing and Automation with FluentCRM Pro")))]),t._v(" "),n("p",[t._v(t._s(t.$t("with_fluentcrm_pro_integrate_with_other_plugins")))]),t._v(" "),n("a",{staticClass:"el-button el-button--success",attrs:{href:"https://fluentcrm.com/",target:"_blank",rel:"noopener"}},[t._v("\n                    "+t._s(t.$t("Get FluentCRM Pro Now"))+"\n                ")])]),t._v(" "),n("el-row",{attrs:{gutter:30}},t._l(t.addOns,(function(e,i){return n("el-col",{key:i,attrs:{md:8,sm:24}},[n("div",{staticClass:"fc_addon"},[e.is_installed?n("span",{staticClass:"fc_addon_installed"},[t._v(t._s(t.$t("Installed")))]):t._e(),t._v(" "),n("img",{attrs:{src:e.logo}}),t._v(" "),n("h3",[n("a",{attrs:{target:"_blank",href:e.learn_more_url}},[t._v(t._s(e.title))])]),t._v(" "),n("p",[t._v(t._s(e.description))]),t._v(" "),e.is_installed?n("a",{staticClass:"el-button el-button--primary",attrs:{href:e.settings_url}},[t._v(t._s(t.$t("View Settings")))]):n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.installing,expression:"installing"}],attrs:{type:"success"},on:{click:function(e){return t.installPlugin(i)}}},[t._v("\n                            "+t._s(e.action_text)+"\n                        ")])],1)])})),1)],1)],1)])}),[],!1,null,null,null).exports,co={components:{GrowthChart:{extends:window.VueChartJs.Line,mixins:[window.VueChartJs.mixins.reactiveProp],props:["chart_options"],mounted:function(){this.renderChart(this.chartData,this.chart_options)}}},name:"ChartBuilder",props:["currency_sign","data_sets"],data:function(){return{chartData:!1,maxCumulativeValue:0,chartOptions:{responsive:!0,maintainAspectRatio:!1,scales:{xAxes:[{gridLines:{drawOnChartArea:!1},ticks:{beginAtZero:!0,autoSkip:!0,maxTicksLimit:10}}]},drawBorder:!1,layout:{padding:{left:20,right:20,top:20,bottom:20}}}}},methods:{setupChartItemsX:function(){var t=this,e={labels:[],datasets:[]},n=0;this.each(this.data_sets,(function(i,s){var a={label:i.label,data:[],backgroundColor:i.backgroundColor,borderColor:i.borderColor,type:"line",yAxisID:i.id,fill:i.fill};t.each(i.data,(function(t,i){a.data.push(t),parseInt(t)>n&&(n=parseInt(t)),0==s&&e.labels.push(i)})),e.datasets.push(a)})),n>1e4?n=1e3*Math.ceil(n/1e3):n>500?n=100*Math.ceil(n/100):n+=10,this.maxCumulativeValue=n;var i=[];this.each(this.data_sets,(function(e,n){i.push({id:e.id,type:"linear",position:0==n?"left":"right",gridLines:{drawOnChartArea:0==n},ticks:{beginAtZero:!0,max:t.maxCumulativeValue,userCallback:function(t,e,n){if(Math.floor(t)===t)return t},callback:function(t,e,n){return this.currency_sign+" "+t}}})})),this.chartOptions.scales.yAxes=i,this.setToolTip(),this.chartData=e},setToolTip:function(){var t=this;this.chartOptions.tooltips={enabled:!1,custom:function(e){var n=document.getElementById("fc_reports_tooltip");if(n||((n=document.createElement("div")).id="fc_reports_tooltip",n.innerHTML="<table></table>",document.body.appendChild(n)),0!==e.opacity){if(n.classList.remove("above","below","no-transform"),e.yAlign?n.classList.add(e.yAlign):n.classList.add("no-transform"),e.dataPoints[0]){var i=e.dataPoints[0].index,s=[];if(t.each(t.data_sets,(function(t,e){s.unshift({title:Object.keys(t.data)[i],value:parseInt(Object.values(t.data)[i]),color:t.borderColor})})),e.body){var a="<tbody>";s.forEach((function(e,n){a+='<tr><td style="color: '+e.color+';"><b>'+e.title+"</b>: "+t.currency_sign+t.formatMoney(e.value,0)+"</td></tr>"})),a+="</tbody>",n.querySelector("table").innerHTML=a}var r=this._chart.canvas.getBoundingClientRect();n.style.opacity=1,n.style.position="absolute",n.style.left=r.left+window.pageXOffset+e.caretX+"px",n.style.top=r.top+window.pageYOffset+e.caretY+"px",n.style.fontFamily=e._bodyFontFamily,n.style.fontSize=e.bodyFontSize+"px",n.style.fontStyle=e._bodyFontStyle,n.style.padding=e.yPadding+"px "+e.xPadding+"px",n.style.pointerEvents="none"}}else n.style.opacity=0}}}},mounted:function(){this.setupChartItemsX()}},uo={name:"RangePicker",props:["range_settings"],data:function(){return{pickerOptions:{shortcuts:[{text:this.$t("Last week"),onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-6048e5),t.$emit("pick",[n,e])}},{text:this.$t("Last month"),onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-2592e6),t.$emit("pick",[n,e])}},{text:this.$t("Last 3 months"),onClick:function(t){var e=new Date,n=new Date;n.setTime(n.getTime()-7776e6),t.$emit("pick",[n,e])}},{text:this.$t("This quarter"),onClick:function(t){var e=new Date,n=Math.floor(e.getMonth()/3),i=new Date(e.getFullYear(),3*n,1);t.$emit("pick",[i,e])}},{text:this.$t("Last quarter"),onClick:function(t){var e=new Date,n=Math.floor(e.getMonth()/3),i=new Date(e.getFullYear(),3*n-3,1),s=new Date(i.getFullYear(),i.getMonth()+3,0);t.$emit("pick",[i,s])}},{text:this.$t("Year to Date"),onClick:function(t){var e=new Date,n=new Date((new Date).getFullYear(),0,1);t.$emit("pick",[n,e])}}]},compare_type_options:{previous_period:this.$t("Previous Period"),previous_month:this.$t("Previous Month"),previous_quarter:this.$t("Previous Quarter"),previous_year:this.$t("Previous Year"),custom:this.$t("Custom"),no_comparison:this.$t("No Comparison")}}},methods:{onChange:function(t){this.$emit("changed")}}};function _o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function po(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_o(Object(n),!0).forEach((function(e){mo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_o(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function mo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var fo={name:"CommerceGrowth",props:["provider","overview"],components:{ChartBuilder:Object(a.a)(co,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fc_chart"},[this.chartData?e("growth-chart",{attrs:{chart_options:this.chartOptions,currency_sign:this.currency_sign,"chart-data":this.chartData}}):this._e()],1)}),[],!1,null,null,null).exports,AjaxSelector:bt,RangePicker:Object(a.a)(uo,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_range_picker"},[n("el-date-picker",{staticClass:"mr-5",attrs:{type:"daterange",align:"center",size:"mini","value-format":"yyyy-MM-dd",format:"dd, MMM","unlink-panels":"","range-separator":t.$t("To"),"start-placeholder":t.$t("Start date"),"end-placeholder":t.$t("End date"),"picker-options":t.pickerOptions},on:{change:function(e){return t.onChange()}},model:{value:t.range_settings.date_range,callback:function(e){t.$set(t.range_settings,"date_range",e)},expression:"range_settings.date_range"}}),t._v(" "),n("span",[t._v(t._s(t.$t("compare to")))]),t._v(" "),n("el-select",{staticClass:"ml-5",staticStyle:{display:"inline-block","max-width":"140px"},attrs:{size:"mini",placeholder:t.$t("Select")},on:{change:function(e){return t.onChange()}},model:{value:t.range_settings.compare_type,callback:function(e){t.$set(t.range_settings,"compare_type",e)},expression:"range_settings.compare_type"}},t._l(t.compare_type_options,(function(t,e){return n("el-option",{key:e,attrs:{label:t,value:e}})})),1),t._v(" "),"custom"==t.range_settings.compare_type?n("el-date-picker",{attrs:{align:"right",size:"mini","value-format":"yyyy-MM-dd",format:"dd, MMM yyyy",placeholder:t.$t("Compare Date")},on:{change:function(e){return t.onChange()}},model:{value:t.range_settings.compare_date,callback:function(e){t.$set(t.range_settings,"compare_date",e)},expression:"range_settings.compare_date"}}):t._e()],1)}),[],!1,null,null,null).exports},data:function(){return{data_sets:[],range_settings:{date_range:[],compare_date:"",compare_type:"previous_period"},report_type:"product_growth",sub_type:"all",product_id:"",fetching:!1,app_ready:!1}},computed:{current_report:function(){return this.overview.supports[this.report_type]},tabular_items:function(){var t=this,e=[],n={},i=[],s=[];this.each(this.data_sets,(function(a,r){n[r]=0,s.push(a.label);var o=0;t.each(a.data,(function(t,s){e[o]||(e[o]=[]),i[o]||(i[o]=[]),e[o].push(Number(t)),-1===i[o].indexOf(s)&&i[o].push(s),n[r]+=Number(t),o++}))}));var a=2==Object.values(n).length,r="";return a&&(r=this.getChangeHtml(n)),{headers:s,items:e,totals:n,labels:i,totalChange:r,is_compare:a,prefix:this.current_report.is_money?this.overview.currency_sign:""}}},watch:{product_id:function(){this.fetch()},report_type:function(){this.fetch()},sub_type:function(){this.fetch()}},methods:{fetch:function(){var t=this;this.fetching=!0,this.app_ready=!1,this.$get("commerce-reports/"+this.provider+"/report",po(po({item_id:this.product_id},this.range_settings),{},{report_type:this.report_type,sub_type:this.sub_type})).then((function(e){t.range_settings.date_range=e.current_range,t.data_sets=e.data_sets})).catch((function(e){t.handleError(e)})).finally((function(){t.fetching=!1,t.app_ready=!0}))},getChangeHtml:function(t){if(t.length<2||!t[1])return"n/a";var e=(t[0]-t[1])/t[1]*100;return e>0?'<span class="fc_positive">'+e.toFixed(2)+"%</span>":'<span class="fc_negative">'+e.toFixed(2)+"%</span>"}},mounted:function(){this.fetch()}},ho={name:"CommerceReports",components:{CommerceGrowth:Object(a.a)(fo,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_card_widget"},[n("ul",{staticClass:"fc_settings_sub_menu fc_report_sub_menu"},t._l(t.overview.supports,(function(e,i){return n("li",{key:i,class:{fc_active:i==t.report_type},on:{click:function(e){t.report_type=i}}},[t._v("\n            "+t._s(e.title)+"\n        ")])})),0),t._v(" "),n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[t.current_report.has_product?n("span",{staticStyle:{width:"200px",display:"inline-block"}},[n("ajax-selector",{attrs:{field:{placeholder:t.$t("All Products"),is_multiple:!1,option_key:"product_selector_"+t.provider,size:"mini",clearable:!0}},model:{value:t.product_id,callback:function(e){t.product_id=e},expression:"product_id"}})],1):t._e()]),t._v(" "),n("div",{staticClass:"fluentcrm-actions"},[n("range-picker",{attrs:{range_settings:t.range_settings},on:{changed:function(e){return t.fetch()}}})],1)]),t._v(" "),t.current_report.sub_types?n("div",{staticStyle:{padding:"15px",border:"1px solid #e3e8ec",background:"#fff",display:"flex","align-items":"center","justify-content":"space-between"}},[t._v("\n        "+t._s(t.$t("Report Type:"))+"\n        "),n("el-radio-group",{attrs:{size:"small"},model:{value:t.sub_type,callback:function(e){t.sub_type=e},expression:"sub_type"}},t._l(t.current_report.sub_types,(function(e,i){return n("el-radio-button",{key:i,attrs:{label:i}},[t._v("\n                "+t._s(e.label)+"\n            ")])})),1)],1):t._e(),t._v(" "),t.app_ready?n("div",{staticClass:"fluentcrm_body"},[n("chart-builder",{attrs:{data_sets:t.data_sets,currency_sign:t.current_report.is_money?t.overview.currency_sign:""}}),t._v(" "),2==t.range_settings.date_range.length?n("p",{staticStyle:{"text-align":"center"}},[t._v("\n            "+t._s(t.$t("Showing stats from"))+" "+t._s(t.range_settings.date_range[0])+" to "+t._s(t.range_settings.date_range[1])+"\n        ")]):t._e(),t._v(" "),n("div",{staticClass:"fluentcrm_history_table_wrap"},[n("table",{staticClass:"table fc_horizontal_table"},[n("thead",[n("tr",[n("th",[t._v(t._s(t.$t("Date")))]),t._v(" "),t._l(t.tabular_items.headers,(function(e){return n("th",{key:e},[n("span",{domProps:{innerHTML:t._s(e)}})])})),t._v(" "),t.tabular_items.is_compare?n("th",[t._v(t._s(t.$t("Change"))+" (%)")]):t._e()],2)]),t._v(" "),n("tbody",t._l(t.tabular_items.labels,(function(e,i){return n("tr",{key:i},[n("td",[t._v(t._s(e.join(" vs ")))]),t._v(" "),t._l(t.tabular_items.items[i],(function(e,i){return n("td",{key:i},[n("span",{domProps:{innerHTML:t._s(t.tabular_items.prefix)}}),t._v(t._s(t.formatMoney(e))+"\n                    ")])})),t._v(" "),t.tabular_items.is_compare?[n("td",{domProps:{innerHTML:t._s(t.getChangeHtml(t.tabular_items.items[i]))}})]:t._e()],2)})),0),t._v(" "),n("tfoot",[n("tr",[n("td"),t._v(" "),t._l(t.tabular_items.totals,(function(e,i){return n("th",{key:i},[n("span",{domProps:{innerHTML:t._s(t.tabular_items.prefix)}}),t._v(t._s(t.formatMoney(e))+"\n                    ")])})),t._v(" "),t.tabular_items.is_compare?n("th",{domProps:{innerHTML:t._s(t.tabular_items.totalChange)}}):t._e()],2)])])])],1):n("div",{staticClass:"fluentcrm_body"},[n("el-skeleton",{staticClass:"fc_skeleton_loader",attrs:{rows:3,animated:""}}),t._v(" "),n("el-skeleton",{staticClass:"fc_skeleton_loader",attrs:{rows:6,animated:""}})],1)])}),[],!1,null,null,null).exports},props:["provider"],data:function(){return{loading:!1,overview:!1}},methods:{getOverview:function(){var t=this;this.loading=!0,this.$get("commerce-reports/"+this.provider,{with:["top_products"]}).then((function(e){t.overview=e.report})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))}},mounted:function(){this.getOverview()}},vo={name:"ReportsHome",components:{CommerceReports:Object(a.a)(ho,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.loading?n("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{gutter:30}},[n("el-col",{attrs:{span:18}},[n("el-skeleton",{staticClass:"fc_skeleton_loader",attrs:{rows:3,animated:""}}),t._v(" "),n("el-skeleton",{staticClass:"fc_skeleton_loader",attrs:{rows:6,animated:""}})],1),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-skeleton",{staticClass:"fc_skeleton_loader",attrs:{animated:""}},[n("template",{slot:"template"},[n("el-skeleton-item",{staticStyle:{width:"100%",height:"40px"},attrs:{variant:"rect"}}),t._v(" "),n("el-skeleton-item",{staticStyle:{width:"100%",height:"40px"},attrs:{variant:"rect"}}),t._v(" "),n("el-skeleton-item",{staticStyle:{width:"50%"},attrs:{variant:"button"}})],1)],2),t._v(" "),n("el-skeleton",{staticClass:"fc_skeleton_loader",attrs:{rows:3,animated:""}})],1)],1):t.overview&&t.overview.enabled?n("div",[n("el-row",{attrs:{gutter:30}},[n("h3",{staticStyle:{padding:"0 20px 10px"}},[t._v(t._s(t.overview.title))]),t._v(" "),n("el-col",{attrs:{sm:24,md:16,lg:18}},[n("div",{staticClass:"fc_card_widgets"},[t._l(t.overview.widgets,(function(e,i){return n("div",{key:i,staticClass:"fc_card_widget"},[n("div",{staticClass:"fluentcrm_header",domProps:{innerHTML:t._s(e.label)}}),t._v(" "),n("div",{staticClass:"fluentcrm_body"},[e.is_money?n("span",{domProps:{innerHTML:t._s(t.overview.currency_sign)}}):t._e(),n("span",{domProps:{innerHTML:t._s(t.formatMoney(e.value))}})])])})),t._v(" "),t.overview.store_average?[n("div",{staticClass:"fc_card_widget"},[n("div",{staticClass:"fluentcrm_header"},[t._v(t._s(t.$t("Average Order Value (AOV)")))]),t._v(" "),n("div",{staticClass:"fluentcrm_body"},[n("span",{domProps:{innerHTML:t._s(t.overview.currency_sign)}}),t._v(t._s(t._f("formatMoney")(t.overview.store_average.aov))+"\n                            ")])]),t._v(" "),n("div",{staticClass:"fc_card_widget"},[n("div",{staticClass:"fluentcrm_header"},[t._v(t._s(t.$t("Average Order/Customer (AOC)")))]),t._v(" "),n("div",{staticClass:"fluentcrm_body"},[t._v(t._s(t._f("formatMoney")(t.overview.store_average.aoc)))])])]:t._e()],2),t._v(" "),n("div",{staticClass:"ns_subscribers_chart"},[n("commerce-growth",{attrs:{overview:t.overview,provider:t.provider}})],1)]),t._v(" "),n("el-col",{attrs:{sm:24,md:8,lg:6}},[t.overview.top_products?n("div",{staticClass:"fc_m_20 fc_onboarding"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[t._v("\n                            "+t._s(t.$t("Top Selling Products"))+"\n                        ")])]),t._v(" "),n("div",{staticClass:"fluentcrm_body"},[n("ul",{staticClass:"fc_lined_items fc_top_products"},t._l(t.overview.top_products,(function(e){return n("li",{key:e.item_id},[t._v("\n                                "+t._s(e.post_title)+"\n                                x "),n("span",{staticClass:"fc_count_total"},[t._v(t._s(e.count))]),t._v(" "),e.revenue?[t._v(" = "),n("span",{staticClass:"fc_revenue_total"},[n("em",{domProps:{innerHTML:t._s(t.overview.currency_sign)}}),t._v(t._s(t._f("formatMoney")(e.revenue)))])]:t._e()],2)})),0)])]):t._e()])],1)],1):n("div",{staticClass:"fc_m_20 fc_onboarding"},[n("div",{staticClass:"fluentcrm_body fc_narrow_box"},[n("h3",[t._v(t._s(t.$t("Data Sync is required for"))+" "+t._s(t.overview.title))]),t._v(" "),n("p",{domProps:{innerHTML:t._s(t.overview.enable_instruction)}})])])],1)}),[],!1,null,null,null).exports},data:function(){return{reporters:[],loading:!1,provider:"",providers:[],switching:!1}},watch:{provider:function(){var t=this;this.$router.push({name:"reports",query:{provider:this.provider}}),this.switching=!0,setTimeout((function(){t.switching=!1}),100)}},methods:{getReportProviders:function(){var t=this;this.loading=!0,this.$get("reports/advanced-providers").then((function(e){if(t.providers=e.providers,e.providers){var n=Object.keys(e.providers);n&&n.length&&(t.provider=n[0])}})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))}},mounted:function(){this.changeTitle(this.$t("Reports")),this.getReportProviders(),this.$route.query.provider&&(this.provider=this.$route.query.provider)}},go=Object(a.a)(vo,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-forms fluentcrm-view-wrapper fluentcrm_view"},[n("ul",{staticClass:"fc_settings_sub_menu fc_report_sub_menu",staticStyle:{"margin-bottom":"20px"}},t._l(t.providers,(function(e,i){return n("li",{key:i,class:{fc_active:i==t.provider},on:{click:function(e){t.provider=i}}},[t._v("\n            "+t._s(e.title)+"\n        ")])})),0),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[t.provider&&!t.switching?n("commerce-reports",{attrs:{provider:t.provider}}):t._e()],1)])}),[],!1,null,null,null).exports,bo={name:"TagMapper",components:{OptionSelector:vt},props:["tag_options","driver","current_driver","item_label","option_key"],data:function(){return{app_ready:!1,simulated_tag_id:"",element_ready:!1}},methods:{initOptions:function(){this.element_ready=!0}},mounted:function(){this.app_ready=!0}},yo={name:"ContactFieldMapper",props:["contact_fields","contact_fillables","driver"],data:function(){return{}}};function wo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function $o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wo(Object(n),!0).forEach((function(e){ko(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wo(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function ko(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var xo={name:"ImportRunner",props:["driver","credential","map_settings","segment_options"],data:function(){return{loading:!1,import_summary:{},importing:!1,import_completed:!1,import_info:{completed:0,total:0,import_tracker:{}},errors:!1}},methods:{fetchImportSummary:function(){var t=this;this.loading=!0,this.$post("migrators/summary",$o({driver:this.driver,credential:this.credential,map_settings:this.map_settings},this.segment_options)).then((function(e){t.import_summary=e.import_summary})).catch((function(e){t.handleError(e),t.$emit("prev")})).finally((function(){t.loading=!1}))},startImport:function(){var t=this;this.importing=!0,this.$post("migrators/import",$o({driver:this.driver,credential:this.credential,map_settings:this.map_settings,completed:this.import_info.completed,import_tracker:this.import_info.import_tracker},this.segment_options)).then((function(e){t.$set(t,"import_info",e.import_info),e.import_info.has_more?t.$nextTick((function(){t.startImport()})):t.import_completed=!0})).catch((function(e){t.handleError(e),t.errors=e})).finally((function(){}))}},mounted:function(){this.fetchImportSummary()}},Co={name:"CredentialVerify",components:{FormBuilder:Ft},props:["driver","cred","current_driver"],data:function(){return{verifying:!1}},methods:{verifyConnection:function(){var t=this;this.verifying=!0,this.$post("migrators/verify-cred",{driver:this.driver,credential:this.cred}).then((function(e){t.$notify.success(e.message),t.$emit("verified")})).catch((function(e){t.handleError(e)})).finally((function(){t.verifying=!1}))}}},So={name:"CRMMigrator",components:{TagMapper:Object(a.a)(bo,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("span",{staticStyle:{display:"none !important",visibility:"hidden !important"}},[n("option-selector",{attrs:{field:{is_multiple:!1,creatable:!0,option_key:"tags"}},on:{element_ready:function(e){return t.initOptions()}},model:{value:t.simulated_tag_id,callback:function(e){t.simulated_tag_id=e},expression:"simulated_tag_id"}})],1),t._v(" "),t.app_ready?n("table",{staticClass:"fc_table fc_horizontal_table"},[n("thead",[n("tr",[n("th",[t._v(t._s(t._f("ucFirst")(t.driver))+" "+t._s(t.item_label))]),t._v(" "),n("th",[t._v("FluentCRM "+t._s(t.item_label))]),t._v(" "),n("th",[t._v(t._s(t.$t("Auto Create"))+" "+t._s(t.item_label)+"?")])])]),t._v(" "),n("tbody",t._l(t.tag_options,(function(e){return n("tr",{key:e.remote_id},[n("td",[t._v(t._s(e.remote_name))]),t._v(" "),n("td",["yes"==e.will_create?n("span",{staticStyle:{"font-style":"italic"}},[t._v("\n                    "+t._s(t.item_label)+" "+t._s(t.$t("will be created automatically in FluentCRM"))+"\n                ")]):t.element_ready?n("option-selector",{attrs:{field:{is_multiple:!1,creatable:!0,option_key:t.option_key}},model:{value:e.fluentcrm_id,callback:function(n){t.$set(e,"fluentcrm_id",n)},expression:"tag.fluentcrm_id"}}):n("span",[t._v(t._s(t.$t("Loading...")))])],1),t._v(" "),n("td",[n("el-switch",{attrs:{"active-value":"yes","inactive-value":"no"},model:{value:e.will_create,callback:function(n){t.$set(e,"will_create",n)},expression:"tag.will_create"}})],1)])})),0)]):t._e(),t._v(" "),n("p",{domProps:{innerHTML:t._s(t.current_driver[t.option_key+"_map_info"])}})])}),[],!1,null,null,null).exports,ContactFieldMapper:Object(a.a)(yo,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("table",{staticClass:"fc_table fc_horizontal_table"},[n("thead",[n("tr",[n("th",[t._v(t._s(t._f("ucFirst")(t.driver))+" "+t._s(t.$t("Field")))]),t._v(" "),n("th",[t._v(t._s(t.$t("FluentCRM Field")))]),t._v(" "),n("th",[t._v(t._s(t.$t("Skip")))])])]),t._v(" "),n("tbody",t._l(t.contact_fields,(function(e,i){return n("tr",{key:i},[n("td",[t._v("\n                    "+t._s(e.remote_label)+"\n                ")]),t._v(" "),n("td",["yes"==e.will_skip?n("span",[t._v("\n                        "+t._s(t.$t("this value will be skipped"))+"\n                    ")]):n("el-select",{attrs:{filterable:"",clearable:""},model:{value:e.fluentcrm_field,callback:function(n){t.$set(e,"fluentcrm_field",n)},expression:"field.fluentcrm_field"}},[e.options?t._l(e.options,(function(t,e){return n("el-option",{key:e,attrs:{value:e,label:t}})})):t._l(t.contact_fillables,(function(t,e){return n("el-option",{key:e,attrs:{value:e,label:t}})}))],2)],1),t._v(" "),n("td",[n("el-switch",{attrs:{"active-value":"yes","inactive-value":"no"},model:{value:e.will_skip,callback:function(n){t.$set(e,"will_skip",n)},expression:"field.will_skip"}})],1)])})),0)])])}),[],!1,null,null,null).exports,OptionSelector:vt,ImportRunner:Object(a.a)(xo,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[n("div",{staticClass:"fc_step_header"},[n("h3",[t._v(t._s(t.$t("Review & Import")))]),t._v(" "),n("p")]),t._v(" "),t.import_completed?n("div",{staticClass:"text-align-center"},[n("h3",[t._v(t._s(t.$t("All contacts from"))+" "+t._s(t.driver)+" "+t._s(t.$t("has been completed.")))]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.$router.push({name:"subscribers"})}}},[t._v(t._s(t.$t("View Contacts")))])],1):t.importing?n("div",{staticClass:"text-align-center"},[n("h3",[t._v(t._s(t.$t("Importing now...")))]),t._v(" "),n("h4",[t._v(t._s(t.$t("Use_Please_dnctm")))]),t._v(" "),[t.import_info.total&&!t.import_info.hide_progress?n("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:parseInt(t.import_info.completed/t.import_info.total*100),status:"success"}}):t._e(),t._v(" "),n("p",{directives:[{name:"loading",rawName:"v-loading",value:t.importing,expression:"importing"}]},[t._v(t._s(t.$t("Migrating")))]),t._v(" "),n("p",{domProps:{innerHTML:t._s(t.import_info.message)}}),t._v(" "),t.errors?n("div",{staticClass:"text-align-left"},[n("h4",[t._v(t._s(t.$t("Something is wrong when importing. Please check the error message below")))]),t._v(" "),n("pre",[t._v(t._s(t.errors))])]):t._e()]],2):n("div",{staticClass:"text-align-center"},[n("h2",{domProps:{innerHTML:t._s(t.import_summary.message)}}),t._v(" "),n("el-button",{attrs:{type:"success"},on:{click:function(e){return t.startImport()}}},[t._v(t._s(t.$t("Confirm Import")))])],1)])}),[],!1,null,null,null).exports,CredentialVerify:Object(a.a)(Co,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fc_credential"},[n("div",{staticClass:"fc_step_header"},[n("h3",[t._v(t._s(t.$t("Connect with"))+" "+t._s(t.driver))]),t._v(" "),n("p",[t._v(t._s(t.$t("Please configure"))+" "+t._s(t.driver)+" "+t._s(t.$t("with API key")))])]),t._v(" "),n("form-builder",{attrs:{formData:t.cred,fields:t.current_driver.credential_fields}}),t._v(" "),t.current_driver.doc_url?n("p",[n("a",{staticStyle:{"text-decoration":"underline"},attrs:{target:"_blank",rel:"noopener",href:t.current_driver.doc_url}},[t._v(t._s(t.$t("Check the documentation")))]),t._v(" "+t._s(t.$t("for migrating from"))+" "),n("b",[t._v(t._s(t.current_driver.title))])]):t._e(),t._v(" "),n("div",{staticClass:"text-align-right",staticStyle:{"margin-top":"20px"}},[n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.verifying,expression:"verifying"}],attrs:{type:"primary"},on:{click:function(e){return t.verifyConnection()}}},[t._v("\n            "+t._s(t.$t("Continue [Map Data]"))+"\n        ")])],1)],1)}),[],!1,null,null,null).exports},data:function(){return{loading:!1,drivers:{},selected_driver:"",step:1,cred:{api_key:""},segment_options:{lists:[],tags:[],contact_fields:[]},map_settings:{list_id:"",local_list_id:"",local_tag_id:"",import_silently:"yes",import_active_only:"yes"},import_summary:{}}},computed:{current_driver:function(){return this.drivers[this.selected_driver]||{}}},methods:{getDrivers:function(){var t=this;this.loading=!0,this.$get("migrators").then((function(e){t.drivers=e.drivers})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},selectDriver:function(){this.cred=JSON.parse(JSON.stringify(this.current_driver.credentials)),this.step=2},credentialVerified:function(){this.listMappings(),this.step=3},listMappings:function(){var t=this;this.loading=!0,this.$get("migrators/list-tag-mappings",{driver:this.selected_driver,credential:this.cred,map_settings:this.map_settings}).then((function(e){t.segment_options=e.options})).catch((function(e){t.handleError(e)})).finally((function(){t.loading=!1}))},maybeRefetchTags:function(){this.current_driver.refresh_on_list_change&&this.listMappings()}},mounted:function(){this.getDrivers()}},Oo=[{name:"default",path:"*",redirect:"/"},{name:"no_permission",path:"/no_permission",component:_},{name:"dashboard",path:"/",component:u,props:!0,meta:{active_menu:"dashboard",permission:"fcrm_view_dashboard"}},{name:"subscribers",path:"/subscribers",component:fi,props:!0,meta:{active_menu:"contacts",permission:"fcrm_read_contacts"}},{path:"/email",component:p,props:!0,meta:{parent:"email",permission:"fcrm_read_emails"},children:[{name:"campaigns",path:"campaigns",component:$,props:!0,meta:{parent:"email",active_menu:"campaigns",permission:"fcrm_read_emails"}},{name:"campaign-view",path:"campaigns/:id/view",component:Le,props:!0,meta:{parent:"email",active_menu:"campaigns",permission:"fcrm_read_emails"}},{name:"campaign",path:"campaigns/:id",component:Se,props:!0,meta:{parent:"email",active_menu:"campaigns",permission:"fcrm_read_emails"}},{name:"templates",path:"templates",component:Re,props:!0,meta:{parent:"email",active_menu:"campaigns",permission:"fcrm_read_emails"}},{name:"edit_template",path:"templates/:template_id",component:Be,props:!0,meta:{parent:"email",active_menu:"campaigns",permission:"fcrm_read_emails"}},{path:"sequences",component:Tr,props:!0,children:[{name:"email-sequences",path:"/",component:Fr,meta:{parent:"email",active_menu:"campaigns",permission:"fcrm_read_emails"}},{name:"edit-sequence",path:"edit/:id",component:qr,props:!0,meta:{parent:"email",active_menu:"campaigns",permission:"fcrm_read_emails"}},{name:"edit-sequence-email",path:"edit/:sequence_id/email/:email_id",component:Nr,props:!0,meta:{parent:"email",active_menu:"campaigns",permission:"fcrm_read_emails"}},{name:"sequence-subscribers",path:"subscribers/:id/view",component:zr,props:!0,meta:{parent:"email",active_menu:"campaigns",permission:"fcrm_read_emails"}}]},{name:"all_emails",path:"all-emails",component:Ue,props:!0,meta:{parent:"email",active_menu:"campaigns",permission:"fcrm_read_emails"}}]},{path:"/contact-groups",component:Fi,props:!0,meta:{parent:"contacts",permission:"fcrm_manage_contact_cats"},children:[{name:"lists",path:"lists",component:Ni,props:!0,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_manage_contact_cats"}},{name:"tags",path:"tags",component:Mi,props:!0,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_manage_contact_cats"}},{name:"dynamic_segments",path:"dynamic-segments",component:Bi,props:!0,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_manage_contact_cats"}},{name:"create_custom_segment",path:"dynamic-segments/create-custom",component:Ki,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_manage_contact_cats"}},{name:"view_segment",path:"dynamic-segments/:slug/view/:id",props:!0,component:Yi,meta:{permission:"fcrm_read_contacts",parent:"subscribers",active_menu:"contacts"}}]},{name:"list",path:"/lists/:listId",component:$i,props:!0,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_manage_contact_cats"}},{name:"tag",path:"/tags/:tagId",component:xi,props:!0,meta:{permission:"fcrm_read_contacts",parent:"subscribers",active_menu:"contacts"}},{name:"import",path:"/import",component:Pi,props:!0,meta:{permission:"fcrm_manage_contacts"}},{name:"forms",path:"/forms",component:Ur,props:!0,meta:{parent:"forms",active_menu:"forms",permission:"fcrm_manage_forms"}},{path:"/settings",component:js,meta:{active_menu:"settings",permission:"fcrm_manage_settings"},children:[{name:"email_settings",path:"email_settings",component:Ps,meta:{active_menu:"settings",permission:"fcrm_manage_settings"}},{name:"business_settings",path:"/",component:Fs,meta:{active_menu:"settings",permission:"fcrm_manage_settings"}},{name:"custom_contact_fields",path:"custom_contact_fields",component:Is,meta:{active_menu:"settings",permission:"fcrm_manage_settings"}},{name:"smart_links",path:"smart_links",component:no,meta:{active_menu:"settings",permission:"fcrm_manage_settings"}},{name:"double-optin-settings",path:"double_optin_settings",component:Ls,meta:{active_menu:"settings",permission:"fcrm_manage_settings"}},{name:"webhook-settings",path:"webhook_settings",component:Ks,meta:{active_menu:"settings",permission:"fcrm_manage_settings"}},{name:"settings_tools",path:"settings_tools",component:na,meta:{active_menu:"settings",permission:"fcrm_manage_settings"}},{name:"managers",path:"managers",component:sa,meta:{active_menu:"settings",permission:"fcrm_manage_settings"}},{name:"rest-api",path:"reset-api",component:la,meta:{active_menu:"settings",permission:"fcrm_manage_settings"}},{name:"smtp_settings",path:"smtp_settings",component:Gr,meta:{active_menu:"settings",permission:"fcrm_manage_settings"}},{name:"other_settings",path:"other_settings",component:Yr,meta:{active_menu:"settings",permission:"fcrm_manage_settings"}},{name:"license_settings",path:"license_settings",component:Kr,meta:{active_menu:"settings",permission:"fcrm_manage_settings"}},{name:"integration_settings",path:"integration_settings",component:Zr}]},{path:"/funnels",component:ua,meta:{active_menu:"funnels",permission:"fcrm_read_funnels"},children:[{name:"funnels",path:"/",component:pa,meta:{active_menu:"funnels",permission:"fcrm_read_funnels"}},{name:"edit_funnel",path:"/funnel/:funnel_id/edit",component:pr,props:!0,meta:{active_menu:"funnels",permission:"fcrm_read_funnels"}},{name:"funnel_subscribers",path:"/funnel/:funnel_id/subscribers",component:Cr,props:!0,meta:{active_menu:"funnels",permission:"fcrm_read_funnels"}},{name:"import_funnel",path:"/funnel/import",component:Or,meta:{active_menu:"funnels",permission:"fcrm_read_funnels"}}]},{name:"docs",path:"/documentation",component:ro},{name:"addons",path:"/add-ons",component:lo},{name:"reports",path:"/reports",component:go},{name:"crm_migrations",path:"/crm_migrations",component:Object(a.a)(So,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm-settings fluentcrm_min_bg fluentcrm_view"},[n("div",{staticClass:"fluentcrm_header"},[n("div",{staticClass:"fluentcrm_header_title"},[n("h3",[t._v(t._s(t.$t("Transfer Data From Other CRM")))])]),t._v(" "),n("div",{staticClass:"fluentcrm-templates-action-buttons fluentcrm-actions"})]),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"fluentcrm_pad_around",staticStyle:{"max-width":"1190px",margin:"0 auto"}},[n("el-steps",{attrs:{active:t.step,"align-center":""}},[n("el-step",{attrs:{title:t.$t("CRM"),description:t.$t("Select Current CRM")}}),t._v(" "),n("el-step",{attrs:{title:t.$t("Connect"),description:t.$t("Connect with your CRM")}}),t._v(" "),n("el-step",{attrs:{title:t.$t("Map Data"),description:t.$t("Map the data")}}),t._v(" "),n("el-step",{attrs:{title:t.$t("Review"),description:t.$t("Review & Import")}})],1),t._v(" "),n("div",{staticClass:"settings-section fluentcrm_databox"},[1==t.step?n("div",{staticClass:"fc_crm_selection_step"},[n("div",{staticClass:"fc_step_header"},[n("h3",[t._v(t._s(t.$t("select_current_crm_software")))]),t._v(" "),n("p",[t._v(t._s(t.$t("transfer_data_from_current_ems_to_fluentcrm")))])]),t._v(" "),n("div",{staticClass:"fc_crm_lists"},[n("el-radio-group",{staticClass:"sources fc_inline_image_radio",model:{value:t.selected_driver,callback:function(e){t.selected_driver=e},expression:"selected_driver"}},t._l(t.drivers,(function(e,i){return n("el-radio",{key:i,staticClass:"option",class:"fc_driver_"+i,attrs:{label:i}},[n("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:e.logo}}),t._v(" "),n("span",{staticClass:"fc_text_label"},[t._v(t._s(e.title))])])})),1)],1),t._v(" "),t.current_driver.doc_url?n("p",[n("a",{staticStyle:{"text-decoration":"underline"},attrs:{target:"_blank",rel:"noopener",href:t.current_driver.doc_url}},[t._v(t._s(t.$t("Check the documentation")))]),t._v(" "+t._s(t.$t("for migrating from"))+" "),n("b",[t._v(t._s(t.current_driver.title))])]):t._e(),t._v(" "),n("div",{staticClass:"text-align-right"},[n("el-button",{attrs:{disabled:!t.selected_driver,type:"primary"},on:{click:function(e){return t.selectDriver()}}},[t._v(t._s(t.$t("Next")))])],1)]):2==t.step?n("div",{staticClass:"fc_crm_selection_step"},[n("credential-verify",{attrs:{driver:t.selected_driver,current_driver:t.current_driver,cred:t.cred},on:{verified:function(e){return t.credentialVerified()}}})],1):3==t.step?n("div",{staticClass:"fc_crm_selection_step"},[n("div",{staticClass:"fc_step_header"},[n("h3",[t._v(t._s(t.$t("Map your Data")))]),t._v(" "),n("p",[t._v(t._s(t.$t("Please configure"))+" "+t._s(t.current_driver.title)+" "+t._s(t.$t("associate data with FluentCRM")))])]),t._v(" "),n("el-form",{attrs:{"label-position":"top",data:t.map_settings}},[t.current_driver.supports.lists?n("el-form-item",{attrs:{label:t.$t("Select List")}},[n("el-select",{on:{change:function(e){return t.maybeRefetchTags()}},model:{value:t.map_settings.list_id,callback:function(e){t.$set(t.map_settings,"list_id",e)},expression:"map_settings.list_id"}},t._l(t.segment_options.lists,(function(t){return n("el-option",{key:t.id,attrs:{value:t.id,label:t.name}})})),1)],1):t.current_driver.supports.has_list_mapper&&t.segment_options.mapped_lists&&t.segment_options.mapped_lists.length?n("el-form-item",{attrs:{label:t.$t("Map List")}},[n("tag-mapper",{attrs:{option_key:"lists",item_label:"List",driver:t.selected_driver,current_driver:t.current_driver,tag_options:t.segment_options.mapped_lists}})],1):t._e(),t._v(" "),t.segment_options.all_ready?[t.segment_options.tags.length?n("el-form-item",{attrs:{label:t.$t("Map Tags")}},[n("tag-mapper",{attrs:{option_key:"tags",item_label:"Tag",driver:t.selected_driver,current_driver:t.current_driver,tag_options:t.segment_options.tags}})],1):t._e(),t._v(" "),t.segment_options.contact_fields&&t.segment_options.contact_fields.length?n("el-form-item",{attrs:{label:t.$t("Map Contact Fields")}},[n("contact-field-mapper",{attrs:{driver:t.selected_driver,contact_fields:t.segment_options.contact_fields,contact_fillables:t.segment_options.contact_fillables}})],1):t._e(),t._v(" "),t.current_driver.field_map_info?n("p",{staticStyle:{"margin-bottom":"50px"},domProps:{innerHTML:t._s(t.current_driver.field_map_info)}}):t._e(),t._v(" "),n("el-row",{attrs:{gutter:30}},[n("el-col",{attrs:{md:12,sm:24}},[n("el-form-item",{attrs:{label:t.$t("Assigned List in FluentCRM (optional)")}},[n("option-selector",{attrs:{field:{is_multiple:!1,creatable:!0,option_key:"lists"}},model:{value:t.map_settings.local_list_id,callback:function(e){t.$set(t.map_settings,"local_list_id",e)},expression:"map_settings.local_list_id"}}),t._v(" "),n("p",[t._v(t._s(t.$t("Will be applied to all the imported contacts")))])],1)],1),t._v(" "),t.current_driver.supports.empty_tags?n("el-col",{attrs:{md:12,sm:24}},[n("el-form-item",{attrs:{label:t.$t("Default Tag ID (optional)")}},[n("option-selector",{attrs:{field:{is_multiple:!1,creatable:!0,option_key:"tags"}},model:{value:t.map_settings.local_tag_id,callback:function(e){t.$set(t.map_settings,"local_tag_id",e)},expression:"map_settings.local_tag_id"}}),t._v(" "),n("p",[t._v(t._s(t.$t("Will be applied to the contacts who does not have any mapped tags in"))+"\n                                        "+t._s(t.selected_driver))])],1)],1):t._e()],1),t._v(" "),t.current_driver.supports.active_imports_only?n("el-form-item",[n("el-checkbox",{attrs:{"true-label":"yes","false-label":"no"},model:{value:t.map_settings.import_active_only,callback:function(e){t.$set(t.map_settings,"import_active_only",e)},expression:"map_settings.import_active_only"}},[t._v(t._s(t.$t("Import only active subscribers from"))+" "+t._s(t.selected_driver)+"\n                            ")])],1):t._e(),t._v(" "),n("div",{staticClass:"text-align-right",staticStyle:{"margin-top":"20px"}},[n("el-button",{attrs:{disabled:t.loading,type:"primary"},on:{click:function(e){t.step++}}},[t._v("\n                                "+t._s(t.$t("Continue [Review and Import]"))+"\n                            ")])],1)]:t._e()],2)],1):4==t.step?n("div",{staticClass:"fc_crm_selection_step"},[n("import-runner",{attrs:{driver:t.selected_driver,credential:t.cred,contact_fields:t.segment_options.contact_fields,segment_options:t.segment_options,map_settings:t.map_settings},on:{prev:function(){t.step=3}}})],1):t._e()])],1)])}),[],!1,null,null,null).exports,meta:{active_menu:"contacts",permission:"fcrm_manage_settings"}}],Eo={path:"/subscribers/:id",component:ji,props:!0,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts"},children:[{name:"subscriber",path:"/",component:Zi,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts"}},{name:"subscriber_emails",path:"emails",component:rs,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts"}},{name:"subscriber_form_submissions",path:"form-submissions",component:_s,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts"}},{name:"subscriber_notes",path:"notes",component:ps,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts"}},{name:"subscriber_purchases",path:"purchases",component:gs,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts"}},{name:"subscriber_support_tickets",path:"support-tickets",component:ks,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts"}},{name:"subscriber_files",path:"files",component:Cs,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts"}},{name:"fluentcrm_profile_extended",path:"profile_section",component:Os,meta:{parent:"subscribers",active_menu:"contacts",permission:"fcrm_read_contacts"}}]},jo={name:"Application",methods:{verifyLicense:function(){this.$get("campaign-pro-settings/license",{verify:!0}).then((function(t){})).catch((function(t){})).finally((function(){}))}},mounted:function(){var t=this;jQuery(".update-nag,.notice, #wpbody-content > .updated, #wpbody-content > .error").remove(),jQuery(".toplevel_page_fluentcrm-admin a").on("click",(function(){jQuery(".toplevel_page_fluentcrm-admin li").removeClass("current"),jQuery(this).parent().addClass("current")})),jQuery(".fluentcrm_menu a").on("click",(function(){})),window.fcAdmin.require_verify_request&&this.verifyLicense(),this.$bus.$on("renew_options",(function(e){t.renewOptions(e)}))}},To=Object(a.a)(jo,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fluentcrm-app"},[e("div",{staticClass:"fluentcrm-body"},[e("router-view",{key:"main_route"})],1)])}),[],!1,null,null,null).exports,Po=n(32),Ao=n.n(Po),Fo=function(){return Math.random().toString(36).substring(2)},Do={name:"ContentLoader",functional:!0,props:{width:{type:[Number,String],default:400},height:{type:[Number,String],default:130},speed:{type:Number,default:2},preserveAspectRatio:{type:String,default:"xMidYMid meet"},baseUrl:{type:String,default:""},primaryColor:{type:String,default:"#f9f9f9"},secondaryColor:{type:String,default:"#ecebeb"},primaryOpacity:{type:Number,default:1},secondaryOpacity:{type:Number,default:1},uniqueKey:{type:String},animate:{type:Boolean,default:!0}},render:function(t,e){var n=e.props,i=e.data,s=e.children,a=n.uniqueKey?n.uniqueKey+"-idClip":Fo(),r=n.uniqueKey?n.uniqueKey+"-idGradient":Fo();return t("svg",Ao()([i,{attrs:{viewBox:"0 0 "+n.width+" "+n.height,version:"1.1",preserveAspectRatio:n.preserveAspectRatio}}]),[t("rect",{style:{fill:"url("+n.baseUrl+"#"+r+")"},attrs:{"clip-path":"url("+n.baseUrl+"#"+a+")",x:"0",y:"0",width:n.width,height:n.height}}),t("defs",[t("clipPath",{attrs:{id:a}},[s||t("rect",{attrs:{x:"0",y:"0",rx:"5",ry:"5",width:n.width,height:n.height}})]),t("linearGradient",{attrs:{id:r}},[t("stop",{attrs:{offset:"0%","stop-color":n.primaryColor,"stop-opacity":n.primaryOpacity}},[n.animate?t("animate",{attrs:{attributeName:"offset",values:"-2; 1",dur:n.speed+"s",repeatCount:"indefinite"}}):null]),t("stop",{attrs:{offset:"50%","stop-color":n.secondaryColor,"stop-opacity":n.secondaryOpacity}},[n.animate?t("animate",{attrs:{attributeName:"offset",values:"-1.5; 1.5",dur:n.speed+"s",repeatCount:"indefinite"}}):null]),t("stop",{attrs:{offset:"100%","stop-color":n.primaryColor,"stop-opacity":n.primaryOpacity}},[n.animate?t("animate",{attrs:{attributeName:"offset",values:"-1; 2",dur:n.speed+"s",repeatCount:"indefinite"}}):null])])])])}},qo={name:"fluent_loader",components:{ContentLoader:Do},props:{type:{type:String,default:"table"}}},Io=Object(a.a)(qo,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fluentcrm_loader",staticStyle:{background:"white","padding-bottom":"20px"}},[n("content-loader",{attrs:{speed:2,width:1500,height:400,viewBox:"0 0 1500 400",primaryColor:"#dcdbdb",secondaryColor:"#ecebeb"}},[n("rect",{attrs:{x:"27",y:"139",rx:"4",ry:"4",width:"20",height:"20"}}),t._v(" "),n("rect",{attrs:{x:"67",y:"140",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"188",y:"141",rx:"10",ry:"10",width:"169",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"402",y:"140",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"523",y:"141",rx:"10",ry:"10",width:"169",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"731",y:"139",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"852",y:"138",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"1424",y:"137",rx:"10",ry:"10",width:"68",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"26",y:"196",rx:"4",ry:"4",width:"20",height:"20"}}),t._v(" "),n("rect",{attrs:{x:"66",y:"197",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"187",y:"198",rx:"10",ry:"10",width:"169",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"401",y:"197",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"522",y:"198",rx:"10",ry:"10",width:"169",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"730",y:"196",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"851",y:"195",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("circle",{attrs:{cx:"1456",cy:"203",r:"12"}}),t._v(" "),n("rect",{attrs:{x:"26",y:"258",rx:"4",ry:"4",width:"20",height:"20"}}),t._v(" "),n("rect",{attrs:{x:"66",y:"259",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"187",y:"260",rx:"10",ry:"10",width:"169",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"401",y:"259",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"522",y:"260",rx:"10",ry:"10",width:"169",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"730",y:"258",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"851",y:"257",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("circle",{attrs:{cx:"1456",cy:"265",r:"12"}}),t._v(" "),n("rect",{attrs:{x:"26",y:"316",rx:"4",ry:"4",width:"20",height:"20"}}),t._v(" "),n("rect",{attrs:{x:"66",y:"317",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"187",y:"318",rx:"10",ry:"10",width:"169",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"401",y:"317",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"522",y:"318",rx:"10",ry:"10",width:"169",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"730",y:"316",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"851",y:"315",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("circle",{attrs:{cx:"1456",cy:"323",r:"12"}}),t._v(" "),n("rect",{attrs:{x:"26",y:"379",rx:"4",ry:"4",width:"20",height:"20"}}),t._v(" "),n("rect",{attrs:{x:"66",y:"380",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"187",y:"381",rx:"10",ry:"10",width:"169",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"401",y:"380",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"522",y:"381",rx:"10",ry:"10",width:"169",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"730",y:"379",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"851",y:"378",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("circle",{attrs:{cx:"1456",cy:"386",r:"12"}}),t._v(" "),n("rect",{attrs:{x:"978",y:"138",rx:"10",ry:"10",width:"169",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"977",y:"195",rx:"10",ry:"10",width:"169",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"977",y:"257",rx:"10",ry:"10",width:"169",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"977",y:"315",rx:"10",ry:"10",width:"169",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"977",y:"378",rx:"10",ry:"10",width:"169",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"1183",y:"139",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"1182",y:"196",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"1182",y:"258",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"1182",y:"316",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"1182",y:"379",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"1305",y:"137",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"1304",y:"194",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"1304",y:"256",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"1304",y:"314",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("rect",{attrs:{x:"1304",y:"377",rx:"10",ry:"10",width:"85",height:"19"}}),t._v(" "),n("circle",{attrs:{cx:"37",cy:"97",r:"11"}}),t._v(" "),n("rect",{attrs:{x:"26",y:"23",rx:"5",ry:"5",width:"153",height:"30"}}),t._v(" "),n("circle",{attrs:{cx:"1316",cy:"88",r:"11"}}),t._v(" "),n("rect",{attrs:{x:"1337",y:"94",rx:"0",ry:"0",width:"134",height:"3"}}),t._v(" "),n("circle",{attrs:{cx:"77",cy:"96",r:"11"}})])],1)}),[],!1,null,null,null).exports;function No(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Lo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?No(Object(n),!0).forEach((function(e){Mo(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):No(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Mo(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ro=window.FLUENTCRM.applyFilters("fluentcrm_prfile_routes",Eo);Oo.push(Ro);var zo=new window.FLUENTCRM.Router({routes:window.FLUENTCRM.applyFilters("fluentcrm_global_routes",Oo),scrollBehavior:function(t,e,n){if(n)return n;var i={};return t.hash?(i.selecor=t.hash,!!document.querySelector(t.hash)&&i):{x:0,y:0}}});window.FLUENTCRM.Vue.prototype.$rest=window.FLUENTCRM.$rest,window.FLUENTCRM.Vue.prototype.$get=window.FLUENTCRM.$get,window.FLUENTCRM.Vue.prototype.$post=window.FLUENTCRM.$post,window.FLUENTCRM.Vue.prototype.$del=window.FLUENTCRM.$del,window.FLUENTCRM.Vue.prototype.$put=window.FLUENTCRM.$put,window.FLUENTCRM.Vue.prototype.$patch=window.FLUENTCRM.$patch,window.FLUENTCRM.Vue.prototype.$bus=new window.FLUENTCRM.Vue,window.FLUENTCRM.Vue.prototype.appVars=window.fcAdmin,window.FLUENTCRM.Vue.component("fluent-loader",Io),function(t){var e=t.success;t.success=function(n){if(n)return"string"==typeof n&&(n={message:n}),e.call(t,Lo({offset:19,title:"Great!"},n))};var n=t.error;t.error=function(e){if(e)return"string"==typeof e&&(e={message:e}),n.call(t,Lo({offset:19,title:"Oops!"},e))}}(window.FLUENTCRM.Vue.prototype.$notify),zo.beforeEach((function(t,e,n){t.meta.permission?window.FLUENTCRM.hasPermission(t.meta.permission)?n():n({name:"no_permission",query:{permission:t.meta.permission}}):n()})),window.FLUENTCRM.request=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="".concat(window.fcAdmin.rest.url,"/").concat(e),s={"X-WP-Nonce":window.fcAdmin.rest.nonce};return-1!==["PUT","PATCH","DELETE"].indexOf(t.toUpperCase())&&(s["X-HTTP-Method-Override"]=t,t="POST"),n.query_timestamp=Date.now(),new Promise((function(e,a){window.jQuery.ajax({url:i,type:t,data:n,headers:s}).then((function(t){return e(t)})).fail((function(t){return a(t.responseJSON)}))}))},new window.FLUENTCRM.Vue({el:"#fluentcrm_app",render:function(t){return t(To)},router:zo,watch:{$route:function(t,e){t.meta.active_menu&&jQuery(document).trigger("fluentcrm_route_change",t.meta.active_menu)}},mounted:function(){this.$route.meta.active_menu&&jQuery(document).trigger("fluentcrm_route_change",this.$route.meta.active_menu)}})}]);