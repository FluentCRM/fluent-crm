(()=>{var e,t={2703:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r)){if(r.length){var a=o.apply(null,r);a&&e.push(a)}}else if("object"===i){if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]")){e.push(r.toString());continue}for(var c in r)n.call(r,c)&&r[c]&&e.push(c)}}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},5462:(e,t,r)=>{"use strict";var n=r(4930);e.exports=function(e,t,r){r=r||{},9===t.nodeType&&(t=n.getWindow(t));var o=r.allowHorizontalScroll,i=r.onlyScrollIfNeeded,a=r.alignWithTop,c=r.alignWithLeft,l=r.offsetTop||0,u=r.offsetLeft||0,s=r.offsetBottom||0,f=r.offsetRight||0;o=void 0===o||o;var p=n.isWindow(t),d=n.offset(e),y=n.outerHeight(e),h=n.outerWidth(e),v=void 0,m=void 0,g=void 0,b=void 0,w=void 0,S=void 0,O=void 0,_=void 0,E=void 0,k=void 0;p?(O=t,k=n.height(O),E=n.width(O),_={left:n.scrollLeft(O),top:n.scrollTop(O)},w={left:d.left-_.left-u,top:d.top-_.top-l},S={left:d.left+h-(_.left+E)+f,top:d.top+y-(_.top+k)+s},b=_):(v=n.offset(t),m=t.clientHeight,g=t.clientWidth,b={left:t.scrollLeft,top:t.scrollTop},w={left:d.left-(v.left+(parseFloat(n.css(t,"borderLeftWidth"))||0))-u,top:d.top-(v.top+(parseFloat(n.css(t,"borderTopWidth"))||0))-l},S={left:d.left+h-(v.left+g+(parseFloat(n.css(t,"borderRightWidth"))||0))+f,top:d.top+y-(v.top+m+(parseFloat(n.css(t,"borderBottomWidth"))||0))+s}),w.top<0||S.top>0?!0===a?n.scrollTop(t,b.top+w.top):!1===a?n.scrollTop(t,b.top+S.top):w.top<0?n.scrollTop(t,b.top+w.top):n.scrollTop(t,b.top+S.top):i||((a=void 0===a||!!a)?n.scrollTop(t,b.top+w.top):n.scrollTop(t,b.top+S.top)),o&&(w.left<0||S.left>0?!0===c?n.scrollLeft(t,b.left+w.left):!1===c?n.scrollLeft(t,b.left+S.left):w.left<0?n.scrollLeft(t,b.left+w.left):n.scrollLeft(t,b.left+S.left):i||((c=void 0===c||!!c)?n.scrollLeft(t,b.left+w.left):n.scrollLeft(t,b.left+S.left)))}},3745:(e,t,r)=>{"use strict";e.exports=r(5462)},4930:e=>{"use strict";var t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};function n(e,t){var r=e["page"+(t?"Y":"X")+"Offset"],n="scroll"+(t?"Top":"Left");if("number"!=typeof r){var o=e.document;"number"!=typeof(r=o.documentElement[n])&&(r=o.body[n])}return r}function o(e){return n(e)}function i(e){return n(e,!0)}function a(e){var t=function(e){var t,r=void 0,n=void 0,o=e.ownerDocument,i=o.body,a=o&&o.documentElement;return r=(t=e.getBoundingClientRect()).left,n=t.top,{left:r-=a.clientLeft||i.clientLeft||0,top:n-=a.clientTop||i.clientTop||0}}(e),r=e.ownerDocument,n=r.defaultView||r.parentWindow;return t.left+=o(n),t.top+=i(n),t}var c=new RegExp("^("+/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source+")(?!px)[a-z%]+$","i"),l=/^(top|right|bottom|left)$/,u="currentStyle",s="runtimeStyle",f="left",p=void 0;function d(e,t){for(var r=0;r<e.length;r++)t(e[r])}function y(e){return"border-box"===p(e,"boxSizing")}"undefined"!=typeof window&&(p=window.getComputedStyle?function(e,t,r){var n="",o=e.ownerDocument,i=r||o.defaultView.getComputedStyle(e,null);return i&&(n=i.getPropertyValue(t)||i[t]),n}:function(e,t){var r=e[u]&&e[u][t];if(c.test(r)&&!l.test(t)){var n=e.style,o=n[f],i=e[s][f];e[s][f]=e[u][f],n[f]="fontSize"===t?"1em":r||0,r=n.pixelLeft+"px",n[f]=o,e[s][f]=i}return""===r?"auto":r});var h=["margin","border","padding"],v=-1,m=2,g=1;function b(e,t,r){var n=0,o=void 0,i=void 0,a=void 0;for(i=0;i<t.length;i++)if(o=t[i])for(a=0;a<r.length;a++){var c;c="border"===o?o+r[a]+"Width":o+r[a],n+=parseFloat(p(e,c))||0}return n}function w(e){return null!=e&&e==e.window}var S={};function O(e,t,r){if(w(e))return"width"===t?S.viewportWidth(e):S.viewportHeight(e);if(9===e.nodeType)return"width"===t?S.docWidth(e):S.docHeight(e);var n="width"===t?["Left","Right"]:["Top","Bottom"],o="width"===t?e.offsetWidth:e.offsetHeight,i=(p(e),y(e)),a=0;(null==o||o<=0)&&(o=void 0,(null==(a=p(e,t))||Number(a)<0)&&(a=e.style[t]||0),a=parseFloat(a)||0),void 0===r&&(r=i?g:v);var c=void 0!==o||i,l=o||a;if(r===v)return c?l-b(e,["border","padding"],n):a;if(c){var u=r===m?-b(e,["border"],n):b(e,["margin"],n);return l+(r===g?0:u)}return a+b(e,h.slice(r),n)}d(["Width","Height"],(function(e){S["doc"+e]=function(t){var r=t.document;return Math.max(r.documentElement["scroll"+e],r.body["scroll"+e],S["viewport"+e](r))},S["viewport"+e]=function(t){var r="client"+e,n=t.document,o=n.body,i=n.documentElement[r];return"CSS1Compat"===n.compatMode&&i||o&&o[r]||i}}));var _={position:"absolute",visibility:"hidden",display:"block"};function E(e){var t=void 0,r=arguments;return 0!==e.offsetWidth?t=O.apply(void 0,r):function(e,n,o){var i={},a=e.style,c=void 0;for(c in n)n.hasOwnProperty(c)&&(i[c]=a[c],a[c]=n[c]);for(c in function(){t=O.apply(void 0,r)}.call(e),n)n.hasOwnProperty(c)&&(a[c]=i[c])}(e,_),t}function k(e,t,n){var o=n;if("object"!==(void 0===t?"undefined":r(t)))return void 0!==o?("number"==typeof o&&(o+="px"),void(e.style[t]=o)):p(e,t);for(var i in t)t.hasOwnProperty(i)&&k(e,i,t[i])}d(["width","height"],(function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);S["outer"+t]=function(t,r){return t&&E(t,e,r?0:g)};var r="width"===e?["Left","Right"]:["Top","Bottom"];S[e]=function(t,n){return void 0===n?t&&E(t,e,v):t?(p(t),y(t)&&(n+=b(t,["padding","border"],r)),k(t,e,n)):void 0}})),e.exports=t({getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},offset:function(e,t){if(void 0===t)return a(e);!function(e,t){"static"===k(e,"position")&&(e.style.position="relative");var r=a(e),n={},o=void 0,i=void 0;for(i in t)t.hasOwnProperty(i)&&(o=parseFloat(k(e,i))||0,n[i]=o+t[i]-r[i]);k(e,n)}(e,t)},isWindow:w,each:d,css:k,clone:function(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);if(e.overflow)for(var r in e)e.hasOwnProperty(r)&&(t.overflow[r]=e.overflow[r]);return t},scrollLeft:function(e,t){if(w(e)){if(void 0===t)return o(e);window.scrollTo(t,i(e))}else{if(void 0===t)return e.scrollLeft;e.scrollLeft=t}},scrollTop:function(e,t){if(w(e)){if(void 0===t)return i(e);window.scrollTo(o(e),t)}else{if(void 0===t)return e.scrollTop;e.scrollTop=t}},viewportWidth:0,viewportHeight:0},S)},2773:(e,t,r)=>{var n=r(4362).Symbol;e.exports=n},4111:e=>{e.exports=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}},8083:(e,t,r)=>{var n=r(5094),o=r(9246),i=r(3670),a=r(2343),c=r(4782),l=r(1589),u=Object.prototype.hasOwnProperty;e.exports=function(e,t){var r=i(e),s=!r&&o(e),f=!r&&!s&&a(e),p=!r&&!s&&!f&&l(e),d=r||s||f||p,y=d?n(e.length,String):[],h=y.length;for(var v in e)!t&&!u.call(e,v)||d&&("length"==v||f&&("offset"==v||"parent"==v)||p&&("buffer"==v||"byteLength"==v||"byteOffset"==v)||c(v,h))||y.push(v);return y}},5806:(e,t,r)=>{var n=r(5645),o=r(3978)(n);e.exports=o},7079:(e,t,r)=>{var n=r(7924)();e.exports=n},5645:(e,t,r)=>{var n=r(7079),o=r(3225);e.exports=function(e,t){return e&&n(e,t,o)}},1185:(e,t,r)=>{var n=r(2773),o=r(3888),i=r(2299),a=n?n.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?o(e):i(e)}},1075:(e,t,r)=>{var n=r(1185),o=r(4939);e.exports=function(e){return o(e)&&"[object Arguments]"==n(e)}},3638:(e,t,r)=>{var n=r(1185),o=r(7100),i=r(4939),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return i(e)&&o(e.length)&&!!a[n(e)]}},7521:(e,t,r)=>{var n=r(2803),o=r(3865),i=Object.prototype.hasOwnProperty;e.exports=function(e){if(!n(e))return o(e);var t=[];for(var r in Object(e))i.call(e,r)&&"constructor"!=r&&t.push(r);return t}},5094:e=>{e.exports=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}},9081:e=>{e.exports=function(e){return function(t){return e(t)}}},3183:(e,t,r)=>{var n=r(1559);e.exports=function(e){return"function"==typeof e?e:n}},3978:(e,t,r)=>{var n=r(6175);e.exports=function(e,t){return function(r,o){if(null==r)return r;if(!n(r))return e(r,o);for(var i=r.length,a=t?i:-1,c=Object(r);(t?a--:++a<i)&&!1!==o(c[a],a,c););return r}}},7924:e=>{e.exports=function(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),c=a.length;c--;){var l=a[e?c:++o];if(!1===r(i[l],l,i))break}return t}}},8556:(e,t,r)=>{var n="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g;e.exports=n},3888:(e,t,r)=>{var n=r(2773),o=Object.prototype,i=o.hasOwnProperty,a=o.toString,c=n?n.toStringTag:void 0;e.exports=function(e){var t=i.call(e,c),r=e[c];try{e[c]=void 0;var n=!0}catch(e){}var o=a.call(e);return n&&(t?e[c]=r:delete e[c]),o}},4782:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,r){var n=typeof e;return!!(r=null==r?9007199254740991:r)&&("number"==n||"symbol"!=n&&t.test(e))&&e>-1&&e%1==0&&e<r}},2803:e=>{var t=Object.prototype;e.exports=function(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||t)}},3865:(e,t,r)=>{var n=r(5290)(Object.keys,Object);e.exports=n},1985:(e,t,r)=>{e=r.nmd(e);var n=r(8556),o=t&&!t.nodeType&&t,i=o&&e&&!e.nodeType&&e,a=i&&i.exports===o&&n.process,c=function(){try{return i&&i.require&&i.require("util").types||a&&a.binding&&a.binding("util")}catch(e){}}();e.exports=c},2299:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},5290:e=>{e.exports=function(e,t){return function(r){return e(t(r))}}},4362:(e,t,r)=>{var n=r(8556),o="object"==typeof self&&self&&self.Object===Object&&self,i=n||o||Function("return this")();e.exports=i},6270:(e,t,r)=>{e.exports=r(9982)},9982:(e,t,r)=>{var n=r(4111),o=r(5806),i=r(3183),a=r(3670);e.exports=function(e,t){return(a(e)?n:o)(e,i(t))}},1559:e=>{e.exports=function(e){return e}},9246:(e,t,r)=>{var n=r(1075),o=r(4939),i=Object.prototype,a=i.hasOwnProperty,c=i.propertyIsEnumerable,l=n(function(){return arguments}())?n:function(e){return o(e)&&a.call(e,"callee")&&!c.call(e,"callee")};e.exports=l},3670:e=>{var t=Array.isArray;e.exports=t},6175:(e,t,r)=>{var n=r(3626),o=r(7100);e.exports=function(e){return null!=e&&o(e.length)&&!n(e)}},2343:(e,t,r)=>{e=r.nmd(e);var n=r(4362),o=r(3444),i=t&&!t.nodeType&&t,a=i&&e&&!e.nodeType&&e,c=a&&a.exports===i?n.Buffer:void 0,l=(c?c.isBuffer:void 0)||o;e.exports=l},3626:(e,t,r)=>{var n=r(1185),o=r(71);e.exports=function(e){if(!o(e))return!1;var t=n(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},7100:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},71:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},4939:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},1589:(e,t,r)=>{var n=r(3638),o=r(9081),i=r(1985),a=i&&i.isTypedArray,c=a?o(a):n;e.exports=c},3225:(e,t,r)=>{var n=r(8083),o=r(7521),i=r(6175);e.exports=function(e){return i(e)?n(e):o(e)}},3444:e=>{e.exports=function(){return!1}},4144:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionCreators=t.ActionTypes=void 0;var r={UNDO:"@@redux-undo/UNDO",REDO:"@@redux-undo/REDO",JUMP_TO_FUTURE:"@@redux-undo/JUMP_TO_FUTURE",JUMP_TO_PAST:"@@redux-undo/JUMP_TO_PAST",JUMP:"@@redux-undo/JUMP",CLEAR_HISTORY:"@@redux-undo/CLEAR_HISTORY"};t.ActionTypes=r;var n={undo:function(){return{type:r.UNDO}},redo:function(){return{type:r.REDO}},jumpToFuture:function(e){return{type:r.JUMP_TO_FUTURE,index:e}},jumpToPast:function(e){return{type:r.JUMP_TO_PAST,index:e}},jump:function(e){return{type:r.JUMP,index:e}},clearHistory:function(){return{type:r.CLEAR_HISTORY}}};t.ActionCreators=n},2104:(e,t)=>{"use strict";function r(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var n,o;Object.defineProperty(t,"__esModule",{value:!0}),t.set=function(e){n=e},t.start=function(e,t){o={header:[],prev:[],action:[],next:[],msgs:[]},n&&(console.group?(o.header=["%credux-undo","font-style: italic","action",e.type],o.action=a("action",i.action,e),o.prev=a("prev history",i.prevState,t)):(o.header=["redux-undo action",e.type],o.action=["action",e],o.prev=["prev history",t]))},t.end=function(e){var t,c,l,u,s,f,p,d,y,h,v,m,g,b,w,S;n&&(console.group?o.next=a("next history",i.nextState,e):o.next=["next history",e],m=(v=o).header,g=v.prev,b=v.next,w=v.action,S=v.msgs,console.group?((t=console).groupCollapsed.apply(t,r(m)),(c=console).log.apply(c,r(g)),(l=console).log.apply(l,r(w)),(u=console).log.apply(u,r(b)),(s=console).log.apply(s,r(S)),console.groupEnd()):((f=console).log.apply(f,r(m)),(p=console).log.apply(p,r(g)),(d=console).log.apply(d,r(w)),(y=console).log.apply(y,r(b)),(h=console).log.apply(h,r(S))))},t.log=function(){if(n){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];o.msgs=o.msgs.concat([].concat(t,["\n"]))}};var i={prevState:"#9E9E9E",action:"#03A9F4",nextState:"#4CAF50"};function a(e,t,r){return["%c".concat(e),"color: ".concat(t,"; font-weight: bold"),r]}},4449:(e,t)=>{"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return Array.isArray(e)?e:"string"==typeof e?[e]:t}Object.defineProperty(t,"__esModule",{value:!0}),t.parseActions=r,t.isHistory=function(e){return void 0!==e.present&&void 0!==e.future&&void 0!==e.past&&Array.isArray(e.future)&&Array.isArray(e.past)},t.includeAction=function(e){var t=r(e);return function(e){return t.indexOf(e.type)>=0}},t.excludeAction=function(e){var t=r(e);return function(e){return t.indexOf(e.type)<0}},t.combineFilters=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t){return function(r,n,o){return e(r,n,o)&&t(r,n,o)}}),(function(){return!0}))},t.groupByActionTypes=function(e){var t=r(e);return function(e){return t.indexOf(e.type)>=0?e.type:null}},t.newHistory=function(e,t,r){return{past:e,present:t,future:r,group:arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,_latestUnfiltered:t,index:e.length,limit:e.length+r.length+1}}},3980:(e,t,r)=>{"use strict";Object.defineProperty(t,"zF",{enumerable:!0,get:function(){return o.ActionCreators}}),Object.defineProperty(t,"an",{enumerable:!0,get:function(){return i.includeAction}}),Object.defineProperty(t,"ZP",{enumerable:!0,get:function(){return a.default}});var n,o=r(4144),i=r(4449),a=(n=r(5333))&&n.__esModule?n:{default:n}},5333:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.set(t.debug);var r,n=u({limit:void 0,filter:function(){return!0},groupBy:function(){return null},undoType:i.ActionTypes.UNDO,redoType:i.ActionTypes.REDO,jumpToPastType:i.ActionTypes.JUMP_TO_PAST,jumpToFutureType:i.ActionTypes.JUMP_TO_FUTURE,jumpType:i.ActionTypes.JUMP,neverSkipReducer:!1,ignoreInitialState:!1,syncFilter:!1},t,{initTypes:(0,a.parseActions)(t.initTypes,["@@redux-undo/INIT"]),clearHistoryType:(0,a.parseActions)(t.clearHistoryType,[i.ActionTypes.CLEAR_HISTORY])}),c=n.neverSkipReducer?function(t,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),i=2;i<n;i++)o[i-2]=arguments[i];return u({},t,{present:e.apply(void 0,[t.present,r].concat(o))})}:function(e){return e};return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};o.start(i,t);for(var l,u,s=t,v=arguments.length,m=new Array(v>2?v-2:0),g=2;g<v;g++)m[g-2]=arguments[g];if(!r){if(o.log("history is uninitialized"),void 0===t)return s=p(e.apply(void 0,[t,{type:"@@redux-undo/CREATE_HISTORY"}].concat(m)),n.ignoreInitialState),o.log("do not set initialState on probe actions"),o.end(s),s;(0,a.isHistory)(t)?(s=r=n.ignoreInitialState?t:(0,a.newHistory)(t.past,t.present,t.future),o.log("initialHistory initialized: initialState is a history",r)):(s=r=p(t,n.ignoreInitialState),o.log("initialHistory initialized: initialState is not a history",r))}switch(i.type){case void 0:return s;case n.undoType:return l=h(s,-1),o.log("perform undo"),o.end(l),c.apply(void 0,[l,i].concat(m));case n.redoType:return l=h(s,1),o.log("perform redo"),o.end(l),c.apply(void 0,[l,i].concat(m));case n.jumpToPastType:return l=y(s,i.index),o.log("perform jumpToPast to ".concat(i.index)),o.end(l),c.apply(void 0,[l,i].concat(m));case n.jumpToFutureType:return l=d(s,i.index),o.log("perform jumpToFuture to ".concat(i.index)),o.end(l),c.apply(void 0,[l,i].concat(m));case n.jumpType:return l=h(s,i.index),o.log("perform jump to ".concat(i.index)),o.end(l),c.apply(void 0,[l,i].concat(m));case u=i.type,n.clearHistoryType.indexOf(u)>-1?u:!u:return l=p(s.present,n.ignoreInitialState),o.log("perform clearHistory"),o.end(l),c.apply(void 0,[l,i].concat(m));default:if(l=e.apply(void 0,[s.present,i].concat(m)),n.initTypes.some((function(e){return e===i.type})))return o.log("reset history due to init action"),o.end(r),r;if(s._latestUnfiltered===l)return s;if("function"==typeof n.filter&&!n.filter(i,l,s)){var b=(0,a.newHistory)(s.past,l,s.future,s.group);return n.syncFilter||(b._latestUnfiltered=s._latestUnfiltered),o.log("filter ignored action, not storing it in past"),o.end(b),b}var w=n.groupBy(i,l,s);if(null!=w&&w===s.group){var S=(0,a.newHistory)(s.past,l,s.future,s.group);return o.log("groupBy grouped the action with the previous action"),o.end(S),S}return s=function(e,t,r,n){var i=e.past.length+1;o.log("inserting",t),o.log("new free: ",r-i);var c=e.past,l=e._latestUnfiltered,u=r&&r<=i,s=c.slice(u?1:0),p=null!=l?[].concat(f(s),[l]):s;return(0,a.newHistory)(p,t,[],n)}(s,l,n.limit,w),o.log("inserted new state into history"),o.end(s),s}}};var o=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var t=c();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var a=o?Object.getOwnPropertyDescriptor(e,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=e[i]}return r.default=e,t&&t.set(e,r),r}(r(2104)),i=r(4144),a=r(4449);function c(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return c=function(){return e},e}function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e,t){var r=(0,a.newHistory)([],e,[]);return t&&(r._latestUnfiltered=null),r}function d(e,t){if(t<0||t>=e.future.length)return e;var r=e.past,n=e.future,o=e._latestUnfiltered,i=[].concat(f(r),[o],f(n.slice(0,t))),c=n[t],l=n.slice(t+1);return(0,a.newHistory)(i,c,l)}function y(e,t){if(t<0||t>=e.past.length)return e;var r=e.past,n=e.future,o=e._latestUnfiltered,i=r.slice(0,t),c=[].concat(f(r.slice(t+1)),[o],f(n)),l=r[t];return(0,a.newHistory)(i,l,c)}function h(e,t){return t>0?d(e,t-1):t<0?y(e,e.past.length+t):e}},21:(e,t,r)=>{"use strict";var n={};r.r(n),r.d(n,{disableComplementaryArea:()=>k,enableComplementaryArea:()=>E,pinItem:()=>j,setDefaultComplementaryArea:()=>_,setFeatureDefaults:()=>L,setFeatureValue:()=>P,toggleFeature:()=>R,unpinItem:()=>x});var o={};r.r(o),r.d(o,{getActiveComplementaryArea:()=>T,isFeatureActive:()=>C,isItemPinned:()=>A});var i={};r.r(i),r.d(i,{getBlocks:()=>ur,hasRedo:()=>fr,hasUndo:()=>sr});var a={};r.r(a),r.d(a,{clearHistory:()=>vr,fetchBlocksFromStorage:()=>gr,persistBlocksToStorage:()=>br,redo:()=>hr,undo:()=>yr,updateBlocks:()=>mr});var c={};r.r(c),r.d(c,{getBlocks:()=>Er});const l=window.wp.components,u=window.wp.blockEditor,s=window.wp.element,f=e=>{let{isActive:t}=e;return(0,s.useEffect)((()=>{let e=!1;return document.body.classList.contains("sticky-menu")&&(e=!0,document.body.classList.remove("sticky-menu")),()=>{e&&document.body.classList.add("sticky-menu")}}),[]),(0,s.useEffect)((()=>(t?document.body.classList.add("is-fullscreen-mode"):document.body.classList.remove("is-fullscreen-mode"),()=>{t&&document.body.classList.remove("is-fullscreen-mode")})),[t]),null};function p(){return p=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},p.apply(this,arguments)}var d=r(2703),y=r.n(d);const h=window.wp.i18n,v=window.wp.compose;function m(e){let{children:t,className:r,ariaLabel:n,motionProps:o={}}=e;const i=Object.keys(o).length?l.__unstableMotion.div:"div";return(0,s.createElement)(i,p({className:y()("interface-navigable-region",r),"aria-label":n,role:"region",tabIndex:"-1"},o),(0,s.createElement)("div",{className:"interface-navigable-region__stacker"},t))}const g=(0,s.forwardRef)((function(e,t){let{isDistractionFree:r,footer:n,header:o,editorNotices:i,sidebar:a,secondarySidebar:c,notices:u,content:f,drawer:d,actions:g,labels:b,className:w,shortcuts:S}=e;const O=(0,l.__unstableUseNavigateRegions)(S);!function(e){(0,s.useEffect)((()=>{const t=document&&document.querySelector(`html:not(.${e})`);if(t)return t.classList.toggle(e),()=>{t.classList.toggle(e)}}),[e])}("interface-interface-skeleton__html-container");const _={
/* translators: accessibility text for the nav bar landmark region. */
drawer:(0,h.__)("Drawer"),
/* translators: accessibility text for the top bar landmark region. */
header:(0,h.__)("Header"),
/* translators: accessibility text for the content landmark region. */
body:(0,h.__)("Content"),
/* translators: accessibility text for the secondary sidebar landmark region. */
secondarySidebar:(0,h.__)("Block Library"),
/* translators: accessibility text for the settings landmark region. */
sidebar:(0,h.__)("Settings"),
/* translators: accessibility text for the publish landmark region. */
actions:(0,h.__)("Publish"),
/* translators: accessibility text for the footer landmark region. */
footer:(0,h.__)("Footer"),...b},E={hidden:r?{opacity:0}:{opacity:1},hover:{opacity:1,transition:{type:"tween",delay:.2,delayChildren:.2}}};return(0,s.createElement)("div",p({},O,{ref:(0,v.useMergeRefs)([t,O.ref]),className:y()(w,"interface-interface-skeleton",O.className,!!n&&"has-footer")}),!!d&&(0,s.createElement)(m,{className:"interface-interface-skeleton__drawer",ariaLabel:_.drawer},d),(0,s.createElement)("div",{className:"interface-interface-skeleton__editor"},!!o&&r&&(0,s.createElement)(m,{className:"interface-interface-skeleton__header","aria-label":_.header,motionProps:{initial:r?"hidden":"hover",whileHover:"hover",variants:E,transition:{type:"tween",delay:.8}}},o),!!o&&!r&&(0,s.createElement)(m,{className:"interface-interface-skeleton__header",ariaLabel:_.header},o),r&&(0,s.createElement)("div",{className:"interface-interface-skeleton__header"},i),(0,s.createElement)("div",{className:"interface-interface-skeleton__body"},!!c&&(0,s.createElement)(m,{className:"interface-interface-skeleton__secondary-sidebar",ariaLabel:_.secondarySidebar},c),!!u&&(0,s.createElement)("div",{className:"interface-interface-skeleton__notices"},u),(0,s.createElement)(m,{className:"interface-interface-skeleton__content",ariaLabel:_.body},f),!!a&&(0,s.createElement)(m,{className:"interface-interface-skeleton__sidebar",ariaLabel:_.sidebar},a),!!g&&(0,s.createElement)(m,{className:"interface-interface-skeleton__actions",ariaLabel:_.actions},g))),!!n&&(0,s.createElement)(m,{className:"interface-interface-skeleton__footer",ariaLabel:_.footer},n))})),b=window.wp.data,w=window.wp.deprecated;var S=r.n(w);const O=window.wp.preferences,_=(e,t)=>({type:"SET_DEFAULT_COMPLEMENTARY_AREA",scope:e,area:t}),E=(e,t)=>r=>{let{registry:n,dispatch:o}=r;t&&(n.select(O.store).get(e,"isComplementaryAreaVisible")||n.dispatch(O.store).set(e,"isComplementaryAreaVisible",!0),o({type:"ENABLE_COMPLEMENTARY_AREA",scope:e,area:t}))},k=e=>t=>{let{registry:r}=t;r.select(O.store).get(e,"isComplementaryAreaVisible")&&r.dispatch(O.store).set(e,"isComplementaryAreaVisible",!1)},j=(e,t)=>r=>{let{registry:n}=r;if(!t)return;const o=n.select(O.store).get(e,"pinnedItems");!0!==(null==o?void 0:o[t])&&n.dispatch(O.store).set(e,"pinnedItems",{...o,[t]:!0})},x=(e,t)=>r=>{let{registry:n}=r;if(!t)return;const o=n.select(O.store).get(e,"pinnedItems");n.dispatch(O.store).set(e,"pinnedItems",{...o,[t]:!1})};function R(e,t){return function(r){let{registry:n}=r;S()("dispatch( 'core/interface' ).toggleFeature",{since:"6.0",alternative:"dispatch( 'core/preferences' ).toggle"}),n.dispatch(O.store).toggle(e,t)}}function P(e,t,r){return function(n){let{registry:o}=n;S()("dispatch( 'core/interface' ).setFeatureValue",{since:"6.0",alternative:"dispatch( 'core/preferences' ).set"}),o.dispatch(O.store).set(e,t,!!r)}}function L(e,t){return function(r){let{registry:n}=r;S()("dispatch( 'core/interface' ).setFeatureDefaults",{since:"6.0",alternative:"dispatch( 'core/preferences' ).setDefaults"}),n.dispatch(O.store).setDefaults(e,t)}}const T=(0,b.createRegistrySelector)((e=>(t,r)=>{var n;const o=e(O.store).get(r,"isComplementaryAreaVisible");if(void 0!==o)return o?null==t||null===(n=t.complementaryAreas)||void 0===n?void 0:n[r]:null})),A=(0,b.createRegistrySelector)((e=>(t,r,n)=>{var o;const i=e(O.store).get(r,"pinnedItems");return null===(o=null==i?void 0:i[n])||void 0===o||o})),C=(0,b.createRegistrySelector)((e=>(t,r,n)=>(S()("select( 'core/interface' ).isFeatureActive( scope, featureName )",{since:"6.0",alternative:"select( 'core/preferences' ).get( scope, featureName )"}),!!e(O.store).get(r,n)))),N=(0,b.combineReducers)({complementaryAreas:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_DEFAULT_COMPLEMENTARY_AREA":{const{scope:r,area:n}=t;return e[r]?e:{...e,[r]:n}}case"ENABLE_COMPLEMENTARY_AREA":{const{scope:r,area:n}=t;return{...e,[r]:n}}}return e}}),F=(0,b.createReduxStore)("core/interface",{reducer:N,actions:n,selectors:o});(0,b.register)(F);const I=window.wp.keycodes,U=window.wp.primitives,B=(0,s.createElement)(U.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(U.Path,{d:"M18.3 11.7c-.6-.6-1.4-.9-2.3-.9H6.7l2.9-3.3-1.1-1-4.5 5L8.5 16l1-1-2.7-2.7H16c.5 0 .9.2 1.3.5 1 1 1 3.4 1 4.5v.3h1.5v-.2c0-1.5 0-4.3-1.5-5.7z"}));var M=["hasUndo","undo"];function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},D.apply(this,arguments)}var H=(0,v.compose)([(0,b.withSelect)((function(e){return{hasUndo:e("historyUndoRedoStore").hasUndo()}})),(0,b.withDispatch)((function(e){return{undo:e("historyUndoRedoStore").undo}}))])((function(e){var t=e.hasUndo,r=e.undo,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,M);return React.createElement(l.Button,D({},n,{icon:B,label:(0,h.__)("Undo"),shortcut:I.displayShortcut.primary("z"),"aria-disabled":!t,onClick:t?r:void 0,className:"editor-history__undo"}))}));const G=H,W=(0,s.createElement)(U.SVG,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,s.createElement)(U.Path,{d:"M15.6 6.5l-1.1 1 2.9 3.3H8c-.9 0-1.7.3-2.3.9-1.4 1.5-1.4 4.2-1.4 5.6v.2h1.5v-.3c0-1.1 0-3.5 1-4.5.3-.3.7-.5 1.3-.5h9.2L14.5 15l1.1 1.1 4.6-4.6-4.6-5z"}));var V=["hasRedo","redo"];function z(){return z=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},z.apply(this,arguments)}var K=(0,v.compose)([(0,b.withSelect)((function(e){return{hasRedo:e("historyUndoRedoStore").hasRedo()}})),(0,b.withDispatch)((function(e){return{redo:e("historyUndoRedoStore").redo}}))])((function(e){var t=e.hasRedo,r=e.redo,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,V);return React.createElement(l.Button,z({},n,{icon:W,label:(0,h.__)("Redo"),shortcut:I.displayShortcut.primaryShift("z"),"aria-disabled":!t,onClick:t?r:void 0,className:"editor-history__redo"}))}));const J=K;function Y(){return React.createElement("div",{className:"history-undo-redo-header",role:"region","aria-label":(0,h.__)("History undo redo top bar."),tabIndex:"-1"},React.createElement(G,null),React.createElement(J,null))}var q=(0,l.createSlotFill)("StandAloneBlockEditorSidebarInspector"),$=q.Slot,Q=q.Fill;function Z(){return React.createElement("div",{className:"fce-sidebar",role:"region","aria-label":(0,h.__)("advanced settings."),tabIndex:"-1"},React.createElement(l.Panel,null,React.createElement("div",{className:"components-panel__header"},React.createElement("h2",null,(0,h.__)("Block Settings")),React.createElement(Y,null)),React.createElement($,{bubblesVirtually:!0})))}Z.InspectorFill=Q;const X=Z,ee=(window.wp.formatLibrary,window.wp.blocks),te=window.wp.mediaUtils,re=window.wp.keyboardShortcuts,ne=function(){var e=(0,b.useDispatch)("core/keyboard-shortcuts").registerShortcut,t=(0,b.useDispatch)("historyUndoRedoStore"),r=t.undo,n=t.redo;return(0,s.useEffect)((function(){e({name:"custom/editor/undo",category:"global",description:(0,h.__)("Undo your last changes."),keyCombination:{modifier:"primary",character:"z"}}),e({name:"custom/editor/redo",category:"global",description:(0,h.__)("Redo your last undo."),keyCombination:{modifier:"primaryShift",character:"z"}})}),[e]),(0,re.useShortcut)("custom/editor/undo",(function(){r()})),(0,re.useShortcut)("custom/editor/redo",(function(){n()})),null};var oe=["onError"];function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ae(Object(r),!0).forEach((function(t){le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function le(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==ie(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==ie(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===ie(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const ue=function(e){var t=e.settings,r=e.onChangeContent,n=(0,b.useSelect)((function(e){return e("historyUndoRedoStore").getBlocks()})),o=(0,b.useDispatch)("historyUndoRedoStore"),i=o.updateBlocks,a=o.clearHistory;t.__experimentalSetIsInserterOpened=function(e){e&&jQuery(".fce_inserter button.block-editor-inserter__toggle").trigger("click")};var c=(0,b.useSelect)((function(e){return!0}),[]),l=(0,s.useMemo)((function(){return c?ce(ce({},t),{},{mediaUpload:function(e){var r=e.onError,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,oe);(0,te.uploadMedia)(ce({wpAllowedMimeTypes:t.allowedMimeTypes,onError:function(e){var t=e.message;return r(t)}},n))}}):t}),[c,t]);function f(e){i(e),null!=e&&e.length&&r((0,ee.serialize)(e))}(0,s.useEffect)((function(){var e=n;null!=e&&e.length&&(a(),f(e))}),[]);var p,d=void 0!==re.ShortcutProvider;return React.createElement("div",{className:"fce-block-editor"},(p=React.createElement(u.BlockEditorProvider,{value:n,onInput:f,onChange:function(e){i(e,!0),r((0,ee.serialize)(e))},settings:l},React.createElement(u.BlockEditorKeyboardShortcuts.Register,null),React.createElement(u.BlockEditorKeyboardShortcuts,null),React.createElement(ne,null),React.createElement(X.InspectorFill,null,React.createElement(u.BlockInspector,null)),React.createElement("div",{className:"editor-styles-wrapper"},React.createElement(u.BlockTools,null,React.createElement(u.WritingFlow,null,React.createElement(u.ObserveTyping,null,React.createElement("span",{className:"fce_inserter"},React.createElement(u.Inserter,null)),React.createElement(u.BlockList,{className:"fce-block-editor__block-list fc_editor_body"})))))),d?React.createElement(re.ShortcutProvider,null,p):p))},se=function(e){var t=e.settings,r=e.onChangeHandle;return React.createElement(React.Fragment,null,React.createElement(f,{isActive:!1}),React.createElement(l.SlotFillProvider,null,React.createElement(g,{sidebar:React.createElement(X,null),content:React.createElement(React.Fragment,null,React.createElement(ue,{onChangeContent:r,settings:t}))}),React.createElement(u.BlockTools,null),React.createElement(l.Popover.Slot,null)))};function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function pe(e,t,r){return(t=ye(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function de(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ye(n.key),n)}}function ye(e){var t=function(e,t){if("object"!==fe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==fe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===fe(t)?t:String(t)}function he(e,t){return he=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},he(e,t)}function ve(e){return ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ve(e)}var __=wp.i18n.__,me=wp.element.Component,ge=wp.components,be=ge.TextControl,we=ge.Button,Se=ge.Tooltip,Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&he(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ve(n);if(o){var r=ve(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===fe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).state={active:!1},t}return t=a,(r=[{key:"render",value:function(){var e=this,t=this.props,r=t.attributes,n=t.top,o=t.right,i=t.bottom,a=t.left,c=t.label,l=t.setAttributes;return React.createElement("div",{className:"fce-dimension-box-wrapper"},React.createElement("label",null," ",c," "),React.createElement("div",{className:"fce-dimension-box"},React.createElement(be,{type:"number",className:"fce-dimension-box-top",value:r[n],Placeholder:"Top",onChange:function(t){var r;e.state.active?l((pe(r={},n,parseInt(t)),pe(r,o,parseInt(t)),pe(r,i,parseInt(t)),pe(r,a,parseInt(t)),r)):l(pe({},n,parseInt(t)))}}),React.createElement(be,{type:"number",className:"fce-dimension-box-right",value:r[o],Placeholder:"Right",onChange:function(t){var r;e.state.active?l((pe(r={},n,parseInt(t)),pe(r,o,parseInt(t)),pe(r,i,parseInt(t)),pe(r,a,parseInt(t)),r)):l(pe({},o,parseInt(t)))}}),React.createElement(be,{type:"number",className:"fce-dimension-box-bottom",value:r[i],Placeholder:"Bottom",onChange:function(t){var r;e.state.active?l((pe(r={},n,parseInt(t)),pe(r,o,parseInt(t)),pe(r,i,parseInt(t)),pe(r,a,parseInt(t)),r)):l(pe({},i,parseInt(t)))}}),React.createElement(be,{type:"number",className:"fce-dimension-box-left",value:r[a],Placeholder:"Left",onChange:function(t){var r;e.state.active?l((pe(r={},n,parseInt(t)),pe(r,o,parseInt(t)),pe(r,i,parseInt(t)),pe(r,a,parseInt(t)),r)):l(pe({},a,parseInt(t)))}}),React.createElement(Se,{text:__("Link values together","fluentcrm"),position:"top"},React.createElement(we,{className:this.state.active?"fce-dimension-link-values-together active":"fce-dimension-link-values-together",isDefault:!0,onClick:function(){e.setState({active:!e.state.active},(function(){var t;e.state.active&&l((pe(t={},n,r[n]),pe(t,o,r[n]),pe(t,i,r[n]),pe(t,a,r[n]),t))}))}},React.createElement("i",{className:"dashicons dashicons-admin-links"})))))}}])&&de(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(me);const _e=window.lodash;var Ee=["fontFamily","lineHeight","marginTop","marginRight","marginBottom","marginLeft","paddingTop","paddingRight","paddingBottom","paddingLeft"];const ke=function(e,t){var r=(0,_e.pickBy)(e,(function(e,t){return!!e&&Ee.includes(t)}));return void 0!==e.lineHeight&&e.lineHeight&&(r.lineHeight=e.lineHeight+"px"),r};function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}var xe=["select"];function Re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Re(Object(r),!0).forEach((function(t){Le(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Le(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==je(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===je(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Te(){return Te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Te.apply(this,arguments)}var Ae=wp.i18n.__,Ce=wp.blockEditor.InspectorControls,Ne=wp.compose,Fe=Ne.createHigherOrderComponent,Ie=Ne.compose,Ue=wp.components,Be=Ue.PanelBody,Me=Ue.SelectControl,De=Ue.TextControl,He=wp.element.Fragment,Ge=wp.hooks.addFilter,We=wp.data.withSelect,Ve=["core/paragraph","core/heading","core/image"];Ge("blocks.registerBlockType","fluentcrm/typography/attributes",(function(e,t){return Ve.includes(t)?(void 0!==e.attributes&&(e.attributes=Object.assign(e.attributes,{fontFamily:{type:"string",default:""},lineHeight:{type:"number",default:""},paddingTop:{type:"number",default:""},paddingRight:{type:"number",default:""},paddingBottom:{type:"number",default:""},paddingLeft:{type:"number",default:""},marginTop:{type:"number",default:""},marginRight:{type:"number",default:""},marginBottom:{type:"number",default:""},marginLeft:{type:"number",default:""}})),e):e})),Ge("editor.BlockEdit","fluentcrm/typography",Fe((function(e){return function(t){if(!Ve.includes(t.name))return React.createElement(e,t);var r=t.attributes,n=t.name,o=t.setAttributes;return React.createElement(He,null,React.createElement(e,t),React.createElement(Ce,null,React.createElement(Be,{initialOpen:!1,title:Ae("core/image"===n?"Advanced Spacing":"Advanced Typography")},("core/heading"===n||"core/paragraph"===n)&&React.createElement(He,null,React.createElement(Me,{label:Ae("Font Family"),value:r.fontFamily,options:[{label:"Select a font family",value:""},{label:"Arial",value:"Arial, 'Helvetica Neue', Helvetica, sans-serif"},{label:"Comic Sans",value:"'Comic Sans MS', 'Marker Felt-Thin', Arial, sans-serif"},{label:"Courier New",value:"'Courier New', Courier, 'Lucida Sans Typewriter', 'Lucida Typewriter', monospace"},{label:"Georgia",value:"Georgia, Times, 'Times New Roman', serif"},{label:"Helvetica",value:"Helvetica , Arial, Verdana, sans-serif"},{label:"Lucida",value:"Lucida Sans Unicode', 'Lucida Grande', sans-serif"},{label:"Tahoma",value:"Tahoma, Verdana, Segoe, sans-serif"},{label:"Times New Roman",value:"'Times New Roman', Times, Baskerville, Georgia, serif"},{label:"Trebuchet MS",value:"'Trebuchet MS', 'Lucida Grande', 'Lucida Sans Unicode', 'Lucida Sans', Tahoma, sans-serif"},{label:"Verdana",value:"Verdana, Geneva, sans-serif"},{label:"Lato",value:"'Lato', 'Helvetica Neue', Helvetica, Arial, sans-serif"},{label:"Lora",value:"'Lora', Georgia, 'Times New Roman', serif"},{label:"Merriweather",value:"'Merriweather', Georgia, 'Times New Roman', serif"},{label:"Merriweather Sans",value:"'Merriweather Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif"},{label:"Noticia Text",value:"'Noticia Text', Georgia, 'Times New Roman', serif"},{label:"Open Sans",value:"'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif"},{label:"Roboto",value:"'Roboto', 'Helvetica Neue', Helvetica, Arial, sans-serif"},{label:"Source Sans Pro",value:"'Source Sans Pro', 'Helvetica Neue', Helvetica, Arial, sans-serif"}],onChange:function(e){return o({fontFamily:e})}}),React.createElement(De,{label:Ae("Line Height"),type:"number",value:r.lineHeight,onChange:function(e){return o({lineHeight:parseInt(e)})}})),React.createElement(Oe,Te({},t,{label:Ae("Padding"),top:"paddingTop",right:"paddingRight",bottom:"paddingBottom",left:"paddingLeft"})),React.createElement(Oe,Te({},t,{label:Ae("Margin"),top:"marginTop",right:"marginRight",bottom:"marginBottom",left:"marginLeft"})))))}}),"withControls"));var ze=Ie(We((function(e){return{selected:e("core/block-editor").getSelectedBlock(),select:e}})));Ge("editor.BlockListBlock","fluentcrm/withTypographySettings",Fe((function(e){return ze((function(t){var r=t.select,n=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(t,xe),o=n.wrapperProps,i=r("core/block-editor").getBlock(n.rootClientId||n.clientId),a=r("core/block-editor").getBlockName(n.rootClientId||n.clientId);return Ve.includes(a)&&i.attributes&&(o=Pe(Pe({},o),{},{style:ke(i.attributes)})),React.createElement(e,Te({},n,{wrapperProps:o}))}))}),"withTypographySettings")),Ge("blocks.getSaveContent.extraProps","fluentcrm/applyTypographySettings",(function(e,t,r){return Ve.includes(t.name)?(void 0!==e.style?e.style=Object.assign(e.style,ke(r,t.name)):e.style=ke(r,t.name),e):e}));const Ke=window.wp.domReady;var Je=r.n(Ke),Ye=r(6270),qe=r.n(Ye);const $e={name:"crm_prefixes",className:"editor-autocompleters__crm",triggerPrefix:"@",options:function(e){var t=[];return qe()(window.fcAdmin.globalSmartCodes,(function(e){qe()(e.shortcodes,(function(r,n){t.push({code:n,title:r,prefix:e.key})}))})),t},isDebounced:!0,getOptionKeywords:function(e){return[e.title,e.code]},getOptionLabel:function(e){return[React.createElement("span",{key:"name",className:"editor-autocompleters__user-name"},e.title)]},getOptionCompletion:function(e){return e.code}},Qe=window.wp.hooks,Ze=window.wp.richText;function Xe(e){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xe(e)}function et(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Xe(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Xe(o)?o:String(o)),n)}var o}function tt(e,t){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tt(e,t)}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nt(e){return nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},nt(e)}var ot=window.wp,it=function(e){return(0,_e.pick)(e,["sizes","mime","type","subtype","id","url","alt","link","caption"])},at=function(e){return ot.media.query({order:"ASC",orderby:"post__in",post__in:e,posts_per_page:-1,query:!0,type:"image"})},ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=nt(n);if(o){var r=nt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Xe(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rt(e)}(this,e)});function a(e){var t,r=e.allowedTypes,n=e.gallery,o=void 0!==n&&n,c=e.unstableFeaturedImageFlow,l=void 0!==c&&c,u=e.modalClass,s=e.multiple,f=void 0!==s&&s,p=e.title,d=void 0===p?(0,h.__)("Select or Upload Media"):p;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.apply(this,arguments)).openModal=t.openModal.bind(rt(t)),t.onOpen=t.onOpen.bind(rt(t)),t.onSelect=t.onSelect.bind(rt(t)),t.onUpdate=t.onUpdate.bind(rt(t)),t.onClose=t.onClose.bind(rt(t)),o)t.buildAndSetGalleryFrame();else{var y={title:d,multiple:f};r&&(y.library={type:r}),t.frame=ot.media(y)}return u&&t.frame.$el.addClass(u),l&&t.buildAndSetFeatureImageFrame(),t.initializeListeners(),t}return t=a,(r=[{key:"initializeListeners",value:function(){this.frame.on("select",this.onSelect),this.frame.on("update",this.onUpdate),this.frame.on("open",this.onOpen),this.frame.on("close",this.onClose)}},{key:"buildAndSetGalleryFrame",value:function(){var e=this.props,t=e.addToGallery,r=void 0!==t&&t,n=e.allowedTypes,o=e.multiple,i=void 0!==o&&o,a=e.value,c=void 0===a?null:a;if(c!==this.lastGalleryValue){var l;this.lastGalleryValue=c,this.frame&&this.frame.remove(),l=r?"gallery-library":c?"gallery-edit":"gallery",this.GalleryDetailsMediaFrame||(this.GalleryDetailsMediaFrame=ot.media.view.MediaFrame.Post.extend({createStates:function(){this.states.add([new ot.media.controller.Library({id:"gallery",title:ot.media.view.l10n.createGalleryTitle,priority:40,toolbar:"main-gallery",filterable:"uploaded",multiple:"add",editable:!1,library:ot.media.query((0,_e.defaults)({type:"image"},this.options.library))}),new ot.media.controller.GalleryEdit({library:this.options.selection,editing:this.options.editing,menu:"gallery",displaySettings:!1,multiple:!0}),new ot.media.controller.GalleryAdd])}}));var u=at(c),s=new ot.media.model.Selection(u.models,{props:u.props.toJSON(),multiple:i});this.frame=new this.GalleryDetailsMediaFrame({mimeType:n,state:l,multiple:i,selection:s,editing:!!c}),ot.media.frame=this.frame,this.initializeListeners()}}},{key:"buildAndSetFeatureImageFrame",value:function(){var e=ot.media.view.MediaFrame.Select.extend({featuredImageToolbar:function(e){this.createSelectToolbar(e,{text:ot.media.view.l10n.setFeaturedImage,state:this.options.state})},createStates:function(){this.on("toolbar:create:featured-image",this.featuredImageToolbar,this),this.states.add([new ot.media.controller.FeaturedImage])}}),t=at(this.props.value),r=new ot.media.model.Selection(t.models,{props:t.props.toJSON()});this.frame=new e({mimeType:this.props.allowedTypes,state:"featured-image",multiple:this.props.multiple,selection:r,editing:!!this.props.value}),ot.media.frame=this.frame}},{key:"componentWillUnmount",value:function(){this.frame.remove()}},{key:"onUpdate",value:function(e){var t=this.props,r=t.onSelect,n=t.multiple,o=void 0!==n&&n,i=this.frame.state(),a=e||i.get("selection");a&&a.models.length&&r(o?a.models.map((function(e){return it(e.toJSON())})):it(a.models[0].toJSON()))}},{key:"onSelect",value:function(){var e=this.props,t=e.onSelect,r=e.multiple,n=void 0!==r&&r,o=this.frame.state().get("selection").toJSON();t(n?o:o[0])}},{key:"onOpen",value:function(){if(this.updateCollection(),this.props.value){if(!this.props.gallery){var e=this.frame.state().get("selection");(0,_e.castArray)(this.props.value).forEach((function(t){e.add(ot.media.attachment(t))}))}at((0,_e.castArray)(this.props.value)).more()}}},{key:"onClose",value:function(){var e=this.props.onClose;e&&e()}},{key:"updateCollection",value:function(){var e=this.frame.content.get();if(e&&e.collection){var t=e.collection;t.toArray().forEach((function(e){return e.trigger("destroy",e)})),t.mirroring._hasMore=!0,t.more()}}},{key:"openModal",value:function(){this.props.gallery&&this.props.value&&this.props.value.length>0&&this.buildAndSetGalleryFrame(),this.frame.open()}},{key:"render",value:function(){return this.props.render({open:this.openModal})}}])&&et(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(s.Component);const lt=ct,ut=window.wp.blockLibrary;var st=["colorScheme","contentMaxWidth","children"];function ft(){return ft=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ft.apply(this,arguments)}const pt=function(e){e.colorScheme,e.contentMaxWidth;var t=e.children,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,st);return React.createElement("div",ft({className:"fc-cond-section"},r),React.createElement("div",{className:"fc-cond-blocks"},t))};var dt=wp.i18n,yt=dt.__,_x=dt._x,ht={title:yt("Conditional Section"),description:yt("Add a section that separates content, and put any other block into it."),category:"layout",icon:"welcome-widgets-menus",keywords:[_x("conditional"),_x("section")],supports:{align:["wide","full"],anchor:!0},attributes:{condition_type:{type:"string",default:"show_if_tag_exist"},tag_ids:{type:"array",default:[]}},edit:function(e){var t=e.attributes,r=e.setAttributes,n=t.condition_type,o=t.tag_ids,i=window.fcAdmin.available_tags,a=window.fcAdmin.addons&&window.fcAdmin.addons.fluentcampaign,c=function(e){if(a){var n=e.target,o=n.checked,i=n.value,c=jQuery.extend(!0,[],t.tag_ids);n.checked=o,o?-1==c.indexOf(i)&&(c.push(i),r({tag_ids:c})):(c.splice(c.indexOf(i),1),r({tag_ids:c}))}else alert("This is a pro version feature")};return React.createElement(s.Fragment,null,React.createElement(u.InspectorControls,null,React.createElement(l.PanelBody,{title:yt("Conditional Settings")},React.createElement(l.SelectControl,{label:yt("Condition Type"),value:n,onChange:function(e){return r({condition_type:e||"show_if_tag_exist"})},options:[{value:"show_if_tag_exist",label:"Show IF in selected tag"},{value:"show_if_tag_not_exist",label:"Show IF not in selected tag"}]}),React.createElement("div",{className:"fcrm-gb-multi-checkbox"},React.createElement("h4",null,"Select Targeted Tags"),React.createElement("ul",null,i.map((function(e){return React.createElement("label",{key:e.id,className:"checkbox"},e.title,React.createElement("input",{checked:-1!=o.indexOf(e.id),onChange:c,type:"checkbox",value:e.id}),React.createElement("span",{className:"checkmark"}))})))),a?React.createElement("div",{className:"fc_cd_info"},React.createElement("hr",null),React.createElement("b",null,"Tips:"),React.createElement("ul",null,React.createElement("li",null,"This will show/hide only if any tag is matched."),React.createElement("li",{style:{backgroundColor:"#ffffd7"}},"The yellow background in the content is only for editor and to identify the conditional contents"))):React.createElement("div",{style:{color:"red"}},React.createElement("b",null,"Pro Feature:"),React.createElement("p",null,"Conditional Feature will only work if you have FluentCRM pro activated. Please Install FluentCRM Pro First")))),React.createElement(pt,{colorScheme:n,contentMaxWidth:o},React.createElement(u.InnerBlocks,null)))},save:function(e){var t=e.attributes,r=t.colorScheme,n=t.contentMaxWidth,o=t.attachmentId;return React.createElement(pt,{colorScheme:r,contentMaxWidth:n,className:y()(o&&"has-background-image-".concat(o))},React.createElement(u.InnerBlocks.Content,null))}};const vt=window.wp.url,mt=window.wp.dom;window.wp.apiFetch;var gt=r(3745),bt=r.n(gt);const wt=window.wp.htmlEntities;function St(e){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(e)}function Ot(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==St(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===St(o)?o:String(o)),n)}var o}function _t(e,t){return _t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_t(e,t)}function Et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kt(e){return kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},kt(e)}function jt(){jt=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),c=new k(o||[]);return n(a,"_invoke",{value:S(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function p(){}function d(){}function y(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(j([])));m&&m!==t&&r.call(m,i)&&(h=m);var g=y.prototype=p.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==St(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function S(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=y,n(g,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(g),l(g,c,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function xt(e,t,r,n,o,i,a){try{var c=e[i](a),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}var Rt=function(e){return e.stopPropagation()},Pt=function(){var e,t=(e=jt().mark((function e(t){var r;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.FLUENTCRM.$get("smart-links",{search:t});case 2:return r=e.sent,e.abrupt("return",(0,_e.map)(r.action_links.data,(function(e){return{url:e.short_url,title:(0,wt.decodeEntities)(e.title),target_url:e.target_url}})));case 4:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){xt(i,n,o,a,c,"next",e)}function c(e){xt(i,n,o,a,c,"throw",e)}a(void 0)}))});return function(_x){return t.apply(this,arguments)}}(),Lt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_t(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kt(n);if(o){var r=kt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===St(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Et(e)}(this,e)});function a(e){var t,r=e.autocompleteRef;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.apply(this,arguments)).onChange=t.onChange.bind(Et(t)),t.onKeyDown=t.onKeyDown.bind(Et(t)),t.autocompleteRef=r||(0,s.createRef)(),t.inputRef=(0,s.createRef)(),t.updateSuggestions=(0,_e.throttle)(t.updateSuggestions.bind(Et(t)),200),t.suggestionNodes=[],t.state={suggestions:[],showSuggestions:!1,selectedSuggestion:null},t}return t=a,(r=[{key:"componentDidUpdate",value:function(){var e=this,t=this.state,r=t.showSuggestions,n=t.selectedSuggestion;r&&null!==n&&!this.scrollingIntoView&&(this.scrollingIntoView=!0,bt()(this.suggestionNodes[n],this.autocompleteRef.current,{onlyScrollIfNeeded:!0}),this.props.setTimeout((function(){e.scrollingIntoView=!1}),100))}},{key:"componentWillUnmount",value:function(){delete this.suggestionsRequest}},{key:"bindSuggestionNode",value:function(e){var t=this;return function(r){t.suggestionNodes[e]=r}}},{key:"updateSuggestions",value:function(e){var t=this;if(e.length<2||/^https?:/.test(e))this.setState({showSuggestions:!1,selectedSuggestion:null,loading:!1});else{this.setState({showSuggestions:!0,selectedSuggestion:null,loading:!0});var r=Pt(e);r.then((function(e){t.suggestionsRequest===r&&(t.setState({suggestions:e,loading:!1}),e.length?t.props.debouncedSpeak((0,h.sprintf)((0,h._n)("%d result found, use up and down arrow keys to navigate.","%d results found, use up and down arrow keys to navigate.",e.length),e.length),"assertive"):t.props.debouncedSpeak((0,h.__)("No results."),"assertive"))})).catch((function(){t.suggestionsRequest===r&&t.setState({loading:!1})})),this.suggestionsRequest=r}}},{key:"onChange",value:function(e){var t=e.target.value;this.props.onChange(t),this.updateSuggestions(t)}},{key:"onKeyDown",value:function(e){var t=this.state,r=t.showSuggestions,n=t.selectedSuggestion,o=t.suggestions,i=t.loading;if(r&&o.length&&!i){var a=this.state.suggestions[this.state.selectedSuggestion];switch(e.keyCode){case I.UP:e.stopPropagation(),e.preventDefault();var c=n?n-1:o.length-1;this.setState({selectedSuggestion:c});break;case I.DOWN:e.stopPropagation(),e.preventDefault();var l=null===n||n===o.length-1?0:n+1;this.setState({selectedSuggestion:l});break;case I.TAB:null!==this.state.selectedSuggestion&&(this.selectLink(a),this.props.speak((0,h.__)("Link selected.")));break;case I.ENTER:null!==this.state.selectedSuggestion&&(e.stopPropagation(),this.selectLink(a))}}else switch(e.keyCode){case I.UP:0!==e.target.selectionStart&&(e.stopPropagation(),e.preventDefault(),e.target.setSelectionRange(0,0));break;case I.DOWN:this.props.value.length!==e.target.selectionStart&&(e.stopPropagation(),e.preventDefault(),e.target.setSelectionRange(this.props.value.length,this.props.value.length))}}},{key:"selectLink",value:function(e){this.props.onChange(e.url,e),this.setState({selectedSuggestion:null,showSuggestions:!1})}},{key:"handleOnClick",value:function(e){this.selectLink(e),this.inputRef.current.focus()}},{key:"render",value:function(){var e=this,t=this.props,r=t.value,n=void 0===r?"":r,o=t.autoFocus,i=void 0===o||o,a=t.instanceId,c=t.className,u=this.state,s=u.showSuggestions,f=u.suggestions,p=u.selectedSuggestion,d=u.loading,v="block-editor-url-input-suggestions-".concat(a),m="block-editor-url-input-suggestion-".concat(a);return React.createElement("div",{className:y()("editor-url-input block-editor-url-input",c)},React.createElement("input",{autoFocus:i,type:"text","aria-label":(0,h.__)("URL"),required:!0,value:n,onChange:this.onChange,onInput:Rt,placeholder:(0,h.__)("Paste or type to search for your Smart Link"),onKeyDown:this.onKeyDown,role:"combobox","aria-expanded":s,"aria-autocomplete":"list","aria-owns":v,"aria-activedescendant":null!==p?"".concat(m,"-").concat(p):void 0,ref:this.inputRef}),d&&React.createElement(l.Spinner,null),s&&!!f.length&&React.createElement(l.Popover,{position:"bottom",noArrow:!0,focusOnMount:!1},React.createElement("div",{className:"editor-url-input__suggestions block-editor-url-input__suggestions",id:v,ref:this.autocompleteRef,role:"listbox"},f.map((function(t,r){return React.createElement("button",{key:t.id,role:"option",tabIndex:"-1",title:t.target_url,id:"".concat(m,"-").concat(r),ref:e.bindSuggestionNode(r),className:y()("editor-url-input__suggestion block-editor-url-input__suggestion",{"is-selected":r===p}),onClick:function(){return e.handleOnClick(t)},"aria-selected":r===p},t.title)})))))}}])&&Ot(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(s.Component);const Tt=(0,v.compose)(v.withSafeTimeout,l.withSpokenMessages,v.withInstanceId,(0,b.withSelect)((function(e){var t=e("core/block-editor").getSettings,r=t().fetchLinkSuggestions;return r||(r=t().__experimentalFetchLinkSuggestions),{fetchLinkSuggestions:r}})))(Lt);function At(e){if(!e)return!1;var t=e.trim();if(!t)return!1;if(/^\S+:/.test(t)){var r=(0,vt.getProtocol)(t);if(!(0,vt.isValidProtocol)(r))return!1;if((0,_e.startsWith)(r,"http")&&!/^https?:\/\/[^\/\s]/i.test(t))return!1;var n=(0,vt.getAuthority)(t);if(!(0,vt.isValidAuthority)(n))return!1;var o=(0,vt.getPath)(t);if(o&&!(0,vt.isValidPath)(o))return!1;var i=(0,vt.getQueryString)(t);if(i&&!(0,vt.isValidQueryString)(i))return!1;var a=(0,vt.getFragment)(t);if(a&&!(0,vt.isValidFragment)(a))return!1}return!((0,_e.startsWith)(t,"#")&&!(0,vt.isValidFragment)(t))}function Ct(e){var t=e.url,r=e.opensInNewWindow,n=e.text,o=e.noFollow,i=e.isSponsored,a={type:"core/link",attributes:{url:t}};if(a.attributes.rel="",o&&(a.attributes.rel+="nofollow noindex "),i&&(a.attributes.rel+="sponsored "),r){
// translators: accessibility label for external links, where the argument is the link text
var c=(0,h.sprintf)((0,h.__)("%s (opens in a new tab)"),n);a.attributes.target="_blank",a.attributes.rel+="noreferrer noopener",a.attributes["aria-label"]=c}return""===a.attributes.rel&&delete a.attributes.rel,a}function Nt(e){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(e)}var Ft=["isActive","addingLink","value"];function It(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Nt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==Nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Nt(o)?o:String(o)),n)}var o}function Ut(e,t){return Ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ut(e,t)}function Bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mt(e){return Mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Mt(e)}function Dt(){return Dt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dt.apply(this,arguments)}var Ht=function(e){return e.stopPropagation()};function Gt(e,t){return e.addingLink||t.editLink}var Wt=function(e){var t=e.value,r=e.onChangeInputValue,n=e.onKeyDown,o=e.submitLink,i=e.autocompleteRef;return React.createElement("form",{className:"editor-format-toolbar__link-container-content block-editor-format-toolbar__link-container-content",onKeyPress:Ht,onKeyDown:n,onSubmit:o},React.createElement(Tt,{value:t,onChange:r,autocompleteRef:i}),React.createElement(l.IconButton,{icon:"editor-break",label:(0,h.__)("Insert Smart Link"),type:"submit"}))},Vt=function(e){var t=e.url,r=(0,vt.prependHTTP)(t),n=y()("editor-format-toolbar__link-container-value block-editor-format-toolbar__link-container-value",{"has-invalid-link":!At(r)});return t?React.createElement(l.ExternalLink,{className:n,href:t},(0,vt.filterURLForDisplay)((0,vt.safeDecodeURI)(t))):React.createElement("span",{className:n})},zt=function(e){var t=e.isActive,r=e.addingLink,n=e.value,o=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Ft),i=(0,s.useMemo)((function(){var e=window.getSelection(),t=e.rangeCount>0?e.getRangeAt(0):null;if(t){if(r)return(0,mt.getRectangleFromRange)(t);var n=t.startContainer;for(n=n.nextElementSibling||n;n.nodeType!==window.Node.ELEMENT_NODE;)n=n.parentNode;var o=n.closest("a");return o?o.getBoundingClientRect():void 0}}),[t,r,n.start,n.end]);return i?React.createElement(u.URLPopover,Dt({anchorRect:i},o)):null},Kt=function(e){var t=e.url,r=e.editLink;return React.createElement("div",{className:"editor-format-toolbar__link-container-content block-editor-format-toolbar__link-container-content",onKeyPress:Ht},React.createElement(Vt,{url:t}),React.createElement(l.IconButton,{icon:"edit",label:(0,h.__)("Edit"),onClick:r}))},Jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ut(e,t)}(c,e);var t,r,n,o,i,a=(o=c,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mt(o);if(i){var r=Mt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Nt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Bt(e)}(this,e)});function c(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),(e=a.apply(this,arguments)).editLink=e.editLink.bind(Bt(e)),e.submitLink=e.submitLink.bind(Bt(e)),e.onKeyDown=e.onKeyDown.bind(Bt(e)),e.onChangeInputValue=e.onChangeInputValue.bind(Bt(e)),e.setNoFollow=e.setNoFollow.bind(Bt(e)),e.setIsSponsored=e.setIsSponsored.bind(Bt(e)),e.setLinkTarget=e.setLinkTarget.bind(Bt(e)),e.onClickOutside=e.onClickOutside.bind(Bt(e)),e.resetState=e.resetState.bind(Bt(e)),e.autocompleteRef=(0,s.createRef)(),e.state={noFollow:!1,opensInNewWindow:!1,isSponsored:!1,inputValue:"",newLinkUrl:"",newLinkSlug:"",creatingLink:!1,createdLink:!1,createdLinkError:!1},e}return t=c,n=[{key:"getDerivedStateFromProps",value:function(e,t){var r=e.activeAttributes,n=r.url,o=r.target,i=(r.isSponsored,"_blank"===o);if(!Gt(e,t)){if(n!==t.inputValue)return{inputValue:n};if(i!==t.opensInNewWindow)return{opensInNewWindow:i}}return null}}],(r=[{key:"onKeyDown",value:function(e){[I.LEFT,I.DOWN,I.RIGHT,I.UP,I.BACKSPACE,I.ENTER].indexOf(e.keyCode)>-1&&e.stopPropagation()}},{key:"onChangeInputValue",value:function(e){this.setState({inputValue:e})}},{key:"setLinkTarget",value:function(e){var t=this.props,r=t.activeAttributes.url,n=void 0===r?"":r,o=t.value,i=t.onChange;if(this.setState({opensInNewWindow:e}),!Gt(this.props,this.state)){var a=(0,Ze.getTextContent)((0,Ze.slice)(o));i((0,Ze.applyFormat)(o,Ct({url:n,opensInNewWindow:e,text:a})))}}},{key:"setNoFollow",value:function(e){var t=this.props,r=t.activeAttributes.url,n=void 0===r?"":r,o=t.value,i=t.onChange;if(this.setState({noFollow:e}),!Gt(this.props,this.state)){var a=(0,Ze.getTextContent)((0,Ze.slice)(o));i((0,Ze.applyFormat)(o,Ct({url:n,opensInNewWindow,text:a,noFollow:e,isSponsored})))}}},{key:"setIsSponsored",value:function(e){var t=this.props,r=t.activeAttributes.url,n=void 0===r?"":r,o=t.value,i=t.onChange;if(this.setState({isSponsored:e}),!Gt(this.props,this.state)){var a=(0,Ze.getTextContent)((0,Ze.slice)(o));i((0,Ze.applyFormat)(o,Ct({url:n,opensInNewWindow,text:a,noFollow,isSponsored:e})))}}},{key:"editLink",value:function(e){this.setState({editLink:!0}),e.preventDefault()}},{key:"submitLink",value:function(e){var t=this.props,r=t.isActive,n=t.value,o=t.onChange,i=t.speak,a=this.state,c=a.inputValue,l=a.opensInNewWindow,u=a.noFollow,s=a.isSponsored,f=(0,vt.prependHTTP)(c),p=Ct({url:f,opensInNewWindow:l,text:(0,Ze.getTextContent)((0,Ze.slice)(n)),noFollow:u,isSponsored:s});if(e.preventDefault(),(0,Ze.isCollapsed)(n)&&!r){var d=(0,Ze.applyFormat)((0,Ze.create)({text:f}),p,0,f.length);o((0,Ze.insert)(n,d))}else o((0,Ze.applyFormat)(n,p));this.resetState(),At(f)?i(r?(0,h.__)("Link edited."):(0,h.__)("Link inserted."),"assertive"):i((0,h.__)("Warning: the link has been inserted but may have errors. Please test it."),"assertive")}},{key:"onClickOutside",value:function(e){var t=this.autocompleteRef.current;t&&t.contains(e.target)||this.resetState()}},{key:"resetState",value:function(){this.props.stopAddingLink(),this.setState({editLink:!1})}},{key:"render",value:function(){var e=this,t=this.props,r=t.isActive,n=t.activeAttributes.url,o=t.addingLink,i=t.value;if(!r&&!o)return null;var a=this.state,c=a.inputValue,u=a.noFollow,f=a.opensInNewWindow,p=a.isSponsored,d=(a.newLinkUrl,a.newLinkSlug,a.creatingLink,a.createdLink,a.createdLinkError,Gt(this.props,this.state));return React.createElement(zt,{className:"pretty-link-inserter",value:i,isActive:r,addingLink:o,onClickOutside:this.onClickOutside,onClose:this.resetState,focusOnMount:!!d&&"firstElement",renderSettings:function(){return React.createElement(s.Fragment,null,React.createElement("div",null,React.createElement(l.ToggleControl,{label:(0,h.__)("Open in New Tab"),checked:f,onChange:e.setLinkTarget}),React.createElement(l.ToggleControl,{label:(0,h.__)("Nofollow"),checked:u,onChange:e.setNoFollow}),React.createElement(l.ToggleControl,{label:(0,h.__)("Sponsored Link"),checked:p,onChange:e.setIsSponsored})))}},d?React.createElement(Wt,{value:c,onChangeInputValue:this.onChangeInputValue,onKeyDown:this.onKeyDown,submitLink:this.submitLink,autocompleteRef:this.autocompleteRef}):React.createElement(Kt,{url:n,editLink:this.editLink}))}}])&&It(t.prototype,r),n&&It(t,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(s.Component);const Yt=(0,l.withSpokenMessages)(Jt);function qt(e){return qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(e)}function $t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==qt(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==qt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===qt(o)?o:String(o)),n)}var o}function Qt(e,t){return Qt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qt(e,t)}function Zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xt(e){return Xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Xt(e)}var er="fluentcrm/smart-links",tr=(0,h.__)("SmartLinks"),rr={name:er,title:tr,tagName:"a",className:"smart-link",attributes:{url:"href",target:"target"},edit:(0,l.withSpokenMessages)(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qt(e,t)}(a,e);var t,r,n,o,i=(n=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xt(n);if(o){var r=Xt(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===qt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Zt(e)}(this,e)});function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(e=i.apply(this,arguments)).addLink=e.addLink.bind(Zt(e)),e.stopAddingLink=e.stopAddingLink.bind(Zt(e)),e.onRemoveFormat=e.onRemoveFormat.bind(Zt(e)),e.state={addingLink:!1},e}return t=a,(r=[{key:"addLink",value:function(){var e=this.props,t=e.value,r=e.onChange,n=(0,Ze.getTextContent)((0,Ze.slice)(t));n&&(0,vt.isURL)(n)?r((0,Ze.applyFormat)(t,{type:er,attributes:{url:n}})):this.setState({addingLink:!0})}},{key:"stopAddingLink",value:function(){this.setState({addingLink:!1})}},{key:"onRemoveFormat",value:function(){var e=this.props,t=e.value,r=e.onChange,n=e.speak;r((0,Ze.removeFormat)(t,er)),n((0,h.__)("Link removed."),"assertive")}},{key:"render",value:function(){var e=this.props,t=e.isActive,r=e.activeAttributes,n=e.value,o=e.onChange;return React.createElement(React.Fragment,null,React.createElement(u.RichTextShortcut,{type:"primary",character:"p",onUse:this.addLink}),React.createElement(u.RichTextShortcut,{type:"primaryShift",character:"p",onUse:this.onRemoveFormat}),t&&React.createElement(u.RichTextToolbarButton,{icon:"star-filled",title:(0,h.__)("Unlink"),onClick:this.onRemoveFormat,isActive:t,shortcutType:"primaryShift",shortcutCharacter:"p"}),!t&&React.createElement(u.RichTextToolbarButton,{icon:"star-filled",title:tr,onClick:this.addLink,isActive:t,shortcutType:"primary",shortcutCharacter:"p"}),React.createElement(Yt,{addingLink:this.state.addingLink,stopAddingLink:this.stopAddingLink,isActive:t,activeAttributes:r,value:n,onChange:o}))}}])&&$t(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),a}(s.Component))},nr=r(3980),or="UPDATE_BLOCKS",ir="PERSIST_BLOCKS",ar="FETCH_BLOCKS_FROM_STORAGE",cr="PERSIST_BLOCKS_TO_STORAGE";const lr=(0,nr.ZP)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case or:case ir:return{blocks:t.blocks}}return e}),{filter:(0,nr.an)(ir)});var ur=function(e){return e.present.blocks||[]},sr=function(e){var t;return null===(t=e.past)||void 0===t?void 0:t.length},fr=function(e){var t;return null===(t=e.future)||void 0===t?void 0:t.length};function pr(e){return pr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pr(e)}function dr(){dr=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),c=new k(o||[]);return n(a,"_invoke",{value:S(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function p(){}function d(){}function y(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(j([])));m&&m!==t&&r.call(m,i)&&(h=m);var g=y.prototype=p.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==pr(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function S(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=y,n(g,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(g),l(g,c,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}function yr(){return nr.zF.undo()}function hr(){return nr.zF.redo()}function vr(){return nr.zF.clearHistory()}function mr(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return dr().mark((function r(){return dr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!t){r.next=3;break}return r.next=3,br(e);case 3:return r.abrupt("return",{type:t?ir:or,blocks:e});case 4:case"end":return r.stop()}}),r)}))()}function gr(){return{type:ar}}function br(e){return{type:cr,blocks:e}}function wr(e){return wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wr(e)}function Sr(){Sr=function(){return e};var e={},t=Object.prototype,r=t.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),c=new k(o||[]);return n(a,"_invoke",{value:S(e,r,c)}),a}function s(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var f={};function p(){}function d(){}function y(){}var h={};l(h,i,(function(){return this}));var v=Object.getPrototypeOf,m=v&&v(v(j([])));m&&m!==t&&r.call(m,i)&&(h=m);var g=y.prototype=p.prototype=Object.create(h);function b(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(n,i,a,c){var l=s(e[n],e,i);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==wr(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return o("throw",e,a,c)}))}c(l.arg)}var i;n(this,"_invoke",{value:function(e,r){function n(){return new t((function(t,n){o(e,r,t,n)}))}return i=i?i.then(n,n):n()}})}function S(e,t,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return{value:void 0,done:!0}}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var c=O(a,r);if(c){if(c===f)continue;return c}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=s(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function O(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,O(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=s(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function k(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function j(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(r.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:x}}function x(){return{value:void 0,done:!0}}return d.prototype=y,n(g,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:d,configurable:!0}),d.displayName=l(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===d||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},b(w.prototype),l(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new w(u(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},b(g),l(g,c,"Generator"),l(g,i,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},e.values=j,k.prototype={constructor:k,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!e)for(var t in this)"t"===t.charAt(0)&&r.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(r,n){return a.type="throw",a.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(c&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;E(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},e}var Or,_r=Sr().mark(Er);function Er(){var e,t;return Sr().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,gr();case 2:return e=r.sent,t=(0,ee.parse)(e),r.next=7,mr(t,!1);case 7:return r.abrupt("return",t);case 8:case"end":return r.stop()}}),_r)}function kr(e){return kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kr(e)}function jr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!==kr(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==kr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===kr(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const xr=(jr(Or={},cr,(function(e){return new Promise((function(t,r){window.fceSettings.content=(0,ee.serialize)(e.blocks),t(e.blocks)}))})),jr(Or,ar,(function(){return new Promise((function(e,t){e(window.fceSettings.content||[])}))})),Or);var Rr=(0,b.createReduxStore)("historyUndoRedoStore",{reducer:lr,selectors:i,actions:a,controls:xr,resolvers:c});(0,b.register)(Rr);var Pr=["name"];function Lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Tr=function(){return lt};Je()((function(){(0,Qe.addFilter)("editor.Autocomplete.completers","fluentcrm/add_autocmplete",(function(e,t){return e=e.filter((function(e){return"users"!==e.name})),[].concat(function(e){if(Array.isArray(e))return Lr(e)}(r=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||function(e,t){if(e){if("string"==typeof e)return Lr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lr(e,t):void 0}}(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[$e]);var r})),(0,Qe.addFilter)("editor.MediaUpload","crm/media_uploader",Tr),(0,ut.registerCoreBlocks)(),(0,ee.registerBlockType)("fluentcrm/conditional-group",ht),(0,ee.unregisterBlockVariation)("core/group","group-row"),(0,ee.unregisterBlockVariation)("core/group","group-stack"),window.fcAdmin.has_smart_link&&[rr].forEach((function(e){var t=e.name,r=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Pr);return(0,Ze.registerFormatType)(t,r)}))})),window.fluentCrmBootEmailEditor=function(e,t){var r=window.fceSettings||{};r.content=e,(0,b.dispatch)("historyUndoRedoStore").updateBlocks((0,ee.parse)(e)),(0,s.render)(React.createElement(se,{settings:r,onChangeHandle:t}),document.getElementById("fluentcrm_block_editor_x"))}}},r={};function n(e){var o=r[e];if(void 0!==o)return o.exports;var i=r[e]={id:e,loaded:!1,exports:{}};return t[e](i,i.exports,n),i.loaded=!0,i.exports}n.m=t,e=[],n.O=(t,r,o,i)=>{if(!r){var a=1/0;for(s=0;s<e.length;s++){for(var[r,o,i]=e[s],c=!0,l=0;l<r.length;l++)(!1&i||a>=i)&&Object.keys(n.O).every((e=>n.O[e](r[l])))?r.splice(l--,1):(c=!1,i<a&&(a=i));if(c){e.splice(s--,1);var u=o();void 0!==u&&(t=u)}}return t}i=i||0;for(var s=e.length;s>0&&e[s-1][2]>i;s--)e[s]=e[s-1];e[s]=[r,o,i]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={826:0,431:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var o,i,[a,c,l]=r,u=0;if(a.some((t=>0!==e[t]))){for(o in c)n.o(c,o)&&(n.m[o]=c[o]);if(l)var s=l(n)}for(t&&t(r);u<a.length;u++)i=a[u],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return n.O(s)},r=globalThis.webpackChunkgetdave_sbe=globalThis.webpackChunkgetdave_sbe||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var o=n.O(void 0,[431],(()=>n(21)));o=n.O(o)})();